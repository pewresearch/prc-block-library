import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(i={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope,withSyncEvent:()=>e.withSyncEvent},s={},t.d(s,i),s),{VideoPressIframeApi:n}=window;var i,s;const{actions:r,state:l}=(0,o.store)("prc-block/dialog",{state:{get id(){const e=(0,o.getContext)();return e?.id},get type(){const{id:e}=(0,o.getContext)();return l[e].type},get activationTimerDuration(){const{id:e}=(0,o.getContext)();return l[e].activationTimerDuration},get animationDuration(){const{id:e}=(0,o.getContext)();return l[e].animationDuration},get dialogElement(){const{id:e}=(0,o.getContext)();return document.getElementById(l[e].dialogElemId)},get isOpen(){const{id:e}=(0,o.getContext)();return l[e].isOpen},get isClosing(){const{id:e}=(0,o.getContext)();return l[e].isClosing},get isMobile(){return"mobile"===l.currentDevice},get enableDeepLink(){const{id:e}=(0,o.getContext)();return l[e].enableDeepLink},get isVideo(){const{id:e}=(0,o.getContext)();return!!l[e].videoPressAPI},get videoPressAPI(){const{id:e}=(0,o.getContext)();return l[e].videoPressAPI}},actions:{runAnimation:()=>{const{isOpen:e}=l;if(!e)return;const{ref:t}=(0,o.getElement)(),n=(0,o.store)("prc-block/animation"),i=t.querySelectorAll(".wp-block-prc-block-animation");i.length&&i.forEach((e=>{const t=e.getAttribute("id"),{parentElement:o}=e,i=null!==o?.getAttribute("hidden");t&&!i&&(n.state[t].enabled=!0)}))},closeAll:(e=null)=>{Object.keys(l).forEach((t=>{"object"==typeof l[t]&&l[t].hasOwnProperty("isOpen")&&l[t].hasOwnProperty("type")&&(null!==e&&e!==l[t].type||(l[t].isOpen=!1,r.pause(t)))}))},onClickOpen:(0,o.withSyncEvent)((e=>{e.preventDefault();const{id:t}=l;r.open(t)})),onClickClose:(0,o.withSyncEvent)((e=>{e.preventDefault();const{id:t}=l;r.close(t)})),open:(e=!1)=>{let t=e;t||(t=l.id),t?(l[t].isOpen=!0,l[t].closingModal=!1,l.videoPressAPI&&setTimeout((0,o.withScope)((()=>{r.play(t)})),l[t].animationDuration)):console.error("No id found to open dialog.")},close:(e=!1)=>{let t=e;t||(t=l.id),t?(console.log("close:::id",t),l[t].isOpen=!1,l[t].videoPressAPI&&r.pause(t)):console.error("No id found to close dialog.")},play:e=>{e&&l[e].videoPressAPI&&l[e].videoPressAPI.controls.play()},pause:e=>{e&&l[e].videoPressAPI&&l[e].videoPressAPI.controls.pause()}},callbacks:{getStyle:()=>{const{animationDuration:e}=l;return`--animation-duration: ${e}ms;`},onInitIdentifyDialogElem:()=>{const{id:e}=l,{ref:t}=(0,o.getElement)(),n=t.querySelector(".wp-block-prc-block-dialog-element"),i=n?.getAttribute("id");l[e].dialogElemId=i},onESCKey:e=>{const{id:t,isOpen:o}=l;t&&"Escape"===e.key&&!0===o&&(e.preventDefault(),r.close(t))},onOpen:()=>{const{dialogElement:e,isOpen:t,id:o,type:n,enableDeepLink:i}=l;o&&e&&t&&(i&&function(e){const t=new URL(window.location.href);t.searchParams.set("dialogId",e),window.history.replaceState({},"",t)}(o),console.log("onOpen:::dialogElement",e),"modal"===n?e?.showModal():e?.show())},onClose:()=>{const{dialogElement:e,isOpen:t,id:n,animationDuration:i}=l;n&&e&&(t||(l[n].isClosing=!0,setTimeout((0,o.withScope)((()=>{e?.close(),function(){const e=new URL(window.location.href);e.searchParams.delete("dialogId"),window.history.replaceState({},"",e)}();const t=new CustomEvent("prc-block-dialog-closed",{detail:{id:n}});document.dispatchEvent(t),l[n].isClosing=!1,l[n].isOpen=!1})),i)))},onResize:()=>{const e=document.documentElement.clientWidth;l.currentDevice=e<=600?"mobile":e>600&&e<=782?"tablet":"desktop"},onBackdropClick:(0,o.withSyncEvent)((e=>{const{ref:t}=(0,o.getElement)(),n=t.getBoundingClientRect();if(e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom)return;if(!0!==l.isOpen)return;const{id:i}=l;r.close(i)})),onAutoActivation:()=>{const{id:e,activationTimerDuration:t}=l;(e||t||-1===t)&&1<=t&&setTimeout((0,o.withScope)((()=>{r.closeAll("modal"),r.open(e)})),t)},onVideoPressInit:()=>{const{ref:e}=(0,o.getElement)(),t=e.querySelector(".jetpack-videopress-player");if(!t)return;const i=t.querySelector("iframe");if(!i)return;if(!n)return;const{id:s}=l,r=n(i,(()=>{r.customize.set({shareButton:!1})}));l[s].videoPressAPI=r}}});
//# sourceMappingURL=view.js.map