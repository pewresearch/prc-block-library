(()=>{"use strict";var o,e={2421:(o,e,t)=>{const r=window.wp.blocks,l=window.wp.domReady;var n=t.n(l);const a=window.classnames;var s=t.n(a);const i=window.prcBlockUtils,c=window.wp.element,d=window.wp.blockEditor,u=window.wp.data,p=(window.wp.serverSideRender,window.wp.i18n),h=window.wp.components,g=window.ReactJSXRuntime;function C({attributes:o,colors:e,clientId:t}){const{className:r}=o,l=(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),n=(0,c.useMemo)(()=>{const{dropdownBackgroundColor:o,setDropdownBackgroundColor:t,dropdownTextColor:l,setDropdownTextColor:n,headingBackgroundColor:a,setHeadingBackgroundColor:s,headingTextColor:i,setHeadingTextColor:c,activeBackgroundColor:d,setActiveBackgroundColor:u,activeTextColor:h,setActiveTextColor:g,hoverBackgroundColor:C,setHoverBackgroundColor:b,hoverTextColor:k,setHoverTextColor:w}=e,v=[{colorValue:l?.color,onColorChange:n,label:(0,p.__)("(Mobile) Dropdown Text")},{colorValue:o?.color,onColorChange:t,label:(0,p.__)("(Mobile) Dropdown Background")},{colorValue:i?.color,onColorChange:c,label:(0,p.__)("(Desktop) Heading Text")},{colorValue:a?.color,onColorChange:s,label:(0,p.__)("(Desktop) Heading Background")},{colorValue:h?.color,onColorChange:g,label:(0,p.__)("Active Text")},{colorValue:d?.color,onColorChange:u,label:(0,p.__)("Active Background")},{colorValue:k?.color,onColorChange:w,label:(0,p.__)("Hover Text")},{colorValue:C?.color,onColorChange:b,label:(0,p.__)("Hover Background")}];return"is-style-dropdown"===r&&(v[0].label=(0,p.__)("Dropdown Text"),v[1].label=(0,p.__)("Dropdown Background"),v.splice(2,2)),v},[e,r]);return(0,g.jsx)(d.InspectorControls,{group:"color",children:(0,g.jsx)(d.__experimentalColorGradientSettingsDropdown,{settings:n,panelId:t,hasColorsOrGradients:!1,disableCustomColors:!0,__experimentalIsRenderedInSidebar:!0,...l})})}function b({attributes:o,setAttributes:e,colors:t,clientId:r}){const{showCurrentChapter:l,hideHeading:n,className:a,autoDropdownWidth:s,autoDropdownEnabled:i}=o;return(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)(C,{attributes:o,colors:t,clientId:r}),(0,g.jsx)(d.InspectorControls,{children:(0,g.jsxs)(h.PanelBody,{title:(0,p.__)("Settings","prc-block-library"),children:[(0,g.jsx)(h.ToggleControl,{label:(0,p.__)("Highlight Current Chapter"),checked:l,onChange:()=>{e({showCurrentChapter:!l})},help:(0,p.__)("Highlight the current chapter in the table of contents when scrolling.","prc-block-library")}),"is-style-default"===a&&(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)(h.ToggleControl,{label:(0,p.__)("Hide Heading"),checked:n,onChange:()=>{e({hideHeading:!n})},help:(0,p.__)('Hide the heading from the front end when in "Baseball Card" style.',"prc-block-library")}),(0,g.jsxs)(h.BaseControl,{label:(0,p.__)("Auto Dropdown"),help:(0,p.__)("Automatically switch to the dropdown style when the container is less than the specified width.","prc-block-library"),children:[(0,g.jsx)(h.ToggleControl,{label:(0,p.__)("Enable"),checked:i,onChange:()=>{e({autoDropdownEnabled:!i})}}),i&&(0,g.jsx)(h.__experimentalNumberControl,{label:(0,p.__)("Container Width Threshold"),onChange:o=>e({autoDropdownWidth:o}),shiftStep:10,value:s})]})]})]})})]})}const k=window.wp.coreData;function w({internalChapters:o}){const{selectBlock:e}=(0,u.useDispatch)("core/block-editor");return(0,g.jsx)("ul",{className:"wp-block-prc-block-table-of-contents__list",children:Object.values(o).map(o=>{const t=o.title?.originalHTML||o.title;return(0,g.jsx)("li",{children:(0,g.jsx)("a",{onClick:()=>{o.clientId&&e(o.clientId)},children:t})},o.id)})})}const v=(0,d.withColors)({dropdownBackgroundColor:"color"},{dropdownTextColor:"color"},{headingBackgroundColor:"color"},{headingTextColor:"color"},{activeBackgroundColor:"color"},{activeTextColor:"color"},{hoverBackgroundColor:"color"},{hoverTextColor:"color"})(function({attributes:o,setAttributes:e,context:t,clientId:r,isSelected:l,dropdownBackgroundColor:n,setDropdownBackgroundColor:a,dropdownTextColor:p,setDropdownTextColor:h,headingBackgroundColor:C,setHeadingBackgroundColor:v,headingTextColor:x,setHeadingTextColor:f,activeBackgroundColor:_,setActiveBackgroundColor:y,activeTextColor:T,setActiveTextColor:m,hoverBackgroundColor:B,setHoverBackgroundColor:j,hoverTextColor:D,setHoverTextColor:H}){const{postId:I,postType:N}=t,{chapters:A=[]}=function({postId:o,postType:e}){const{record:t,isResolving:r}=(0,k.useEntityRecord)("postType",e,o),l=(0,c.useMemo)(()=>!t||r?[{id:o,title:"Chapter 1...",internalChapters:[{title:"Chapter 1.1...",id:1},{title:"Chapter 1.2...",id:2},{title:"Chapter 1.3...",id:3}]},{id:2,title:"Chapter 2..."},{id:3,title:"Chapter 3..."}]:t?.table_of_contents,[t,r]),n=function(){const{currentChapters:o=[]}=(0,u.useSelect)(o=>{const{getBlocksByName:e,getBlock:t}=o("core/block-editor"),r=e(["core/heading"]),l=r.length>0?[]:[{clientId:"1",title:"Chapter 1..."},{clientId:"2",title:"Chapter 2..."}];return r.forEach(o=>{const e=t(o);!0===e.attributes?.isChapter&&l.push({clientId:o,title:e.attributes?.content?.originalHTML})}),{currentChapters:l}},[]);return o}();return{chapters:(0,c.useMemo)(()=>l&&0!==l?.length?l?.map(e=>{const t=o===e?.id?n.map(o=>({title:o.title,id:o?.id,clientId:o?.clientId,link:o?.link})):e?.internal_chapters;return{id:e.id,title:e?.title,link:e?.link,internalChapters:t}}):n.length>0?n:[],[n,l])}}({postId:I,postType:N}),{heading:S,showCurrentChapter:M,className:O,hideHeading:E,autoDropdownEnabled:$,autoDropdownWidth:R,style:V}=o,[G,W]=(0,c.useState)(!1),[F,z]=(0,c.useState)(!1),L=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!$)return z(!1);const o=()=>{L?.current&&z(L?.current.parentNode.parentNode.offsetWidth<=R)};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[$,L?.current?.parentNode?.parentNode.offsetWidth,L?.current?.parentNode?.parentNode,R]);const P=(0,c.useMemo)(()=>({dropdownBackgroundColor:n,setDropdownBackgroundColor:a,dropdownTextColor:p,setDropdownTextColor:h,headingBackgroundColor:C,setHeadingBackgroundColor:v,headingTextColor:x,setHeadingTextColor:f,activeBackgroundColor:_,setActiveBackgroundColor:y,activeTextColor:T,setActiveTextColor:m,hoverBackgroundColor:B,setHoverBackgroundColor:j,hoverTextColor:D,setHoverTextColor:H}),[n,a,p,h,C,v,x,f,_,y,T,m,B,j,D,H]),J=(0,c.useMemo)(()=>s()(O,"common-block-style--baseball-card",{"is-switched":F}),[F,O]),U=(0,c.useMemo)(()=>s()("wp-block-prc-block-table-of-contents__heading",{"has-text-color":!!P?.headingTextColor?.color||!!P?.headingTextColor?.class,[`has-${P?.headingTextColor?.slug}-color`]:!!P?.headingTextColor?.slug,"has-background":!!P?.headingBackgroundColor?.color||!!P?.headingBackgroundColor?.class,[`has-${P?.headingBackgroundColor?.slug}-background-color`]:!!P?.headingBackgroundColor?.slug,"is-hidden":E}),[P,E]),X=(0,c.useMemo)(()=>s()("wp-block-prc-block-table-of-contents__dropdown__heading",{"has-text-color":!!P?.dropdownTextColor?.color||!!P?.dropdownTextColor?.class,[`has-${P?.dropdownTextColor?.slug}-color`]:!!P?.dropdownTextColor?.slug,"has-background":!!P?.dropdownBackgroundColor?.color||!!P?.dropdownBackgroundColor?.class,[`has-${P?.dropdownBackgroundColor?.slug}-background-color`]:!!P?.dropdownBackgroundColor?.slug}),[P]),q=(0,c.useMemo)(()=>({className:J,"data-auto-dropdown-enabled":$,"data-auto-dropdown-width":R,"data-show-current-chapter":M,"aria-expanded":G}),[J,$,R,M,G]),K=(0,d.useBlockProps)(q);return(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)(b,{attributes:o,setAttributes:e,colors:P,clientId:r}),(0,g.jsx)("div",{...K,children:(0,g.jsxs)("div",{ref:L,children:[(0,g.jsx)("div",{className:U,children:(0,g.jsx)(d.RichText,{tagName:"h2",placeholder:"Table of Contents",value:S,onChange:o=>e({heading:o})})}),(0,g.jsxs)("div",{className:X,children:[(0,g.jsx)(d.RichText,{tagName:"h2",placeholder:"Table of Contents",value:S,onChange:o=>e({heading:o})}),(0,g.jsx)("div",{className:"wp-block-prc-block-table-of-contents__dropdown-trigger",onClick:()=>W(!G),children:"+"})]}),(0,g.jsx)("ul",{className:"wp-block-prc-block-table-of-contents__list",style:{"--block-gap":(0,i.getBlockGapSupportValue)(o)},children:0!==A.length&&A.map(o=>{const e=o.id||`chptr-${Math.random()}`;return(0,g.jsxs)("li",{className:s()("wp-block-prc-block-table-of-contents__list-item",{"is-active":I===o?.id,"has-active-background":!!P.activeBackgroundColor.color||P.activeBackgroundColor.class,[`has-active-${P?.activeBackgroundColor?.slug}-background-color`]:!!P?.activeBackgroundColor?.slug,"has-active-color":!!P.activeTextColor.color||P.activeTextColor.class,[`has-active-${P?.activeTextColor?.slug}-color`]:!!P?.activeTextColor?.slug,"has-focus-background":!!P.activeBackgroundColor.color||P.activeBackgroundColor.class,[`has-focus-${P?.activeBackgroundColor?.slug}-background-color`]:!!P?.activeBackgroundColor?.slug,"has-focus-color":!!P.activeTextColor.color||P.activeTextColor.class,[`has-focus-${P?.activeTextColor?.slug}-color`]:!!P?.activeTextColor?.slug,"has-hover-background":!!P.hoverBackgroundColor.color||P.hoverBackgroundColor.class,[`has-hover-${P?.hoverBackgroundColor?.slug}-background-color`]:!!P?.activeBackgroundColor?.slug,"has-hover-color":!!P.hoverTextColor.color||P.hoverTextColor.class,[`has-hover-${P?.hoverTextColor?.slug}-color`]:!!P?.hoverTextColor?.slug}),children:[(0,g.jsx)("span",{children:o.title}),I===o.id&&o?.internalChapters&&(0,g.jsx)(w,{internalChapters:o?.internalChapters})]},e)})})]})})]})}),x=window.prcIcons,f=[{name:"table-of-contents",isDefault:!0,title:(0,p.__)("Table of Contents (Default)"),description:(0,p.__)('The default table of contents block. Displays a list of links to sections and chapters in a post in a "Baseball Card" style. On mobile this transforms to a dropdown.'),attributes:{displayType:"list"},scope:["inserter","transform"],isActive:(o,e)=>e.displayType===o.displayType},{name:"table-of-contents-dropdown",isDefault:!0,title:(0,p.__)("Table of Contents (Dropdown)"),description:(0,p.__)("Displays a list of sections and chapters in a post in a dropdown style."),attributes:{displayType:"dropdown"},scope:["inserter","transform"],isActive:(o,e)=>e.displayType===o.displayType},{name:"table-of-contents-accordion",isDefault:!0,title:(0,p.__)("Table of Contents (Accordion)"),description:(0,p.__)("Displays a list of sections and chapters in a report in an accordion style."),attributes:{displayType:"accordion"},scope:["inserter","transform"],isActive:(o,e)=>e.displayType===o.displayType}],_=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/table-of-contents","version":"0.1.0","title":"Table of Contents","category":"theme","description":"Displays a list of all heading blocks set to chapter headings.","attributes":{"displayType":{"type":"string","default":"list","enum":["list","accordion","dropdown"]},"showCurrentChapter":{"type":"boolean","default":false},"dropdownBackgroundColor":{"type":"string","default":"white"},"dropdownTextColor":{"type":"string","default":"ui-black"},"autoDropdownEnabled":{"type":"boolean","default":true},"autoDropdownWidth":{"type":"number","default":480},"headingBackgroundColor":{"type":"string","default":"ui-black"},"headingTextColor":{"type":"string","default":"white"},"backgroundColor":{"type":"string","default":"white"},"textColor":{"type":"string","default":"ui-black"},"linkColor":{"type":"string","default":"ui-black"},"activeBackgroundColor":{"type":"string","default":"ui-gray-very-light"},"activeTextColor":{"type":"string","default":"ui-black"},"hoverBackgroundColor":{"type":"string","default":"ui-beige-very-light"},"hoverTextColor":{"type":"string","default":"ui-black"},"heading":{"type":"string","default":"Table of Contents"},"hideHeading":{"type":"boolean","default":false},"style":{"type":"object","default":{"spacing":{"blockGap":"var:preset|spacing|20"}}}},"supports":{"anchor":true,"html":false,"align":["left","right"],"color":{"background":true,"text":true,"link":true},"interactivity":true,"spacing":{"margin":["top","bottom","left","right"],"blockGap":true,"__experimentalDefaultControls":{"margin":true,"blockGap":true}},"position":{"sticky":true},"typography":{"__experimentalFontFamily":true,"fontSizes":true,"lineHeight":true,"__experimentalDefaultControls":{"__experimentalFontFamily":true,"fontSizes":true}},"__experimentalBorder":{"color":true,"radius":false,"style":true,"width":true,"__experimentalDefaultControls":{"color":true,"radius":false,"style":true,"width":true}}},"selectors":{"root":".wp-block-prc-block-table-of-contents","spacing":{"blockGap":".wp-block-prc-block-table-of-contents__list"}},"example":{"attributes":{"className":"is-style-default"},"viewportWidth":320},"usesContext":["postId","postType"],"textdomain":"table-of-contents","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":["file:./style-index.css","prc-block-library--baseball-card","prc-block-library--additional-color-supports"],"viewScriptModule":"file:./view.js"}'),{name:y}=_,T={icon:function(){return(0,g.jsx)(x.Icon,{icon:"list-tree"})},edit:v,variations:f};(0,r.registerBlockType)(y,{..._,...T}),n()(()=>{(0,r.unregisterBlockType)("yoast-seo/table-of-contents")})}},t={};function r(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.m=e,o=[],r.O=(e,t,l,n)=>{if(!t){var a=1/0;for(d=0;d<o.length;d++){for(var[t,l,n]=o[d],s=!0,i=0;i<t.length;i++)(!1&n||a>=n)&&Object.keys(r.O).every(o=>r.O[o](t[i]))?t.splice(i--,1):(s=!1,n<a&&(a=n));if(s){o.splice(d--,1);var c=l();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=o.length;d>0&&o[d-1][2]>n;d--)o[d]=o[d-1];o[d]=[t,l,n]},r.n=o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return r.d(e,{a:e}),e},r.d=(o,e)=>{for(var t in e)r.o(e,t)&&!r.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},r.o=(o,e)=>Object.prototype.hasOwnProperty.call(o,e),(()=>{var o={9237:0,2361:0};r.O.j=e=>0===o[e];var e=(e,t)=>{var l,n,[a,s,i]=t,c=0;if(a.some(e=>0!==o[e])){for(l in s)r.o(s,l)&&(r.m[l]=s[l]);if(i)var d=i(r)}for(e&&e(t);c<a.length;c++)n=a[c],r.o(o,n)&&o[n]&&o[n][0](),o[n]=0;return r.O(d)},t=globalThis.webpackChunk_prc_block_library=globalThis.webpackChunk_prc_block_library||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var l=r.O(void 0,[2361],()=>r(2421));l=r.O(l)})();
//# sourceMappingURL=index.js.map