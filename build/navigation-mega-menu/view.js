import{getContext as e,getElement as t,store as n}from"@wordpress/interactivity";const{state:o,actions:i}=n("prc-block/navigation-mega-menu",{state:{get isActive(){const t=e(),{id:n}=t;return o[n]?.isActive||!1},get width(){return e().width},get left(){return e().left},get top(){return e().top}},actions:{closeAll:()=>{Object.keys(o).forEach(e=>{o[e].isActive=!1})},toggleMenuOnClick(){const{ref:e}=t();i.toggleMenu()},closeMenuOnClick(){i.closeMenu("click"),i.closeMenu("focus")},toggleMenu(){const t=e(),{id:n}=t;o[n].isActive=!o[n].isActive},openMenu(){const t=e(),{id:n}=t;o[n].isActive=!0},closeMenu(){const t=e(),{id:n}=t;o[n].isActive=!1},setMenuPositions(){const{ref:n}=t(),o=n.querySelector(".wp-block-prc-block-navigation-mega-menu__container");if(!o)return;if(!o.closest(".wp-block-navigation"))return;const i=e(),{width:c,left:s,top:r}=function(e,t){if(!e&&!t)return;const n=t.offsetHeight,o=e.closest("body").offsetWidth,i=e.getBoundingClientRect(),c=i?.left;return{width:`${o}px`,left:`-${c}px`,top:n-1+"px"}}(n,n.closest(".wp-block-navigation"));i.width=c,i.left=s,i.top=r}},callbacks:{onInit(){const n=e(),{ref:o}=t(),c=o.querySelector(".wp-block-prc-block-navigation-mega-menu__container");n.menuRef=c,i.setMenuPositions();const s=c.querySelector(".wp-block-group.has-background");if(s){const e=s.className.match(/(has-.*-background-color|has-background|has-text-color|has-.*-color)/g);n.activeClassnames=e}},onResize(){i.setMenuPositions()},getToggleClassname(){const t=["wp-block-navigation-item__content","wp-block-prc-block-navigation-mega-menu__toggle"],n=e(),{activeClassnames:i}=n;return o.isActive?t.join(" ")+i.join(" "):t.join(" ")},onWindowClickCloseMegaMenu:n=>{const i=e(),{id:c}=i;if(!c)return;if(!o[c]?.isActive)return;const s=t(),{ref:r}=s;r.contains(n.target)&&!n.target.classList.contains("wp-block-prc-block-popup-modal__outer")||r.querySelector(".wp-block-prc-block-navigation-mega-menu__container").innerHTML.includes(n.target.innerHTML)||!0!==o[c].isActive||(o[c].isActive=!1)},onESCKey:t=>{const n=e(),{id:i}=n;i&&"Escape"===t.key&&!0===o[i].isActive&&(t.preventDefault(),o[i].isActive=!1)}}});
//# sourceMappingURL=view.js.map