(()=>{"use strict";var e,o={5173:(e,o,t)=>{const n=window.wp.blocks,l=window.wp.hooks,r=window.classnames;var a=t.n(r);const i=window.wp.blockEditor,s=window.React,c=window.wp.i18n,u=window.wp.components,m=window.wp.data,g=window.wp.element,d=window.wp.coreData;function p({menuSlug:e,setMenuSlug:o=()=>{}}){const{hasResolved:t,records:n}=(0,d.useEntityRecords)("postType","wp_template_part",{per_page:-1}),l=(0,s.useMemo)(()=>{if(!n||!n.length)return[];const o=n.find(o=>o.slug===e);return o?[{label:o.title.rendered,value:o.slug}]:n.filter(e=>"menu"===e.area||e.title.rendered.includes("menu")).map(e=>({label:e.title.rendered,value:e.slug}))},[e,n]),r=(0,s.useMemo)(()=>l.length>0,[l]),a=(0,s.useMemo)(()=>e&&l?.length&&l.some(o=>o.value===e),[e,l]),i=(0,s.useMemo)(()=>{if(!(e&&t&&n&&n.length))return;const o=t&&n&&n.find(o=>o.slug===e);return o.theme&&o.slug?`${o.theme}//${o.slug}`:void 0},[e,t,n]);return console.log("useMenuTemplatePart",l,r,a,n,i),{menuOptions:l,hasMenus:r,selectedMenuAndExists:a,menuId:i,setMenuSlug:o}}const b=window.ReactJSXRuntime;function v({menuSlug:e,onChange:o=()=>{}}){const t=(0,m.useSelect)(e=>e("core").getSite().url),n=t?`${t}/wp-admin/site-editor.php?path=%2Fpatterns&categoryType=wp_template_part&categoryId=menu`:"",{menuOptions:l,hasMenus:r,selectedMenuAndExists:a}=p({menuSlug:e,setMenuSlug:e=>o(e)}),i=(0,b.jsx)(u.Notice,{status:"warning",isDismissible:!1,children:(0,g.createInterpolateElement)((0,c.__)("No menu templates could be found. Create a new one in the <a>Site Editor</a>.","mega-menu-block"),{a:(0,b.jsx)("a",{href:n,target:"_blank",rel:"noreferrer"})})}),s=(0,b.jsx)(u.Notice,{status:"warning",isDismissible:!1,children:(0,c.__)("The selected menu template no longer exists. Choose another.","mega-menu-block")});return(0,b.jsxs)(g.Fragment,{children:[(0,b.jsx)(u.ComboboxControl,{label:(0,c.__)("Menu Template","mega-menu-block"),value:e,options:l,onChange:o,help:r&&(0,g.createInterpolateElement)((0,c.__)("Create and modify menu templates in the <a>Site Editor</a>.","mega-menu-block"),{a:(0,b.jsx)("a",{href:n,target:"_blank",rel:"noreferrer"})})}),!r&&i,r&&!a&&s]})}function C({colors:e,clientId:o}){const t=(0,i.__experimentalUseMultipleOriginColorsAndGradients)(),n=(0,s.useMemo)(()=>{const{menuItemBackgroundColor:o,setMenuItemBackgroundColor:t,menuItemTextColor:n,setMenuItemTextColor:l,menuItemActiveBackgroundColor:r,setMenuItemActiveBackgroundColor:a,menuItemActiveTextColor:i,setMenuItemActiveTextColor:s,menuOverlayBackgroundColor:u,setMenuOverlayBackgroundColor:m,menuOverlayTextColor:g,setMenuOverlayTextColor:d,menuActiveBorderColor:p,setMenuActiveBorderColor:b}=e;return[{colorValue:o?.color,onColorChange:t,label:(0,c.__)("Menu Item Background Color","prc-block-library")},{colorValue:n?.color,onColorChange:l,label:(0,c.__)("Menu Item Text Color","prc-block-library")},{colorValue:r?.color,onColorChange:a,label:(0,c.__)("Menu Item Active Background Color","prc-block-library")},{colorValue:i?.color,onColorChange:s,label:(0,c.__)("Menu Item Active Text Color","prc-block-library")},{colorValue:u?.color,onColorChange:m,label:(0,c.__)("Menu Overlay Background Color","prc-block-library")},{colorValue:g?.color,onColorChange:d,label:(0,c.__)("Menu Overlay Text Color","prc-block-library")},{colorValue:p?.color,onColorChange:b,label:(0,c.__)("Menu Active Border Color","prc-block-library")}]},[e]);return(0,b.jsx)(i.InspectorControls,{group:"color",children:(0,b.jsx)(i.__experimentalColorGradientSettingsDropdown,{settings:n,panelId:o,hasColorsOrGradients:!1,disableCustomColors:!0,__experimentalIsRenderedInSidebar:!0,...t})})}function h({attributes:e,setAttributes:o,colors:t,clientId:n}){const{menuSlug:l,label:r,title:a,description:m,url:g,icon:d,hasBoxShadow:p}=e;return(0,b.jsxs)(s.Fragment,{children:[(0,b.jsx)(i.InspectorControls,{group:"settings",children:(0,b.jsxs)(u.PanelBody,{title:(0,c.__)("Settings","prc-navigation-mega-menu"),initialOpen:!0,children:[(0,b.jsx)(u.TextControl,{label:(0,c.__)("Label","prc-navigation-mega-menu"),type:"text",value:r,onChange:e=>o({label:e}),autoComplete:"off"}),(0,b.jsx)(v,{menuSlug:l,onChange:e=>o({menuSlug:e})}),(0,b.jsx)(u.TextareaControl,{className:"settings-panel__description",label:(0,c.__)("Description","prc-navigation-mega-menu"),type:"text",value:m||"",onChange:e=>{o({description:e})},help:(0,c.__)("The description will be displayed in the menu if the current theme supports it.","prc-navigation-mega-menu"),autoComplete:"off"}),(0,b.jsx)(u.TextControl,{label:(0,c.__)("Title","prc-navigation-mega-menu"),type:"text",value:a||"",onChange:e=>{o({title:e})},help:(0,c.__)("Additional information to help clarify the purpose of the link.","prc-navigation-mega-menu"),autoComplete:"off"}),(0,b.jsx)(u.TextControl,{label:(0,c.__)("URL","prc-navigation-mega-menu"),type:"text",value:g||"",onChange:e=>{o({url:e})},help:(0,c.__)("When the mega menu is unable to be opened clicking on the navigation link will direct the user to this url instead.","prc-navigation-mega-menu"),autoComplete:"off"}),(0,b.jsx)(u.SelectControl,{label:(0,c.__)("Icon","prc-navigation-mega-menu"),value:d,options:[{label:(0,c.__)("Dropdown","prc-navigation-mega-menu"),value:"dropdown"},{label:(0,c.__)("Mobile Menu","prc-navigation-mega-menu"),value:"mobile"},{label:(0,c.__)("Search","prc-navigation-mega-menu"),value:"search"}],onChange:e=>{o({icon:e})},help:(0,c.__)("Choose an icon to display next to the label. Mobile and Search options replace the label with an icon.","prc-navigation-mega-menu")}),(0,b.jsx)(u.ToggleControl,{label:(0,c.__)("Has box shadow","prc-navigation-mega-menu"),checked:p,onChange:e=>o({hasBoxShadow:e}),help:(0,c.__)("Enable to add a box shadow to the mega menu.","prc-navigation-mega-menu")})]})}),(0,b.jsx)(C,{colors:t,clientId:n})]})}const _=window.prcIcons;function k({attributes:e,setAttributes:o,isSelected:t,isMenuVisible:n,toggleMenu:l}){const{label:r,description:a,icon:u}=e,m=(0,s.useMemo)(()=>"dropdown"===u?"caret-down":"mobile"===u?"bars":"search"===u?"magnifying-glass":"caret-down",[u]),g=(0,s.useMemo)(()=>"caret-down"===m?"sharp-solid":"mobile"===u?"light":"solid",[m,u]),d=!u||"dropdown"===u;return(0,b.jsxs)("button",{className:"wp-block-navigation-item__content wp-block-prc-block-navigation-mega-menu__toggle","aria-expanded":n,type:"button",children:[d&&(0,b.jsx)(i.RichText,{identifier:"label",className:"wp-block-navigation-item__label",value:r,onChange:e=>o({label:e}),"aria-label":(0,c.__)("Mega menu link text","mega-menu-block"),placeholder:(0,c.__)("Add labelâ€¦","mega-menu-block"),allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),(0,b.jsx)("span",{className:`wp-block-prc-block-navigation-mega-menu__toggle-${u}-icon`,onClick:()=>{t&&l()},children:(0,b.jsx)(_.Icon,{library:g,icon:m})}),a&&(0,b.jsx)("span",{className:"wp-block-navigation-item__description",children:a})]})}const w=window.prcComponents;function x({menuSlug:e,overlayClassnames:o,clientId:t,toggleMenu:n,isMobile:l}){const r=(0,s.createRef)(),{menuId:a}=p({menuSlug:e}),{topPosition:i,leftPosition:c,width:u}=function({ref:e,isMobile:o,useState:t,useEffect:n}){const[l,r]=t(0),[a,i]=t(0),[s,c]=t(null);return n(()=>{const o=()=>{if(e.current){let o;if(!e.current.classList.contains("wp-block-prc-block-navigation-mega-menu__container"))return;o=e.current;let t=o.closest(".wp-block-navigation");t=t.parentElement;const{width:n,left:l,top:a}=function(e,o){if(!e&&!o)return;const t=o.offsetHeight,n=e.closest("body").offsetWidth,l=e.getBoundingClientRect(),r=l?.left;return{width:`${n}px`,left:`-${r}px`,top:t-1+"px"}}(o,t);r(a),i(l),c(n)}};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[e.current,o]),{topPosition:l,leftPosition:a,width:s}}({ref:r,isMobile:l,useState:s.useState,useEffect:s.useEffect});return(0,b.jsx)(w.InnerBlocksAsSyncedContent,{passedRef:r,postId:a,postType:"wp_template_part",postTypeLabel:"Mega Menu",blockProps:{className:`${o}`,style:{top:i,left:c,width:u}},clientId:t})}const M=(0,i.withColors)({menuItemBackgroundColor:"color"},{menuItemTextColor:"color"},{menuItemActiveBackgroundColor:"color"},{menuItemActiveTextColor:"color"},{menuOverlayBackgroundColor:"color"},{menuOverlayTextColor:"color"},{menuActiveBorderColor:"color"})(function({attributes:e,setAttributes:o,clientId:t,isSelected:n,menuItemBackgroundColor:l,setMenuItemBackgroundColor:r,menuItemTextColor:c,setMenuItemTextColor:u,menuItemActiveBackgroundColor:m,setMenuItemActiveBackgroundColor:g,menuItemActiveTextColor:d,setMenuItemActiveTextColor:p,menuOverlayBackgroundColor:v,setMenuOverlayBackgroundColor:C,menuOverlayTextColor:_,setMenuOverlayTextColor:w,menuActiveBorderColor:M,setMenuActiveBorderColor:f}){const{icon:y,label:I,description:B,menuSlug:T,isMobile:A}=e,[j,S]=(0,s.useState)(!1),O=()=>S(!j),L={menuItemBackgroundColor:l,setMenuItemBackgroundColor:r,menuItemTextColor:c,setMenuItemTextColor:u,menuItemActiveBackgroundColor:m,setMenuItemActiveBackgroundColor:g,menuItemActiveTextColor:d,setMenuItemActiveTextColor:p,menuOverlayBackgroundColor:v,setMenuOverlayBackgroundColor:C,menuOverlayTextColor:_,setMenuOverlayTextColor:w,menuActiveBorderColor:M,setMenuActiveBorderColor:f},N=a()("wp-block-navigation-item",{"is-active":j,"has-active-menu-item-background":!!m.color||m.class,[(0,i.getColorClassName)("active-menu-item-background",m?.slug)]:!!m?.slug,"has-active-menu-item-color":!!d.color||d.class,[(0,i.getColorClassName)("active-menu-item-color",d?.slug)]:!!d?.slug,"has-menu-item-background":!!l.color||l.class,[(0,i.getColorClassName)("menu-item-background",l?.slug)]:!!l?.slug,"has-menu-item-color":!!c.color||c.class,[(0,i.getColorClassName)("menu-item-color",c?.slug)]:!!c?.slug,"has-active-border-color":!!M.color||M.class,[(0,i.getColorClassName)("active-border-color",M?.slug)]:!!M?.slug,"has-label":"dropdown"===y}),E=a()("wp-block-prc-block-navigation-mega-menu__container",{"has-overlay-background":!!v.color||v.class,[(0,i.getColorClassName)("overlay-background",v?.slug)]:!!v?.slug,"has-overlay-color":!!_.color||_.class,[(0,i.getColorClassName)("overlay-color",_?.slug)]:!!_?.slug}),R=(0,i.useBlockProps)({className:N});return(0,b.jsxs)("div",{...R,children:[(0,b.jsx)(h,{attributes:e,setAttributes:o,colors:L,clientId:t}),(0,b.jsx)(k,{attributes:e,setAttributes:o,isSelected:n,isMenuVisible:j,toggleMenu:O}),(0,b.jsx)("div",{className:"wp-block-prc-block-navigation-mega-menu__tab-divider"}),j&&(0,b.jsx)(x,{menuSlug:T,clientId:t,overlayClassnames:E,toggleMenu:O,isMobile:A})]})}),f=JSON.parse('{"UU":"prc-block/navigation-mega-menu"}'),y=(0,b.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M20,12 L4,12 L4,13.5 L20,13.5 L20,12 Z M10,6.5 L4,6.5 L4,8 L10,8 L10,6.5 Z M20,17.5 L4,17.5 L4,19 L20,19 L20,17.5 Z M20,5.62462724 L16.000015,9 L12,5.62462724 L12.9791165,4.5 L16.000015,7.04920972 L19.0208935,4.5 L20,5.62462724 Z"})});(0,n.registerBlockType)(f.UU,{icon:y,variations:[{isDefault:!0,title:"Mega Menu (Desktop)",name:"mega-menu-desktop",description:"Mega Menu with absolute positioning designed for desktop",attributes:{isMobile:!1},isActive:e=>!1===e.isMobile,scope:["block","inserter","transform"]},{title:"Mega Menu (Mobile)",name:"mega-menu-mobile",description:"Mega Menu with absolute positioning designed for mobile",attributes:{isMobile:!0},isActive:e=>!0===e.isMobile,scope:["block","inserter","transform"]}],edit:M}),(0,l.addFilter)("blocks.registerBlockType","prc-block-mega-menu-add-to-navigation",(e,o)=>{var t;return"core/navigation"===o?{...e,allowedBlocks:[...null!==(t=e.allowedBlocks)&&void 0!==t?t:[],"prc-block/navigation-mega-menu"]}:e})}},t={};function n(e){var l=t[e];if(void 0!==l)return l.exports;var r=t[e]={exports:{}};return o[e](r,r.exports,n),r.exports}n.m=o,e=[],n.O=(o,t,l,r)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){for(var[t,l,r]=e[u],i=!0,s=0;s<t.length;s++)(!1&r||a>=r)&&Object.keys(n.O).every(e=>n.O[e](t[s]))?t.splice(s--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var c=l();void 0!==c&&(o=c)}}return o}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,l,r]},n.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return n.d(o,{a:o}),o},n.d=(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={9461:0,9401:0};n.O.j=o=>0===e[o];var o=(o,t)=>{var l,r,[a,i,s]=t,c=0;if(a.some(o=>0!==e[o])){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(s)var u=s(n)}for(o&&o(t);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},t=globalThis.webpackChunk_prc_block_library=globalThis.webpackChunk_prc_block_library||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var l=n.O(void 0,[9401],()=>n(5173));l=n.O(l)})();
//# sourceMappingURL=index.js.map