import{getContext as e,store as t}from"@wordpress/interactivity";const{state:a,actions:s}=t("prc-block/mailchimp-select",{actions:{subscribe:async t=>{const{NONCE:a}=e(),s=t.find(e=>["emailAddress","email"].includes(e.name))?.value,c=t.find(e=>"captchaToken"===e.name)?.value,i=t.filter(e=>"checkbox"===e.type).map(e=>e.value),r=await async function({emailAddress:e,captchaToken:t=!1,interests:a=[],NONCE:s=!1}){const{apiFetch:c}=window.wp,{isURL:i,buildQueryString:r}=window.wp.url;return new Promise((r,n)=>{if(!t)return n(new Error("We couldn't verify you're not a robot ðŸ¤–. Please try again."));const o=document.URL;if(!i(o))return n(new Error("Invalid url",o));c.use(c.createNonceMiddleware(s)),c({path:"/prc-api/v3/mailchimp/subscribe",method:"POST",data:{email:e,captcha_token:t,interests:a.join(","),api_key:"mailchimp-select",origin_url:o}}).then(e=>{e.success?r(e):n(e)}).catch(e=>{n(e)})})}({emailAddress:s,interests:i,captchaToken:c,NONCE:a}).then(e=>({status:"success",message:"You have been subscribed to the selected lists.",data:e})).catch(e=>({status:"error",message:e.message,data:e}));return r}},callbacks:{}});
//# sourceMappingURL=index.js.map