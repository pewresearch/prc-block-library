(()=>{"use strict";var e,t={26:()=>{const e=window.wp.blocks,t=window.prcControls;function l(e){var t,o,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(o=l(e[t]))&&(a&&(a+=" "),a+=o)}else for(o in e)e[o]&&(a&&(a+=" "),a+=o);return a}const o=function(){for(var e,t,o=0,a="",r=arguments.length;o<r;o++)(e=arguments[o])&&(t=l(e))&&(a&&(a+=" "),a+=t);return a},a=window.wp.element,r=(0,a.forwardRef)((function({icon:e,size:t=24,...l},o){return(0,a.cloneElement)(e,{width:t,height:t,...l,ref:o})})),n=window.wp.primitives,s=window.ReactJSXRuntime,i=(0,s.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(n.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),c=window.wp.i18n,u=window.wp.components,p=window.wp.blockEditor,d=window.prcIcons,m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/form-input-select","version":"1.5.0","title":"Form Input Select","category":"forms","description":"A select element that supports search and autocomplete.","attributes":{"type":{"type":"string","enum":["custom","industries","countries","countries-and-regions","us-states"],"default":"custom"},"rawOptions":{"type":"array","default":[]},"options":{"type":"array","default":[]},"hasClearIcon":{"type":"boolean","default":false},"displayLabel":{"type":"boolean","default":true},"label":{"type":"string","source":"html","selector":"label"},"placeholder":{"type":"string","default":"A hint or example...","source":"attribute","selector":"input","attribute":"placeholder"},"required":{"type":"boolean","default":false,"source":"attribute","selector":"input","attribute":"required"},"disabled":{"type":"boolean","default":false,"source":"attribute","selector":"input","attribute":"disabled"},"value":{"type":"string","source":"attribute","selector":"input","attribute":"value"},"allowMultiple":{"type":"boolean","default":false},"allowSearch":{"type":"boolean","default":true}},"supports":{"anchor":true,"html":false,"reusable":true,"interactivity":true,"layout":{"type":"flex","default":{"type":"flex","orientation":"vertical","verticalAlignment":"center","allowOrientation":true},"allowInheriting":false,"allowVerticalAlignment":true,"allowJustification":true,"allowOrientation":true,"allowSizingOnChildren":true},"spacing":{"blockGap":true,"padding":true,"margin":true},"__experimentalBorder":{"color":true,"width":true,"radius":true,"__experimentalSkipSerialization":true},"color":{"background":true,"text":true,"enableContrastChecker":true,"__experimentalSkipSerialization":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}},"selectors":{"root":".wp-block-prc-block-form-input-text","color":".wp-block-prc-block-form-input-text > input","border":".wp-block-prc-block-form-input-text > input"}},"usesContext":["form-input-select/options"],"styles":[{"name":"default","label":"Default","isDefault":true},{"name":"inline-label","label":"Inline Label"}],"textdomain":"form-input-select","editorScript":"file:./index.js","style":"file:./style-index.css","viewScriptModule":"file:./view.js"}'),{name:b}=m,h={icon:function(){return(0,s.jsx)(d.Icon,{icon:"list-dropdown"})},edit:function({attributes:e,setAttributes:l,context:n,clientId:d,isSelected:m,insertBlocksAfter:b,__unstableLayoutClassNames:h}){const{label:f,placeholder:g,required:x,disabled:y,hasClearIcon:w,value:_,metadata:v,displayLabel:k,type:C,rawOptions:j=[],options:S=[],allowMultiple:N=!1,className:I,allowSearch:O=!0}=e,T=(0,a.useMemo)((()=>I?.includes("is-style-inline-label")),[I]),{name:L}=v||{},[A,F]=(0,a.useState)([]),[M,B]=(0,a.useState)(""),[R,D]=(0,a.useState)(!1),P=(0,p.__experimentalUseBorderProps)(e),q=(0,p.__experimentalUseColorProps)(e),z=(0,a.useMemo)((()=>o({...q.className,...P.className})),[q.className,P.className]),E=(0,a.useMemo)((()=>({...q.style,...P.style})),[q.style,P.style]),V=(0,a.useMemo)((()=>T?[]:z),[T,z]),G=(0,a.useMemo)((()=>T?{}:E),[T,E]),U=(0,a.useRef)(null),J=(0,a.useMemo)((()=>T?[h,...z]:h),[h,z,T]),$=(0,a.useMemo)((()=>T?E:{}),[T,E]),W=(0,p.useBlockProps)({className:o(J,{"is-open":m}),style:$}),H=(0,a.useMemo)((()=>n["form-input-select/options"]||[]),[n]),X=(0,a.useMemo)((()=>{const e=[...S,...H];return console.log("filteredOptions",{options:S,contextualOptions:H,selectedValues:A,inputValue:M,allOptions:e}),e.filter((e=>!A.includes(e.value)&&!e.disabled&&e.label.toLowerCase().includes(M.toLowerCase())))}),[S,H,A,M]);function Z(e){const t=S.find((t=>t.value===e));return t?t.label:e}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.InspectorControls,{children:[(0,s.jsxs)(u.PanelBody,{title:(0,c.__)("Form Input Field Settings"),children:[(0,s.jsx)(u.TextControl,{label:"Input Name",help:(0,c.__)("This is the name of the input field. It is used to identify the input field in the form submission data. We recommend using a camelCase name.","prc-block-library"),value:L,onChange:t=>{l({metadata:{...e.metadata,name:t}})}}),(0,s.jsx)(u.TextControl,{label:"Placeholder",value:g,onChange:e=>{l({placeholder:e})}}),(0,s.jsx)(u.ToggleControl,{label:"Display Label",checked:k,help:"If toggled on, the label will be displayed above the input field.",onChange:e=>{l({displayLabel:e})}}),(0,s.jsx)(u.ToggleControl,{label:"Disabled",checked:y,help:"If toggled on, the user cannot interact with this input.",onChange:e=>{l({disabled:e})}}),(0,s.jsx)(u.ToggleControl,{label:"Required",checked:x,help:"If toggled on, the user must select a value before submitting the form.",onChange:e=>{l({required:e})}}),(0,s.jsx)(u.ToggleControl,{label:"Clear Icon Enabled",checked:w,help:"If toggled on, a clear icon will be displayed in the input field.",onChange:e=>{l({hasClearIcon:e})}}),(0,s.jsx)(u.ToggleControl,{label:"Allow Search",checked:O,help:"If toggled on, the user can search and filter through the options.",onChange:e=>{l({allowSearch:e})}})]}),(0,s.jsxs)(u.PanelBody,{title:(0,c.__)("Form Input Field Options"),children:[(0,s.jsx)(u.SelectControl,{label:"Select from default options",value:C,options:[{label:"Custom",value:"custom"},{label:"Countries",value:"countries"},{label:"Countries and Regions",value:"countries-and-regions"},{label:"U.S. States",value:"us-states"},{label:"Industries",value:"industries"}],onChange:e=>{l({type:e})}}),(0,s.jsx)(t.Sorter,{options:S,setAttributes:l,attribute:"options",clientId:d,isRemovable:!0,hasSetActive:!0})]})]}),(0,s.jsxs)("div",{...W,children:[k&&(0,s.jsx)(p.RichText,{tagName:"label",placeholder:(0,c.__)("Label...","prc-block-library"),value:f,onChange:t=>{const o=t.replace(/<[^>]*>/g,"").replace(/(?:^| )(\w)/g,((e,t)=>t.toUpperCase())).replace(/^./,(e=>e.toLowerCase()));l({label:t,metadata:{...e.metadata,name:o}})}}),(0,s.jsxs)("div",{className:o("wp-block-prc-block-form-input-select__input",V),style:G,children:[N&&(0,s.jsx)("div",{className:"wp-block-prc-block-form-input-select__tokens-wrapper",children:A.map((e=>(0,s.jsxs)("span",{className:"components-form-token-field__token",children:[Z(e),(0,s.jsx)("button",{type:"button","aria-label":(0,c.__)("Remove","prc-block-library"),onClick:()=>handleTokenRemove(e),children:(0,s.jsx)(r,{icon:i})})]},e)))}),(0,s.jsx)("input",{ref:U,type:"text",role:"combobox",ariaAutocomplete:"list",ariaExpanded:m,ariaControls:`dropdown-list-${d}`,placeholder:g,value:M,onChange:e=>{e.preventDefault()},onBlur:e=>{setTimeout((()=>D(!1)),250),console.log("onBlur")},onFocus:e=>{e.preventDefault(),D(!0),console.log("onFocus",R)},disabled:e.disabled,required:x&&0===A.length}),m&&X.length>0&&(0,s.jsx)("ul",{id:`dropdown-list-${d}`,role:"listbox",className:"wp-block-prc-block-form-input-select__list",children:X.map(((e,t)=>(0,s.jsx)("li",{role:"option",onMouseDown:e=>{e.preventDefault()},children:e.label},e.value)))})]})]})]})},save:function({attributes:e}){const{label:t,displayLabel:l,placeholder:a,required:r,value:n,metadata:i,className:c,allowMultiple:u}=e,{name:d}=i||{},m=(0,p.__experimentalGetBorderClassesAndStyles)(e),b=(0,p.__experimentalGetColorClassesAndStyles)(e),h=c?.includes("is-style-inline-label");let f=[];h||(f.push(b.className),f.push(m.className));const g=o("wp-block-prc-block-form-input-select__input",...f),x={...h?{}:{...b.style,...m.style}},y={placeholder:a,value:n,name:d,type:"text",role:"combobox"};r&&(y.required=!0);let w=[];h&&(w.push(b.className),w.push(m.className));const _=p.useBlockProps.save({className:o("wp-block-prc-block-form-input-select",...w),style:h?{...b.style,...m.style}:{}}),v=!0===l&&t&&t.length>0;return(0,s.jsxs)("div",{..._,children:[v&&(0,s.jsx)(p.RichText.Content,{tagName:"label",value:t}),(0,s.jsxs)("div",{className:g,style:x,children:[u&&(0,s.jsx)("div",{className:"prc-block-form-input-select__tokens__placeholder"}),(0,s.jsx)("input",{...y}),(0,s.jsx)("div",{className:"prc-block-form-input-select__list__placeholder"})]})]})}};(0,e.registerBlockType)(b,{...m,...h})}},l={};function o(e){var a=l[e];if(void 0!==a)return a.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,l,a,r)=>{if(!l){var n=1/0;for(u=0;u<e.length;u++){for(var[l,a,r]=e[u],s=!0,i=0;i<l.length;i++)(!1&r||n>=r)&&Object.keys(o.O).every((e=>o.O[e](l[i])))?l.splice(i--,1):(s=!1,r<n&&(n=r));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[l,a,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var a,r,[n,s,i]=l,c=0;if(n.some((t=>0!==e[t]))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(i)var u=i(o)}for(t&&t(l);c<n.length;c++)r=n[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},l=globalThis.webpackChunk_prc_block_library=globalThis.webpackChunk_prc_block_library||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var a=o.O(void 0,[350],(()=>o(26)));a=o.O(a)})();
//# sourceMappingURL=index.js.map