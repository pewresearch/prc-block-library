(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,i=window.wp.element,n=window.wp.blockEditor,s=window.wp.components,l=window.wp.data,o=window.ReactJSXRuntime;function a({attributes:e,setAttributes:t}){const{deviceType:i}=e;return(0,o.jsx)(s.SelectControl,{label:"Pre-Defined Device Ranges",help:"Select a pre-defined device range to quickly set the minimum and maximum values for the responsive range.",value:i,options:[{label:"Devices...",value:null},{label:"Desktop",value:"desktop"},{label:"Tablet",value:"tablet"},{label:"Mobile",value:"mobile"}],onChange:e=>{if(null!==e){console.log("deviceSize",e);const n={desktop:{min:980,max:null},tablet:{min:480,max:979},mobile:{min:null,max:479}},s={deviceType:e,min:n[e].min,max:n[e].max};console.log("payload",s,i,n),t(s)}}})}function r({attributes:e,setAttributes:t,clientId:r}){const{min:c,max:p,additionalStyles:d}=e,{constrainedMax:m,isFirstBlock:u,isLastBlock:x}=(0,l.useSelect)(e=>{const t=e("core/block-editor").getPreviousBlockClientId(r),i=e("core/block-editor").getBlockAttributes(t),n=e("core/block-editor").getBlockRootClientId(r),s=e("core/block-editor").getBlock(n).innerBlocks,l=s[s.length-1].clientId,o=s[0].clientId,a=r===o,c=r===l;let p=null;if(null!==i){const e=i?.min-1;e>0&&(p=e)}return{constrainedMax:p,isFirstBlock:a,isLastBlock:c}}),[b,v]=(0,i.useState)(c),[h,k]=(0,i.useState)(p);return(0,i.useEffect)(()=>{v(c)},[c]),(0,i.useEffect)(()=>{k(p)},[p]),(0,i.useEffect)(()=>{const e=parseInt(b);console.log("Updating min",e),t({min:e})},[b]),(0,i.useEffect)(()=>{const e=0===parseInt(h)?null:parseInt(h);console.log("Updating max",e),t({max:e})},[h]),(0,i.useEffect)(()=>{null===p&&null!==m&&k(m)},[m]),(0,o.jsxs)(n.InspectorControls,{children:[(0,o.jsxs)(s.PanelBody,{title:"Responsive Range",initialOpen:!0,children:[(0,o.jsx)(s.PanelRow,{children:(0,o.jsxs)(s.Flex,{align:"center",justify:"space-between",children:[!x&&(0,o.jsx)(s.FlexBlock,{children:(0,o.jsx)(s.__experimentalNumberControl,{__next40pxDefaultSize:!0,label:"Minimum",value:b,max:h,step:!0,onChange:e=>{v(parseInt(e))}})}),!u&&!x&&(0,o.jsx)(s.FlexItem,{children:(0,o.jsx)("span",{children:(0,o.jsx)("strong",{children:"~ to ~"})})}),!u&&(0,o.jsx)(s.FlexBlock,{children:(0,o.jsx)(s.__experimentalNumberControl,{__next40pxDefaultSize:!0,label:"Maximum",value:h,max:m,step:!0,onChange:e=>{k(parseInt(e))}})})]})}),(0,o.jsx)(s.PanelRow,{children:(0,o.jsx)(a,{attributes:e,setAttributes:t})})]}),(0,o.jsx)(s.PanelBody,{title:"Responsive Styles",initialOpen:!0,children:(0,o.jsx)(s.TextareaControl,{label:"Styles",value:d,onChange:e=>t({additionalStyles:e}),help:"Enter CSS styles that will be applied to the responsive container. Each new class will be prefixed with the block ID. One class per line."})})]})}const c=[["core/html",{}]],p=window.prcIcons,d=[{name:"responsive-container-view",isDefault:!0,title:(0,t.__)("Responsive Container View"),attributes:{min:980,max:0},scope:["inserter"],isActive:({deviceType:e})=>!e},{name:"desktop",title:(0,t.__)("Desktop"),attributes:{deviceType:"desktop",min:980,max:null},scope:["inserter","transform"],isActive:({deviceType:e})=>"desktop"===e},{name:"tablet",title:(0,t.__)("Tablet"),attributes:{deviceType:"tablet",min:480,max:979},scope:["inserter","transform"],isActive:({deviceType:e})=>"tablet"===e},{name:"mobile",title:(0,t.__)("Mobile"),attributes:{deviceType:"mobile",min:0,max:479},scope:["inserter","transform"],isActive:({deviceType:e})=>"mobile"===e}],m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/responsive-container-view","version":"0.1.0","title":"Responsive View","category":"design","description":"A block of blocks that appears and hides at specific viewport widths.","attributes":{"min":{"type":"number"},"max":{"type":"number"},"orientation":{"type":"string","default":"vertical"},"deviceType":{"type":"string","enum":["desktop","tablet","mobile"]},"additionalStyles":{"type":"string"}},"supports":{"anchor":true,"html":false,"spacing":{"blockGap":true,"padding":true},"typography":{"fontSize":true,"__experimentalFontFamily":true}},"parent":["prc-block/responsive-container-controller"],"textdomain":"responsive-container-view","editorScript":"file:./index.js","editorStyle":"file:./index.css","render":"file:./render.php"}'),{name:u}=m,x={icon:function(){return(0,o.jsx)(p.Icon,{icon:"laptop-mobile"})},edit:function({attributes:e,setAttributes:t,clientId:l}){const{min:a,max:p,orientation:d}=e,m=(0,n.useBlockProps)(),u=(0,n.useInnerBlocksProps)({},{orientation:d||"vertical",templateLock:!1,template:c}),x=(0,i.useMemo)(()=>p&&!a?`maximum ${p}px`:!p&&a?`minimum ${a}px`:p&&a?`between ${a}px and ${p}px`:"No range set",[a,p]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r,{attributes:e,setAttributes:t,clientId:l}),(0,o.jsxs)("div",{...m,children:[(0,o.jsx)(s.Notice,{isDismissible:!1,spokenMessage:x,children:(0,o.jsxs)("span",{className:"sans-serif",children:[(0,o.jsx)("strong",{children:"Viewport Range:"})," ",x]})}),(0,o.jsx)("div",{...u})]})]})},save:function(){return(0,o.jsx)(n.InnerBlocks.Content,{})},variations:d};(0,e.registerBlockType)(u,{...m,...x})})();
//# sourceMappingURL=index.js.map