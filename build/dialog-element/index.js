(()=>{"use strict";var e,o={992:()=>{const e=window.wp.i18n,o=window.wp.blocks,t=window.prcIcons,l=window.ReactJSXRuntime,i=window.wp.element,r=(0,i.forwardRef)(({icon:e,size:o=24,...t},l)=>(0,i.cloneElement)(e,{width:o,height:o,...t,ref:l})),a=window.wp.primitives,n=(0,l.jsx)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)(a.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8Zm3.8 10.7-1.1 1.1-2.7-2.7-2.7 2.7-1.1-1.1 2.7-2.7-2.7-2.7 1.1-1.1 2.7 2.7 2.7-2.7 1.1 1.1-2.7 2.7 2.7 2.7Z"})});function s(e){var o,t,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(o=0;o<i;o++)e[o]&&(t=s(e[o]))&&(l&&(l+=" "),l+=t)}else for(t in e)e[t]&&(l&&(l+=" "),l+=t);return l}const c=function(){for(var e,o,t=0,l="",i=arguments.length;t<i;t++)(e=arguments[t])&&(o=s(e))&&(l&&(l+=" "),l+=o);return l},d=window.wp.blockEditor,u=window.wp.components,p=window.wp.data;function b({openDialog:o,closeDialog:t,isOpen:r,clientId:a,attributes:n}){const{dialogPosition:s}=n||{},{selectBlock:c,updateBlockAttributes:b}=(0,p.useDispatch)("core/block-editor"),{rootClientId:g}=(0,p.useSelect)(e=>({rootClientId:e("core/block-editor").getBlockRootClientId(a)}),[]),m=(0,i.useMemo)(()=>r?(0,e.__)("Close Dialog"):(0,e.__)("Edit Dialog"),[r]);return(0,l.jsx)(d.BlockControls,{children:(0,l.jsxs)(u.ToolbarGroup,{children:[(0,l.jsx)(u.ToolbarButton,{label:m,isActive:r,onClick:()=>{r?(c(g),t()):o()},children:m}),(0,l.jsx)(d.__experimentalBlockAlignmentMatrixControl,{label:(0,e.__)("Change dialog position"),value:s,onChange:e=>{b(a,{dialogPosition:e})}})]})})}function g({openDialog:o,closeDialog:t,colors:i,clientId:r,context:a,attributes:n,setAttributes:s}){var c;const{autoActivationTimer:p=-1,animationDuration:b=500,animation:g="fade",dialogSize:m="medium",customBackdropColor:h,enableDeepLink:k=!1}=n||{},{backdropColor:f,setBackdropColor:_}=i,y=(0,d.__experimentalUseMultipleOriginColorsAndGradients)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.InspectorControls,{children:[(0,l.jsxs)(u.PanelBody,{title:(0,e.__)("Dialog Settings","prc-block-library"),children:[(0,l.jsx)(u.SelectControl,{label:"Size",help:"Choose the size of the dialog.",value:m,options:[{label:(0,e.__)("Small","prc-block-library"),value:"small"},{label:(0,e.__)("Medium","prc-block-library"),value:"medium"},{label:(0,e.__)("Large","prc-block-library"),value:"large"}],onChange:e=>{s({dialogSize:e})}}),(0,l.jsx)(u.ToggleControl,{label:(0,e.__)("Enable Deep Linking","prc-block-library"),help:(0,e.__)("Allow the dialog to be opened via a URL hash (e.g., #dialog-id).","prc-block-library"),checked:k,onChange:e=>s({enableDeepLink:e})}),(0,l.jsx)(u.ToggleControl,{label:(0,e.__)("Auto Activation Timer","prc-block-library"),help:(0,e.__)("Automatically open the dialog after the specified time, in milliseconds.","prc-block-library"),checked:1<=p,onChange:e=>s({autoActivationTimer:e?5e3:-1})}),1<=p&&(0,l.jsx)(u.__experimentalNumberControl,{label:"Activation Timer Duration",isShiftStepEnabled:!0,onChange:e=>s({autoActivationTimer:e}),shiftStep:100,value:p})]}),(0,l.jsxs)(u.PanelBody,{title:(0,e.__)("Animation","prc-block-library"),children:[(0,l.jsx)(u.SelectControl,{label:"Dialog Animation",help:"Choose the animation style for the dialog.",value:g,options:[{label:(0,e.__)("Fade","prc-block-library"),value:"fade"},{label:(0,e.__)("Pop","prc-block-library"),value:"pop"},{label:(0,e.__)("Bounce","prc-block-library"),value:"bounce"},{label:(0,e.__)("Slide Down","prc-block-library"),value:"slide"},{label:(0,e.__)("Slide Up","prc-block-library"),value:"slide-up"},{label:(0,e.__)("Slide Left","prc-block-library"),value:"slide-left"},{label:(0,e.__)("Slide Right","prc-block-library"),value:"slide-right"},{label:(0,e.__)("Zoom","prc-block-library"),value:"zoom"}],onChange:e=>{s({animation:e})}}),(0,l.jsx)(u.__experimentalNumberControl,{label:"Animation Duration",help:"The duration of the dialog animation in milliseconds.",isShiftStepEnabled:!0,onChange:e=>s({animationDuration:e}),shiftStep:100,value:b})]})]}),(0,l.jsx)(d.InspectorControls,{group:"color",children:(0,l.jsx)(d.__experimentalColorGradientSettingsDropdown,{settings:[{label:(0,e.__)("Backdrop","prc-block-library"),colorValue:null!==(c=f?.color)&&void 0!==c?c:h,onColorChange:e=>{_(e),s({customBackdropColor:e})}}],panelId:r,hasColorsOrGradients:!1,disableCustomColors:!1,__experimentalIsRenderedInSidebar:!0,...y})})]})}function m({attributes:e,clientId:o}){if(!o)return null;const{customBackdropColor:t,animationDuration:l,dialogPosition:i}=e||{},r={"--wp--style--dialog-backdrop-color":(a=t,a?"object"==typeof a&&a.slug?`var(--wp--preset--color--${a.slug})`:a:null),"--wp--style--dialog-animation-duration":l?`${l}ms`:null};var a;let n=Object.entries(r).filter(([,e])=>!!e).map(([e,o])=>`\t${e}: ${o};`).join("\n");return n+=(e=>{switch(console.log("calculatePositionStyles",e),e){case"top left":return"margin-top: 1em; margin-left: 1em;";case"top center":return"margin-top: 1em;";case"top right":return"margin-top: 1em; margin-right: 1em;";case"center left":return"margin-left: 1em;";case"center right":return"margin-right: 1em;";case"bottom left":return"margin-bottom: 1em; margin-left: 1em;";case"bottom center":return"margin-bottom: 1em;";case"bottom right":return"margin-bottom: 1em; margin-right: 1em;";default:return""}})(i),n.length&&(0,d.useStyleOverride)({css:`#block-${o} {\n${n}\n}`}),null}const h={id:null,dialogs:{}},k="prc-block/dialog";(0,p.createReduxStore)(k,{reducer:(e=h,o)=>{switch(o.type){case"INIT_DIALOG":{const{id:t}=o;return t?{...e,id:t,dialogs:{...e.dialogs,[t]:{isOpen:!1,closingModal:!1}}}:e}case"DESTROY_DIALOG":{const{id:t}=o;if(!t)return e;const l={...e.dialogs};delete l[t];let i=e.id;return e.id===t&&(i=Object.keys(l)[0]||null),{...e,id:i,dialogs:l}}case"OPEN_DIALOG":{let t=o.id;return t||(t=e.id),t?{...e,dialogs:{...e.dialogs,[t]:{...e.dialogs[t],isOpen:!0,closingModal:!1}}}:e}case"CLOSE_DIALOG":{let t=o.id;return t||(t=e.id),t?{...e,dialogs:{...e.dialogs,[t]:{...e.dialogs[t],isOpen:!1,closingModal:!0}}}:e}default:return e}},actions:{init:e=>({type:"INIT_DIALOG",id:e}),destroy:e=>({type:"DESTROY_DIALOG",id:e}),open:(e=!1)=>({type:"OPEN_DIALOG",id:e}),close:(e=!1)=>({type:"CLOSE_DIALOG",id:e})},selectors:{isOpen:(e,o)=>!(!o||!e.dialogs[o])&&e.dialogs[o].isOpen,isClosingModal:(e,o)=>!(!o||!e.dialogs[o])&&e.dialogs[o].closingModal}});const f=(0,d.withColors)({backdropColor:"backdrop-color"})(function({attributes:e,setAttributes:o,context:t,clientId:a,className:s,backdropColor:h,setBackdropColor:f}){const{dialogSize:_="medium",animation:y="fade"}=e,{selectBlock:C}=(0,p.useDispatch)(d.store),{init:v,destroy:x,open:w,close:D}=(0,p.useDispatch)(k),{rootClientId:O,isOpen:S,isClosingModal:j}=(0,p.useSelect)(e=>({rootClientId:e(d.store).getBlockRootClientId(a),isOpen:e(k).isOpen(a),isClosingModal:e(k).isClosingModal(a)}),[a]),I=(0,i.useRef)(null);(0,i.useEffect)(()=>(v(a),()=>{x(a)}),[a,v,x]),(0,i.useEffect)(()=>{I.current&&(S&&!I.current.open?I.current.showModal():!S&&I.current.open&&I.current.close())},[S]);const A=()=>w(a),B=()=>{D(a),C(O)},L=(0,d.useBlockProps)({ref:I,className:c(s,{"is-size-small":"small"===_,"is-size-medium":"medium"===_,"is-size-large":"large"===_,[`is-animation-${y}`]:y,"is-closing-modal":j}),role:"dialog","aria-modal":"true","aria-labelledby":""}),E=(0,d.useInnerBlocksProps)({className:"wp-block-prc-block-dialog-element__inner"},{templateLock:!1,__experimentalCaptureToolbars:!0});return(0,l.jsx)(u.KeyboardShortcuts,{bindGlobal:!0,shortcuts:{esc:e=>{e.preventDefault(),B()}},children:(0,l.jsxs)("dialog",{...L,children:[(0,l.jsx)(m,{attributes:e,clientId:a}),(0,l.jsx)(g,{colors:{backdropColor:h,setBackdropColor:f},openDialog:A,closeDialog:B,clientId:a,context:t,attributes:e,setAttributes:o}),(0,l.jsx)(b,{openDialog:A,closeDialog:B,isOpen:S,clientId:a,attributes:e}),(0,l.jsx)("button",{className:"wp-block-prc-block-dialog-element__close-button",type:"button","aria-label":"Close dialog",onClick:()=>B(),children:(0,l.jsx)(r,{icon:n})}),(0,l.jsx)("div",{...E})]})})}),_=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/dialog-element","version":"1.1.0","title":"Dialog Element","category":"media","attributes":{"dialogLabel":{"type":"string","default":""},"backdropColor":{"type":"string"},"customBackdropColor":{"type":"string"},"autoActivateOnRender":{"type":"boolean","default":false},"animation":{"type":"string","enum":["fade","pop","bounce","slide","slide-up","slide-left","slide-right","zoom"],"default":"fade"},"animationDuration":{"type":"number","default":500},"autoActivationTimer":{"type":"number","default":-1},"enableDeepLink":{"type":"boolean","default":false},"dialogSize":{"type":"string","enum":["small","medium","large"],"default":"small"},"dialogPosition":{"type":"string","enum":["center","top","bottom","center left","center right","top left","top right","bottom left","bottom right"],"default":"center"}},"supports":{"html":false,"align":false,"inserter":false,"animations":true,"color":{"background":true,"text":true,"link":true,"enableContrastChecker":true,"gradients":true},"layout":{"allowEditing":true},"shadow":true,"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true},"spacing":{"blockGap":true,"padding":true},"typography":{"fontSize":true,"__experimentalFontFamily":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}},"interactivity":true},"usesContext":["dialog/id","dialog/className"],"providesContext":{"dialog/label":"dialogLabel"},"parent":["prc-block/dialog"],"textdomain":"dialog-element","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScriptModule":"file:./view.js"}'),{name:y}=_,C={icon:function(){return(0,l.jsx)(t.Icon,{icon:"window-restore"})},edit:f,save:function({attributes:e}){return(0,l.jsx)(d.InnerBlocks.Content,{})}};(0,o.registerBlockType)(y,{..._,...C}),(0,o.registerBlockBindingsSource)({name:"prc-block/dialog-element-label",label:(0,e.__)("Dialog Element Label","prc-block-library"),usesContext:[],getValues({context:o}){var t;const l=null!==(t=o["dialog/label"])&&void 0!==t?t:null;return l?{content:l}:{placeholder:(0,e.__)("Add a dialog label…","prc-block-library")}},setValues({select:e,dispatch:o,bindings:t}){const{newValue:l}=t.content,{getSelectedBlockClientId:i,getBlockRootClientId:r,getBlockName:a}=e(d.store),{updateBlockAttributes:n}=o(d.store),s=i();if(!s)return;const c=r(s);c&&"prc-block/dialog-element"===a(c)&&n(c,{dialogLabel:l})},canUserEditValue:()=>!0}),(0,o.registerBlockVariation)("core/heading",{name:"prc-block-dialog-element-label",title:(0,e.__)("Dialog Label","prc-block-library"),description:(0,e.__)("Displays and edits the dialog element label (for accessibility).","prc-block-library"),attributes:{placeholder:(0,e.__)("Add a dialog label…","prc-block-library"),level:2,metadata:{bindings:{content:{source:"prc-block/dialog-element-label"}}}},ancestor:["prc-block/dialog-element"],isActive:(e,o)=>e.metadata?.bindings?.content?.source===o.metadata?.bindings.content.source})}},t={};function l(e){var i=t[e];if(void 0!==i)return i.exports;var r=t[e]={exports:{}};return o[e](r,r.exports,l),r.exports}l.m=o,e=[],l.O=(o,t,i,r)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){for(var[t,i,r]=e[d],n=!0,s=0;s<t.length;s++)(!1&r||a>=r)&&Object.keys(l.O).every(e=>l.O[e](t[s]))?t.splice(s--,1):(n=!1,r<a&&(a=r));if(n){e.splice(d--,1);var c=i();void 0!==c&&(o=c)}}return o}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,i,r]},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};l.O.j=o=>0===e[o];var o=(o,t)=>{var i,r,[a,n,s]=t,c=0;if(a.some(o=>0!==e[o])){for(i in n)l.o(n,i)&&(l.m[i]=n[i]);if(s)var d=s(l)}for(o&&o(t);c<a.length;c++)r=a[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(d)},t=globalThis.webpackChunk_prc_block_library=globalThis.webpackChunk_prc_block_library||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var i=l.O(void 0,[350],()=>l(992));i=l.O(i)})();
//# sourceMappingURL=index.js.map