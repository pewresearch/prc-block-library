import{getContext as e,getElement as o,store as n,withScope as i,withSyncEvent as t}from"@wordpress/interactivity";const{actions:l,state:s}=n("prc-block/dialog",{state:{get id(){const o=e();return o?.id},get activationTimerDuration(){const{id:o}=e();return s.dialogs[o].activationTimerDuration},get animationDuration(){const{id:o}=e();return s.dialogs[o].animationDuration},get dialogElement(){const{id:o}=e();return document.getElementById(o)},get isOpen(){const{id:o}=e();return s.dialogs[o].isOpen},get isClosing(){const{id:o}=e();return s[o].isClosing},get enableDeepLink(){const{id:o}=e();return s.dialogs[o].enableDeepLink}},actions:{closeAll:()=>{const{dialogs:e}=s;Object.keys(e).forEach(o=>{"object"==typeof e[o]&&e[o].hasOwnProperty("isOpen")&&(s.dialogs[o].isOpen=!1)})},onClickOpen:t(e=>{e.preventDefault();const{id:o}=s;l.open(o)}),onClickClose:t(e=>{e.preventDefault();const{id:o}=s;l.close(o)}),open:(e=!1)=>{let o=e;o||(o=s.id),o&&(console.log("dialog/element open() for id:",o),s.dialogs[o].isOpen=!0,s.dialogs[o].closingModal=!1)},close:(e=!1)=>{let o=e;o||(o=s.id),o&&(console.log("dialog/element close() for id:",o),s.dialogs[o].isOpen=!1)}},callbacks:{onESCKey:e=>{const{id:o,isOpen:n}=s;o&&"Escape"===e.key&&!0===n&&(e.preventDefault(),l.close(o))},onOpen:()=>{const{dialogElement:e,isOpen:o,id:n,enableDeepLink:i}=s;n&&e&&o&&(i&&function(e){const o=new URL(window.location.href);o.searchParams.set("dialogId",e),window.history.replaceState({},"",o)}(n),console.log("dialog/element callbacks.onOpen for id:",n),e?.showModal())},onClose:()=>{const{dialogElement:e,isOpen:o,id:n,animationDuration:t}=s;n&&e&&(o||(s.dialogs[n].isClosing=!0,setTimeout(i(()=>{e?.close(),function(){const e=new URL(window.location.href);e.searchParams.delete("dialogId"),window.history.replaceState({},"",e)}(),console.log("dialog/element callbacks.onClose for id:",n),s.dialogs[n].isClosing=!1,s.dialogs[n].isOpen=!1}),t)))},onBackdropClick:t(e=>{const{ref:n}=o(),i=n.getBoundingClientRect();if(e.clientX>=i.left&&e.clientX<=i.right&&e.clientY>=i.top&&e.clientY<=i.bottom)return;if(!0!==s.isOpen)return;const{id:t}=s;console.log("dialog/element callbacks.onBackdropClick for id:",t),l.close(t)}),onAutoActivation:()=>{const{id:e,activationTimerDuration:o,dialogs:n}=s;if(!e&&!o&&-1!==o)return;const t=Object.keys(n);for(let e=0;e<t.length;e++)if(n[t[e]].isOpen)return;1<=o&&setTimeout(i(()=>{l.closeAll(),l.open(e)}),o)}}});
//# sourceMappingURL=view.js.map