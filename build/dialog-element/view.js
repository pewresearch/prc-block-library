import{getContext as e,getElement as i,store as o,withScope as t,withSyncEvent as n}from"@wordpress/interactivity";const{actions:s,state:l}=o("prc-block/dialog",{state:{get id(){const i=e();return i?.id},get dialog(){return l.dialogs[l.id]},get dialogElement(){const i=e();if(!i?.id)return null;const{id:o}=i;return document.getElementById(o)}},actions:{closeAll:()=>{const{dialogs:e}=l;Object.keys(e).forEach(i=>{"object"==typeof e[i]&&e[i].hasOwnProperty("isOpen")&&(l.dialogs[i].isOpen=!1)})},onClickOpen:n(e=>{e.preventDefault();const{id:i}=l;s.open(i)}),onClickClose:n(e=>{e.preventDefault();const{id:i}=l;s.close(i)}),open:(e=!1)=>{let i=e;i||(i=l.id),i&&(l.dialogs[i].isOpen=!0,l.dialogs[i].closingModal=!1)},close:(e=!1)=>{let i=e;i||(i=l.id),i&&(l.dialogs[i].isOpen=!1)}},callbacks:{onESCKey:n(e=>{const{id:i,dialog:o}=l;i&&"Escape"===e.key&&!0===o.isOpen&&(e.preventDefault(),s.close(i))}),onOpen:()=>{const{dialogElement:e,dialog:i,id:o}=l;o&&e&&i.isOpen&&(i.enableDeepLink&&function(e){const i=new URL(window.location.href);i.searchParams.set("dialogId",e),window.history.replaceState({},"",i)}(o),e?.showModal())},onClose:()=>{const{dialogElement:e,dialog:i,id:o}=l;o&&e&&(i.isOpen||i.isClosing||e.open&&(l.dialogs[o].isClosing=!0,setTimeout(t(()=>{e?.close(),function(){const e=new URL(window.location.href);e.searchParams.delete("dialogId"),window.history.replaceState({},"",e)}(),l.dialogs[o].isClosing=!1,l.dialogs[o].isOpen=!1}),i.animationDuration)))},onBackdropClick:n(e=>{const{ref:o}=i(),t=o.getBoundingClientRect();if(e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=t.top&&e.clientY<=t.bottom)return;const{dialog:n,id:a}=l;!0!==n.isOpen||n.isClosing||s.close(a)}),onInit:()=>{const{id:e,dialog:i,dialogs:o}=l;if(!e&&!i.activationTimerDuration&&-1!==i.activationTimerDuration)return;const n=Object.keys(o);for(let e=0;e<n.length;e++)if(o[n[e]].isOpen)return;1<=i.activationTimerDuration&&setTimeout(t(()=>{s.closeAll(),s.open(e)}),i.activationTimerDuration)}}});
//# sourceMappingURL=view.js.map