import{getContext as e,getElement as o,store as t,withScope as n,withSyncEvent as l}from"@wordpress/interactivity";const{state:s,actions:i}=t("prc-block/carousel-controller",{state:{lastScrollY:0,scrollLocking:!1,bodyObj:null,hasEngaged:!1,scrollLockTimeout:null,wheelTimeout:null,get isInsideCover(){const{ref:e}=o();return null!==e.closest(".wp-block-cover")},get coverRef(){const{ref:e}=o();return e.closest(".wp-block-cover")},get isVertical(){return"vertical"===e().orientation},get track(){const{id:o}=e();return document.getElementById(o).querySelector(".prc-block-carousel-controller__track__inner")},get hasNextSlide(){const{slideIndex:o,count:t}=e();return o<t-1},get hasPreviousSlide(){const{slideIndex:o}=e();return o>0},get trackStyle(){const{containerMinHeight:o}=e();return`min-height: ${o}px;`},get isActive(){const{index:o,slideIndex:t}=e();return o===t}},actions:{navigateToSlide:o=>{const{track:t,isVertical:n}=s;e().slideIndex=o,t.scrollTo({[n?"top":"left"]:o*t.offsetWidth,behavior:"smooth"})},goToDot:()=>{const o=e(),{dot:t}=o,{index:n}=t;i.navigateToSlide(n)},goToNextSlide:()=>{const o=e(),{count:t,slideIndex:n}=o,l=t===n+1?0:n+1;i.navigateToSlide(l)},goToPreviousSlide:()=>{const o=e(),{slideIndex:t,count:n}=o,l=0===t?n-1:t-1;i.navigateToSlide(l)},resetCarousel:()=>{i.navigateToSlide(0)}},callbacks:{onInit:()=>{const{track:o}=s,t=e(),{orientation:i,count:r}=t,c=(o.querySelectorAll(".wp-block-prc-block-carousel-slide"),"vertical"===i);let d;s.bodyObj=document.body,o.addEventListener("scroll",n(l(e=>{clearTimeout(d),d=setTimeout(()=>{const e=c?o.clientHeight:o.clientWidth,n=c?o.scrollHeight:o.scrollWidth,l=c?o.scrollTop:o.scrollLeft,s=n-e,i=s?l/s:0,d=Math.round(i*(r-1)),a=Math.max(0,Math.min(d,r-1));t.slideIndex=a},10)}))),s.isInsideCover||(t.enabled=!0)},isDotActive:()=>{const t=e(),{attributes:n}=o(),l=parseInt(n["data-slide-index"],10);return t.slideIndex===l},onMouseEnter:l(()=>{const o=e();console.log("onMouseEnter::",o),o.isSelected=!0}),onMouseLeave:l(()=>{const o=e();console.log("onMouseLeave::",o),o.isSelected=!1}),onCoverFinalSideDisable:()=>{const{ref:t}=o(),n=e(),{slideIndex:l,count:s}=n;t.closest(".wp-block-cover")&&l===s-1&&(n.enabled=!1)},onCoverScroll:()=>{const{isInsideCover:o,coverRef:t}=s,l=e();if(o){const e=t.getBoundingClientRect(),o=e.bottom,r=e.top;r<=0&&o>0&&window.scrollY>s.lastScrollY&&!s.hasEngaged&&(l.enabled=!0,s.bodyObj.style.overflow="hidden",s.hasEngaged=!0,setTimeout(n(()=>{s.bodyObj.style.overflow="auto"}),2e3)),(o<=0||r>=window.innerHeight)&&setTimeout(n(()=>{s.hasEngaged=!1,i.resetCarousel()}),2e3),s.lastScrollY=window.scrollY}}}});
//# sourceMappingURL=view.js.map