(()=>{"use strict";var e,t={379:()=>{const e=window.wp.blocks,t=window.wp.element,a=window.wp.blockEditor,i=window.wp.data,l=window.wp.components,r=window.ReactJSXRuntime;function n({attributes:e,setAttributes:t,clientId:i,ticks:n=[]}){const{autoPlayInterval:s,enableAutoPlay:o,tickMarkInterval:c,tickMarkHeight:d,showAllTickMarks:p,hideLastTick:u,tickLabelAngle:k,visibleTicks:m=[]}=e;return(0,r.jsxs)(a.InspectorControls,{children:[(0,r.jsxs)(l.PanelBody,{title:"Playback Controls",children:[(0,r.jsx)(l.ToggleControl,{label:"Auto Play",checked:o,onChange:()=>t({enableAutoPlay:!o})}),(0,r.jsx)(l.RangeControl,{label:"Interval (seconds)",value:s/1e3,onChange:e=>t({autoPlayInterval:1e3*e}),min:1,max:10,step:.5,marks:[{value:1,label:"1s"},{value:3,label:"3s"},{value:5,label:"5s"},{value:10,label:"10s"}]})]}),(0,r.jsxs)(l.PanelBody,{title:"Tick Mark Controls",children:[(0,r.jsx)(l.ToggleControl,{label:"Show All Tick Marks",checked:p,onChange:()=>t({showAllTickMarks:!p}),help:"When enabled, all tick marks are shown regardless of density. When disabled, tick marks are filtered based on the interval setting."}),!p&&(0,r.jsx)(l.RangeControl,{label:"Tick Mark Interval",value:c,onChange:e=>t({tickMarkInterval:e}),min:1,max:10,step:1,help:"Display every Nth tick mark. For example, 2 shows every other tick, 5 shows every 5th tick."}),(0,r.jsx)(l.ToggleControl,{label:"Hide Last Tick",checked:u,onChange:()=>t({hideLastTick:!u}),help:"Hide the last tick mark on the timeline."}),(0,r.jsx)(l.RangeControl,{label:"Tick Mark Height (px)",value:d,onChange:e=>t({tickMarkHeight:e}),min:4,max:20,step:1,help:"Adjust the height of the tick marks on the timeline."}),(0,r.jsx)(l.AnglePickerControl,{label:"Tick Label Angle",value:k,onChange:e=>t({tickLabelAngle:e}),help:"Rotate the tick labels to prevent overlap or improve readability."})]}),(0,r.jsx)(l.PanelBody,{title:"Specific Tick Selection",initialOpen:!1,children:(0,r.jsxs)(l.BaseControl,{help:"Select which specific ticks to display. When any ticks are selected, this overrides other visibility settings.",children:[0===n.length&&(0,r.jsx)("p",{style:{fontStyle:"italic",color:"#757575"},children:"No timeline slides added yet."}),n.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsx)(l.Button,{isSmall:!0,variant:"secondary",onClick:()=>{t({visibleTicks:[]})},children:"Clear Selection"}),(0,r.jsx)(l.Button,{isSmall:!0,variant:"secondary",onClick:()=>{t({visibleTicks:n.map((e,t)=>t)})},style:{marginLeft:"8px"},children:"Select All"})]}),(0,r.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"2px",padding:"8px"},children:n.map((e,a)=>{const{metadata:i}=e.attributes,{name:n}=i,s=n||`Tick ${a+1}`,o=m.includes(a);return(0,r.jsx)(l.ToggleControl,{label:s,checked:o,onChange:()=>{const e=o?m.filter(e=>e!==a):[...m,a].sort((e,t)=>e-t);t({visibleTicks:e})}},e.clientId)})})]})]})})]})}const s=window.prcIcons,o={from:[{type:"block",blocks:["prc-block/tabs"],priority:1,transform:(t,a)=>{const i=[];return a.forEach(e=>{const{label:t}=e.attributes,a={name:"prc-block/timeline-slide",attributes:{metadata:{name:t}},innerBlocks:e.innerBlocks};i.push(a)}),(0,e.createBlock)("prc-block/timeline",{},(0,e.createBlocksFromInnerBlocksTemplate)(i))}}],to:[{type:"block",blocks:["prc-block/tabs"],transform:(t,a)=>{const i=[];return a.forEach(t=>{const{metadata:a}=t.attributes,{name:l}=a;i.push((0,e.createBlock)("prc-block/tab",{label:l,metadata:{...a}},t.innerBlocks))}),(0,e.createBlock)("prc-block/tabs",{},i)}},{type:"block",blocks:["core/group"],transform:(t,a)=>{const i=[];return a.forEach(t=>{i.push((0,e.createBlock)("core/group",{metadata:{...t.attributes.metadata}},t.innerBlocks))}),(0,e.createBlock)("core/group",{},i)}},{type:"block",blocks:["core/details"],transform:(t,a)=>{const i=[];return a.forEach(t=>{const{metadata:a}=t.attributes,{name:l}=a;i.push((0,e.createBlock)("core/details",{summary:l,metadata:{...a}},t.innerBlocks))}),(0,e.createBlock)("core/group",{},i)}}]},c=window.wp.i18n,d=(e=2e3,t=2025)=>{const a=[];for(let i=e;i<t;i++){const e=["prc-block/timeline-slide",{metadata:{name:i.toString()}},[["core/paragraph",{placeholder:"Add content to timeline slide here..."}]]];a.push([...e])}return a},p=[{name:"timeline-2000",title:(0,c.__)("Timeline: 2000","prc-block-library"),excerpt:(0,c.__)("Display content in a timeline that starts 25 years ago.","prc-block-library"),attributes:{className:"starting-point-2000"},category:"media",innerBlocks:d(2e3,2025),scope:["inserter","transform"],isActive:({className:e})=>!!e&&e.includes("starting-point-2000")},{name:"timeline-1990",title:(0,c.__)("Timeline: 1990","prc-block-library"),excerpt:(0,c.__)("Display content in a timeline that starts 35 years ago.","prc-block-library"),attributes:{className:"starting-point-1990"},category:"media",innerBlocks:d(1990,2025),scope:["inserter","transform"],isActive:({className:e})=>!!e&&e.includes("starting-point-1990")},{name:"timeline-1980",title:(0,c.__)("Timeline: 1980","prc-block-library"),excerpt:(0,c.__)("Display content in a timeline that starts 45 years ago.","prc-block-library"),attributes:{className:"starting-point-1980"},category:"media",innerBlocks:d(1980,2025),scope:["inserter","transform"],isActive:({className:e})=>!!e&&e.includes("starting-point-1980")},{name:"timeline-1970",title:(0,c.__)("Timeline: 1970","prc-block-library"),excerpt:(0,c.__)("Display content in a timeline that starts 55 years ago.","prc-block-library"),attributes:{className:"starting-point-1970"},category:"media",innerBlocks:d(1970,2025),scope:["inserter","transform"],isActive:({className:e})=>!!e&&e.includes("starting-point-1970")}],u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/timeline","version":"0.1.0","title":"Timeline","category":"design","description":"Display a series of blocks in a timeline","allowedBlocks":["prc-block/timeline-slide"],"attributes":{"defaultLabel":{"type":"string","default":"Timeline"},"currentActiveIndex":{"type":"number","default":0},"enableAutoPlay":{"type":"boolean","default":false},"autoPlayInterval":{"type":"number","default":3000},"tickMarkInterval":{"type":"number","default":1},"tickMarkHeight":{"type":"number","default":8},"showAllTickMarks":{"type":"boolean","default":false},"hideLastTick":{"type":"boolean","default":false},"tickLabelAngle":{"type":"number","default":0},"visibleTicks":{"type":"array","default":[]}},"supports":{"anchor":true,"html":false,"interactivity":true,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"typography":{"fontSize":true,"__experimentalFontFamily":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}},"providesContext":{"timeline/currentActiveIndex":"currentActiveIndex"},"textdomain":"timeline","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","render":"file:./render.php","viewScriptModule":"file:./view.js"}'),{name:k}=u,m={icon:function(){return(0,r.jsx)(s.Icon,{icon:"timeline"})},edit:function({attributes:e,setAttributes:l,clientId:s,isSelected:o}){const{currentActiveIndex:c,tickMarkInterval:d,tickMarkHeight:p,showAllTickMarks:u,hideLastTick:k,tickLabelAngle:m,visibleTicks:h}=e,b=(0,t.useRef)(),{selectBlock:g,updateBlockAttributes:y}=(0,i.useDispatch)(a.store),{maxSteps:v,ticks:f}=(0,i.useSelect)(e=>({maxSteps:e(a.store).getBlocks(s).length,ticks:e(a.store).getBlocks(s)}),[s]),x=(0,t.useMemo)(()=>f.map(e=>e.clientId),[f]),w=(0,t.useMemo)(()=>f.map((e,t)=>{const a=f.length;return a>1?t/(a-1)*100:0}),[f]),T=(0,t.useCallback)(e=>{l({currentActiveIndex:e}),g(x[e],x,e)},[l,g,x]),j=(0,t.useMemo)(()=>u||1!==d,[u,d]),B=(0,t.useMemo)(()=>{return j?"sparse":(e=f?.length,e<=10?"sparse":e<=20?"medium":e<=40?"dense":"very-dense");var e},[f,j]),A=(0,a.useBlockProps)({"data-tick-density":B,"data-show-all-ticks":u?"true":"false","data-manual-control":j?"true":"false",style:{"--tick-height":`${p}px`,"--tick-label-angle":`${null!=m?m:0}deg`}}),C=(0,a.useInnerBlocksProps)({},{__experimentalCaptureToolbars:!0,clientId:s,orientation:"horizontal"});return(0,t.useEffect)(()=>{const e=b.current,t=function(){const{value:e}=this;T(e-1)};return e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},[T,g]),(0,t.useEffect)(()=>{c&&(console.log("Update slider value to match currentActiveIndex"),b.current.value=c)},[c]),(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(n,{attributes:e,setAttributes:l,clientId:s,ticks:f}),(0,r.jsxs)("div",{...A,children:[(0,r.jsxs)("div",{className:"tick-slider",children:[(0,r.jsx)("ul",{className:"ticks",children:f.map((e,t)=>{const{metadata:i}=e.attributes,{name:l}=i,n=w[t],s=0===t,o=t===f.length-1,c=s||o,p=k&&o,m=h&&h.length>0,b=m&&h.includes(t),g=!p&&(m?b:u||c||t%d===0);return(0,r.jsx)("li",{className:"tick",role:"presentation",style:{left:`${n}%`,opacity:g?1:0,pointerEvents:g?"auto":"none"},children:(0,r.jsx)(a.RichText,{tagName:"span",onChange:t=>y(e.clientId,{metadata:{...i,name:t}}),placeholder:"Tick",value:l,withoutInteractiveFormatting:!0})},e.clientId)})}),(0,r.jsx)("div",{className:"timeline-controls",children:(0,r.jsx)("input",{ref:b,type:"range",min:1,max:v,value:c})})]}),C.children]})]})},save:function(){return(0,r.jsx)(a.InnerBlocks.Content,{})},transforms:o,variations:p};(0,e.registerBlockType)(k,{...u,...m})}},a={};function i(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,a,l,r)=>{if(!a){var n=1/0;for(d=0;d<e.length;d++){for(var[a,l,r]=e[d],s=!0,o=0;o<a.length;o++)(!1&r||n>=r)&&Object.keys(i.O).every(e=>i.O[e](a[o]))?a.splice(o--,1):(s=!1,r<n&&(n=r));if(s){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,l,r]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[n,s,o]=a,c=0;if(n.some(t=>0!==e[t])){for(l in s)i.o(s,l)&&(i.m[l]=s[l]);if(o)var d=o(i)}for(t&&t(a);c<n.length;c++)r=n[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},a=globalThis.webpackChunk_prc_block_library=globalThis.webpackChunk_prc_block_library||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=i.O(void 0,[350],()=>i(379));l=i.O(l)})();
//# sourceMappingURL=index.js.map