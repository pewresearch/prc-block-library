import{getContext as t,store as e}from"@wordpress/interactivity";const{actions:i}=e("prc-block/timeline",{actions:{togglePlay:()=>{const e=t();e.isPlaying=!e.isPlaying;const n=document.querySelector(`#${e.id} .play-pause-button`);n&&n.setAttribute("aria-pressed",e.isPlaying),e.isPlaying?i.startAutoPlay():i.stopAutoPlay()},startAutoPlay:()=>{const e=t(),{id:i,ticks:n,interval:a}=e,l=document.getElementById(i);e.intervalId=setInterval(()=>{let t=parseInt(l.value);t>=n.length-1?t=0:t++,l.value=t;const i=n[t];e.activeTickId=i.id},a)},stopAutoPlay:()=>{const e=t();e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.isPlaying=!1)},activateTick:()=>{i.stopAutoPlay();const e=t(),{tick:n}=e,{id:a}=n;e.activeTickId=a;const l=document.querySelector(`[data-tick-id="${a}"]`);l&&l.focus();const c=document.getElementById(e.id),s=e.ticks.findIndex(t=>t.id===a);c.value=s}},callbacks:{onInit:()=>{const e=t(),{id:n,ticks:a,isPlaying:l}=e,c=document.getElementById(n);c.addEventListener("input",t=>{const i=parseFloat(t.target.value),n=Math.min(Math.round(i/(a.length-1)*(a.length-1)),a.length-1),l=a[n];e.activeTickId=l.id}),c.addEventListener("change",t=>{const i=parseFloat(t.target.value),n=Math.min(Math.round(i/(a.length-1)*(a.length-1)),a.length-1);c.value=n;const l=a[n];e.activeTickId=l.id}),l&&i.startAutoPlay()},isTimelineSlideActive:()=>{const e=t(),{id:i,activeTickId:n}=e;return i===n},autoPlayButtonText:()=>t().isPlaying?"Pause":"Play",getTickPosition:()=>{const e=t(),{tick:i}=e;return`left: ${i.position}%`},isTickHidden:()=>{const e=t(),{tick:i}=e;return!i.visible}}});
//# sourceMappingURL=view.js.map