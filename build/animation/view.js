import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},i={},t.d(i,n),i);var n,i;function r(e,t){return Math.random()*(t-e)+e}const{state:a,actions:s}=(0,o.store)("prc-block/animation",{state:{get isAnimating(){const e=(0,o.getContext)();if(console.log("isAnimating",{...e}),!e)return!1;const{id:t}=e;return!!t&&!!a[t]&&a[t].enabled}},actions:{*explodeConfettiFireworks(e){if(console.log("explodeConfettiFireworks",{...a}),!a.isAnimating)return;const t=(0,o.getContext)();console.log("Confetti Fireworks!",{...t,speed:e});var n=e,i=Date.now()+n,s={startVelocity:30,spread:360,ticks:60,zIndex:0},c=setInterval((0,o.withScope)((()=>{var e=i-Date.now();if(e<=0)return clearInterval(c);var o=e/n*50;confetti({...s,particleCount:o,origin:{x:r(.1,.3),y:Math.random()-.2}}),confetti({...s,particleCount:o,origin:{x:r(.7,.9),y:Math.random()-.2}}),t.enabled=!1})),250)},*explodeConfettiFromCenterOfScreen(e){if(!a.isAnimating)return;const t=(0,o.getContext)();console.log("Center Confetti Explosion!",{...t,speed:e}),confetti({particleCount:100,spread:360,startVelocity:30,gravity:.8,ticks:100,origin:{x:.5,y:.5},colors:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"],shapes:["square","circle"],scalar:1.2}),setTimeout((()=>{confetti({particleCount:50,spread:270,startVelocity:25,gravity:.9,ticks:80,origin:{x:.5,y:.5},colors:["#FF69B4","#00CED1","#FFD700","#32CD32"],shapes:["circle"],scalar:.8}),setTimeout((0,o.withScope)((()=>{t.enabled=!1})),2e3)}),200)},*explodeEmojiFireworks(e,t){if(!a.isAnimating)return;const n=(0,o.getContext)();console.log("Emoji Fireworks!",{...n,emoji:e,speed:t});const i=confetti.shapeFromText({text:e,scalar:1.2});var s=t,c=Date.now()+s,l={startVelocity:30,spread:360,ticks:60,zIndex:0,shapes:[i]},d=setInterval((0,o.withScope)((()=>{var e=c-Date.now();if(e<=0)return clearInterval(d);var t=e/s*50;confetti({...l,particleCount:t,origin:{x:r(.1,.3),y:Math.random()-.2}}),confetti({...l,particleCount:t,origin:{x:r(.7,.9),y:Math.random()-.2}}),n.enabled=!1})),250)},*explodeEmojiFromCenterOfScreen(e,t){if(!a.isAnimating)return;const n=(0,o.getContext)();console.log("Emoji Explosion!",{...n,emoji:e,speed:t});const i=confetti.shapeFromText({text:e,scalar:1.2});confetti({particleCount:100,spread:360,startVelocity:30,gravity:.8,ticks:100,origin:{x:.5,y:.5},shapes:[i],scalar:1.2}),setTimeout((()=>{confetti({particleCount:50,spread:270,startVelocity:25,gravity:.9,ticks:80,origin:{x:.5,y:.5},shapes:[i],scalar:.8}),setTimeout((0,o.withScope)((()=>{n.enabled=!1})),2e3)}),200)},*rainConfetti(e){if(!a.isAnimating)return;const t=(0,o.getContext)();console.log("Confetti Rain!",{...t,speed:e});var n=e,i=Date.now()+n,s={startVelocity:10,spread:45,ticks:60,zIndex:0,gravity:1.2,colors:["#3498db","#2980b9","#5dade2","#85c1e9","#aed6f1","#d6eaf8"],shapes:["square","circle"],scalar:.6},c=setInterval((0,o.withScope)((()=>{var e=i-Date.now();if(e<=0)return clearInterval(c),void(t.enabled=!1);var o=e/n*15;for(let e=0;e<5;e++)setTimeout((()=>{confetti({...s,particleCount:o/5,origin:{x:r(.1,.9),y:-.1}})}),100*e)})),200)},*rainEmoji(e,t){if(!a.isAnimating)return;const n=(0,o.getContext)();console.log("Emoji Rain!",{...n,emoji:e,speed:t});const i=confetti.shapeFromText({text:e,scalar:1});var s=t,c=Date.now()+s,l={startVelocity:10,spread:45,ticks:60,zIndex:0,gravity:1.2,shapes:[i],scalar:.8},d=setInterval((0,o.withScope)((()=>{var e=c-Date.now();if(e<=0)return clearInterval(d),void(n.enabled=!1);var t=e/s*15;for(let e=0;e<5;e++)setTimeout((()=>{confetti({...l,particleCount:t/5,origin:{x:r(.1,.9),y:-.1}})}),100*e)})),200)}},callbacks:{*onAnimate(){if(!a.isAnimating)return;const e=(0,o.getContext)(),{id:t}=e,{animation:n,effect:i,emoji:r,speed:c}=a[t],{ref:l}=(0,o.getElement)(),{parentElement:d}=l;d.getAttribute("hidden")?console.info("Parent Element for Animation is Hidden, failing over and not running animation"):(console.log("onAnimate",{state:a[t],ref:l}),l&&(yield new Promise(((e,t)=>{const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js",o.onload=e,o.onerror=t,document.head.appendChild(o)})),"confetti"===n&&"fireworks"===i&&(yield s.explodeConfettiFireworks(c)),"confetti"===n&&"center"===i&&(yield s.explodeConfettiFromCenterOfScreen(c)),"confetti"===n&&"rain"===i&&(yield s.rainConfetti(c)),"emoji"===n&&"center"===i&&(yield s.explodeEmojiFromCenterOfScreen(r,c)),"emoji"===n&&"fireworks"===i&&(yield s.explodeEmojiFireworks(r,c)),"emoji"===n&&"rain"===i&&(yield s.rainEmoji(r,c))))}}});
//# sourceMappingURL=view.js.map