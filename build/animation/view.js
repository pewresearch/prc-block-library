import{getContext as e,getElement as t,store as i,withScope as n}from"@wordpress/interactivity";function o(e,t){return Math.random()*(t-e)+e}const{state:r,actions:a}=i("prc-block/animation",{state:{get isAnimating(){const t=e();if(console.log("isAnimating",{...t}),!t)return!1;const{id:i}=t;return!!i&&!!r[i]&&r[i].enabled}},actions:{*explodeConfettiFireworks(t){if(console.log("explodeConfettiFireworks",{...r}),!r.isAnimating)return;const i=e();console.log("Confetti Fireworks!",{...i,speed:t});var a=t,s=Date.now()+a,c={startVelocity:30,spread:360,ticks:60,zIndex:0},l=setInterval(n(()=>{var e=s-Date.now();if(e<=0)return clearInterval(l);var t=e/a*50;confetti({...c,particleCount:t,origin:{x:o(.1,.3),y:Math.random()-.2}}),confetti({...c,particleCount:t,origin:{x:o(.7,.9),y:Math.random()-.2}}),i.enabled=!1}),250)},*explodeConfettiFromCenterOfScreen(t){if(!r.isAnimating)return;const i=e();console.log("Center Confetti Explosion!",{...i,speed:t}),confetti({particleCount:100,spread:360,startVelocity:30,gravity:.8,ticks:100,origin:{x:.5,y:.5},colors:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"],shapes:["square","circle"],scalar:1.2}),setTimeout(()=>{confetti({particleCount:50,spread:270,startVelocity:25,gravity:.9,ticks:80,origin:{x:.5,y:.5},colors:["#FF69B4","#00CED1","#FFD700","#32CD32"],shapes:["circle"],scalar:.8}),setTimeout(n(()=>{i.enabled=!1}),2e3)},200)},*explodeEmojiFireworks(t,i){if(!r.isAnimating)return;const a=e();console.log("Emoji Fireworks!",{...a,emoji:t,speed:i});const s=confetti.shapeFromText({text:t,scalar:1.2});var c=i,l=Date.now()+c,d={startVelocity:30,spread:360,ticks:60,zIndex:0,shapes:[s]},f=setInterval(n(()=>{var e=l-Date.now();if(e<=0)return clearInterval(f);var t=e/c*50;confetti({...d,particleCount:t,origin:{x:o(.1,.3),y:Math.random()-.2}}),confetti({...d,particleCount:t,origin:{x:o(.7,.9),y:Math.random()-.2}}),a.enabled=!1}),250)},*explodeEmojiFromCenterOfScreen(t,i){if(!r.isAnimating)return;const o=e();console.log("Emoji Explosion!",{...o,emoji:t,speed:i});const a=confetti.shapeFromText({text:t,scalar:1.2});confetti({particleCount:100,spread:360,startVelocity:30,gravity:.8,ticks:100,origin:{x:.5,y:.5},shapes:[a],scalar:1.2}),setTimeout(()=>{confetti({particleCount:50,spread:270,startVelocity:25,gravity:.9,ticks:80,origin:{x:.5,y:.5},shapes:[a],scalar:.8}),setTimeout(n(()=>{o.enabled=!1}),2e3)},200)},*rainConfetti(t){if(!r.isAnimating)return;const i=e();console.log("Confetti Rain!",{...i,speed:t});var a=t,s=Date.now()+a,c={startVelocity:10,spread:45,ticks:60,zIndex:0,gravity:1.2,colors:["#3498db","#2980b9","#5dade2","#85c1e9","#aed6f1","#d6eaf8"],shapes:["square","circle"],scalar:.6},l=setInterval(n(()=>{var e=s-Date.now();if(e<=0)return clearInterval(l),void(i.enabled=!1);var t=e/a*15;for(let e=0;e<5;e++)setTimeout(()=>{confetti({...c,particleCount:t/5,origin:{x:o(.1,.9),y:-.1}})},100*e)}),200)},*rainEmoji(t,i){if(!r.isAnimating)return;const a=e();console.log("Emoji Rain!",{...a,emoji:t,speed:i});const s=confetti.shapeFromText({text:t,scalar:1});var c=i,l=Date.now()+c,d={startVelocity:10,spread:45,ticks:60,zIndex:0,gravity:1.2,shapes:[s],scalar:.8},f=setInterval(n(()=>{var e=l-Date.now();if(e<=0)return clearInterval(f),void(a.enabled=!1);var t=e/c*15;for(let e=0;e<5;e++)setTimeout(()=>{confetti({...d,particleCount:t/5,origin:{x:o(.1,.9),y:-.1}})},100*e)}),200)}},callbacks:{*onAnimate(){if(!r.isAnimating)return;const i=e(),{id:n}=i,{animation:o,effect:s,emoji:c,speed:l}=r[n],{ref:d}=t(),{parentElement:f}=d;f.getAttribute("hidden")?console.info("Parent Element for Animation is Hidden, failing over and not running animation"):(console.log("onAnimate",{state:r[n],ref:d}),d&&(yield new Promise((e,t)=>{const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js",i.onload=e,i.onerror=t,document.head.appendChild(i)}),"confetti"===o&&"fireworks"===s&&(yield a.explodeConfettiFireworks(l)),"confetti"===o&&"center"===s&&(yield a.explodeConfettiFromCenterOfScreen(l)),"confetti"===o&&"rain"===s&&(yield a.rainConfetti(l)),"emoji"===o&&"center"===s&&(yield a.explodeEmojiFromCenterOfScreen(c,l)),"emoji"===o&&"fireworks"===s&&(yield a.explodeEmojiFireworks(c,l)),"emoji"===o&&"rain"===s&&(yield a.rainEmoji(c,l))))}}});
//# sourceMappingURL=view.js.map