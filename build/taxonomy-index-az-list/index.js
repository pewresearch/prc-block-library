(()=>{"use strict";var e,l={979:(e,l,t)=>{const a=window.wp.blocks,n=window.wp.apiFetch;var o=t.n(n);const r=window.wp.element,i=window.wp.blockEditor,s=window.wp.components,c=window.wp.htmlEntities,u=window.prcComponents,d=window.ReactJSXRuntime;function p({value:e,onChange:l}){return(0,d.jsx)(s.SelectControl,{label:"Terms starting with letter",value:e,options:[{label:"(Click to select letter)",value:null},{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"},{label:"D",value:"D"},{label:"E",value:"E"},{label:"F",value:"F"},{label:"G",value:"G"},{label:"H",value:"H"},{label:"I",value:"I"},{label:"J",value:"J"},{label:"K",value:"K"},{label:"L",value:"L"},{label:"M",value:"M"},{label:"N",value:"N"},{label:"O",value:"O"},{label:"P",value:"P"},{label:"Q",value:"Q"},{label:"R",value:"R"},{label:"S",value:"S"},{label:"T",value:"T"},{label:"U",value:"U"},{label:"V",value:"V"},{label:"W",value:"W"},{label:"X",value:"X"},{label:"Y",value:"Y"},{label:"Z",value:"Z"}],onChange:e=>l(e)})}function x({value:e,onChange:l}){return(0,d.jsx)(u.TaxonomySelect,{value:e,onChange:l,allowMultiple:!0})}function m({attributes:e,setAttributes:l}){const{letter:t,taxonomy:a}=e;return(0,d.jsx)(i.InspectorControls,{children:(0,d.jsxs)(s.PanelBody,{title:"Taxonomy Query",children:[(0,d.jsx)(x,{value:a,onChange:e=>{l({taxonomy:[...e]})}}),(0,d.jsx)(s.CardDivider,{}),(0,d.jsx)(p,{value:t,onChange:e=>l({letter:e})})]})})}function b({children:e}){return(0,d.jsx)(s.Placeholder,{isColumnLayout:!0,icon:"networking",label:"Taxonomy Index A-Z Listing",children:(0,d.jsx)("div",{children:e})})}const v=window.prcIcons,h={from:[{type:"block",blocks:["prc-block/topic-index-az"],transform:e=>{const l=e;return l.exclude&&"string"==typeof l.exclude&&l.exclude.length>0&&(l.exclude=l.exclude.split(",")),Array.isArray(l.exclude)&&l.exclude.length>0&&(l.exclude=l.exclude.map((e=>parseInt(e,10)))),console.log("Transforming from topic-index-az to taxonomy-index-az-list, attributes: ",e," newAttributes: ",l),(0,a.createBlock)("prc-block/taxonomy-index-az-list",l)}}]},y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/taxonomy-index-az-list","version":"0.1.0","title":"Taxonomy Index A-Z Listing","category":"theme","description":"A list of taxonomy terms sorted alphabeticaly. Select terms you want to exclude by checking the box.","keywords":["taxonomy","alphabetical"],"attributes":{"letter":{"type":"string"},"exclude":{"type":"array","default":[]},"taxonomy":{"type":"array","default":["category"]},"disableHeading":{"type":"boolean","default":false}},"supports":{"anchor":true,"align":false,"html":false,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"typography":{"fontSize":true,"__experimentalFontFamily":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}},"textdomain":"taxonomy-index-az-list","editorScript":"file:./index.js","style":"file:./style-index.css"}'),{name:f}=y,g={icon:function(){return(0,d.jsx)(v.Icon,{icon:"arrow-up-a-z"})},edit:function({attributes:e,setAttributes:l}){const{letter:t,exclude:a,taxonomy:n}=e,[u,v]=(0,r.useState)(!1),h=(0,i.useBlockProps)();return(0,r.useEffect)((()=>{if(console.log("Setting the exclude map...",u),!1!==u){const e=u.filter((e=>!0===e.excluded)).map((e=>e.term_id));console.log("tmpExclude",e),l({exclude:e})}}),[u]),(0,r.useEffect)((()=>{((e,l)=>new Promise((t=>{o()({path:`/prc-api/v3/blocks/taxonomy-index-az-list/?letter=${e}&taxonomy=${l}`}).then((e=>{const l=e.map((e=>({name:e.name,term_id:e.term_id,excluded:!1})));t(l)}))})))(t,n).then((e=>{const l=a,t=e.map((e=>{console.log("Load Terms... s?",e);const t={...e};return l.includes(t.term_id)&&(t.excluded=!0),t}));v(t)}))}),[t,n]),(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(m,{attributes:e,setAttributes:l}),(0,d.jsxs)("div",{...h,children:[void 0===t&&(0,d.jsxs)(b,{children:[(0,d.jsx)(x,{value:n,onChange:e=>{l({taxonomy:[...e]})}}),(0,d.jsx)(p,{value:t,onChange:e=>l({letter:e})})]}),void 0!==t&&(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)("h2",{children:t}),!1!==u&&(0,d.jsx)("ul",{children:u.map((e=>{const l=e.excluded,t=!0!==l?(0,c.decodeEntities)(e.name):`${(0,c.decodeEntities)(e.name)} (${e.term_id})`;return(0,d.jsx)("li",{children:(0,d.jsx)(s.CheckboxControl,{label:t,checked:l,onChange:l=>((e,l)=>{const t=u;t.map((t=>(t.term_id===l&&(t.excluded=!!e),t))),console.log("onSelect",[...t]),v([...t])})(l,e.term_id)})})}))})]})]})]})},transforms:h};(0,a.registerBlockType)(f,{...y,...g})}},t={};function a(e){var n=t[e];if(void 0!==n)return n.exports;var o=t[e]={exports:{}};return l[e](o,o.exports,a),o.exports}a.m=l,e=[],a.O=(l,t,n,o)=>{if(!t){var r=1/0;for(u=0;u<e.length;u++){for(var[t,n,o]=e[u],i=!0,s=0;s<t.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](t[s])))?t.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var c=n();void 0!==c&&(l=c)}}return l}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,n,o]},a.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return a.d(l,{a:l}),l},a.d=(e,l)=>{for(var t in l)a.o(l,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={3049:0,7853:0};a.O.j=l=>0===e[l];var l=(l,t)=>{var n,o,[r,i,s]=t,c=0;if(r.some((l=>0!==e[l]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var u=s(a)}for(l&&l(t);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},t=globalThis.webpackChunk_pewresearch_prc_block_library=globalThis.webpackChunk_pewresearch_prc_block_library||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var n=a.O(void 0,[7853],(()=>a(979)));n=a.O(n)})();
//# sourceMappingURL=index.js.map