import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var c in o)t.o(o,c)&&!t.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:o[c]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},s={},t.d(s,n),s),{state:c}=(0,o.store)("prc-block/popup-controller",{actions:{closeAll:()=>{Object.keys(c).forEach((e=>{c[e].isActive=!1}))},open:(e,t=!1)=>{const n=(0,o.getContext)(),s=n?.id;console.log("open...",t),t?c[t]={isActive:!0}:s?(c[s]={isActive:!0},console.log("open",s,c[s].isActive,c)):console.log("no id",s,c)},close:(e,t=!1)=>{const n=(0,o.getContext)(),s=n?.id;t?c[t]={isActive:!1}:s&&(c[s]={isActive:!1},console.log("close",s,c[s].isActive,c))},openAndThen:e=>{const t=(0,o.getContext)(),{id:n}=t;c[n].isActive=!0,e()},closeAndThen:e=>{const t=(0,o.getContext)(),{id:n}=t;c[n].isActive=!1,e()}},callbacks:{onInit:()=>{const e=document.querySelector(".wp-block-prc-block-popup-modal__outer"),t=document.querySelector(".wp-site-blocks");t.parentNode.insertBefore(e,t)},outerWatch:()=>{console.log("outerWatch",c)},onWindowClickCloseModal:e=>{const t=(0,o.getContext)(),{id:n}=t;if(!n)return;if(!c[n]?.isActive)return;const s=(0,o.getElement)(),{ref:i}=s;console.log("onWindowClickCloseModal",s,e.target),(!i.contains(e.target)||e.target.classList.contains("wp-block-prc-block-popup-modal__outer"))&&(document.querySelector(".wp-block-prc-block-popup-modal.is-active").innerHTML.includes(e.target.innerHTML)||!0!==c[n].isActive||(c[n].isActive=!1))},onESCKey:e=>{const t=(0,o.getContext)(),{id:n}=t;n&&"Escape"===e.key&&!0===c[n].isActive&&(e.preventDefault(),c[n].isActive=!1)},isModalActive:()=>{const e=(0,o.getContext)(),t=(0,o.getElement)(),{id:n}=e;return console.log("isModalActive",c,n,t),c[n]?.isActive},isAModalActive:()=>{const e=(0,o.getElement)(),t=c;return console.log("isAModalActive",t,e),Object.keys(t).some((e=>c[e].isActive))},soundOff:()=>{const e=(0,o.getContext)(),t=(0,o.getElement)();console.log("soundOff",e,t,c)}}});var n,s;
//# sourceMappingURL=view.js.map