import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},t.d(l,r),l),{actions:o}=(0,n.store)("prc-block/form-input-select",{actions:{onOpen:()=>{(0,n.getContext)().isOpen=!0},onClose:(e=null)=>{null!==e&&e.preventDefault();const t=(0,n.getContext)();let o=!1;o||(o=!0,setTimeout((()=>{t.isOpen=!1,o=!1}),150))},onReset:()=>{const e=(0,n.getContext)();e.activeIndex=0,e.value="",e.label="",e.filteredOptions=e.options},getOptionByValue:e=>{const t=(0,n.getContext)(),{options:o}=t,r=o.find((t=>t.value===e));return r?{index:o.findIndex((e=>e.value===r.value)),...r}:null},moveThroughOptions:(e,t)=>{const o=(0,n.getContext)(),{activeIndex:r,filteredOptions:l}=o;let s=null;s=null===r||isNaN(r)?0:r+e,s<0&&(s=l.length-1),s>=l.length&&(s=0);const i=t.parentElement.parentElement.querySelector(".wp-block-prc-block-form-input-select__list").querySelector(`[data-ref-value="${l[s].value}"]`);i&&i.scrollIntoView({block:"nearest"}),l.forEach((e=>{e.isSelected=!1})),l[s].isSelected=!0,o.activeIndex=s,o.filteredOptions=l},setValueOnEnter:()=>{const e=(0,n.getContext)(),{filteredOptions:t,activeIndex:r}=e,l=t[r];o.setNewValue(l?.value),e.label=l?.label,e.isOpen=!1},onKeyUp:e=>{e.preventDefault();const{value:t}=e.target,r=(0,n.getContext)(),{options:l}=r,{ref:s}=(0,n.getElement)();if("Escape"===e.key)return o.onReset(),void(!0===r.isOpen&&s.blur());if(40===e.keyCode&&"ArrowDown"===e.key)return void o.moveThroughOptions(1,e.target);if(38===e.keyCode&&"ArrowUp"===e.key)return void o.moveThroughOptions(-1,e.target);if("Enter"===e.key)return void o.setValueOnEnter();const i=l.filter((e=>{const{label:n}=e;return n.toLowerCase().includes(t.toLowerCase())}));i.length&&(r.filteredOptions=i)},onClick:e=>{e.preventDefault();const{ref:t}=(0,n.getElement)(),r=(0,n.getContext)(),{options:l,option:s}=r,i=(t.getAttribute("aria-controls"),t.getAttribute("data-ref-value")),{index:a}=o.getOptionByValue(i),{label:c,value:u}=l[a];r.activeIndex=a,r.label=c,o.setNewValue(u);const g=l;g.forEach((e=>{e.isSelected=!1})),g[a].isSelected=!0,r.filteredOptions=g,o.onClose()},setNewValue:e=>{const{ref:t}=(0,n.getElement)(),o=(0,n.getContext)(),{targetNamespace:r}=o;if(o.value=e,e&&"prc-block/form-input-select"!==r){const{actions:o,state:l}=(0,n.store)(r);o.onSelectChange&&o.onSelectChange(e,t)}},getTargetProcessingState:()=>{const e=(0,n.getContext)(),{targetNamespace:t}=e;if("prc-block/form-input-select"!==t){const{state:e}=(0,n.store)(t);if(e.isProcessing)return!0}return!1}},callbacks:{isProcessing:()=>o.getTargetProcessingState(),isDisabled:()=>o.getTargetProcessingState()}});var r,l;
//# sourceMappingURL=view.js.map