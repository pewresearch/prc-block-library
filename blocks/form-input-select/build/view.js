import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(l={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},s={},t.d(s,l),s),{actions:n}=(0,o.store)("prc-block/form-input-select",{actions:{onOpen:()=>{(0,o.getContext)().isOpen=!0},onClose:(e=null)=>{null!==e&&e.preventDefault();const t=(0,o.getContext)();let n=!1;n||(n=!0,setTimeout((()=>{t.isOpen=!1,n=!1}),100))},onReset:()=>{const e=(0,o.getContext)();e.activeIndex=0,e.value="",e.label="",e.filteredOptions=e.options},getOptionByValue:e=>{console.log("getOptionByValue",e);const t=(0,o.getContext)(),{options:n}=t,l=n.find((t=>t.value===e));return l?{index:n.findIndex((e=>e.value===l.value)),...l}:null},moveThroughOptions:(e,t)=>{const n=(0,o.getContext)(),{activeIndex:l,filteredOptions:s}=n;let r=null;r=null===l||isNaN(l)?0:l+e,r<0&&(r=s.length-1),r>=s.length&&(r=0),s.forEach((e=>{e.isSelected=!1})),s[r].isSelected=!0,n.activeIndex=r,n.filteredOptions=s,console.log("moveThroughOptions",n,r,e)},setValueOnEnter:()=>{console.log("setting value on enter");const e=(0,o.getContext)(),{activeId:t,filteredOptions:n,options:l}=e;e.filteredOptions=l;const s=n[t];e.value=s.value,e.label=s.label,e.isOpen=!1},onKeyUp:e=>{e.preventDefault();const{value:t}=e.target,l=(0,o.getContext)(),{options:s}=l,{ref:r}=(0,o.getElement)();console.log("onKeyUp",r);const i=r.getAttribute("aria-controls");if(!i)return;if("Escape"===e.key)return n.onReset(),void(!0===l.isOpen&&r.blur());if("Enter"===e.key&&n.setValueOnEnter(i),40===e.keyCode&&"ArrowDown"===e.key)return void n.moveThroughOptions(1,i);if(38===e.keyCode&&"ArrowUp"===e.key)return void n.moveThroughOptions(-1,i);const a=s.filter((e=>{const{label:o}=e;return o.toLowerCase().includes(t.toLowerCase())}));a.length&&(l.filteredOptions=a)},onClick:e=>{e.preventDefault();const{ref:t}=(0,o.getElement)(),l=(0,o.getContext)(),{options:s}=l,r=(t.getAttribute("aria-controls"),t.getAttribute("data-ref-value")),{index:i,label:a,value:c}=n.getOptionByValue(r);l.activeIndex=i,l.label=a,l.value=c,console.log("form-input-select::onClick",l,i,a,c);const u=s;u.forEach((e=>{e.isSelected=!1})),u[i].isSelected=!0,l.filteredOptions=u,n.onClose()}},callbacks:{onInit:()=>{const e=(0,o.getContext)(),{options:t}=e;console.log("form-input-select -> onInit",e,t)},onValueChange:()=>{const{ref:e}=(0,o.getElement)(),t=(0,o.getContext)(),{targetNamespace:n,value:l}=t;if(l&&"prc-block/form-input-select"!==n){const{actions:s}=(0,o.store)(n);s.onSelectChange&&(console.log("onValueChange -> onSelectChange:",t,l,e),s.onSelectChange(l,e))}},getInputValue:()=>{const{ref:e}=(0,o.getElement)(),t=(0,o.getContext)(),{value:n}=t;return console.log("getInputValue",t,n,e),n||null}}});var l,s;
//# sourceMappingURL=view.js.map