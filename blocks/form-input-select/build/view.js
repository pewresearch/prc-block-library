import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},t.d(l,r),l),{state:o,actions:s}=(0,n.store)("prc-block/form-input-select",{state:{get activeIndex(){const e=s.getId();return o[e]?.activeIndex||0},get value(){const e=s.getId();return o[e]?.value||""},get isOpen(){const e=s.getId();return o[e]?.isOpen||!1},get isDisabled(){const e=s.getId();return o[e]?.isDisabled||!1},get label(){const e=s.getId();return o[e]?.label||""},get hasClearIcon(){const e=s.getId();return o[e]?.hasClearIcon||!1},get filteredOptions(){const e=s.getId();return o[e]?.filteredOptions||[]},get options(){const e=s.getId();return o[e]?.options||[]},get hasValue(){const e=s.getId();return!!o[e]?.value}},actions:{getId:()=>{const e=(0,n.getContext)(),{id:t}=e;return t},setIsOpen:(e,t)=>{o[t].isOpen=e},setActiveIndex:(e,t)=>{o[t].activeIndex=e},setNewValue:(e,t)=>{const{ref:s}=(0,n.getElement)(),r=(0,n.getContext)(),{targetNamespace:l}=r;if(o[t].value=e,e&&"prc-block/form-input-select"!==l){const{actions:a}=(0,n.store)(l);a.onSelectChange&&a.onSelectChange(e,s,t,o[t].filteredOptions,o,r)}},setLabel:(e,t)=>{o[t].label=e},setFilteredOptions:(e,t)=>{o[t].filteredOptions=e},resetValues:e=>{o[e].value="",o[e].label="",o[e].activeIndex=0,o[e].filteredOptions=o[e].options},getTargetProcessingState:()=>{const e=(0,n.getContext)(),{targetNamespace:t}=e;if("prc-block/form-input-select"!==t){const{state:e}=(0,n.store)(t);if(e.isProcessing)return!0}return!1},getOptionByValue:(e,t)=>{const{options:n}=o[t],s=n.find((t=>t.value==e));return s?{index:n.findIndex((e=>e.value===s.value)),...s}:null},onOpen:()=>{const e=s.getId();s.setIsOpen(!0,e)},onClose:()=>{let e=!1;if(!e){e=!0;const t=s.getId();setTimeout((()=>{s.setIsOpen(!1,t),e=!1}),150)}},onReset:()=>{const e=s.getId();s.resetValues(e)},moveThroughOptions:(e,t)=>{const{activeIndex:n,filteredOptions:r}=o;let l=null;l=null===n||isNaN(n)?0:n+e,l<0&&(l=r.length-1),l>=r.length&&(l=0);const a=t.parentElement.parentElement.querySelector(".wp-block-prc-block-form-input-select__list").querySelector(`[data-ref-value="${r[l].value}"]`);a&&a.scrollIntoView({block:"nearest"}),r.forEach((e=>{e.isSelected=!1})),r[l].isSelected=!0;const i=s.getId();s.setActiveIndex(l,i),s.setFilteredOptions(r,i)},setValueOnEnter:()=>{const{filteredOptions:e,activeIndex:t}=o,n=s.getId(),r=e[t];s.setNewValue(r.value,n),s.setLabel(r.label,n),s.setIsOpen(!1,n)},onKeyUp:e=>{const t=s.getId();e.preventDefault();const{value:r}=e.target,{options:l}=o,{ref:a}=(0,n.getElement)();if("Escape"===e.key)return s.onReset(),void(!0===o.isOpen&&a.blur());if(40===e.keyCode&&"ArrowDown"===e.key)return void s.moveThroughOptions(1,e.target);if(38===e.keyCode&&"ArrowUp"===e.key)return void s.moveThroughOptions(-1,e.target);if("Enter"===e.key)return void s.setValueOnEnter();const i=l.filter((e=>{const{label:t}=e;return t.toLowerCase().includes(r.toLowerCase())}));i.length&&s.setFilteredOptions(i,t)},onClick:e=>{e.preventDefault();const{ref:t}=(0,n.getElement)(),{options:r}=o,l=t.getAttribute("aria-controls"),a=t.getAttribute("data-ref-value"),{index:i}=s.getOptionByValue(a,l),{label:c,value:g}=r[i];s.setActiveIndex(i,l),s.setLabel(c,l),s.setNewValue(g,l);const u=r;u.forEach((e=>{e.isSelected=!1})),u[i].isSelected=!0,s.setFilteredOptions(u,l),s.onClose(l)},onIconClick:e=>{e.preventDefault();const t=s.getId(),{isOpen:r,value:l,hasClearIcon:a}=o[t];if(r?s.onClose(t):s.onOpen(t),!r&&l&&a){const{ref:e}=(0,n.getElement)();s.resetValues(t);const{targetNamespace:o}=(0,n.getContext)(),{actions:r}=(0,n.store)(o);r.onSelectClearIconClick&&r.onSelectClearIconClick(e,l,t)}}},callbacks:{isProcessing:()=>s.getTargetProcessingState(),isDisabled:()=>s.getTargetProcessingState()}});var r,l;
//# sourceMappingURL=view.js.map