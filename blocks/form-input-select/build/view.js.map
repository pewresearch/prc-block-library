{"version":3,"file":"view.js","mappings":"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","sources":["webpack://form-input-select/webpack/bootstrap","webpack://form-input-select/webpack/runtime/define property getters","webpack://form-input-select/webpack/runtime/hasOwnProperty shorthand","webpack://form-input-select/external module \"@wordpress/interactivity\"","webpack://form-input-select/./src/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"getContext\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getContext), [\"getElement\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getElement), [\"store\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store) });","/* eslint-disable @wordpress/no-unused-vars-before-return */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\nconst { actions } = store('prc-block/form-input-select', {\n\tactions: {\n\t\tonOpen: (event) => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isOpen = true;\n\t\t\tconsole.log('onOpen', context, event);\n\t\t},\n\t\tonClose: (event) => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isOpen = false;\n\t\t\tconsole.log('onClose', context, event);\n\t\t},\n\t\tonReset: () => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.activeIndex = 0;\n\t\t\tcontext.value = '';\n\t\t\tcontext.label = '';\n\t\t},\n\t\tgetOptionByValue: (value) => {\n\t\t\tconsole.log('getOptionByValue', value);\n\t\t\tconst context = getContext();\n\t\t\tconst { options } = context;\n\t\t\tconst selectedOption = options.find(\n\t\t\t\t(option) => option.value === value\n\t\t\t);\n\t\t\tif (!selectedOption) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// find the object in the options array that matches the value\n\t\t\t// then set the activeId to the index of that object\n\t\t\tconst index = options.findIndex(\n\t\t\t\t(option) => option.value === selectedOption.value\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\t...selectedOption,\n\t\t\t};\n\t\t},\n\t\tonClick: (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst context = getContext();\n\t\t\tconst { filteredOptions } = context;\n\t\t\tconsole.log('setting value on click', context, ref, event);\n\n\t\t\tconst id = ref.getAttribute('aria-controls');\n\t\t\tconst val = ref.getAttribute('data-ref-value');\n\t\t\tconst { index, label, value } = actions.getOptionByValue(val);\n\n\t\t\tcontext.activeIndex = index;\n\t\t\tcontext.label = label;\n\t\t\tcontext.value = value;\n\n\t\t\t// find any other isSelected and set to false and then set isSelected\n\t\t\t// on the clicked option\n\t\t\tfilteredOptions.forEach((option) => {\n\t\t\t\toption.isSelected = false;\n\t\t\t});\n\t\t\tfilteredOptions[index].isSelected = true;\n\n\t\t\tactions.onClose();\n\t\t},\n\t},\n\tcallbacks: {\n\t\tonInit: () => {\n\t\t\tconst context = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst { options } = context;\n\t\t\t// set the filteredOptions immediately...\n\t\t\tcontext.filteredOptions = options;\n\t\t},\n\t\tonValueChange: () => {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst context = getContext();\n\t\t\tconst { targetNamespace, value } = context;\n\t\t\tif (value) {\n\t\t\t\tconsole.log('onValueChange', context);\n\t\t\t\tconst { actions: targetActions } = store(targetNamespace);\n\t\t\t\tif (targetActions.onSelectChange) {\n\t\t\t\t\ttargetActions.onSelectChange(value, ref);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonWindowClickClose: (event) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { isOpen } = context;\n\t\t\tif (!isOpen) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst elm = getElement();\n\t\t\tconst { ref } = elm;\n\t\t\tconsole.log('onWindowClickClose', elm, event.target);\n\t\t\tif (ref.contains(event.target)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tactions.onClose();\n\t\t},\n\t\tonESCKeyClose: (event) => {\n\t\t\tconst context = getContext();\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tif (true === context.isOpen) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactions.onClose();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tactions.onReset();\n\t\t\t}\n\t\t},\n\t},\n});\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","x","d","actions","store","onOpen","event","context","getContext","isOpen","console","log","onClose","onReset","activeIndex","value","label","getOptionByValue","options","selectedOption","find","option","index","findIndex","onClick","preventDefault","ref","getElement","filteredOptions","getAttribute","val","forEach","isSelected","callbacks","onInit","onValueChange","targetNamespace","targetActions","onSelectChange","onWindowClickClose","elm","target","contains","onESCKeyClose"],"sourceRoot":""}