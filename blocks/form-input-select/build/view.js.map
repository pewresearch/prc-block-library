{"version":3,"file":"view.js","mappings":"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","sources":["webpack://form-input-select/webpack/bootstrap","webpack://form-input-select/webpack/runtime/define property getters","webpack://form-input-select/webpack/runtime/hasOwnProperty shorthand","webpack://form-input-select/external module \"@wordpress/interactivity\"","webpack://form-input-select/./src/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"getContext\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getContext), [\"getElement\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getElement), [\"store\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store) });","/* eslint-disable @wordpress/no-unused-vars-before-return */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\nconst { actions } = store('prc-block/form-input-select', {\n\tactions: {\n\t\tonOpen: () => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isOpen = true;\n\t\t},\n\t\tonClose: (event = null) => {\n\t\t\t// By default this runs on the on-blur directive on the input element\n\t\t\t// but we also use it as a shortcut to close the listbox on click,\n\t\t\t// so this is a quick check to see if we're using this as a shortcut or not.\n\t\t\tif (null !== event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tconst context = getContext();\n\t\t\t// Because the on-blur event fires before the click event we need to slow things down a bit, 150 ms should do it\n\t\t\tlet isRunning = false;\n\t\t\tif (!isRunning) {\n\t\t\t\tisRunning = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tcontext.isOpen = false;\n\t\t\t\t\tisRunning = false;\n\t\t\t\t}, 150);\n\t\t\t}\n\t\t},\n\t\tonReset: () => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.activeIndex = 0;\n\t\t\tcontext.value = '';\n\t\t\tcontext.label = '';\n\t\t\tcontext.filteredOptions = context.options;\n\t\t},\n\t\tgetOptionByValue: (value) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { options } = context;\n\t\t\tconst selectedOption = options.find(\n\t\t\t\t(option) => option.value === value\n\t\t\t);\n\t\t\tif (!selectedOption) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// find the object in the options array that matches the value\n\t\t\t// then set the activeId to the index of that object\n\t\t\tconst index = options.findIndex(\n\t\t\t\t(option) => option.value === selectedOption.value\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\t...selectedOption,\n\t\t\t};\n\t\t},\n\t\tmoveThroughOptions: (direction, ref) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { activeIndex, filteredOptions } = context;\n\t\t\tlet nextActive = null;\n\t\t\tif (activeIndex === null || isNaN(activeIndex)) {\n\t\t\t\tnextActive = 0;\n\t\t\t} else {\n\t\t\t\tnextActive = activeIndex + direction;\n\t\t\t}\n\t\t\tif (nextActive < 0) {\n\t\t\t\tnextActive = filteredOptions.length - 1;\n\t\t\t}\n\t\t\tif (nextActive >= filteredOptions.length) {\n\t\t\t\tnextActive = 0;\n\t\t\t}\n\n\t\t\t// also scroll the listbox to the active item as you go...\n\t\t\tconst listbox = ref.parentElement.parentElement.querySelector(\n\t\t\t\t'.wp-block-prc-block-form-input-select__list'\n\t\t\t);\n\t\t\tconst activeItem = listbox.querySelector(\n\t\t\t\t`[data-ref-value=\"${filteredOptions[nextActive].value}\"]`\n\t\t\t);\n\t\t\tif (activeItem) {\n\t\t\t\tactiveItem.scrollIntoView({\n\t\t\t\t\tblock: 'nearest',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfilteredOptions.forEach((option) => {\n\t\t\t\toption.isSelected = false;\n\t\t\t});\n\t\t\tfilteredOptions[nextActive].isSelected = true;\n\n\t\t\tcontext.activeIndex = nextActive;\n\t\t\tcontext.filteredOptions = filteredOptions;\n\t\t},\n\t\tsetValueOnEnter: () => {\n\t\t\tconst context = getContext();\n\t\t\tconst { filteredOptions, activeIndex } = context;\n\n\t\t\tconst highlightedOption = filteredOptions[activeIndex];\n\n\t\t\tactions.setNewValue(highlightedOption?.value);\n\t\t\tcontext.label = highlightedOption?.label;\n\t\t\tcontext.isOpen = false;\n\n\t\t\t// reset the filtered options\n\t\t\t// context.filteredOptions = options;\n\t\t},\n\t\tonKeyUp: (event) => {\n\t\t\tevent.preventDefault();\n\t\t\t// The input value.\n\t\t\tconst { value } = event.target;\n\n\t\t\tconst context = getContext();\n\t\t\tconst { options } = context;\n\t\t\tconst { ref } = getElement();\n\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tactions.onReset();\n\t\t\t\tif (true === context.isOpen) {\n\t\t\t\t\tref.blur();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 40 && event.key === 'ArrowDown') {\n\t\t\t\tactions.moveThroughOptions(1, event.target);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (event.keyCode === 38 && event.key === 'ArrowUp') {\n\t\t\t\tactions.moveThroughOptions(-1, event.target);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (event.key === 'Enter') {\n\t\t\t\tactions.setValueOnEnter();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Search options for the value and then set the filteredOptions to any matches...\n\t\t\tconst matches = options.filter((option) => {\n\t\t\t\tconst { label } = option;\n\t\t\t\treturn label.toLowerCase().includes(value.toLowerCase());\n\t\t\t});\n\t\t\tif (matches.length) {\n\t\t\t\tcontext.filteredOptions = matches;\n\t\t\t}\n\t\t},\n\t\tonClick: (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst context = getContext();\n\t\t\tconst { options, option } = context;\n\n\t\t\tconst id = ref.getAttribute('aria-controls');\n\t\t\tconst val = ref.getAttribute('data-ref-value');\n\t\t\tconst { index } = actions.getOptionByValue(val);\n\t\t\tconst { label, value } = options[index];\n\n\t\t\tcontext.activeIndex = index;\n\t\t\tcontext.label = label;\n\t\t\tactions.setNewValue(value);\n\n\t\t\t// find any other isSelected and set to false and then set isSelected\n\t\t\t// on the clicked option\n\t\t\t// also, reset the filteredOptions to the original options now that we have a value\n\t\t\tconst filteredOptions = options;\n\t\t\tfilteredOptions.forEach((opt) => {\n\t\t\t\topt.isSelected = false;\n\t\t\t});\n\t\t\tfilteredOptions[index].isSelected = true;\n\t\t\tcontext.filteredOptions = filteredOptions;\n\n\t\t\tactions.onClose();\n\t\t},\n\t\tsetNewValue: (newValue) => {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst context = getContext();\n\t\t\tconst { targetNamespace } = context;\n\t\t\t// if the value is not empty and the targetNamespace is not the same as the current namespace\n\t\t\t// then hoist the value up to the targetNamespace\n\t\t\tcontext.value = newValue;\n\t\t\tif (newValue && 'prc-block/form-input-select' !== targetNamespace) {\n\t\t\t\tconst { actions: targetActions, state: targetState } =\n\t\t\t\t\tstore(targetNamespace);\n\t\t\t\tif (targetActions.onSelectChange) {\n\t\t\t\t\ttargetActions.onSelectChange(newValue, ref);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetTargetProcessingState: () => {\n\t\t\tconst context = getContext();\n\t\t\tconst { targetNamespace } = context;\n\t\t\tif ('prc-block/form-input-select' !== targetNamespace) {\n\t\t\t\tconst { state: targetState } = store(targetNamespace);\n\t\t\t\tif (targetState.isProcessing) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t},\n\tcallbacks: {\n\t\tisProcessing: () => {\n\t\t\treturn actions.getTargetProcessingState();\n\t\t},\n\t\tisDisabled: () => {\n\t\t\treturn actions.getTargetProcessingState();\n\t\t},\n\t},\n});\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","x","d","actions","store","onOpen","getContext","isOpen","onClose","event","preventDefault","context","isRunning","setTimeout","onReset","activeIndex","value","label","filteredOptions","options","getOptionByValue","selectedOption","find","option","index","findIndex","moveThroughOptions","direction","ref","nextActive","isNaN","length","activeItem","parentElement","querySelector","scrollIntoView","block","forEach","isSelected","setValueOnEnter","highlightedOption","setNewValue","onKeyUp","target","getElement","blur","keyCode","matches","filter","toLowerCase","includes","onClick","val","getAttribute","opt","newValue","targetNamespace","targetActions","state","targetState","onSelectChange","getTargetProcessingState","isProcessing","callbacks","isDisabled"],"sourceRoot":""}