{"version":3,"file":"view.js","mappings":"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","sources":["webpack://form-input-select/webpack/bootstrap","webpack://form-input-select/webpack/runtime/define property getters","webpack://form-input-select/webpack/runtime/hasOwnProperty shorthand","webpack://form-input-select/external module \"@wordpress/interactivity\"","webpack://form-input-select/./src/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"getContext\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getContext), [\"getElement\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getElement), [\"store\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store) });","/* eslint-disable @wordpress/no-unused-vars-before-return */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\nconst { actions } = store('prc-block/form-input-select', {\n\tactions: {\n\t\tonOpen: (event) => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isOpen = true;\n\t\t\tconsole.log('onOpen', context, event);\n\t\t},\n\t\tonClose: (event = null) => {\n\t\t\t// By default this runs on the on-blur directive on the input element\n\t\t\t// but we also use it as a shortcut to close the listbox on click so we need to\n\t\t\t// support an event object being passed in as well as no event object\n\t\t\tif (null !== event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tconst context = getContext();\n\t\t\tlet isRunning = false;\n\t\t\tif (!isRunning) {\n\t\t\t\tisRunning = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tcontext.isOpen = false;\n\t\t\t\t\tisRunning = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t},\n\t\tonReset: () => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.activeIndex = 0;\n\t\t\tcontext.value = '';\n\t\t\tcontext.label = '';\n\t\t},\n\t\tgetOptionByValue: (value) => {\n\t\t\tconsole.log('getOptionByValue', value);\n\t\t\tconst context = getContext();\n\t\t\tconst { options } = context;\n\t\t\tconst selectedOption = options.find(\n\t\t\t\t(option) => option.value === value\n\t\t\t);\n\t\t\tif (!selectedOption) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// find the object in the options array that matches the value\n\t\t\t// then set the activeId to the index of that object\n\t\t\tconst index = options.findIndex(\n\t\t\t\t(option) => option.value === selectedOption.value\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\t...selectedOption,\n\t\t\t};\n\t\t},\n\t\tmoveThroughOptions: (direction, id) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { activeIndex, filteredOptions } = context;\n\t\t\tlet nextActive = null;\n\t\t\tif (activeIndex === null || isNaN(activeIndex)) {\n\t\t\t\tnextActive = 0;\n\t\t\t} else {\n\t\t\t\tnextActive = activeIndex + direction;\n\t\t\t}\n\t\t\tif (nextActive < 0) {\n\t\t\t\tnextActive = filteredOptions.length - 1;\n\t\t\t}\n\t\t\tif (nextActive >= filteredOptions.length) {\n\t\t\t\tnextActive = 0;\n\t\t\t}\n\n\t\t\tfilteredOptions.forEach((option) => {\n\t\t\t\toption.isSelected = false;\n\t\t\t});\n\t\t\tfilteredOptions[nextActive].isSelected = true;\n\n\t\t\tcontext.activeIndex = nextActive;\n\t\t\tcontext.filteredOptions = filteredOptions;\n\t\t\tconsole.log('moveThroughOptions', context, nextActive, direction);\n\t\t},\n\t\tonKeyUp: (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst { value } = event.target;\n\n\t\t\tconst context = getContext();\n\t\t\tconst { options } = context;\n\t\t\tconst { ref } = getElement();\n\t\t\tconst id = ref.getAttribute('aria-controls');\n\t\t\tif (!id) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.key === 'Enter') {\n\t\t\t\t// actions.setValueOnEnter(id);\n\t\t\t}\n\t\t\tif (event.keyCode === 40 && event.key === 'ArrowDown') {\n\t\t\t\tactions.moveThroughOptions(1, id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (event.keyCode === 38 && event.key === 'ArrowUp') {\n\t\t\t\tactions.moveThroughOptions(-1, id);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// check if any of the options contain the value of the input\n\t\t\tconst matches = options.filter((option) => {\n\t\t\t\tconst { label } = option;\n\t\t\t\treturn label.toLowerCase().includes(value.toLowerCase());\n\t\t\t});\n\t\t\t// if there are matches set the filteredOptions to the matches\n\t\t\tif (matches.length) {\n\t\t\t\tcontext.filteredOptions = matches;\n\t\t\t}\n\t\t},\n\t\tonClick: (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst context = getContext();\n\t\t\tconst { options } = context;\n\t\t\tconsole.log('setting value on click', context, ref, event);\n\n\t\t\tconst id = ref.getAttribute('aria-controls');\n\t\t\tconst val = ref.getAttribute('data-ref-value');\n\t\t\tconst { index, label, value } = actions.getOptionByValue(val);\n\n\t\t\tcontext.activeIndex = index;\n\t\t\tcontext.label = label;\n\t\t\tcontext.value = value;\n\n\t\t\t// find any other isSelected and set to false and then set isSelected\n\t\t\t// on the clicked option\n\t\t\tconst filteredOptions = options;\n\t\t\tfilteredOptions.forEach((option) => {\n\t\t\t\toption.isSelected = false;\n\t\t\t});\n\t\t\tfilteredOptions[index].isSelected = true;\n\t\t\tcontext.filteredOptions = filteredOptions;\n\n\t\t\tactions.onClose();\n\t\t},\n\t},\n\tcallbacks: {\n\t\tonInit: () => {\n\t\t\tconst context = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst { options } = context;\n\t\t\t// set the filteredOptions immediately...\n\t\t\tcontext.filteredOptions = options;\n\t\t},\n\t\tonValueChange: () => {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst context = getContext();\n\t\t\tconst { targetNamespace, value } = context;\n\t\t\tif (value) {\n\t\t\t\tconsole.log('onValueChange', context);\n\t\t\t\tconst { actions: targetActions } = store(targetNamespace);\n\t\t\t\tif (targetActions.onSelectChange) {\n\t\t\t\t\ttargetActions.onSelectChange(value, ref);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonESCKeyClose: (event) => {\n\t\t\tconst context = getContext();\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tif (true === context.isOpen) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactions.onClose();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tactions.onReset();\n\t\t\t}\n\t\t},\n\t},\n});\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","x","d","actions","store","onOpen","event","context","getContext","isOpen","console","log","onClose","preventDefault","isRunning","setTimeout","onReset","activeIndex","value","label","getOptionByValue","options","selectedOption","find","option","index","findIndex","moveThroughOptions","direction","id","filteredOptions","nextActive","isNaN","length","forEach","isSelected","onKeyUp","target","ref","getElement","getAttribute","keyCode","matches","filter","toLowerCase","includes","onClick","val","callbacks","onInit","onValueChange","targetNamespace","targetActions","onSelectChange","onESCKeyClose"],"sourceRoot":""}