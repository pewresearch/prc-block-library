(()=>{"use strict";var e,o={975:(e,o,t)=>{const r=window.React,l=window.wp.primitives,a=(0,r.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(l.Path,{d:"M20 4H4v1.5h16V4zm-2 9h-3c-1.1 0-2 .9-2 2v3c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2zm.5 5c0 .3-.2.5-.5.5h-3c-.3 0-.5-.2-.5-.5v-3c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3zM4 9.5h9V8H4v1.5zM9 13H6c-1.1 0-2 .9-2 2v3c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2zm.5 5c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-3c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3z",fillRule:"evenodd",clipRule:"evenodd"})),n=window.wp.blocks,c=window.classnames;var s=t.n(c);const i=window.wp.i18n,u=window.wp.element,p=window.wp.blockEditor,d=window.wp.htmlEntities,g=(window.prcComponents,window.wp.components);function m({attributes:e,colors:o,isList:t,clientId:l}){const a=(0,p.__experimentalUseMultipleOriginColorsAndGradients)(),n=(0,u.useMemo)((()=>{if(!t)return[];const{activeBackgroundColor:e,setActiveBackgroundColor:r,activeTextColor:l,setActiveTextColor:a,hoverBackgroundColor:n,setHoverBackgroundColor:c,hoverTextColor:s,setHoverTextColor:u}=o;return[{colorValue:l?.color,onColorChange:a,label:(0,i.__)("Active Text")},{colorValue:e?.color,onColorChange:r,label:(0,i.__)("Active Background")},{colorValue:s?.color,onColorChange:u,label:(0,i.__)("Hover Text")},{colorValue:n?.color,onColorChange:c,label:(0,i.__)("Hover Background")}]}),[o,t]);return(0,r.createElement)(u.Fragment,null,(0,r.createElement)(p.InspectorControls,{group:"color"},(0,r.createElement)(p.__experimentalColorGradientSettingsDropdown,{settings:n,panelId:l,hasColorsOrGradients:!1,disableCustomColors:!0,__experimentalIsRenderedInSidebar:!0,...a})))}function v({attributes:e,setAttributes:o,colors:t,isList:l,clientId:a}){const{perPage:n,taxonomy:c,separator:s,getAllTerms:d,enableLink:v,linkToPublicationsPage:h}=e;return(0,r.createElement)(u.Fragment,null,(0,r.createElement)(m,{attributes:e,colors:t,isList:l,clientId:a}),(0,r.createElement)(p.InspectorControls,null,(0,r.createElement)(g.PanelBody,{title:(0,i.__)("Settings","prc-block-library")},(0,r.createElement)(g.RangeControl,{label:"Number of Terms",value:n,onChange:e=>o({perPage:e}),min:1,max:25,allowReset:!0,resetFallbackValue:25}),!l&&(0,r.createElement)(g.TextControl,{label:"Separator",value:s,onChange:e=>o({separator:e})}),(0,r.createElement)(g.ToggleControl,{label:"Get all terms",checked:d,onChange:()=>o({getAllTerms:!d}),help:(0,i.__)("If checked, all terms will be fetched, not just the terms assigned to the current post.","prc-block-library")}),(0,r.createElement)(g.ToggleControl,{label:"Enable Link",checked:v,onChange:()=>o({enableLink:!v}),help:(0,i.__)("If checked, the term(s) will be linked to the term archive page.","prc-block-library")}),v&&(0,r.createElement)(g.ToggleControl,{label:"Link to Publications Page",checked:h,onChange:()=>o({linkToPublicationsPage:!h}),help:(0,i.__)("If checked, the term(s) will be linked to pre-filter the publications page to the selected term(s).","prc-block-library")}))))}function h({attributes:e,setAttributes:o,context:t,colors:l,isList:a,clientId:n}){return(0,r.createElement)(v,{attributes:e,setAttributes:o,context:t,colors:l,isList:a,clientId:n})}const C=window.wp.data,b=window.wp.apiFetch;var k=t.n(b);const x=[{name:"Term A",slug:"term-a",link:"#"},{name:"Term B",slug:"term-b",link:"#"},{name:"Term C",slug:"term-c",link:"#"}];function f(e,o,t="categories",r=!1){const{postTerms:l}=(0,C.useSelect)((r=>{if(!e||!o||!t)return{postTerms:[]};const{getEditedPostAttribute:l}=r("core/editor");return{postTerms:l(t)}}),[e,o,t]),[a,n]=(0,u.useState)(x),[c,s]=(0,u.useState)(!1);return(0,u.useEffect)((()=>{if(s(!0),console.log("... checking data ...",l),l&&0<l.length)Promise.all(l.map((e=>(e=>new Promise((o=>{k()({path:`/wp/v2/${t}/${e}`}).then((e=>o(e)))})))(e)))).then((e=>{let o=e;!1!==r&&(o=o.slice(0,r)),console.log("GOT SOME DATA",o),n([...o]),s(!1)}));else{let e=x;!1!==r&&(e=e.slice(0,r)),n([...e]),s(!1)}}),[l,r]),{isLoading:c,taxonomyTerms:a}}const w=(0,p.withColors)({activeBackgroundColor:"color"},{activeTextColor:"color"},{hoverBackgroundColor:"color"},{hoverTextColor:"color"})((function({attributes:e,setAttributes:o,context:t,clientId:l,isSelected:a,__unstableLayoutClassNames:n,activeBackgroundColor:c,setActiveBackgroundColor:i,activeTextColor:g,setActiveTextColor:m,hoverBackgroundColor:v,setHoverBackgroundColor:C,hoverTextColor:b,setHoverTextColor:k}){const{postId:x,postType:w}=t,{taxonomy:T,className:y,layout:_,perPage:B,separator:E}=e,A=_?.orientation||"vertical",{taxonomyTerms:P,isLoading:S}=f(x,w,T,B),I=(0,u.useMemo)((()=>"vertical"===A),[A]),O=(0,u.useMemo)((()=>E?{"--separator":`"${E}"`}:{}),[E]),L=(0,u.useMemo)((()=>({activeBackgroundColor:c,setActiveBackgroundColor:i,activeTextColor:g,setActiveTextColor:m,hoverBackgroundColor:v,setHoverBackgroundColor:C,hoverTextColor:b,setHoverTextColor:k})),[c,i,g,m,v,C,b,k]),H=(0,p.useBlockProps)({className:s()(y,n,{"has-separator":!!E&&!I}),style:{...O}}),M=(0,u.useMemo)((()=>{const e=I?{"has-active-background":!!L.activeBackgroundColor.color||L.activeBackgroundColor.class,[`has-active-${L?.activeBackgroundColor?.slug}-background-color`]:!!L?.activeBackgroundColor?.slug,"has-active-color":!!L.activeTextColor.color||L.activeTextColor.class,[`has-active-${L?.activeTextColor?.slug}-color`]:!!L?.activeTextColor?.slug,"has-focus-background":!!L.activeBackgroundColor.color||L.activeBackgroundColor.class,[`has-focus-${L?.activeBackgroundColor?.slug}-background-color`]:!!L?.activeBackgroundColor?.slug,"has-focus-color":!!L.activeTextColor.color||L.activeTextColor.class,[`has-focus-${L?.activeTextColor?.slug}-color`]:!!L?.activeTextColor?.slug,"has-hover-background":!!L.hoverBackgroundColor.color||L.hoverBackgroundColor.class,[`has-hover-${L?.hoverBackgroundColor?.slug}-background-color`]:!!L?.activeBackgroundColor?.slug,"has-hover-color":!!L.hoverTextColor.color||L.hoverTextColor.class,[`has-hover-${L?.hoverTextColor?.slug}-color`]:!!L?.hoverTextColor?.slug}:{};return s()("wp-block-prc-block-post-taxonomy-terms__list-item",e)}),[L,I]),z=(0,u.useMemo)((()=>P.map((e=>(0,r.createElement)("li",{className:M},(0,d.decodeEntities)(e.name))))),[P,S,M]);return(0,r.createElement)(u.Fragment,null,(0,r.createElement)(h,{attributes:e,setAttributes:o,context:t,colors:L,isList:I,clientId:l}),(0,r.createElement)("div",{...H},(0,r.createElement)("ul",{className:"wp-block-prc-block-post-taxonomy-terms__list"},z)))})),T=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/post-taxonomy-terms","version":"0.1.0","title":"Post Taxonomy Terms","category":"theme","description":"Display the current post\'s selected taxonomy terms.","attributes":{"getAllTerms":{"type":"boolean","default":false},"taxonomy":{"type":"string","default":"categories"},"perPage":{"type":"number","default":25},"separator":{"type":"string"},"enableLink":{"type":"boolean","default":true},"linkToPublicationsPage":{"type":"boolean","default":false},"activeBackgroundColor":{"type":"string","default":"ui-gray-very-light"},"activeTextColor":{"type":"string","default":"ui-text-color"},"hoverBackgroundColor":{"type":"string","default":"ui-beige-very-light"},"hoverTextColor":{"type":"string","default":"ui-text-color"},"style":{"type":"object","default":{"spacing":{"blockGap":"var:preset|spacing|20"}}}},"supports":{"anchor":true,"html":false,"color":{"background":true,"text":true,"link":true},"layout":{"allowEditing":true,"allowJustification":true,"allowInheriting":false,"allowOrientation":true,"allowSizingOnChildren":true,"allowSwitching":false,"allowVerticalAlignment":true,"default":{"type":"flex","justifyContent":"left","orientation":"vertical"}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalTextTransform":true,"__experimentalFontFamily":true,"__experimentalLetterSpacing":true,"__experimentalTextDecoration":true,"__experimentalSkipSerialization":["textDecoration"],"__experimentalDefaultControls":{"fontSize":true}},"spacing":{"blockGap":true,"units":["px","em","rem","vh","vw"],"__experimentalDefaultControls":{"blockGap":true}}},"usesContext":["postId","postType"],"textdomain":"post-taxonomy-terms","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":["file:./style-index.css","prc-block-library--baseball-card","prc-block-library--additional-color-supports"]}'),{name:y}=T,_={icon:a,edit:w};(0,n.registerBlockType)(y,{...T,..._})}},t={};function r(e){var l=t[e];if(void 0!==l)return l.exports;var a=t[e]={exports:{}};return o[e](a,a.exports,r),a.exports}r.m=o,e=[],r.O=(o,t,l,a)=>{if(!t){var n=1/0;for(u=0;u<e.length;u++){for(var[t,l,a]=e[u],c=!0,s=0;s<t.length;s++)(!1&a||n>=a)&&Object.keys(r.O).every((e=>r.O[e](t[s])))?t.splice(s--,1):(c=!1,a<n&&(n=a));if(c){e.splice(u--,1);var i=l();void 0!==i&&(o=i)}}return o}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,l,a]},r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};r.O.j=o=>0===e[o];var o=(o,t)=>{var l,a,[n,c,s]=t,i=0;if(n.some((o=>0!==e[o]))){for(l in c)r.o(c,l)&&(r.m[l]=c[l]);if(s)var u=s(r)}for(o&&o(t);i<n.length;i++)a=n[i],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},t=globalThis.webpackChunkpost_taxonomy_terms=globalThis.webpackChunkpost_taxonomy_terms||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var l=r.O(void 0,[350],(()=>r(975)));l=r.O(l)})();
//# sourceMappingURL=index.js.map