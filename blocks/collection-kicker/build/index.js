(()=>{"use strict";var e,t={896:(e,t,r)=>{const n=window.wp.i18n,o=window.wp.blocks,i=window.React,l=window.wp.blockEditor,a=window.wp.components,s=window.wp.element;function c({attributes:e,setAttributes:t}){return(0,i.createElement)(l.InspectorControls,null,(0,i.createElement)(a.PanelBody,{title:"Collection Taxonomy"},(0,i.createElement)("p",null,"Provide Post COntext if available, otherwise just display the term select for collection, make it a searchbox though.")))}function u({attributes:e,setAttributes:t,context:r}){}function p({attributes:e,setAttributes:t,context:r}){return(0,i.createElement)(s.Fragment,null,(0,i.createElement)(c,{attributes:e,setAttributes:t,context:r}),(0,i.createElement)(u,{attributes:e,setAttributes:t,context:r}))}window.wp.coreData;const m=window.wp.data,d=window.wp.apiFetch;var f=r.n(d);function g(e,t){const{postTerms:r}=(0,m.useSelect)((r=>{if(t)return{postTerms:[t]};if(!e)return{postTerms:!1};const{getEditedPostAttribute:n}=r("core/editor");return{postTerms:n("collection")}}),[e,t]),[n,o]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{l(!0),console.log("... checking data ...",r),r&&0<r.length?Promise.all(r.map((e=>(e=>new Promise((t=>{f()({path:`/wp/v2/collection/${e}`}).then((e=>t(e)))})))(e)))).then((e=>{let t=e;t=t.slice(0,1),o(t?.[0]),l(!1)})):l(!1)}),[r,1]),{isLoading:i,collectionTerm:n}}const h=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/collection-kicker","version":"0.1.0","title":"Collection Kicker","category":"theme","description":"Display the \'kicker\' for a collection term. You can select a specific term or default behavior is to display the term for the current post.","attributes":{"termId":{"type":"integer"}},"supports":{"anchor":true,"html":false,"color":{"text":true,"background":false},"spacing":{"margin":["top","bottom"],"padding":true},"typography":{"fontSize":true,"fontAppearance":false,"__experimentalFontStyle":false,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontStyle":false,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true}}},"usesContext":["postType","postId","templateSlug","previewPostType"],"textdomain":"collection-kicker","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","render":"file:./render.php"}'),{name:b}=h,k={edit:function({attributes:e,setAttributes:t,context:r,clientId:o,isSelected:s}){const{termId:c}=e,{postId:u,postType:m}=r,{isLoading:d,collectionTerm:f}=g(u,c),[h,b]=(0,i.useState)(null),[k,w]=(0,i.useState)("Collection Term"),x=(0,l.useBlockProps)();return(0,i.useEffect)((()=>{d&&console.log("loading..."),f&&(console.log("collectionTerm",f,f?.kicker_image),w(f?.name),Array.isArray(f?.kicker_image?.image)&&(console.log("kicker image is an array"),b(f?.kicker_image?.image)))}),[f,d]),(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p,{attributes:e,setAttributes:t,context:!1}),(0,i.createElement)("div",{...x},d&&(0,i.createElement)(l.Warning,null,(0,i.createElement)(a.Spinner,null)," ",(0,n.__)("Loading Collection Kicker...")),!d&&(0,i.createElement)(i.Fragment,null,null!==h&&(0,i.createElement)("img",{src:h[0],alt:f?.name,width:h[1],height:h[1]}),(0,i.createElement)("span",null,k))))}};(0,o.registerBlockType)(b,{...h,...k})}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,r,o,i)=>{if(!r){var l=1/0;for(u=0;u<e.length;u++){for(var[r,o,i]=e[u],a=!0,s=0;s<r.length;s++)(!1&i||l>=i)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(a=!1,i<l&&(l=i));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[l,a,s]=r,c=0;if(l.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(s)var u=s(n)}for(t&&t(r);c<l.length;c++)i=l[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=globalThis.webpackChunkcollection_kicker=globalThis.webpackChunkcollection_kicker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[431],(()=>n(896)));o=n.O(o)})();
//# sourceMappingURL=index.js.map