(()=>{"use strict";var e,t={716:()=>{const e=window.wp.i18n,t=window.wp.blocks,r=window.wp.element,o=window.wp.blockEditor,n=window.wp.data,s=window.wp.components;function a(t){let{attributes:n,setAttributes:a}=t;const{showCurrentChapter:l}=n;return(0,r.createElement)(o.InspectorAdvancedControls,null,(0,r.createElement)(s.ToggleControl,{label:(0,e.__)("Highlight Current Chapter"),checked:l,onChange:()=>{a({showCurrentChapter:!l})},help:(0,e.__)("Highlight the current chapter in the table of contents when scrolling.","prc-block-library")}))}const l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"prc-block/table-of-contents","version":"0.1.0","title":"Table of Contents","category":"text","description":"Displays a list of all heading blocks set to chapter headings.","attributes":{"showCurrentChapter":{"type":"boolean","default":false}},"supports":{"anchor":true,"html":false,"align":["left","right"],"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"typography":{"fontSize":true,"__experimentalFontFamily":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}},"usesContext":["postId","postType","core/group/isSticky","core/group/responsiveThreshold"],"textdomain":"table-of-contents","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),{name:i}=l,c={icon:function(){return(0,r.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:21,preserveAspectRatio:"xMidYMid meet"},(0,r.createElement)(s.Path,{d:"M0 72C0 58.75 10.75 48 24 48H72C85.25 48 96 58.75 96 72V120C96 133.3 85.25 144 72 144H64V240H128V232C128 218.7 138.7 208 152 208H200C213.3 208 224 218.7 224 232V280C224 293.3 213.3 304 200 304H152C138.7 304 128 293.3 128 280V272H64V384C64 392.8 71.16 400 80 400H128V392C128 378.7 138.7 368 152 368H200C213.3 368 224 378.7 224 392V440C224 453.3 213.3 464 200 464H152C138.7 464 128 453.3 128 440V432H80C53.49 432 32 410.5 32 384V144H24C10.75 144 0 133.3 0 120V72zM64 112V80H32V112H64zM192 432V400H160V432H192zM160 240V272H192V240H160zM160 96C160 87.16 167.2 80 176 80H496C504.8 80 512 87.16 512 96C512 104.8 504.8 112 496 112H176C167.2 112 160 104.8 160 96zM288 256C288 247.2 295.2 240 304 240H496C504.8 240 512 247.2 512 256C512 264.8 504.8 272 496 272H304C295.2 272 288 264.8 288 256zM288 416C288 407.2 295.2 400 304 400H496C504.8 400 512 407.2 512 416C512 424.8 504.8 432 496 432H304C295.2 432 288 424.8 288 416z"}))},edit:function(e){let{attributes:t,setAttributes:s,context:l,clientId:i,isSelected:c}=e;const p=(0,o.useBlockProps)(),{chapters:h=[],backChapters:u=[]}=(0,n.useSelect)((e=>{const t=e("core/block-editor").getBlocks().filter((e=>"core/heading"===e.name&&e.attributes.isChapter));return{chapters:0===t.length?[{attributes:{content:"Chapter 1..."}},{attributes:{content:"Chapter 2..."}},{attributes:{content:"Chapter 3..."}}]:t,backChapters:[]}}),[i]);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a,{attributes:t,setAttributes:s}),(0,r.createElement)("div",p,(0,r.createElement)("ul",null,0!==h.length&&h.map((e=>(0,r.createElement)("li",null,e.attributes.content))))))}};(0,t.registerBlockType)(i,{...l,...c}),(0,t.registerBlockVariation)("core/group",{name:"toc",title:(0,e.__)("Table of Contents Widget"),description:(0,e.__)('A Group block in the "alt-card" format with a table of contents list set to show the current chapter.'),attributes:{className:"is-style-card-alt",responsiveThreshold:640},innerBlocks:[["core/heading",{className:"is-style-sub-header toc-title",level:3,content:"Table of Contents",backgroundColor:"slate",textColor:"white"}],["prc-block/table-of-contents",{showCurrentChapter:!0}]]}),(0,t.registerBlockVariation)("core/group",{name:"toc-sticky",title:(0,e.__)("Table of Contents Sticky Sidebar"),description:(0,e.__)('A Group block in the "alt-card" format with a table of contents list that is sticky, watches for the current chapter, and collapses at 480px.'),attributes:{className:"is-style-card-alt",isSticky:!0,responsiveThreshold:480,align:"left"},innerBlocks:[["core/heading",{className:"is-style-sub-header toc-title",level:3,content:"Table of Contents",backgroundColor:"slate",textColor:"white"}],["prc-block/table-of-contents",{showCurrentChapter:!0}]]}),(0,t.unregisterBlockType)("core/table-of-contents")}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,r,n,s)=>{if(!r){var a=1/0;for(p=0;p<e.length;p++){r=e[p][0],n=e[p][1],s=e[p][2];for(var l=!0,i=0;i<r.length;i++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](r[i])))?r.splice(i--,1):(l=!1,s<a&&(a=s));if(l){e.splice(p--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[r,n,s]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,a=r[0],l=r[1],i=r[2],c=0;if(a.some((t=>0!==e[t]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(i)var p=i(o)}for(t&&t(r);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(p)},r=self.webpackChunktable_of_contents=self.webpackChunktable_of_contents||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[431],(()=>o(716)));n=o.O(n)})();
//# sourceMappingURL=index.js.map