(()=>{var e,t={472:(e,t)=>{var o;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var l=typeof o;if("string"===l||"number"===l)e.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&e.push(a)}}else if("object"===l){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var s in o)r.call(o,s)&&o[s]&&e.push(s)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}()},930:(e,t,o)=>{"use strict";const r=window.wp.i18n,n=window.wp.blocks,l=window.wp.domReady;var a=o.n(l);const s=window.wp.element;var c=o(472),i=o.n(c);const u=window.wp.blockEditor,d=window.wp.components,p=window.wp.data;function g(e){let{attributes:t,setAttributes:o,clientId:n,colors:l}=e;const{textColor:a,setTextColor:c,backgroundColor:i,setBackgroundColor:p,headingBackgroundColor:g,setHeadingBackgroundColor:h,headingTextColor:C,setHeadingTextColor:b}=l,{showCurrentChapter:f}=t;return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.InspectorControls,{group:"styles"},(0,s.createElement)(u.PanelColorSettings,{__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0,title:(0,r.__)("Color"),disableCustomColors:!0,colorSettings:[{value:C.color,onChange:b,label:(0,r.__)("Heading Text")},{value:g.color,onChange:h,label:(0,r.__)("Heading Background")},{value:a.color,onChange:c,label:(0,r.__)("Text")},{value:i.color,onChange:p,label:(0,r.__)("Background")}]})),(0,s.createElement)(u.InspectorAdvancedControls,null,(0,s.createElement)(d.ToggleControl,{label:(0,r.__)("Highlight Current Chapter"),checked:f,onChange:()=>{o({showCurrentChapter:!f})},help:(0,r.__)("Highlight the current chapter in the table of contents when scrolling.","prc-block-library")})))}const h=window.wp.coreData;window.wp.url,window.wp.apiFetch;const C=(0,u.withColors)({textColor:"color"},{backgroundColor:"color"},{headingBackgroundColor:"color"},{headingTextColor:"color"})((function(e){let{attributes:t,setAttributes:o,context:r,clientId:n,className:l,isSelected:a,textColor:c,setTextColor:d,backgroundColor:C,setBackgroundColor:b,headingBackgroundColor:f,setHeadingBackgroundColor:m,headingTextColor:k,setHeadingTextColor:w}=e;const{heading:x,showCurrentChapter:v}=t,y=(0,u.useBlockProps)({className:i()(l,{"has-text-color":!!c.color||!!c?.class,[(0,u.getColorClassName)("color",c?.slug)]:!!c?.slug,"has-background":!!C.color||C.class,[(0,u.getColorClassName)("background-color",C?.slug)]:!!C?.slug}),style:{color:!c?.slug&&c?.color,backgroundColor:!C?.slug&&C?.color}}),{chapters:_=[],childPostIds:T=[]}=function(e){let{clientId:t,context:o}=e;const{postId:r,postType:n}=o,{backChapters:l}=function(e,t){const[o,r]=(0,s.useState)([]),{records:n,isResolving:l,hasResolved:a}=(0,h.useEntityRecords)("postType",t,{per_page:50,_fields:["id","link","parent","title","type"],parent:e});return{backChapters:(0,s.useMemo)((()=>(console.log("useBackChapters",n,l,e,t),!n||l?[]:n)),[n,l]),hiddenBackChapters:o,hideBackChapter:e=>{o.includes(e)?r(o.filter((t=>t!==e))):r([...o,e])}}}(r,n),{chapters:a=[],childPostIds:c=[]}=(0,p.useSelect)((e=>{const t=e("core/block-editor").getBlocks().filter((e=>"core/heading"===e.name&&!0===e.attributes?.isChapter));return{chapters:0===t.length?[{attributes:{content:"Chapter 1..."}},{attributes:{content:"Chapter 2..."}},{attributes:{content:"Chapter 3..."}}]:t,childPostIds:[]}}),[t]);return console.log("chapters",a),console.log("backChapters",l),{chapters:(0,s.useMemo)((()=>a),[a]),childPostIds:(0,s.useMemo)((()=>c),[c])}}({clientId:n,context:r});return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(g,{attributes:t,setAttributes:o,colors:{textColor:c,setTextColor:d,backgroundColor:C,setBackgroundColor:b,headingBackgroundColor:f,setHeadingBackgroundColor:m,headingTextColor:k,setHeadingTextColor:w}}),(0,s.createElement)("div",y,(0,s.createElement)(u.RichText,{tagName:"h2",placeholder:"Table of Contents",value:x,onChange:e=>o({heading:e}),className:i()("wp-block-prc-block-table-of-contents__heading",{"has-text-color":!!k.color||!!k?.class,[(0,u.getColorClassName)("color",k?.slug)]:!!k?.slug,"has-background":!!f.color||f.class,[(0,u.getColorClassName)("background-color",f?.slug)]:!!f?.slug}),style:{color:!k?.slug&&k?.color,backgroundColor:!f?.slug&&f?.color}}),(0,s.createElement)("ul",{className:"wp-block-prc-block-table-of-contents__list"},0!==_.length&&_.map((e=>(0,s.createElement)("li",null,e.attributes.content))))))})),b=window.prcIcons,f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/table-of-contents","version":"0.1.0","title":"Table of Contents","category":"text","description":"Displays a list of all heading blocks set to chapter headings.","attributes":{"showCurrentChapter":{"type":"boolean","default":false},"headingBackgroundColor":{"type":"string","default":"slate"},"headingTextColor":{"type":"string","default":"white"},"backgroundColor":{"type":"string","default":"white"},"textColor":{"type":"string","default":"slate"},"heading":{"type":"string","default":"Table of Contents"}},"supports":{"anchor":true,"html":false,"align":["left","right"],"spacing":{"margin":["top","bottom","left","right"],"__experimentalDefaultControls":{"margin":true}},"position":{"sticky":true},"typography":{"__experimentalFontFamily":true,"__experimentalDefaultControls":{"__experimentalFontFamily":true}}},"example":{"attributes":{"className":"is-style-default"},"viewportWidth":320},"usesContext":["postId","postType"],"textdomain":"table-of-contents","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),{name:m}=f,k={icon:function(){return(0,s.createElement)(b.Icon,{icon:b.icons.faListTree,height:18,preserveAspectRatio:"xMidYMid meet"})},edit:C};(0,n.registerBlockType)(m,{...f,...k}),a()((()=>{(0,n.unregisterBlockType)("core/table-of-contents"),(0,n.unregisterBlockType)("yoast-seo/table-of-contents")}))}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,o,n,l)=>{if(!o){var a=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],l=e[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&l||a>=l)&&Object.keys(r.O).every((e=>r.O[e](o[c])))?o.splice(c--,1):(s=!1,l<a&&(a=l));if(s){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,n,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,l,a=o[0],s=o[1],c=o[2],i=0;if(a.some((t=>0!==e[t]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var u=c(r)}for(t&&t(o);i<a.length;i++)l=a[i],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},o=self.webpackChunktable_of_contents=self.webpackChunktable_of_contents||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[431],(()=>r(930)));n=r.O(n)})();
//# sourceMappingURL=index.js.map