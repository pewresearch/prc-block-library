(()=>{var e,o={472:(e,o)=>{var t;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],o=0;o<arguments.length;o++){var t=arguments[o];if(t){var l=typeof t;if("string"===l||"number"===l)e.push(t);else if(Array.isArray(t)){if(t.length){var a=n.apply(null,t);a&&e.push(a)}}else if("object"===l){if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]")){e.push(t.toString());continue}for(var s in t)r.call(t,s)&&t[s]&&e.push(s)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(t=function(){return n}.apply(o,[]))||(e.exports=t)}()},465:(e,o,t)=>{"use strict";const r=window.wp.i18n,n=window.wp.blocks,l=window.wp.domReady;var a=t.n(l);const s=window.wp.element;var i=t(472),c=t.n(i);const d=window.wp.blockEditor,p=window.wp.data,u=window.wp.components;function g(e){let{attributes:o,setAttributes:t,clientId:n,colors:l}=e;const{showCurrentChapter:a,hideHeading:i,className:c,autoDropdownWidth:p}=o,g=(0,s.useMemo)((()=>{const{textColor:e,setTextColor:o,backgroundColor:t,setBackgroundColor:n,dropdownBackgroundColor:a,setDropdownBackgroundColor:s,dropdownTextColor:i,setDropdownTextColor:d,headingBackgroundColor:p,setHeadingBackgroundColor:u,headingTextColor:g,setHeadingTextColor:C}=l,h=[{value:i?.color,onChange:d,label:(0,r.__)("(Mobile) Dropdown Text")},{value:a?.color,onChange:s,label:(0,r.__)("(Mobile) Dropdown Background")},{value:g?.color,onChange:C,label:(0,r.__)("(Desktop) Heading Text")},{value:p?.color,onChange:u,label:(0,r.__)("(Desktop) Heading Background")},{value:e?.color,onChange:o,label:(0,r.__)("Text")},{value:t?.color,onChange:n,label:(0,r.__)("Background")}];return"is-style-dropdown"===c&&(h[0].label=(0,r.__)("Dropdown Text"),h[1].label=(0,r.__)("Dropdown Background"),h.splice(2,2)),h}),[l,c]);return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(d.InspectorControls,{group:"styles"},(0,s.createElement)(d.PanelColorSettings,{__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0,title:(0,r.__)("Color"),disableCustomColors:!0,colorSettings:g})),(0,s.createElement)(d.InspectorControls,null,(0,s.createElement)(u.PanelBody,{title:(0,r.__)("Settings","prc-block-library")},(0,s.createElement)(u.ToggleControl,{label:(0,r.__)("Highlight Current Chapter"),checked:a,onChange:()=>{t({showCurrentChapter:!a})},help:(0,r.__)("Highlight the current chapter in the table of contents when scrolling.","prc-block-library")}),"is-style-default"===c&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.ToggleControl,{label:(0,r.__)("Hide Heading"),checked:i,onChange:()=>{t({hideHeading:!i})},help:(0,r.__)('Hide the heading from the front end when in "Baseball Card" style.',"prc-block-library")}),(0,s.createElement)(u.__experimentalNumberControl,{label:(0,r.__)("Dropdown Activation Width"),onChange:e=>t({autoDropdownWidth:e}),shiftStep:10,value:p})))))}const C=window.wp.coreData;const h=(0,d.withColors)({textColor:"color"},{backgroundColor:"color"},{dropdownBackgroundColor:"color"},{dropdownTextColor:"color"},{headingBackgroundColor:"color"},{headingTextColor:"color"})((function(e){let{attributes:o,setAttributes:t,context:r,clientId:n,isSelected:l,textColor:a,setTextColor:i,backgroundColor:u,setBackgroundColor:h,dropdownBackgroundColor:b,setDropdownBackgroundColor:k,dropdownTextColor:f,setDropdownTextColor:m,headingBackgroundColor:w,setHeadingBackgroundColor:x,headingTextColor:_,setHeadingTextColor:y}=e;const{postId:T,postType:v}=r,{chapters:B=[],parentId:D,parentTitle:E}=function(e){let{postId:o,postType:t}=e;const{record:r,isResolving:n}=(0,C.useEntityRecord)("postType",t,o),{reportPackage:l,parentTitle:a,parentId:i,tableOfContents:c}=(0,s.useMemo)((()=>!r||n?{}:{reportPackage:r?.report_package,parentTitle:r?.report_package?.parent_title,parentId:r?.report_package?.parent_id,tableOfContents:r?.report_package?.table_of_contents}),[r,n]),d=function(){const{currentChapters:e=[]}=(0,p.useSelect)((e=>{const o=e("core/block-editor").getBlocks().filter((e=>"core/heading"===e.name&&!0===e.attributes?.isChapter));return{currentChapters:0===o.length?[{attributes:{content:"Chapter 1..."}},{attributes:{content:"Chapter 2..."}},{attributes:{content:"Chapter 3..."}}]:o}}),[]);return e}();return console.log("useTOC",o,t,l,d,c),{parentId:i,parentTitle:a,chapters:(0,s.useMemo)((()=>c?c?.map((e=>{const t=o===e?.id?d.map((e=>({title:e.attributes?.content,id:e?.id,clientId:e?.clientId,link:e?.link}))):e?.internal_chapters;return{id:e.id,title:e?.title,link:e?.link,internalChapters:t}})):[{id:1,title:"Chapter 1...",internalChapters:[{title:"Chapter 1.1...",id:1},{title:"Chapter 1.2...",id:2},{title:"Chapter 1.3...",id:3}]},{id:2,title:"Chapter 2..."},{id:3,title:"Chapter 3..."}]),[d,c])}}({postId:T,postType:v}),{heading:H,showCurrentChapter:I,className:N,hideHeading:O}=o,{selectBlock:S}=(0,p.useDispatch)("core/block-editor"),[M,j]=(0,s.useState)(!1),A=(0,s.useMemo)((()=>"is-style-dropdown"===N),[N]),{postTitle:P}=(0,p.useSelect)((e=>{const{getEditedPostAttribute:o}=e("core/editor");return{postTitle:o("title")}}),[n]),F=(0,s.useMemo)((()=>({textColor:a,setTextColor:i,backgroundColor:u,setBackgroundColor:h,dropdownBackgroundColor:b,setDropdownBackgroundColor:k,dropdownTextColor:f,setDropdownTextColor:m,headingBackgroundColor:w,setHeadingBackgroundColor:x,headingTextColor:_,setHeadingTextColor:y})),[a,i,u,h,b,k,f,m,w,x,_,y]),R=(0,s.useMemo)((()=>c()(N,{"is-open":A&&M,"has-text-color":!!F.textColor.color||!!F.textColor?.class,[(0,d.getColorClassName)("color",F.textColor?.slug)]:!!F.textColor?.slug,"has-background":!!F.backgroundColor.color||F.backgroundColor.class,[(0,d.getColorClassName)("background-color",F.backgroundColor?.slug)]:!!F.backgroundColor?.slug})),[M,A,F.textColor,F.backgroundColor,N]),W=(0,s.useMemo)((()=>({color:!F.textColor?.slug&&F.textColor?.color,backgroundColor:!F.backgroundColor?.slug&&F.backgroundColor?.color})),[F.textColor,F.backgroundColor]),$=(0,s.useMemo)((()=>c()("wp-block-prc-block-table-of-contents__heading",{"has-heading-color":!!F?.headingTextColor?.color||!!F?.headingTextColor?.class,[`has-heading-${F?.headingTextColor?.slug}-color`]:!!F?.headingTextColor?.slug,"has-dropdown-color":!!F?.dropdownTextColor?.color||!!F?.dropdownTextColor?.class,[`has-dropdown-${F?.dropdownTextColor?.slug}-color`]:!!F?.dropdownTextColor?.slug,"has-heading-background":!!F?.headingBackgroundColor?.color||!!F?.headingBackgroundColor?.class,[`has-heading-${F?.headingBackgroundColor?.slug}-background-color`]:!!F?.headingBackgroundColor?.slug,"has-dropdown-background":!!F?.dropdownBackgroundColor?.color||!!F?.dropdownBackgroundColor?.class,[`has-dropdown-${F?.dropdownBackgroundColor?.slug}-background-color`]:!!F?.dropdownBackgroundColor?.slug,"is-hidden":O})),[A,F,O]),G=(0,s.useMemo)((()=>{const e=A?F.dropdownTextColor:F.headingTextColor,o=A?F.dropdownBackgroundColor:F.headingBackgroundColor;return{color:!e?.slug&&e?.color,backgroundColor:!o.slug&&o?.color}}),[F]),J=(0,d.useBlockProps)({className:R,style:W});return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(g,{attributes:o,setAttributes:t,colors:{textColor:a,setTextColor:i,backgroundColor:u,setBackgroundColor:h,headingBackgroundColor:w,setHeadingBackgroundColor:x,headingTextColor:_,setHeadingTextColor:y}}),(0,s.createElement)("div",J,(0,s.createElement)("div",{className:$},(0,s.createElement)(d.RichText,{tagName:"h2",placeholder:"Table of Contents",value:H,onChange:e=>t({heading:e}),style:G}),A&&(0,s.createElement)("div",{className:"wp-block-prc-block-table-of-contents__dropdown",onClick:()=>j(!M)},"+")),(0,s.createElement)("ul",{className:"wp-block-prc-block-table-of-contents__list"},0!==B.length&&B.map((e=>(0,s.createElement)("li",{className:T===e?.id?"is-active":null},(0,s.createElement)("span",null,e?.title),T===e?.id&&e?.internalChapters&&(0,s.createElement)("ul",null,e.internalChapters.map((e=>(0,s.createElement)("li",null,(0,s.createElement)("a",{onClick:()=>{e.clientId&&S(e.clientId)}},e.title)))))))))))})),b=window.prcIcons,k=[{name:"table-of-contents",isDefault:!0,title:(0,r.__)("Table of Contents (Default)"),description:(0,r.__)('The default table of contents block. Displays a list of links to chapters and back-chapters in a post in a "Baseball Card" style. On mobile this transforms to a dropdown.'),attributes:{className:"is-style-default"},scope:["inserter","transform"],isActive:(e,o)=>o.className===e.className},{name:"table-of-contents-dropdown",isDefault:!0,title:(0,r.__)("Table of Contents (Dropdown)"),description:(0,r.__)("Displays a list of chapters and back-chapters in a post in a dropdown style."),attributes:{className:"is-style-dropdown"},scope:["inserter","transform"],isActive:(e,o)=>o.className===e.className}],f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/table-of-contents","version":"0.1.0","title":"Table of Contents","category":"theme","description":"Displays a list of all heading blocks set to chapter headings.","attributes":{"showCurrentChapter":{"type":"boolean","default":false},"dropdownBackgroundColor":{"type":"string","default":"white"},"dropdownTextColor":{"type":"string","default":"slate"},"headingBackgroundColor":{"type":"string","default":"slate"},"headingTextColor":{"type":"string","default":"white"},"backgroundColor":{"type":"string","default":"white"},"textColor":{"type":"string","default":"slate"},"heading":{"type":"string","default":"Table of Contents"},"hideHeading":{"type":"boolean","default":false},"autoDropdownWidth":{"type":"number","default":300}},"supports":{"anchor":true,"html":false,"align":["left","right"],"spacing":{"margin":["top","bottom","left","right"],"blockGap":true,"__experimentalDefaultControls":{"margin":true,"blockGap":true}},"position":{"sticky":true},"typography":{"__experimentalFontFamily":true,"__experimentalDefaultControls":{"__experimentalFontFamily":true}}},"example":{"attributes":{"className":"is-style-default"},"viewportWidth":320},"usesContext":["postId","postType"],"textdomain":"table-of-contents","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),{name:m}=f,w={icon:function(){return(0,s.createElement)(b.Icon,{icon:b.icons.faListTree,height:18,preserveAspectRatio:"xMidYMid meet"})},edit:h,variations:k};(0,n.registerBlockType)(m,{...f,...w}),a()((()=>{(0,n.unregisterBlockType)("core/table-of-contents"),(0,n.unregisterBlockType)("yoast-seo/table-of-contents")}))}},t={};function r(e){var n=t[e];if(void 0!==n)return n.exports;var l=t[e]={exports:{}};return o[e](l,l.exports,r),l.exports}r.m=o,e=[],r.O=(o,t,n,l)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){t=e[d][0],n=e[d][1],l=e[d][2];for(var s=!0,i=0;i<t.length;i++)(!1&l||a>=l)&&Object.keys(r.O).every((e=>r.O[e](t[i])))?t.splice(i--,1):(s=!1,l<a&&(a=l));if(s){e.splice(d--,1);var c=n();void 0!==c&&(o=c)}}return o}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[t,n,l]},r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={826:0,431:0};r.O.j=o=>0===e[o];var o=(o,t)=>{var n,l,a=t[0],s=t[1],i=t[2],c=0;if(a.some((o=>0!==e[o]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(i)var d=i(r)}for(o&&o(t);c<a.length;c++)l=a[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(d)},t=self.webpackChunktable_of_contents=self.webpackChunktable_of_contents||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var n=r.O(void 0,[431],(()=>r(465)));n=r.O(n)})();
//# sourceMappingURL=index.js.map