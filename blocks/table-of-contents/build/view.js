import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(l={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},c={},e.d(c,l),c),{actions:n,state:r}=(0,o.store)("prc-block/table-of-contents",{state:{*isListItemActive(){const t=(0,o.getElement)(),e=t?.["data-ref-value"]?.replace("#","");return console.log("isListItemActive",t,r,r.currentChapter,e),e===r.currentChapter}},actions:{getInternalChaptersList:()=>{const{ref:t}=(0,o.getElement)();return t.querySelector(".wp-block-prc-block-table-of-contents__list .is-top-level")?t.querySelector(".wp-block-prc-block-table-of-contents__list"):t.querySelector(".wp-block-prc-block-table-of-contents__list .wp-block-prc-block-table-of-contents__list")},initSmoothScrollClickHandler:()=>{n.getInternalChaptersList().querySelectorAll("a").forEach((t=>{t.addEventListener("click",(e=>{const o=t.getAttribute("href");if(0===o.indexOf("#")){e.preventDefault();const t=document.getElementById(o.replace("#",""));t&&(console.log("target",t),t.scrollIntoView({behavior:"smooth"},!0),window.history.pushState(null,null,o))}}))}))},onDropdownClick:t=>{t.preventDefault();const e=(0,o.getContext)(),{isDropdown:n,isDropdownOpen:r}=e;console.log("onDropdownClick",e,t),e.isDropdownOpen=!e.isDropdownOpen}},callbacks:{onInit:()=>{const t=(0,o.getContext)(),{ref:e}=(0,o.getElement)();n.initSmoothScrollClickHandler(),console.log("onInit",e,t,r);const{showCurrentChapter:l}=t;if(!0===l){const{postId:t}=r,e=r.chapters.find((e=>e.id===t))||{},o=e?.internal_chapters||[];r.enableWatchForChapterScroll=!0,r.chaptersWatchList=o}},onResize:()=>{const t=(0,o.getContext)(),{autoDropdownEnabled:e,autoDropdownWidth:n}=t;if(!e)return;const{ref:l}=(0,o.getElement)(),c=l.offsetWidth;console.log("onResize",l,c,t,r),t.isDropdown=!!(c<n&&e)},watchForChapterScroll:()=>{if(!r.enableWatchForChapterScroll)return;const{ref:t}=(0,o.getElement)(),e=r.chaptersWatchList,n=window.scrollY;let l=null,c=!1;const s=e.findIndex((e=>e.id===t?.id));s<e.length-1&&(c=e[s+1]);const i=t.getBoundingClientRect().top-n,a=document.getElementById(c?.id)?.getBoundingClientRect().top,p=a-n;i<0&&p>0&&(l=t?.id),l!==r.currentChapter&&(r.currentChapter=l),console.log("scroll::",t?.id,i,p)}}});var l,c;
//# sourceMappingURL=view.js.map