(()=>{"use strict";var e,t={956:(e,t,l)=>{const a=window.wp.blocks,n=window.React,o=window.wp.apiFetch;var r=l.n(o);const i=window.wp.element,c=window.wp.blockEditor,u=window.wp.components,s=window.wp.htmlEntities,d=window.prcComponents;function m({value:e,onChange:t}){return(0,n.createElement)(u.SelectControl,{label:"Terms starting with letter",value:e,options:[{label:"(Click to select letter)",value:null},{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"},{label:"D",value:"D"},{label:"E",value:"E"},{label:"F",value:"F"},{label:"G",value:"G"},{label:"H",value:"H"},{label:"I",value:"I"},{label:"J",value:"J"},{label:"K",value:"K"},{label:"L",value:"L"},{label:"M",value:"M"},{label:"N",value:"N"},{label:"O",value:"O"},{label:"P",value:"P"},{label:"Q",value:"Q"},{label:"R",value:"R"},{label:"S",value:"S"},{label:"T",value:"T"},{label:"U",value:"U"},{label:"V",value:"V"},{label:"W",value:"W"},{label:"X",value:"X"},{label:"Y",value:"Y"},{label:"Z",value:"Z"}],onChange:e=>t(e)})}function p({value:e,onChange:t}){return(0,n.createElement)(d.TaxonomySelect,{value:e,onChange:t,allowMultiple:!0})}function b({attributes:e,setAttributes:t}){const{letter:l,taxonomy:a}=e;return(0,n.createElement)(c.InspectorControls,null,(0,n.createElement)(u.PanelBody,{title:"Taxonomy Query"},(0,n.createElement)(p,{value:a,onChange:e=>{t({taxonomy:[...e]})}}),(0,n.createElement)(u.CardDivider,null),(0,n.createElement)(m,{value:l,onChange:e=>t({letter:e})})))}function x({children:e}){return(0,n.createElement)(u.Placeholder,{isColumnLayout:!0,icon:"networking",label:"Taxonomy Index A-Z Listing"},(0,n.createElement)("div",null,e))}const v=window.prcIcons,y={from:[{type:"block",blocks:["prc-block/topic-index-az"],transform:e=>{const t=e;return t.exclude&&"string"==typeof t.exclude&&t.exclude.length>0&&(t.exclude=t.exclude.split(",")),Array.isArray(t.exclude)&&t.exclude.length>0&&(t.exclude=t.exclude.map((e=>parseInt(e,10)))),console.log("Transforming from topic-index-az to taxonomy-index-az-list, attributes: ",e," newAttributes: ",t),(0,a.createBlock)("prc-block/taxonomy-index-az-list",t)}}]},f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/taxonomy-index-az-list","version":"0.1.0","title":"Taxonomy Index A-Z Listing","category":"theme","description":"A list of taxonomy terms sorted alphabeticaly. Select terms you want to exclude by checking the box.","keywords":["taxonomy","alphabetical"],"attributes":{"letter":{"type":"string"},"exclude":{"type":"array","default":[]},"taxonomy":{"type":"array","default":["category"]},"disableHeading":{"type":"boolean","default":false}},"supports":{"anchor":true,"align":false,"html":false,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"typography":{"fontSize":true,"__experimentalFontFamily":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}},"textdomain":"taxonomy-index-az-list","editorScript":"file:./index.js","style":"file:./style-index.css"}'),{name:h}=f,g={icon:function(){return(0,n.createElement)(v.Icon,{icon:"arrow-up-a-z"})},edit:function({attributes:e,setAttributes:t}){const{letter:l,exclude:a,taxonomy:o}=e,[d,v]=(0,i.useState)(!1),y=(0,c.useBlockProps)();return(0,i.useEffect)((()=>{if(console.log("Setting the exclude map...",d),!1!==d){const e=d.filter((e=>!0===e.excluded)).map((e=>e.term_id));console.log("tmpExclude",e),t({exclude:e})}}),[d]),(0,i.useEffect)((()=>{((e,t)=>new Promise((l=>{r()({path:`/prc-api/v3/blocks/taxonomy-index-az-list/?letter=${e}&taxonomy=${t}`}).then((e=>{const t=e.map((e=>({name:e.name,term_id:e.term_id,excluded:!1})));l(t)}))})))(l,o).then((e=>{const t=a,l=e.map((e=>{console.log("Load Terms... s?",e);const l={...e};return t.includes(l.term_id)&&(l.excluded=!0),l}));v(l)}))}),[l,o]),(0,n.createElement)(i.Fragment,null,(0,n.createElement)(b,{attributes:e,setAttributes:t}),(0,n.createElement)("div",{...y},void 0===l&&(0,n.createElement)(x,null,(0,n.createElement)(p,{value:o,onChange:e=>{t({taxonomy:[...e]})}}),(0,n.createElement)(m,{value:l,onChange:e=>t({letter:e})})),void 0!==l&&(0,n.createElement)(i.Fragment,null,(0,n.createElement)("h2",null,l),!1!==d&&(0,n.createElement)("ul",null,d.map((e=>{const t=e.excluded,l=!0!==t?(0,s.decodeEntities)(e.name):`${(0,s.decodeEntities)(e.name)} (${e.term_id})`;return(0,n.createElement)("li",null,(0,n.createElement)(u.CheckboxControl,{label:l,checked:t,onChange:t=>((e,t)=>{const l=d;l.map((l=>(l.term_id===t&&(l.excluded=!!e),l))),console.log("onSelect",[...l]),v([...l])})(t,e.term_id)}))}))))))},transforms:y};(0,a.registerBlockType)(h,{...f,...g})}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var o=l[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,l,n,o)=>{if(!l){var r=1/0;for(s=0;s<e.length;s++){for(var[l,n,o]=e[s],i=!0,c=0;c<l.length;c++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](l[c])))?l.splice(c--,1):(i=!1,o<r&&(r=o));if(i){e.splice(s--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[l,n,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,o,[r,i,c]=l,u=0;if(r.some((t=>0!==e[t]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var s=c(a)}for(t&&t(l);u<r.length;u++)o=r[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},l=globalThis.webpackChunktaxonomy_index_az_list=globalThis.webpackChunktaxonomy_index_az_list||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=a.O(void 0,[350],(()=>a(956)));n=a.O(n)})();
//# sourceMappingURL=index.js.map