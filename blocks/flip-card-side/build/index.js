(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,r=window.wp.element,o=window.wp.blockEditor,l=window.wp.components,n=window.wp.data,c=(e,t)=>{const{getBlock:r}=t("core/block-editor"),{innerBlocks:o}=r(e);return o.find((e=>"is-style-front"===e.attributes.className)).clientId};function a(e){let{clientId:t}=e;const{frontCardClientId:a}=(0,n.useSelect)((e=>{const{getBlock:r,getBlockRootClientId:o}=e("core/block-editor"),{name:l,attributes:n}=r(t),{className:a}=n;let i=t;if("is-style-back"===a){const r=o(t);i=c(r,e)}return"prc-block/flip-card-controller"===l&&(i=c(t,e)),{frontCardClientId:i}}),[t]),[i,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=document.querySelector(".wp-block-post-content.block-editor-block-list__layout").querySelector(`[data-block="${a}"]`);e&&new MutationObserver((t=>{t.forEach((t=>{console.log("mutation",t),"attributes"===t.type&&s("true"===e.dataset.flipped)}))})).observe(e,{attributes:!0})}),[a]),(0,r.createElement)(o.BlockControls,null,(0,r.createElement)(l.ToolbarGroup,null,(0,r.createElement)(l.ToolbarButton,{onClick:()=>(()=>{const e=document.querySelector(".wp-block-post-content.block-editor-block-list__layout").querySelector(`[data-block="${a}"]`);if(e){console.log("doFLIP = frontCardElm",e,a);const{flipped:t}=e.dataset;e.dataset.flipped="true"===t?"false":"true"}})(),isActive:i,label:"Flip Over",icon:"image-rotate"})))}const i=["core/heading","core/paragraph","core/list","core/image","core/button"];function s(e){let{variant:t="front"}=e;return"back"===t?(0,r.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",height:21,preserveAspectRatio:"xMidYMid meet"},(0,r.createElement)(l.Path,{d:"M7.468 194.9C-7.906 168.2 1.218 134.2 27.85 118.8L220.7 7.468C247.3-7.906 281.4 1.218 296.8 27.85L463.8 317.1C479.1 343.8 470 377.8 443.4 393.2L250.5 504.5C223.9 519.9 189.9 510.8 174.5 484.2L7.468 194.9z"}),(0,r.createElement)(l.Path,{d:"M324.1 499L459.4 420.9C501.3 396.7 515.7 343.1 491.5 301.1L354.7 64.25C356.5 64.08 358.2 64 360 64H584C614.9 64 640 89.07 640 120V456C640 486.9 614.9 512 584 512H360C346.4 512 333.8 507.1 324.1 499V499z",style:{opacity:.4}})):(0,r.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",height:21,preserveAspectRatio:"xMidYMid meet"},(0,r.createElement)(l.Path,{d:"M7.468 194.9C-7.906 168.2 1.218 134.2 27.85 118.8L220.7 7.468C247.3-7.906 281.4 1.218 296.8 27.85L463.8 317.1C479.1 343.8 470 377.8 443.4 393.2L250.5 504.5C223.9 519.9 189.9 510.8 174.5 484.2L7.468 194.9zM49.04 170.9L216.1 460.2C218.2 463.8 222.9 465.1 226.5 462.1L419.4 351.6C423.1 349.5 424.3 344.8 422.2 341.1L255.2 51.85C253.1 48.18 248.4 46.92 244.7 49.04L51.85 160.4C48.18 162.5 46.92 167.2 49.04 170.9H49.04zM491.5 301.1L354.7 64.25C356.5 64.08 358.2 63.1 360 63.1H584C614.9 63.1 640 89.07 640 119.1V456C640 486.9 614.9 512 584 512H360C346.4 512 333.8 507.1 324.1 498.1L459.4 420.9C501.3 396.7 515.7 343.1 491.5 301.1L491.5 301.1z"}))}const d=[{name:"flip-card-front",title:(0,e.__)("Flip Card Front","prc-block-library"),attributes:{className:"is-style-front"},innerBlocks:[["core/paragraph",{placeholder:"Flip Card Front..."}]],isActive:e=>{let{className:t}=e;return!!t&&t.includes("is-style-front")}},{name:"flip-card-back",title:(0,e.__)("Flip Card Back","prc-block-library"),attributes:{className:"is-style-back"},innerBlocks:[["core/paragraph",{placeholder:"Flip Card Back..."}]],icon:(0,r.createElement)(s,{variant:"back"}),isActive:e=>{let{className:t}=e;return!!t&&t.includes("is-style-back")}}],p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"prc-block/flip-card-side","version":"0.1.0","title":"Flip Card Side","category":"media","attributes":{"allowedBlocks":{"type":"array"}},"supports":{"color":{"background":true,"link":true,"text":true},"html":false,"spacing":{"padding":true,"margin":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true},"__experimentalBorder":{"color":true,"width":true}},"parent":["prc-block/flip-card-controller"],"textdomain":"flip-card-side","editorScript":"file:./index.js","render":"file:./render.php"}'),{name:u}=p,m={icon:s,edit:function(e){let{attributes:t,setAttributes:l,context:n,clientId:c,isSelected:s}=e;const d=(0,o.useBlockProps)(),{allowedBlocks:p,orientation:u}=t,m=(0,o.useInnerBlocksProps)(d,{allowedBlocks:p||i,templateLock:!1});return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a,{clientId:c}),(0,r.createElement)("div",m))},save:function(e){let{attributes:t}=e;return(0,r.createElement)(o.InnerBlocks.Content,null)},variations:d};(0,t.registerBlockType)(u,{...p,...m})})();