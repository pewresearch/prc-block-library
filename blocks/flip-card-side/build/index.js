(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,r=window.wp.element,o=window.wp.blockEditor,l=window.wp.components,c=window.wp.data;function n(e){let{clientId:t}=e;const{controllerId:n}=(0,c.useSelect)((e=>{const{getBlockName:r,getBlockRootClientId:o}=e("core/block-editor"),l=r(t);let c=t;return"prc-block/flip-card-controller"!==l&&(c=o(t)),{controllerId:c}}),[t]),[a,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=document.querySelector(".wp-block-post-content.block-editor-block-list__layout").querySelector(`[data-block="${n}"]`);e&&new MutationObserver((t=>{t.forEach((t=>{console.log("mutation",t),"attributes"===t.type&&i("true"===e.dataset.flipped)}))})).observe(e,{attributes:!0})}),[n]),(0,r.createElement)(o.BlockControls,null,(0,r.createElement)(l.ToolbarGroup,null,(0,r.createElement)(l.ToolbarButton,{onClick:()=>(()=>{const e=document.querySelector(".wp-block-post-content.block-editor-block-list__layout").querySelector(`[data-block="${n}"]`);if(e){const{flipped:t}=e.dataset;e.dataset.flipped="true"===t?"false":"true"}})(),isActive:a,label:a?"Flip Over to Front":"Flip Over to Back",icon:"image-rotate"})))}const a=["core/heading","core/paragraph","core/list","core/image","core/button"],i=window.prcIcons;function s(){return(0,r.createElement)(i.Icon,{icon:i.icons.faCreditCardFrontLight,width:21,preserveAspectRatio:"xMidYMid meet"})}const p=[{name:"flip-card-front",title:(0,e.__)("Flip Card Front","prc-block-library"),attributes:{className:"is-style-front"},innerBlocks:[["core/paragraph",{placeholder:"Flip Card Front..."}]],isActive:e=>{let{className:t}=e;return!!t&&t.includes("is-style-front")}},{name:"flip-card-back",title:(0,e.__)("Flip Card Back","prc-block-library"),attributes:{className:"is-style-back"},innerBlocks:[["core/paragraph",{placeholder:"Flip Card Back..."}]],icon:(0,r.createElement)(s,{variant:"back"}),isActive:e=>{let{className:t}=e;return!!t&&t.includes("is-style-back")}}],d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"prc-block/flip-card-side","version":"0.1.0","title":"Flip Card Side","category":"media","attributes":{"allowedBlocks":{"type":"array"}},"supports":{"color":{"background":true,"link":true,"text":true},"html":false,"spacing":{"padding":true,"margin":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true},"__experimentalBorder":{"color":true,"width":true}},"parent":["prc-block/flip-card-controller"],"textdomain":"flip-card-side","editorScript":"file:./index.js","render":"file:./render.php"}'),{name:u}=d,k={icon:s,edit:function(e){let{attributes:t,setAttributes:l,context:c,clientId:i,isSelected:s}=e;const p=(0,o.useBlockProps)(),{allowedBlocks:d,orientation:u}=t,k=(0,o.useInnerBlocksProps)(p,{allowedBlocks:d||a,templateLock:!1});return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(n,{clientId:i}),(0,r.createElement)("div",k))},save:function(e){let{attributes:t}=e;return(0,r.createElement)(o.InnerBlocks.Content,null)},variations:p};(0,t.registerBlockType)(u,{...d,...k})})();
//# sourceMappingURL=index.js.map