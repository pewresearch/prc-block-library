import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},i={},t.d(i,n),i);var n,i;function l(e){const t=document.createElement("div");t.style.width=e,document.body.appendChild(t);const o=window.getComputedStyle(t).width;return document.body.removeChild(t),parseFloat(o)}const{state:s,actions:c}=(0,o.store)("prc-block/navigation-mega-menu",{state:{get isOpen(){const e=(0,o.getContext)(),{id:t}=e;return s[t]?.isOpen},get width(){return(0,o.getContext)().width},get left(){return(0,o.getContext)().left},get top(){return(0,o.getContext)().top}},actions:{toggleMenuOnClick(){c.toggleMenu()},closeMenuOnClick(){c.closeMenu("click"),c.closeMenu("focus")},toggleMenu(){const e=(0,o.getContext)(),{id:t}=e;s[t].isOpen=!s[t].isOpen},openMenu(){const e=(0,o.getContext)(),{id:t}=e;s[t].isOpen=!0},closeMenu(){const e=(0,o.getContext)(),{id:t}=e;s[t].isOpen=!1},setMenuPositions(){const{ref:e}=(0,o.getElement)(),t=e.querySelector(".wp-block-prc-block-navigation-mega-menu__container");if(!t)return;const n=t.closest(".wp-block-navigation");if(!n)return;const i=(0,o.getContext)(),s=n.offsetHeight;i.top=s+1;const c=window.getComputedStyle(document.body),r=c.getPropertyValue("--wp--style--root--padding-left").trim(),g=c.getPropertyValue("--wp--style--root--padding-left").trim(),a=l(r),d=l(g),u=window.innerWidth-d-a,p=t.offsetWidth,m=t.getBoundingClientRect(),f=n.getBoundingClientRect(),w=f.left<=a?a-f.left:f.left-a,C=(u-p)/2;p>u?(console.log("a"),i.width=`${window.innerWidth}px`,i.left=`-${f.left}px`):m.left>0&&C>=m.left?(console.log("b"),i.left=""):w>=C?(console.log("c"),i.width="",i.left=`-${w-C}px`):(console.log("d"),i.width="",i.left=C-w+"px")}},callbacks:{onInit(){const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)(),n=t.querySelector(".wp-block-prc-block-navigation-mega-menu__container");e.menuRef=n,console.log("onInit",t,n),c.setMenuPositions();const i=n.querySelector(".wp-block-group.has-background");if(i){const t=i.className.match(/(has-.*-background-color|has-background|has-text-color|has-.*-color)/g);e.activeClassnames=t}},getToggleClassname(){const e=["wp-block-navigation-item__content","wp-block-prc-block-navigation-mega-menu__toggle"],t=(0,o.getContext)(),{activeClassnames:n}=t;return console.log("getToggleClassname",e,n),s.isOpen?e.join(" ")+n.join(" "):e.join(" ")},onResize(){c.setMenuPositions()}}});
//# sourceMappingURL=view.js.map