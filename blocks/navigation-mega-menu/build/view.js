import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},i={},t.d(i,n),i);var n,i;function c(e){const t=document.createElement("div");t.style.width=e,document.body.appendChild(t);const o=window.getComputedStyle(t).width;return document.body.removeChild(t),parseFloat(o)}const{state:l,actions:s}=(0,o.store)("prc-block/navigation-mega-menu",{state:{get isActive(){const e=(0,o.getContext)(),{id:t}=e;return l[t]?.isActive},get width(){return(0,o.getContext)().width},get left(){return(0,o.getContext)().left},get top(){return(0,o.getContext)().top}},actions:{closeAll:()=>{Object.keys(l).forEach((e=>{l[e].isActive=!1}))},toggleMenuOnClick(){s.toggleMenu()},closeMenuOnClick(){s.closeMenu("click"),s.closeMenu("focus")},toggleMenu(){const e=(0,o.getContext)(),{id:t}=e;l[t].isActive=!l[t].isActive},openMenu(){const e=(0,o.getContext)(),{id:t}=e;l[t].isActive=!0},closeMenu(){const e=(0,o.getContext)(),{id:t}=e;l[t].isActive=!1},setMenuPositions(){const{ref:e}=(0,o.getElement)(),t=e.querySelector(".wp-block-prc-block-navigation-mega-menu__container");if(!t)return;const n=t.closest(".wp-block-navigation");if(!n)return;const i=(0,o.getContext)(),l=n.offsetHeight;i.top=l-1;const s=window.getComputedStyle(document.body),r=s.getPropertyValue("--wp--style--root--padding-left").trim(),a=s.getPropertyValue("--wp--style--root--padding-left").trim(),g=c(r),u=c(a),d=window.innerWidth-u-g,p=t.offsetWidth,m=t.getBoundingClientRect(),f=n.getBoundingClientRect(),C=f.left<=g?g-f.left:f.left-g,v=(d-p)/2;p>d?(console.log("a"),i.width=`${window.innerWidth}px`,i.left=`-${f.left}px`):m.left>0&&v>=m.left?(console.log("b"),i.left=""):C>=v?(console.log("c"),i.width="",i.left=`-${C-v}px`):(console.log("d"),i.width="",i.left=v-C+"px")}},callbacks:{onInit(){const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)(),n=t.querySelector(".wp-block-prc-block-navigation-mega-menu__container");e.menuRef=n,console.log("onInit",t,n),s.setMenuPositions();const i=n.querySelector(".wp-block-group.has-background");if(i){const t=i.className.match(/(has-.*-background-color|has-background|has-text-color|has-.*-color)/g);e.activeClassnames=t}},getToggleClassname(){const e=["wp-block-navigation-item__content","wp-block-prc-block-navigation-mega-menu__toggle"],t=(0,o.getContext)(),{activeClassnames:n}=t;return console.log("getToggleClassname",e,n),l.isActive?e.join(" ")+n.join(" "):e.join(" ")},onResize(){s.setMenuPositions()},onWindowClickCloseMegaMenu:e=>{const t=(0,o.getContext)(),{id:n}=t;if(!n)return;if(!l[n]?.isActive)return;const i=(0,o.getElement)(),{ref:c}=i;console.log("onWindowClickCloseMegaMenu",i,e.target),(!c.contains(e.target)||e.target.classList.contains("wp-block-prc-block-popup-modal__outer"))&&(c.querySelector(".wp-block-prc-block-navigation-mega-menu__container").innerHTML.includes(e.target.innerHTML)||!0!==l[n].isActive||(l[n].isActive=!1))},onESCKey:e=>{const t=(0,o.getContext)(),{id:n}=t;n&&"Escape"===e.key&&!0===l[n].isActive&&(e.preventDefault(),l[n].isActive=!1)}}});
//# sourceMappingURL=view.js.map