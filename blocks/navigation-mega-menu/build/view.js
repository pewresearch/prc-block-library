import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(n={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},i={},e.d(i,n),i);var n,i;function c(t){const e=document.createElement("div");e.style.width=t,document.body.appendChild(e);const o=window.getComputedStyle(e).width;return document.body.removeChild(e),parseFloat(o)}const{state:s,actions:r}=(0,o.store)("prc-block/navigation-mega-menu",{state:{get isActive(){const t=(0,o.getContext)(),{id:e}=t;return s[e]?.isActive},get width(){return(0,o.getContext)().width},get left(){return(0,o.getContext)().left},get top(){return(0,o.getContext)().top}},actions:{closeAll:()=>{Object.keys(s).forEach((t=>{s[t].isActive=!1}))},toggleMenuOnClick(){r.toggleMenu()},closeMenuOnClick(){r.closeMenu("click"),r.closeMenu("focus")},toggleMenu(){const t=(0,o.getContext)(),{id:e}=t;s[e].isActive=!s[e].isActive},openMenu(){const t=(0,o.getContext)(),{id:e}=t;s[e].isActive=!0},closeMenu(){const t=(0,o.getContext)(),{id:e}=t;s[e].isActive=!1},setMenuPositions(){const{ref:t}=(0,o.getElement)(),e=t.querySelector(".wp-block-prc-block-navigation-mega-menu__container");if(!e)return;const n=e.closest(".wp-block-navigation");if(!n)return;const i=(0,o.getContext)(),s=n.offsetHeight;i.top=s-1;const r=window.getComputedStyle(document.body),l=r.getPropertyValue("--wp--style--root--padding-left").trim(),a=r.getPropertyValue("--wp--style--root--padding-left").trim(),g=c(l),u=c(a),d=window.innerWidth-u-g,p=e.offsetWidth,m=e.getBoundingClientRect(),f=n.getBoundingClientRect(),v=f.left<=g?g-f.left:f.left-g,w=(d-p)/2;p>d?(i.width=`${window.innerWidth}px`,i.left=`-${f.left}px`):m.left>0&&w>=m.left?i.left="":v>=w?(i.width="",i.left=`-${v-w}px`):(i.width="",i.left=w-v+"px")}},callbacks:{onInit(){const t=(0,o.getContext)(),{ref:e}=(0,o.getElement)(),n=e.querySelector(".wp-block-prc-block-navigation-mega-menu__container");t.menuRef=n,r.setMenuPositions();const i=n.querySelector(".wp-block-group.has-background");if(i){const e=i.className.match(/(has-.*-background-color|has-background|has-text-color|has-.*-color)/g);t.activeClassnames=e}},getToggleClassname(){const t=["wp-block-navigation-item__content","wp-block-prc-block-navigation-mega-menu__toggle"],e=(0,o.getContext)(),{activeClassnames:n}=e;return s.isActive?t.join(" ")+n.join(" "):t.join(" ")},onResize(){r.setMenuPositions()},onWindowClickCloseMegaMenu:t=>{const e=(0,o.getContext)(),{id:n}=e;if(!n)return;if(!s[n]?.isActive)return;const i=(0,o.getElement)(),{ref:c}=i;c.contains(t.target)&&!t.target.classList.contains("wp-block-prc-block-popup-modal__outer")||c.querySelector(".wp-block-prc-block-navigation-mega-menu__container").innerHTML.includes(t.target.innerHTML)||!0!==s[n].isActive||(s[n].isActive=!1)},onESCKey:t=>{const e=(0,o.getContext)(),{id:n}=e;n&&"Escape"===t.key&&!0===s[n].isActive&&(t.preventDefault(),s[n].isActive=!1)}}});
//# sourceMappingURL=view.js.map