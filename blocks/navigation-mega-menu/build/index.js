(()=>{"use strict";var e,o={673:(e,o,t)=>{const n=window.React,l=window.wp.blocks,r=window.wp.hooks,a=window.classnames;var i=t.n(a);const c=window.wp.blockEditor,s=window.wp.i18n,u=window.wp.components,m=window.wp.data,g=window.wp.element,d=window.wp.coreData;function p({menuSlug:e,setMenuSlug:o=(()=>{})}){const{hasResolved:t,records:l}=(0,d.useEntityRecords)("postType","wp_template_part",{per_page:-1}),r=(0,n.useMemo)((()=>{if(!l||!l.length)return[];const o=l.find((o=>o.slug===e));return o?[{label:o.title.rendered,value:o.slug}]:l.filter((e=>"menu"===e.area||e.title.rendered.includes("menu"))).map((e=>({label:e.title.rendered,value:e.slug})))}),[e,l]),a=(0,n.useMemo)((()=>r.length>0),[r]),i=(0,n.useMemo)((()=>e&&r?.length&&r.some((o=>o.value===e))),[e,r]),c=(0,n.useMemo)((()=>{if(!(e&&t&&l&&l.length))return;const o=t&&l&&l.find((o=>o.slug===e));return o.theme&&o.slug?`${o.theme}//${o.slug}`:void 0}),[e,t,l]);return console.log("useMenuTemplatePart",r,a,i,l,c),{menuOptions:r,hasMenus:a,selectedMenuAndExists:i,menuId:c,setMenuSlug:o}}function b({menuSlug:e,onChange:o=(()=>{})}){const t=(0,m.useSelect)((e=>e("core").getSite().url)),l=t?`${t}/wp-admin/site-editor.php?path=%2Fpatterns&categoryType=wp_template_part&categoryId=menu`:"",{menuOptions:r,hasMenus:a,selectedMenuAndExists:i}=p({menuSlug:e,setMenuSlug:e=>o(e)}),c=(0,n.createElement)(u.Notice,{status:"warning",isDismissible:!1},(0,g.createInterpolateElement)((0,s.__)("No menu templates could be found. Create a new one in the <a>Site Editor</a>.","mega-menu-block"),{a:(0,n.createElement)("a",{href:l,target:"_blank",rel:"noreferrer"})})),d=(0,n.createElement)(u.Notice,{status:"warning",isDismissible:!1},(0,s.__)("The selected menu template no longer exists. Choose another.","mega-menu-block"));return(0,n.createElement)(g.Fragment,null,(0,n.createElement)(u.ComboboxControl,{label:(0,s.__)("Menu Template","mega-menu-block"),value:e,options:r,onChange:o,help:a&&(0,g.createInterpolateElement)((0,s.__)("Create and modify menu templates in the <a>Site Editor</a>.","mega-menu-block"),{a:(0,n.createElement)("a",{href:l,target:"_blank",rel:"noreferrer"})})}),!a&&c,a&&!i&&d)}function v({colors:e,clientId:o}){const t=(0,c.__experimentalUseMultipleOriginColorsAndGradients)(),l=(0,n.useMemo)((()=>{const{menuItemBackgroundColor:o,setMenuItemBackgroundColor:t,menuItemTextColor:n,setMenuItemTextColor:l,menuItemActiveBackgroundColor:r,setMenuItemActiveBackgroundColor:a,menuItemActiveTextColor:i,setMenuItemActiveTextColor:c,menuOverlayBackgroundColor:u,setMenuOverlayBackgroundColor:m,menuOverlayTextColor:g,setMenuOverlayTextColor:d,menuActiveBorderColor:p,setMenuActiveBorderColor:b}=e;return[{colorValue:o?.color,onColorChange:t,label:(0,s.__)("Menu Item Background Color","prc-block-library")},{colorValue:n?.color,onColorChange:l,label:(0,s.__)("Menu Item Text Color","prc-block-library")},{colorValue:r?.color,onColorChange:a,label:(0,s.__)("Menu Item Active Background Color","prc-block-library")},{colorValue:i?.color,onColorChange:c,label:(0,s.__)("Menu Item Active Text Color","prc-block-library")},{colorValue:u?.color,onColorChange:m,label:(0,s.__)("Menu Overlay Background Color","prc-block-library")},{colorValue:g?.color,onColorChange:d,label:(0,s.__)("Menu Overlay Text Color","prc-block-library")},{colorValue:p?.color,onColorChange:b,label:(0,s.__)("Menu Active Border Color","prc-block-library")}]}),[e]);return(0,n.createElement)(c.InspectorControls,{group:"color"},(0,n.createElement)(c.__experimentalColorGradientSettingsDropdown,{settings:l,panelId:o,hasColorsOrGradients:!1,disableCustomColors:!0,__experimentalIsRenderedInSidebar:!0,...t}))}function C({attributes:e,setAttributes:o,colors:t,clientId:l}){const{menuSlug:r,label:a,title:i,description:m,url:g,icon:d,hasBoxShadow:p}=e;return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(c.InspectorControls,{group:"settings"},(0,n.createElement)(u.PanelBody,{title:(0,s.__)("Settings","prc-navigation-mega-menu"),initialOpen:!0},(0,n.createElement)(u.TextControl,{label:(0,s.__)("Label","prc-navigation-mega-menu"),type:"text",value:a,onChange:e=>o({label:e}),autoComplete:"off"}),(0,n.createElement)(b,{menuSlug:r,onChange:e=>o({menuSlug:e})}),(0,n.createElement)(u.TextareaControl,{className:"settings-panel__description",label:(0,s.__)("Description","prc-navigation-mega-menu"),type:"text",value:m||"",onChange:e=>{o({description:e})},help:(0,s.__)("The description will be displayed in the menu if the current theme supports it.","prc-navigation-mega-menu"),autoComplete:"off"}),(0,n.createElement)(u.TextControl,{label:(0,s.__)("Title","prc-navigation-mega-menu"),type:"text",value:i||"",onChange:e=>{o({title:e})},help:(0,s.__)("Additional information to help clarify the purpose of the link.","prc-navigation-mega-menu"),autoComplete:"off"}),(0,n.createElement)(u.TextControl,{label:(0,s.__)("URL","prc-navigation-mega-menu"),type:"text",value:g||"",onChange:e=>{o({url:e})},help:(0,s.__)("When the mega menu is unable to be opened clicking on the navigation link will direct the user to this url instead.","prc-navigation-mega-menu"),autoComplete:"off"}),(0,n.createElement)(u.SelectControl,{label:(0,s.__)("Icon","prc-navigation-mega-menu"),value:d,options:[{label:(0,s.__)("Dropdown","prc-navigation-mega-menu"),value:"dropdown"},{label:(0,s.__)("Mobile Menu","prc-navigation-mega-menu"),value:"mobile"},{label:(0,s.__)("Search","prc-navigation-mega-menu"),value:"search"}],onChange:e=>{o({icon:e})},help:(0,s.__)("Choose an icon to display next to the label. Mobile and Search options replace the label with an icon.","prc-navigation-mega-menu")}),(0,n.createElement)(u.ToggleControl,{label:(0,s.__)("Has box shadow","prc-navigation-mega-menu"),checked:p,onChange:e=>o({hasBoxShadow:e}),help:(0,s.__)("Enable to add a box shadow to the mega menu.","prc-navigation-mega-menu")}))),(0,n.createElement)(v,{colors:t,clientId:l}))}const h=window.prcIcons;function _({attributes:e,setAttributes:o,isSelected:t,isMenuVisible:l,toggleMenu:r}){const{label:a,description:i,icon:u}=e,m=(0,n.useMemo)((()=>"dropdown"===u?"caret-down":"mobile"===u?"bars":"search"===u?"magnifying-glass":"caret-down"),[u]),g=(0,n.useMemo)((()=>"caret-down"===m?"sharp-solid":"mobile"===u?"light":"solid"),[m,u]),d=!u||"dropdown"===u;return(0,n.createElement)("button",{className:"wp-block-navigation-item__content wp-block-prc-block-navigation-mega-menu__toggle","aria-expanded":l,type:"button"},d&&(0,n.createElement)(c.RichText,{identifier:"label",className:"wp-block-navigation-item__label",value:a,onChange:e=>o({label:e}),"aria-label":(0,s.__)("Mega menu link text","mega-menu-block"),placeholder:(0,s.__)("Add labelâ€¦","mega-menu-block"),allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),(0,n.createElement)("span",{className:`wp-block-prc-block-navigation-mega-menu__toggle-${u}-icon`,onClick:()=>{t&&r()}},(0,n.createElement)(h.Icon,{library:g,icon:m})),i&&(0,n.createElement)("span",{className:"wp-block-navigation-item__description"},i))}const k=window.prcComponents;function w({menuSlug:e,overlayClassnames:o,clientId:t,toggleMenu:l,isMobile:r}){const a=(0,n.createRef)(),{menuId:i}=p({menuSlug:e}),{topPosition:c,leftPosition:s,width:u}=function({ref:e,isMobile:o,useState:t,useEffect:n}){const[l,r]=t(0),[a,i]=t(0),[c,s]=t(null);return n((()=>{const o=()=>{if(e.current){let o;if(!e.current.classList.contains("wp-block-prc-block-navigation-mega-menu__container"))return;o=e.current;let t=o.closest(".wp-block-navigation");t=t.parentElement;const{width:n,left:l,top:a}=function(e,o){if(!e&&!o)return;let t,n,l;const r=o.offsetHeight,a=e.closest("body").offsetWidth,i=e.getBoundingClientRect(),c=i?.left;return l=r-1+"px",t=`${a}px`,n=`-${c}px`,{width:t,left:n,top:l}}(o,t);r(a),i(l),s(n)}};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}}),[e.current,o]),{topPosition:l,leftPosition:a,width:c}}({ref:a,isMobile:r,useState:n.useState,useEffect:n.useEffect});return(0,n.createElement)(k.InnerBlocksAsSyncedContent,{passedRef:a,postId:i,postType:"wp_template_part",postTypeLabel:"Mega Menu",blockProps:{className:`${o}`,style:{top:c,left:s,width:u}},clientId:t})}const M=(0,c.withColors)({menuItemBackgroundColor:"color"},{menuItemTextColor:"color"},{menuItemActiveBackgroundColor:"color"},{menuItemActiveTextColor:"color"},{menuOverlayBackgroundColor:"color"},{menuOverlayTextColor:"color"},{menuActiveBorderColor:"color"})((function({attributes:e,setAttributes:o,clientId:t,isSelected:l,menuItemBackgroundColor:r,setMenuItemBackgroundColor:a,menuItemTextColor:s,setMenuItemTextColor:u,menuItemActiveBackgroundColor:m,setMenuItemActiveBackgroundColor:g,menuItemActiveTextColor:d,setMenuItemActiveTextColor:p,menuOverlayBackgroundColor:b,setMenuOverlayBackgroundColor:v,menuOverlayTextColor:h,setMenuOverlayTextColor:k,menuActiveBorderColor:M,setMenuActiveBorderColor:f}){const{icon:x,label:y,description:I,menuSlug:E,isMobile:B}=e,[T,A]=(0,n.useState)(!1),S=()=>A(!T),O={menuItemBackgroundColor:r,setMenuItemBackgroundColor:a,menuItemTextColor:s,setMenuItemTextColor:u,menuItemActiveBackgroundColor:m,setMenuItemActiveBackgroundColor:g,menuItemActiveTextColor:d,setMenuItemActiveTextColor:p,menuOverlayBackgroundColor:b,setMenuOverlayBackgroundColor:v,menuOverlayTextColor:h,setMenuOverlayTextColor:k,menuActiveBorderColor:M,setMenuActiveBorderColor:f},L=i()("wp-block-navigation-item",{"is-active":T,"has-active-menu-item-background":!!m.color||m.class,[(0,c.getColorClassName)("active-menu-item-background",m?.slug)]:!!m?.slug,"has-active-menu-item-color":!!d.color||d.class,[(0,c.getColorClassName)("active-menu-item-color",d?.slug)]:!!d?.slug,"has-menu-item-background":!!r.color||r.class,[(0,c.getColorClassName)("menu-item-background",r?.slug)]:!!r?.slug,"has-menu-item-color":!!s.color||s.class,[(0,c.getColorClassName)("menu-item-color",s?.slug)]:!!s?.slug,"has-active-border-color":!!M.color||M.class,[(0,c.getColorClassName)("active-border-color",M?.slug)]:!!M?.slug,"has-label":"dropdown"===x}),N=i()("wp-block-prc-block-navigation-mega-menu__container",{"has-overlay-background":!!b.color||b.class,[(0,c.getColorClassName)("overlay-background",b?.slug)]:!!b?.slug,"has-overlay-color":!!h.color||h.class,[(0,c.getColorClassName)("overlay-color",h?.slug)]:!!h?.slug}),P=(0,c.useBlockProps)({className:L});return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(C,{attributes:e,setAttributes:o,colors:O,clientId:t}),(0,n.createElement)("div",{...P},(0,n.createElement)(_,{attributes:e,setAttributes:o,isSelected:l,isMenuVisible:T,toggleMenu:S}),(0,n.createElement)("div",{className:"wp-block-prc-block-navigation-mega-menu__tab-divider"}),T&&(0,n.createElement)(w,{menuSlug:E,clientId:t,overlayClassnames:N,toggleMenu:S,isMobile:B})))})),f=JSON.parse('{"UU":"prc-block/navigation-mega-menu"}'),x=(0,n.createElement)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M20,12 L4,12 L4,13.5 L20,13.5 L20,12 Z M10,6.5 L4,6.5 L4,8 L10,8 L10,6.5 Z M20,17.5 L4,17.5 L4,19 L20,19 L20,17.5 Z M20,5.62462724 L16.000015,9 L12,5.62462724 L12.9791165,4.5 L16.000015,7.04920972 L19.0208935,4.5 L20,5.62462724 Z"}));(0,l.registerBlockType)(f.UU,{icon:x,variations:[{isDefault:!0,title:"Mega Menu (Desktop)",name:"mega-menu-desktop",description:"Mega Menu with absolute positioning designed for desktop",attributes:{isMobile:!1},isActive:e=>!1===e.isMobile,scope:["block","inserter","transform"]},{title:"Mega Menu (Mobile)",name:"mega-menu-mobile",description:"Mega Menu with absolute positioning designed for mobile",attributes:{isMobile:!0},isActive:e=>!0===e.isMobile,scope:["block","inserter","transform"]}],edit:M}),(0,r.addFilter)("blocks.registerBlockType","prc-block-mega-menu-add-to-navigation",((e,o)=>{var t;return"core/navigation"===o?{...e,allowedBlocks:[...null!==(t=e.allowedBlocks)&&void 0!==t?t:[],"prc-block/navigation-mega-menu"]}:e}))}},t={};function n(e){var l=t[e];if(void 0!==l)return l.exports;var r=t[e]={exports:{}};return o[e](r,r.exports,n),r.exports}n.m=o,e=[],n.O=(o,t,l,r)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){for(var[t,l,r]=e[u],i=!0,c=0;c<t.length;c++)(!1&r||a>=r)&&Object.keys(n.O).every((e=>n.O[e](t[c])))?t.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var s=l();void 0!==s&&(o=s)}}return o}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,l,r]},n.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return n.d(o,{a:o}),o},n.d=(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};n.O.j=o=>0===e[o];var o=(o,t)=>{var l,r,[a,i,c]=t,s=0;if(a.some((o=>0!==e[o]))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(c)var u=c(n)}for(o&&o(t);s<a.length;s++)r=a[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},t=globalThis.webpackChunknavigation_mega_menu=globalThis.webpackChunknavigation_mega_menu||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var l=n.O(void 0,[350],(()=>n(673)));l=n.O(l)})();
//# sourceMappingURL=index.js.map