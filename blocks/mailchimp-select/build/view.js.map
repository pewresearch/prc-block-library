{"version":3,"file":"view.js","mappings":"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","sources":["webpack://mailchimp-select/../../../../node_modules/classnames/index.js","webpack://mailchimp-select/webpack/bootstrap","webpack://mailchimp-select/webpack/runtime/compat get default export","webpack://mailchimp-select/webpack/runtime/define property getters","webpack://mailchimp-select/webpack/runtime/hasOwnProperty shorthand","webpack://mailchimp-select/external window [\"wp\",\"element\"]","webpack://mailchimp-select/external window [\"wp\",\"domReady\"]","webpack://mailchimp-select/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://mailchimp-select/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://mailchimp-select/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://mailchimp-select/external window \"React\"","webpack://mailchimp-select/./node_modules/@hcaptcha/react-hcaptcha/dist/esm/index.js","webpack://mailchimp-select/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://mailchimp-select/./node_modules/@hcaptcha/react-hcaptcha/dist/esm/utils.js","webpack://mailchimp-select/external window [\"wp\",\"apiFetch\"]","webpack://mailchimp-select/external window [\"wp\",\"url\"]","webpack://mailchimp-select/./src/Form.jsx","webpack://mailchimp-select/./src/view.js"],"sourcesContent":["/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"domReady\"];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport { generateQuery } from \"./utils.js\";\nvar SCRIPT_ID = 'hcaptcha-api-script-id';\nvar HCAPTCHA_LOAD_FN_NAME = 'hcaptchaOnLoad'; // Prevent loading API script multiple times\n\nvar resolveFn;\nvar rejectFn;\nvar mountPromise = new Promise(function (resolve, reject) {\n  resolveFn = resolve;\n  rejectFn = reject;\n}); // Generate hCaptcha API script\n\nvar mountCaptchaScript = function mountCaptchaScript(params) {\n  if (params === void 0) {\n    params = {};\n  }\n\n  if (document.getElementById(SCRIPT_ID)) {\n    // API was already requested\n    return mountPromise;\n  } // Create global onload callback\n\n\n  window[HCAPTCHA_LOAD_FN_NAME] = resolveFn;\n  var domain = params.apihost || \"https://js.hcaptcha.com\";\n  delete params.apihost;\n  var script = document.createElement(\"script\");\n  script.id = SCRIPT_ID;\n  script.src = domain + \"/1/api.js?render=explicit&onload=\" + HCAPTCHA_LOAD_FN_NAME;\n  script.async = true;\n\n  script.onerror = function (event) {\n    return rejectFn('script-error');\n  };\n\n  var query = generateQuery(params);\n  script.src += query !== \"\" ? \"&\" + query : \"\";\n  document.head.appendChild(script);\n  return mountPromise;\n};\n\nvar HCaptcha = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(HCaptcha, _React$Component);\n\n  function HCaptcha(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this; // API Methods\n\n    _this.renderCaptcha = _this.renderCaptcha.bind(_assertThisInitialized(_this));\n    _this.resetCaptcha = _this.resetCaptcha.bind(_assertThisInitialized(_this));\n    _this.removeCaptcha = _this.removeCaptcha.bind(_assertThisInitialized(_this));\n    _this.isReady = _this.isReady.bind(_assertThisInitialized(_this)); // Event Handlers\n\n    _this.loadCaptcha = _this.loadCaptcha.bind(_assertThisInitialized(_this));\n    _this.handleOnLoad = _this.handleOnLoad.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.handleExpire = _this.handleExpire.bind(_assertThisInitialized(_this));\n    _this.handleError = _this.handleError.bind(_assertThisInitialized(_this));\n    _this.handleOpen = _this.handleOpen.bind(_assertThisInitialized(_this));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n    _this.handleChallengeExpired = _this.handleChallengeExpired.bind(_assertThisInitialized(_this));\n    var isApiReady = typeof hcaptcha !== 'undefined';\n    _this.ref = /*#__PURE__*/React.createRef();\n    _this.apiScriptRequested = false;\n    _this.state = {\n      isApiReady: isApiReady,\n      isRemoved: false,\n      elementId: props.id,\n      captchaId: ''\n    };\n    return _this;\n  }\n\n  var _proto = HCaptcha.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    // Once captcha is mounted intialize hCaptcha - hCaptcha\n    var isApiReady = this.state.isApiReady;\n    /*\n     * Check if hCaptcha has already been loaded,\n     * If Yes, render the captcha\n     * If No, create script tag and wait to render the captcha\n     */\n\n    if (isApiReady) {\n      this.renderCaptcha();\n      return;\n    }\n\n    this.loadCaptcha();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var captchaId = this.state.captchaId;\n\n    if (!this.isReady()) {\n      return;\n    } // Reset any stored variables / timers when unmounting\n\n\n    hcaptcha.reset(captchaId);\n    hcaptcha.remove(captchaId);\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    // Prevent component re-rendering when these internal state variables are updated\n    if (this.state.isApiReady !== nextState.isApiReady || this.state.isRemoved !== nextState.isRemoved) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    // Prop Keys that could change\n    var keys = ['sitekey', 'size', 'theme', 'tabindex', 'languageOverride', 'endpoint']; // See if any props changed during component update\n\n    var match = keys.every(function (key) {\n      return prevProps[key] === _this2.props[key];\n    }); // If they have changed, remove current captcha and render a new one\n\n    if (!match) {\n      this.removeCaptcha(function () {\n        _this2.renderCaptcha();\n      });\n    }\n  };\n\n  _proto.loadCaptcha = function loadCaptcha() {\n    if (this.apiScriptRequested) {\n      return;\n    }\n\n    var _this$props = this.props,\n        apihost = _this$props.apihost,\n        assethost = _this$props.assethost,\n        endpoint = _this$props.endpoint,\n        host = _this$props.host,\n        imghost = _this$props.imghost,\n        hl = _this$props.languageOverride,\n        reCaptchaCompat = _this$props.reCaptchaCompat,\n        reportapi = _this$props.reportapi,\n        sentry = _this$props.sentry,\n        custom = _this$props.custom;\n    var mountParams = {\n      apihost: apihost,\n      assethost: assethost,\n      endpoint: endpoint,\n      hl: hl,\n      host: host,\n      imghost: imghost,\n      recaptchacompat: reCaptchaCompat === false ? \"off\" : null,\n      reportapi: reportapi,\n      sentry: sentry,\n      custom: custom\n    };\n    mountCaptchaScript(mountParams).then(this.handleOnLoad)[\"catch\"](this.handleError);\n    this.apiScriptRequested = true;\n  };\n\n  _proto.renderCaptcha = function renderCaptcha(onReady) {\n    var isApiReady = this.state.isApiReady;\n    if (!isApiReady) return;\n    var renderParams = Object.assign({\n      \"open-callback\": this.handleOpen,\n      \"close-callback\": this.handleClose,\n      \"error-callback\": this.handleError,\n      \"chalexpired-callback\": this.handleChallengeExpired,\n      \"expired-callback\": this.handleExpire,\n      \"callback\": this.handleSubmit\n    }, this.props, {\n      hl: this.props.hl || this.props.languageOverride,\n      languageOverride: undefined\n    }); //Render hCaptcha widget and provide necessary callbacks - hCaptcha\n\n    var captchaId = hcaptcha.render(this.ref.current, renderParams);\n    this.setState({\n      isRemoved: false,\n      captchaId: captchaId\n    }, function () {\n      onReady && onReady();\n    });\n  };\n\n  _proto.resetCaptcha = function resetCaptcha() {\n    var captchaId = this.state.captchaId;\n\n    if (!this.isReady()) {\n      return;\n    } // Reset captcha state, removes stored token and unticks checkbox\n\n\n    hcaptcha.reset(captchaId);\n  };\n\n  _proto.removeCaptcha = function removeCaptcha(callback) {\n    var captchaId = this.state.captchaId;\n\n    if (!this.isReady()) {\n      return;\n    }\n\n    this.setState({\n      isRemoved: true\n    }, function () {\n      hcaptcha.remove(captchaId);\n      callback && callback();\n    });\n  };\n\n  _proto.handleOnLoad = function handleOnLoad() {\n    var _this3 = this;\n\n    this.setState({\n      isApiReady: true\n    }, function () {\n      // render captcha and wait for captcha id\n      _this3.renderCaptcha(function () {\n        // trigger onLoad if it exists\n        var onLoad = _this3.props.onLoad;\n        if (onLoad) onLoad();\n      });\n    });\n  };\n\n  _proto.handleSubmit = function handleSubmit(event) {\n    var onVerify = this.props.onVerify;\n    var _this$state = this.state,\n        isRemoved = _this$state.isRemoved,\n        captchaId = _this$state.captchaId;\n    if (typeof hcaptcha === 'undefined' || isRemoved) return;\n    var token = hcaptcha.getResponse(captchaId); //Get response token from hCaptcha widget\n\n    var ekey = hcaptcha.getRespKey(captchaId); //Get current challenge session id from hCaptcha widget\n\n    onVerify(token, ekey); //Dispatch event to verify user response\n  };\n\n  _proto.handleExpire = function handleExpire() {\n    var onExpire = this.props.onExpire;\n    var captchaId = this.state.captchaId;\n\n    if (!this.isReady()) {\n      return;\n    }\n\n    hcaptcha.reset(captchaId); // If hCaptcha runs into error, reset captcha - hCaptcha\n\n    if (onExpire) onExpire();\n  };\n\n  _proto.handleError = function handleError(event) {\n    var onError = this.props.onError;\n    var captchaId = this.state.captchaId;\n\n    if (this.isReady()) {\n      // If hCaptcha runs into error, reset captcha - hCaptcha\n      hcaptcha.reset(captchaId);\n    }\n\n    if (onError) onError(event);\n  };\n\n  _proto.isReady = function isReady() {\n    var _this$state2 = this.state,\n        isApiReady = _this$state2.isApiReady,\n        isRemoved = _this$state2.isRemoved;\n    return isApiReady && !isRemoved;\n  };\n\n  _proto.handleOpen = function handleOpen() {\n    if (!this.isReady() || !this.props.onOpen) {\n      return;\n    }\n\n    this.props.onOpen();\n  };\n\n  _proto.handleClose = function handleClose() {\n    if (!this.isReady() || !this.props.onClose) {\n      return;\n    }\n\n    this.props.onClose();\n  };\n\n  _proto.handleChallengeExpired = function handleChallengeExpired() {\n    if (!this.isReady() || !this.props.onChalExpired) {\n      return;\n    }\n\n    this.props.onChalExpired();\n  };\n\n  _proto.execute = function execute(opts) {\n    if (opts === void 0) {\n      opts = null;\n    }\n\n    var captchaId = this.state.captchaId;\n\n    if (!this.isReady()) {\n      return;\n    }\n\n    if (opts && typeof opts !== \"object\") {\n      opts = null;\n    }\n\n    return hcaptcha.execute(captchaId, opts);\n  };\n\n  _proto.setData = function setData(data) {\n    var captchaId = this.state.captchaId;\n\n    if (!this.isReady()) {\n      return;\n    }\n\n    if (data && typeof data !== \"object\") {\n      data = null;\n    }\n\n    hcaptcha.setData(captchaId, data);\n  };\n\n  _proto.getResponse = function getResponse() {\n    return hcaptcha.getResponse(this.state.captchaId);\n  };\n\n  _proto.getRespKey = function getRespKey() {\n    return hcaptcha.getRespKey(this.state.captchaId);\n  };\n\n  _proto.render = function render() {\n    var elementId = this.state.elementId;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.ref,\n      id: elementId\n    });\n  };\n\n  return HCaptcha;\n}(React.Component);\n\nexport default HCaptcha;","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","function generateQuery(params) {\n  return Object.entries(params).filter(function (_ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    return value || value === false;\n  }).map(function (_ref2) {\n    var key = _ref2[0],\n        value = _ref2[1];\n    return encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\n  }).join(\"&\");\n}\n\n;\nexport { generateQuery };","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","/**\n * External Dependencies\n */\nimport HCaptcha from '@hcaptcha/react-hcaptcha';\nimport classnames from 'classnames';\n\n/**\n * WordPress Dependencies\n */\nimport { useState, useEffect, Fragment, useRef } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { isURL, buildQueryString } from '@wordpress/url';\n\nconst CAPTCHA_SITE_KEY =\n\twindow.mailChimpFormConfig && window.mailChimpFormConfig.HCAPTCHA_KEY\n\t\t? window.mailChimpFormConfig.HCAPTCHA_KEY\n\t\t: '';\n\nfunction hackCaptchaCheckboxStyle() {\n\tlet target = document.querySelector(\n\t\t'iframe[title=\"Main content of the hCaptcha challenge\"]',\n\t);\n\ttarget = target.parentElement.parentElement;\n\tif (target) {\n\t\tconst checkbox = target.querySelector('div:last-of-type');\n\t\tif (null !== checkbox) {\n\t\t\tcheckbox.style = {\n\t\t\t\t...checkbox.style,\n\t\t\t\tdisplay: 'none',\n\t\t\t};\n\t\t}\n\t} else {\n\t\thackCaptchaCheckboxStyle();\n\t}\n}\n\nexport function parseStylesString(stylesString) {\n\t// check if stylesString is empty.\n\tif (!stylesString) {\n\t\treturn {};\n\t}\n\treturn stylesString\n\t\t.split(';')\n\t\t.filter((style) => style)\n\t\t.reduce((acc, style) => {\n\t\t\tconst [key, value] = style.split(':');\n\t\t\t// convert key to camelCase.\n\t\t\tconst camelCaseKey = key\n\t\t\t\t.split('-')\n\t\t\t\t.map((word, index) => {\n\t\t\t\t\tif (0 === index) {\n\t\t\t\t\t\treturn word;\n\t\t\t\t\t}\n\t\t\t\t\treturn word.charAt(0).toUpperCase() + word.slice(1);\n\t\t\t\t})\n\t\t\t\t.join('');\n\t\t\tacc[camelCaseKey] = value;\n\t\t\treturn acc;\n\t\t}, {});\n}\n\nfunction Action({\n\tclassName = '',\n\tstyle = {},\n\tinput = null,\n\tbutton = null,\n\tvalue = null,\n\terror = false,\n\tsuccess = false,\n\tprocessing = false,\n\tdisabled = false,\n\tonChange = () => {},\n\tsetToken = () => {},\n\tonSubmit = () => {},\n}) {\n\tif (null === input || null === button) {\n\t\treturn null;\n\t}\n\tconst buttonClassNames = classnames(button.className, {\n\t\t'is-processing': processing,\n\t\t'is-disabled': disabled,\n\t\t'has-error': error,\n\t\t'has-success': success,\n\t});\n\n\tconst [buttonText, setButtonText] = useState(button.text);\n\n\tuseEffect(() => {\n\t\tif (processing) {\n\t\t\tsetButtonText('Processing');\n\t\t} else if (error) {\n\t\t\tsetButtonText('Error');\n\t\t} else if (success) {\n\t\t\tsetButtonText('Success');\n\t\t} else {\n\t\t\tsetButtonText(button.text);\n\t\t}\n\t}, [processing, error, success]);\n\n\tconst captchaRef = useRef(null);\n\n\treturn (\n\t\t<div className={className} style={style}>\n\t\t\t<input\n\t\t\t\tclassName={input.className}\n\t\t\t\tstyle={input.style}\n\t\t\t\ttype={input.type}\n\t\t\t\tplaceholder={input.placeholder}\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={(event) => onChange(event.target.value)}\n\t\t\t/>\n\t\t\t<HCaptcha\n\t\t\t\tsitekey={CAPTCHA_SITE_KEY}\n\t\t\t\ttheme=\"light\"\n\t\t\t\tref={captchaRef}\n\t\t\t\tonVerify={(t) => {\n\t\t\t\t\tsetToken(t);\n\t\t\t\t}}\n\t\t\t\tonOpen={() => {\n\t\t\t\t\thackCaptchaCheckboxStyle();\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"submit\"\n\t\t\t\tclassName={button.wrapperClassName}\n\t\t\t\tdisabled={processing || disabled}\n\t\t\t\tstyle={{\n\t\t\t\t\topacity: processing || disabled ? 0.5 : 1,\n\t\t\t\t\t...button.wrapperStyle,\n\t\t\t\t}}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (false === disabled) {\n\t\t\t\t\t\tonSubmit();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span style={button.style} className={buttonClassNames}>\n\t\t\t\t\t{buttonText}\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nfunction Checkbox({ className, style, value, checked, label, name, onChange }) {\n\treturn (\n\t\t<div\n\t\t\tclassName={className}\n\t\t\tstyle={parseStylesString(style)}\n\t\t\tonClick={() => onChange(value)}\n\t\t\trole=\"checkbox\"\n\t\t\taria-checked={checked}\n\t\t\ttabIndex=\"0\"\n\t\t\tonKeyDown={(event) => {\n\t\t\t\tif ('Enter' === event.key) {\n\t\t\t\t\tonChange(value);\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<input type=\"checkbox\" name={name} value={value} checked={checked} />\n\t\t\t<label aria-controls={`${name}`}>{label}</label>\n\t\t</div>\n\t);\n}\n\nfunction Checkboxes({ checkboxes = [], selected = [], onChange }) {\n\tconst [boxes, setBoxes] = useState([]);\n\n\tuseEffect(() => {\n\t\t// Get the first checkbox.\n\t\tcheckboxes.forEach((checkbox) => {\n\t\t\tconst className = checkbox.getAttribute('class') || '';\n\t\t\tconst style = checkbox.getAttribute('style') || '';\n\t\t\tconst labelElm = checkbox.querySelector('label');\n\t\t\tconst inputElm = checkbox.querySelector('input');\n\t\t\tconst label = labelElm.innerText;\n\t\t\tconst name = inputElm.getAttribute('name');\n\t\t\tconst value = inputElm.getAttribute('value');\n\n\t\t\tconst obj = {\n\t\t\t\tclassName,\n\t\t\t\tstyle,\n\t\t\t\tlabel,\n\t\t\t\tname,\n\t\t\t\tvalue,\n\t\t\t};\n\n\t\t\tsetBoxes((oldBoxes) => [...oldBoxes, obj]);\n\t\t});\n\t}, [checkboxes]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{boxes.map(({ className, style, label, name, value }) => (\n\t\t\t\t<Checkbox\n\t\t\t\t\t{...{\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tstyle,\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tchecked: selected.includes(value),\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</Fragment>\n\t);\n}\n\nexport default function Form({\n\tclassName = '',\n\tcheckboxes = [],\n\taction = {\n\t\tclassName: '',\n\t\tstyle: {},\n\t\tinput: null,\n\t\tbutton: null,\n\t},\n}) {\n\tif (!CAPTCHA_SITE_KEY) {\n\t\tconsole.error('Invalid captcha key');\n\t\treturn '';\n\t}\n\t// get the values from the already \"checked\" checkboxes.\n\tconst initialChecked = [];\n\tconst allCheckboxValues = [];\n\tcheckboxes.forEach((checkbox) => {\n\t\tconst inputElm = checkbox.querySelector('input');\n\t\tif (inputElm.getAttribute('checked')) {\n\t\t\tinitialChecked.push(inputElm.getAttribute('value'));\n\t\t}\n\t\tallCheckboxValues.push(inputElm.getAttribute('value'));\n\t});\n\n\tconst [selected, updateSelection] = useState(initialChecked);\n\tconst [processing, setProcessing] = useState(false);\n\tconst [disabled, setDisabled] = useState(false);\n\tconst [error, setError] = useState(false);\n\tconst [success, setSuccess] = useState(false);\n\tconst [value, setValue] = useState(null);\n\n\tconst [token, setToken] = useState(false);\n\n\tconst onChange = (newValue) => {\n\t\tsetValue(newValue);\n\t};\n\n\tconst onSubmit = () => {\n\t\tconst url = document.URL;\n\t\tif (!isURL(url)) {\n\t\t\tconsole.error('Invalid URL');\n\t\t\treturn;\n\t\t}\n\n\t\tsetProcessing(true);\n\n\t\tconst path = buildQueryString({\n\t\t\temail: value,\n\t\t\tinterests: selected.join(','),\n\t\t\tcaptcha_token: token,\n\t\t\tapi_key: 'mailchimp-select',\n\t\t\torigin_url: url,\n\t\t});\n\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/mailchimp/subscribe/?${path}`,\n\t\t\tmethod: 'POST',\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tsetSuccess(true);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error('Error', err);\n\t\t\t\tsetError(true);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tsetProcessing(false);\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tsetDisabled(0 === selected.length || false === token);\n\t}, [token, selected]);\n\n\treturn (\n\t\t<form className={className}>\n\t\t\t<Checkboxes\n\t\t\t\tcheckboxes={checkboxes}\n\t\t\t\tselected={selected}\n\t\t\t\tonChange={(v) => {\n\t\t\t\t\tif ('select-all' === v) {\n\t\t\t\t\t\tif (selected.length === allCheckboxValues.length) {\n\t\t\t\t\t\t\tupdateSelection([]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdateSelection(allCheckboxValues);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (selected.includes(v)) {\n\t\t\t\t\t\tupdateSelection(selected.filter((e) => e !== v));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdateSelection([...selected, v]);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Action\n\t\t\t\t{...{\n\t\t\t\t\t...action,\n\t\t\t\t\tprocessing,\n\t\t\t\t\tdisabled,\n\t\t\t\t\terror,\n\t\t\t\t\tsuccess,\n\t\t\t\t\tvalue,\n\t\t\t\t\tonChange,\n\t\t\t\t\tsetToken,\n\t\t\t\t\tonSubmit,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport domReady from '@wordpress/dom-ready';\nimport { render } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport Form, { parseStylesString } from './Form';\n\ndomReady(() => {\n\tconst forms = document.querySelectorAll(\n\t\t'.wp-block-prc-block-mailchimp-select',\n\t);\n\tconsole.log(\"forms\", forms);\n\tforms.forEach((elm) => {\n\t\t// Gather the classes and styles from the form element.\n\t\tconst classes = elm.getAttribute('class');\n\t\t// Checkboxes\n\t\tconst checkboxes = elm.querySelectorAll(\n\t\t\t'.wp-block-prc-block-form-input-checkbox',\n\t\t);\n\t\t// Group \"Action\"\n\t\tconst groupBlock = elm.querySelector('.wp-block-group');\n\t\tconst groupBlockClasses = groupBlock.getAttribute('class') || '';\n\t\t// Input\n\t\tconst input = groupBlock.querySelector(\n\t\t\t'.wp-block-prc-block-form-input-text',\n\t\t);\n\t\tconst inputStyles = input.getAttribute('style') || '';\n\t\tconst inputClasses = input.getAttribute('class') || '';\n\t\t// Button\n\t\tconst buttonOuter = groupBlock.querySelector('.wp-block-button');\n\t\tconst button = groupBlock.querySelector('.wp-block-button__link');\n\t\tconst buttonWrapperClasses = buttonOuter.getAttribute('class') || '';\n\t\tconst buttonWrapperStyles = buttonOuter.getAttribute('style') || '';\n\t\tconst buttonStyles = button.getAttribute('style') || '';\n\t\tconst buttonClasses = button.getAttribute('class') || '';\n\n\t\t// Create an element to render the form into.\n\t\tconst attachPoint = document.createElement('div');\n\t\telm.parentNode.insertBefore(attachPoint, elm);\n\n\t\t// Render the Form component.\n\t\trender(\n\t\t\t<Form\n\t\t\t\t{...{\n\t\t\t\t\tclassName: classes,\n\t\t\t\t\tcheckboxes,\n\t\t\t\t\taction: {\n\t\t\t\t\t\tclassName: groupBlock.getAttribute('class') || '',\n\t\t\t\t\t\tstyle: parseStylesString(groupBlockClasses),\n\t\t\t\t\t\tinput: {\n\t\t\t\t\t\t\tstyle: parseStylesString(inputStyles),\n\t\t\t\t\t\t\tclassName: inputClasses,\n\t\t\t\t\t\t\ttype: input.getAttribute('type'),\n\t\t\t\t\t\t\tplaceholder: input.getAttribute('placeholder'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbutton: {\n\t\t\t\t\t\t\twrapperClassName: buttonWrapperClasses,\n\t\t\t\t\t\t\twrapperStyle: parseStylesString(buttonWrapperStyles),\n\t\t\t\t\t\t\tstyle: parseStylesString(buttonStyles),\n\t\t\t\t\t\t\tclassName: buttonClasses,\n\t\t\t\t\t\t\ttext: button.innerText,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>,\n\t\t\tattachPoint,\n\t\t);\n\n\t\t// Remove the original element.\n\t\telm.parentNode.removeChild(elm);\n\t});\n});\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","obj","prop","window","_extends","assign","bind","target","source","this","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","setPrototypeOf","__proto__","resolveFn","rejectFn","SCRIPT_ID","HCAPTCHA_LOAD_FN_NAME","mountPromise","Promise","resolve","reject","_React$Component","subClass","superClass","HCaptcha","props","_this","renderCaptcha","resetCaptcha","removeCaptcha","isReady","loadCaptcha","handleOnLoad","handleSubmit","handleExpire","handleError","handleOpen","handleClose","handleChallengeExpired","isApiReady","hcaptcha","ref","apiScriptRequested","state","isRemoved","elementId","id","captchaId","create","constructor","_proto","componentDidMount","componentWillUnmount","reset","remove","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","prevProps","_this2","every","_this$props","apihost","assethost","endpoint","host","imghost","params","document","getElementById","domain","script","createElement","src","async","onerror","event","query","entries","filter","_ref","value","map","_ref2","encodeURIComponent","generateQuery","head","appendChild","mountCaptchaScript","hl","languageOverride","recaptchacompat","reCaptchaCompat","reportapi","sentry","custom","then","onReady","renderParams","render","current","setState","callback","_this3","onLoad","onVerify","_this$state","getResponse","getRespKey","onExpire","onError","_this$state2","onOpen","onClose","onChalExpired","execute","opts","setData","data","CAPTCHA_SITE_KEY","mailChimpFormConfig","HCAPTCHA_KEY","hackCaptchaCheckboxStyle","querySelector","parentElement","checkbox","style","display","parseStylesString","stylesString","split","reduce","acc","word","index","charAt","toUpperCase","slice","Action","className","input","button","error","success","processing","disabled","onChange","setToken","onSubmit","buttonClassNames","classnames","buttonText","setButtonText","useState","text","useEffect","captchaRef","useRef","type","placeholder","sitekey","theme","t","wrapperClassName","opacity","wrapperStyle","onClick","e","preventDefault","Checkbox","checked","label","name","role","tabIndex","onKeyDown","Checkboxes","checkboxes","selected","boxes","setBoxes","forEach","getAttribute","labelElm","inputElm","innerText","oldBoxes","Fragment","includes","Form","action","console","initialChecked","allCheckboxValues","updateSelection","setProcessing","setDisabled","setError","setSuccess","setValue","token","v","newValue","url","URL","isURL","path","buildQueryString","email","interests","captcha_token","api_key","origin_url","apiFetch","method","catch","err","finally","domReady","forms","querySelectorAll","log","elm","groupBlock","groupBlockClasses","inputStyles","inputClasses","buttonOuter","buttonWrapperClasses","buttonWrapperStyles","buttonStyles","buttonClasses","attachPoint","parentNode","insertBefore","removeChild"],"sourceRoot":""}