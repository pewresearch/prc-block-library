import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(l={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,useEffect:()=>e.useEffect,useState:()=>e.useState},u={},t.d(u,l),u),{apiFetch:n}=window.wp,{addQueryArgs:s}=window.wp.url,{decodeEntities:a}=window.wp.htmlEntities,{state:c,actions:r}=(0,o.store)("prc-block/taxonomy-search",{actions:{doSearch:async(e,t,o=0)=>(console.log("doSearch",e,t,o),new Promise((c=>{const r={per_page:25};""!==t&&(r.taxonomy=t),""!==e&&(r.searchValue=e),0!==o&&""!==o&&(r.parentTermId=o);const l={method:"GET",path:s("/prc-api/v3/blocks/taxonomy-search",r)};console.log("doSearch",l),n(l).then((e=>{console.log("doSearch",e);const t=e.map((e=>({key:e.id,id:e.id,url:e.link,description:a(e.description),label:a(e.name)})));c(t)}))}))),onInputFocus:e=>{(0,o.getContext)().isActive=!0},onInputBlur:e=>{const t=(0,o.getContext)();setTimeout((()=>{t.isActive=!1}),300)},onInputChange:e=>{const{value:t}=e.target,n=(0,o.getContext)(),{ref:s}=(0,o.getElement)(),{id:a}=s;c[a].value=t,n.searchValue=c[a].value}},callbacks:{showResults:()=>{const e=(0,o.getContext)();return console.log("showResults",e,c),e.results&&e.results.length>=1&&e.isActive},onSearchValueChange:()=>{const e=(0,o.getContext)(),{debouncedSearchValue:t}=e;t&&(console.log("onSearchValueChange",e,c,t),r.doSearch(t,e.taxonomy).then((t=>{e.results=t})))},debounceSearchValueChange:()=>{const e=(0,o.getContext)(),t=((e,t)=>{const[n,s]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const t=setTimeout((()=>{s(e)}),1e3);return()=>{clearTimeout(t)}}),[e,1e3]),n})(e.searchValue);t.length>2&&(e.debouncedSearchValue=t)},onEscKey:e=>{27===e.keyCode&&((0,o.getContext)().isActive=!1)}}});var l,u;
//# sourceMappingURL=view.js.map