{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@prc/block-library/external window [\"wp\",\"i18n\"]","webpack://@prc/block-library/external window [\"wp\",\"components\"]","webpack://@prc/block-library/external window [\"wp\",\"element\"]","webpack://@prc/block-library/external window [\"wp\",\"hooks\"]","webpack://@prc/block-library/external window [\"wp\",\"primitives\"]","webpack://@prc/block-library/external window [\"wp\",\"data\"]","webpack://@prc/block-library/external window \"ReactJSXRuntime\"","webpack://@prc/block-library/../../node_modules/@wordpress/icons/build-module/library/info.js","webpack://@prc/block-library/./includes/print-engine/src/info.jsx","webpack://@prc/block-library/./includes/print-engine/src/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst info = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm.75 4v1.5h-1.5V8h1.5Zm0 8v-5h-1.5v5h1.5Z\"\n  })\n});\nexport default info;\n//# sourceMappingURL=info.js.map","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { DropdownMenu, ExternalLink } from '@wordpress/components';\nimport { info } from '@wordpress/icons';\n\n/**\n * Renders the more information icon and the information popover\n *\n * @since 1.0.0\n * @param {Object} props All the props passed to this function\n */\nexport default function InformationPopover( props ) {\n\tconst { message, subMessage, link, position } = props;\n\tconst popoverPosition = position ?? 'middle left';\n\n\treturn (\n\t\t<div className=\"information-popover\">\n\t\t\t<DropdownMenu\n\t\t\t\tlabel={ __( 'More Information', 'block-visibility' ) }\n\t\t\t\ticon={ info }\n\t\t\t\ttoggleProps={ {\n\t\t\t\t\tclassName: 'information-popover__button',\n\t\t\t\t} }\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tclassName: 'information-popover__popover',\n\t\t\t\t\tfocusOnMount: 'container',\n\t\t\t\t\tposition: popoverPosition,\n\t\t\t\t\tnoArrow: false,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p>{ message }</p>\n\t\t\t\t\t\t{ subMessage && <p>{ subMessage }</p> }\n\t\t\t\t\t\t{ link && (\n\t\t\t\t\t\t\t<ExternalLink href={ link }>\n\t\t\t\t\t\t\t\t{ __( 'Learn More', 'block-visibility' ) }\n\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</DropdownMenu>\n\t\t</div>\n\t);\n}\n","/**\n * Integrate Print Engine with Block Visibility inspector controls instead of\n * custom advanced controls. This adds a new \"Print\" panel (under the existing\n * Block Visibility UI) with two mutually exclusive toggles: Hide on Print and\n * Display on Print. State is stored inside the Block Visibility attribute so\n * that visibility presets/control sets can (in the future) incorporate it.\n *\n * Backwards compatibility: existing content may still have a root-level\n * `printEngine` attribute (added by PHP). We continue to read that on render\n * (see PHP changes) but new edits write to `blockVisibility.printEngine`.\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { PanelBody, ToggleControl } from '@wordpress/components';\nimport { addFilter } from '@wordpress/hooks';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport InformationPopover from './info';\n\nconst PrintVisibilityControls = (props) => {\n\tconst { blockAtts, setAttributes, enabledControls } = props;\n\tconst controlActive = enabledControls.some(\n\t\t( control ) => control.settingSlug === 'print_engine' && control.isActive\n\t);\n\n\tif ( ! controlActive ) {\n\t\treturn null;\n\t}\n\n\tconst current = blockAtts?.printEngine || {\n\t\thideOnPrint: false,\n\t\tdisplayOnPrint: false,\n\t};\n\n\tconst { hideOnPrint, displayOnPrint } = current;\n\n\tconst update = ( values ) => {\n\t\tsetAttributes( {\n\t\t\tblockVisibility: {\n\t\t\t\t...blockAtts,\n\t\t\t\tprintEngine: {\n\t\t\t\t\t...current,\n\t\t\t\t\t...values,\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\t};\n\n\treturn (\n\t\t<div className=\"controls-panel-item print-engine-block-control\" style={{\n\t\t\tpadding: '0 1em',\n\t\t}}>\n\t\t\t<h3 className=\"controls-panel-item__header\" style={{\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tflexDirection: 'row',\n\t\t\t\talignItems: 'center',\n\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\tgap: '0.25em',\n\t\t\t\tmarginTop: 0,\n\t\t\t}}>\n\t\t\t\t<span>{__('Print Visibility', 'prc-platform')}</span>\n\t\t\t\t<InformationPopover\n\t\t\t\t\tmessage={ __(\n\t\t\t\t\t\t\"The Print control allows you to manage the visibility of this block when printing.\",\n\t\t\t\t\t\t'block-visibility'\n\t\t\t\t\t) }\n\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t/>\n\t\t\t</h3>\n\t\t\t<div className=\"controls-panel-item__control-fields\">\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={__('Hide on Print', 'prc-platform')}\n\t\t\t\t\tchecked={!!hideOnPrint}\n\t\t\t\t\thelp={__(\n\t\t\t\t\t\t'Hides this block when the page is printed. Block remains visible on screen.',\n\t\t\t\t\t\t'prc-platform'\n\t\t\t\t\t)}\n\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\tupdate({ hideOnPrint: !hideOnPrint, displayOnPrint: hideOnPrint ? displayOnPrint : false })\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={__('Display Only on Print', 'prc-platform')}\n\t\t\t\t\tchecked={!!displayOnPrint}\n\t\t\t\t\thelp={__(\n\t\t\t\t\t\t'Only shows this block when the page is printed. Hidden on screen.',\n\t\t\t\t\t\t'prc-platform'\n\t\t\t\t\t)}\n\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\tupdate({ displayOnPrint: !displayOnPrint, hideOnPrint: displayOnPrint ? hideOnPrint : false })\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst PrintVisibilitySettings = (props) => {\n\tconst { visibilityControls, setVisibilityControls } = props;\n\n\treturn (\n\t\t<div><p>Print Visibility Enable?</p></div>\n\t);\n}\n\n// Attach our controls to Block Visibility's inspector controls via filter.\naddFilter(\n\t'blockVisibility.addInspectorControls',\n\t'prc/print-engine-visibility-controls',\n\t(Original) => (props) => (\n\t\t<>\n\t\t\t<Original {...props} />\n\t\t\t<PrintVisibilityControls {...props} />\n\t\t</>\n\t)\n);\n\n// Register the printEngine sub-attribute on the Block Visibility attribute schema.\naddFilter(\n\t'blockVisibility.attributes',\n\t'prc/print-engine-visibility-attributes',\n\t( attributeSpec ) => {\n\t\tif (\n\t\t\tattributeSpec?.blockVisibility?.properties &&\n\t\t\t! attributeSpec.blockVisibility.properties.printEngine\n\t\t) {\n\t\t\tattributeSpec.blockVisibility.properties.printEngine = {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\thideOnPrint: { type: 'boolean', default: false },\n\t\t\t\t\tdisplayOnPrint: { type: 'boolean', default: false },\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\treturn attributeSpec;\n\t}\n);\n\naddFilter(\n\t'blockVisibility.controls',\n\t'prc/print-engine-visibility-controls',\n\t(controls) => {\n\t\tconst printEngineControl = {\n\t\t\tattributeSlug: 'printEngine',\n\t\t\tlabel: __('Print', 'prc-platform'),\n\t\t\tsettingSlug: 'print_engine',\n\t\t}\n\t\treturn [...controls, printEngineControl];\n\t}\n);\n"],"names":["window","SVG","viewBox","xmlns","children","Path","fillRule","clipRule","d","InformationPopover","props","message","subMessage","link","position","popoverPosition","_jsx","className","DropdownMenu","label","__","icon","info","toggleProps","popoverProps","focusOnMount","noArrow","_jsxs","_Fragment","ExternalLink","href","PrintVisibilityControls","blockAtts","setAttributes","enabledControls","some","control","settingSlug","isActive","current","printEngine","hideOnPrint","displayOnPrint","update","values","blockVisibility","style","padding","display","flexDirection","alignItems","justifyContent","gap","marginTop","ToggleControl","checked","help","onChange","addFilter","Original","attributeSpec","properties","type","default","controls","attributeSlug"],"sourceRoot":""}