/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 2.0.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window["wpackioprcBlocksLibraryfact-sheet-collectionJsonp"]=window["wpackioprcBlocksLibraryfact-sheet-collectionJsonp"]||[]).push([[3],{10:function(e,t){e.exports=window.wp.components},122:function(e){e.exports=JSON.parse('{"name":"prc-block/fact-sheet-collection","apiVersion":2,"category":"layout","attributes":{"altPostLabel":{"type":"string"},"enableFlags":{"type":"boolean","default":false},"pdfId":{"type":"integer","default":0}},"supports":{"html":false,"multiple":false},"styles":[{"name":"dropdown","label":"Dropdown","isDefault":true},{"name":"list","label":"List"}]}')},131:function(e,t){e.exports=window.wp.keycodes},15:function(e,t){e.exports=window.wp.i18n},150:function(e,t,n){n(124),e.exports=n(166)},166:function(e,t,n){"use strict";n.r(t);var r=n(82),o=n(15),a=n(83),c=n(122),l=n(65),i=n(5),s=n(24),u=n(10),p=n(45),d=(n(71),n(84)),f=n.n(d),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return new Promise((function(n){var r={};f()({path:"/wp/v2/".concat(e,"?per_page=").concat(t)}).then((function(t){for(var o=0;o<t.length;o++){var a=t[o].slug.replace("".concat(e.toLowerCase(),"_"),"");r[t[o].id]={id:t[o].id,name:t[o].name,parent:t[o].parent,slug:a}}n(r)}))}))},m=(n(79),n(131),n(30),n(106),n(179),n(116),n(75),function(e){var t=e.label,n=e.setAttributes;return React.createElement(i.Fragment,null,React.createElement(u.TextControl,{label:"Alternate Post Label",value:t,onChange:function(e){return n({altPostLabel:e})}}))}),w=function(e){var t=e.termId,n=e.enableFlags,r=e.setAttributes,o=Object(i.useState)(!1),a=Object(l.a)(o,2),c=a[0],s=a[1],d=Object(p.useDispatch)("core/editor").editPost;return Object(i.useEffect)((function(){var e;(e="collection",new Promise((function(t){b(e).then((function(e){var n=[],r=Object.keys(e).map((function(t){return e[t]}));r.filter((function(e){return 0===e.parent})).forEach((function(e){var t=r.filter((function(t){return t.parent===e.id})),o=[];t.forEach((function(e){o.push({name:e.name,id:e.id})})),n.push({name:e.name,id:e.id,children:o})})),t(n)}))}))).then((function(e){s(e)}))}),[]),React.createElement(i.Fragment,null,!1!==c&&React.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"}},React.createElement("div",{style:{flexGrow:1}},React.createElement(u.TreeSelect,{label:"Select Collection",noOptionLabel:"No Collection",onChange:function(e){return d({collection:parseFloat(e)})},selectedId:t,tree:c})),React.createElement("div",{style:{paddingLeft:"1em"}},React.createElement(u.ToggleControl,{label:"Enable Flags",checked:n,onChange:function(){return r({enableFlags:!n})}}))))},g=function(e){var t=e.attachmentId,n=e.setAttributes;return React.createElement(s.MediaUploadCheck,null,React.createElement(s.MediaUpload,{title:"Upload PDF",allowedTypes:["application/pdf"],value:t,onSelect:function(e){return n({pdfId:e.id})},render:function(e){var r=e.open;return React.createElement(u.ButtonGroup,null,React.createElement(u.Button,{isPrimary:!0,onClick:r},0===t?"Upload PDF":"Change PDF"),0!==t&&React.createElement(u.Button,{isSecondary:!0,onClick:function(){return n({pdfId:0})}},"Clear PDF"))}}))},h=function(e){var t=e.attributes,n=e.className,r=e.setAttributes,a=Object(s.useBlockProps)({className:n}),c=t.altPostLabel,l=t.enableFlags,i=t.pdfId,d=Object(p.useSelect)((function(e){return{termId:e("core/editor").getEditedPostAttribute("collection")}}),[]).termId;return React.createElement("div",a,React.createElement(u.Placeholder,{label:Object(o.__)("Configure Fact Sheet Collection"),isColumnLayout:!0},!isNaN(d)&&React.createElement(m,{label:c,setAttributes:r}),React.createElement(w,{termId:d,enableFlags:l,setAttributes:r}),React.createElement(g,{attachmentId:i,setAttributes:r})))},O=function(){var e=s.useBlockProps.save();return React.createElement(i.Fragment,e)};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=c.name,E={title:Object(o.__)("Fact Sheet Collection"),icon:"format-aside",description:Object(o.__)("Set and display a collection of Fact Sheets. Set a report PDF or label for an alternat language post."),keywords:[Object(o.__)("prc"),Object(o.__)("factsheet"),Object(o.__)("fact sheet"),Object(o.__)("collection")],example:{attributes:{altLangPostId:61623,collectionId:12812,reportPdfUrl:""}},edit:h,save:O};Object(a.registerBlockType)(j,v(v({},c),E))},24:function(e,t){e.exports=window.wp.blockEditor},45:function(e,t){e.exports=window.wp.data},5:function(e,t){e.exports=window.wp.element},71:function(e,t){e.exports=moment},75:function(e,t){e.exports=window.wp.url},83:function(e,t){e.exports=window.wp.blocks},84:function(e,t){e.exports=window.wp.apiFetch}},[[150,0,1,5]]]);
//# sourceMappingURL=main-b81f98d9.js.map