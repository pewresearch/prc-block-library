/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window["wpackioprcBlocksLibraryfact-sheet-collectionJsonp"]=window["wpackioprcBlocksLibraryfact-sheet-collectionJsonp"]||[]).push([[3],{0:function(e,t){e.exports=React},10:function(e,t){e.exports=wp.components},12:function(e,t){e.exports=wp.i18n},123:function(e){e.exports=JSON.parse('{"name":"prc-block/fact-sheet-collection","apiVersion":2,"category":"layout","attributes":{"altPostLabel":{"type":"string"},"enableFlags":{"type":"boolean","default":false},"pdfId":{"type":"integer","default":0}},"supports":{"html":false,"multiple":false},"styles":[{"name":"dropdown","label":"Dropdown","isDefault":true},{"name":"list","label":"List"}]}')},150:function(e,t,n){n(125),e.exports=n(162)},162:function(e,t,n){"use strict";n.r(t);var r=n(83),a=n(12),c=n(84),o=n(123),l=n(67),i=n(5),s=n(24),u=n(10),p=n(46),f=(n(73),n(85)),d=n.n(f),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return new Promise((function(n){var r={};d()({path:"/wp/v2/".concat(e,"?per_page=").concat(t)}).then((function(t){for(var a=0;a<t.length;a++){var c=t[a].slug.replace("".concat(e.toLowerCase(),"_"),"");r[t[a].id]={id:t[a].id,name:t[a].name,parent:t[a].parent,slug:c}}n(r)}))}))},m=(n(80),n(136),n(31),n(107),n(175),n(117),n(77),function(e){var t=e.label,n=e.setAttributes;return React.createElement(i.Fragment,null,React.createElement(u.TextControl,{label:"Alternate Post Label",value:t,onChange:function(e){return n({altPostLabel:e})}}))}),g=function(e){var t=e.termId,n=e.enableFlags,r=e.setAttributes,a=Object(i.useState)(!1),c=Object(l.a)(a,2),o=c[0],s=c[1],f=Object(p.useDispatch)("core/editor").editPost;return Object(i.useEffect)((function(){var e;(e="collection",new Promise((function(t){b(e).then((function(e){var n=[],r=Object.keys(e).map((function(t){return e[t]}));r.filter((function(e){return 0===e.parent})).forEach((function(e){var t=r.filter((function(t){return t.parent===e.id})),a=[];t.forEach((function(e){a.push({name:e.name,id:e.id})})),n.push({name:e.name,id:e.id,children:a})})),t(n)}))}))).then((function(e){s(e)}))}),[]),React.createElement(i.Fragment,null,!1!==o&&React.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"}},React.createElement("div",{style:{flexGrow:1}},React.createElement(u.TreeSelect,{label:"Select Collection",noOptionLabel:"No Collection",onChange:function(e){return f({collection:parseFloat(e)})},selectedId:t,tree:o})),React.createElement("div",{style:{paddingLeft:"1em"}},React.createElement(u.ToggleControl,{label:"Enable Flags",checked:n,onChange:function(){return r({enableFlags:!n})}}))))},h=function(e){var t=e.attachmentId,n=e.setAttributes;return React.createElement(s.MediaUploadCheck,null,React.createElement(s.MediaUpload,{title:"Upload PDF",allowedTypes:["application/pdf"],value:t,onSelect:function(e){return n({pdfId:e.id})},render:function(e){var r=e.open;return React.createElement(u.ButtonGroup,null,React.createElement(u.Button,{isPrimary:!0,onClick:r},0===t?"Upload PDF":"Change PDF"),0!==t&&React.createElement(u.Button,{isSecondary:!0,onClick:function(){return n({pdfId:0})}},"Clear PDF"))}}))},O=function(e){var t=e.attributes,n=e.className,r=e.setAttributes,c=Object(s.useBlockProps)({className:n}),o=t.altPostLabel,l=t.enableFlags,i=t.pdfId,f=Object(p.useSelect)((function(e){return{termId:e("core/editor").getEditedPostAttribute("collection")}}),[]).termId;return React.createElement("div",c,React.createElement(u.Placeholder,{label:Object(a.__)("Configure Fact Sheet Collection"),isColumnLayout:!0},!isNaN(f)&&React.createElement(m,{label:o,setAttributes:r}),React.createElement(g,{termId:f,enableFlags:l,setAttributes:r}),React.createElement(h,{attachmentId:i,setAttributes:r})))},y=function(){var e=s.useBlockProps.save();return React.createElement(i.Fragment,e)};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=o.name,E={title:Object(a.__)("Fact Sheet Collection"),icon:"format-aside",description:Object(a.__)("Set and display a collection of Fact Sheets. Set a report PDF or label for an alternat language post."),keywords:[Object(a.__)("prc"),Object(a.__)("factsheet"),Object(a.__)("fact sheet"),Object(a.__)("collection")],example:{attributes:{altLangPostId:61623,collectionId:12812,reportPdfUrl:""}},edit:O,save:y};Object(c.registerBlockType)(j,v(v({},o),E))},23:function(e,t){e.exports=lodash},24:function(e,t){e.exports=wp.blockEditor},46:function(e,t){e.exports=wp.data},5:function(e,t){e.exports=wp.element},64:function(e,t){e.exports=ReactDOM},73:function(e,t){e.exports=moment},77:function(e,t){e.exports=wp.url},84:function(e,t){e.exports=wp.blocks},85:function(e,t){e.exports=wp.apiFetch}},[[150,0,1,5]]]);
//# sourceMappingURL=main-a29ec105.js.map