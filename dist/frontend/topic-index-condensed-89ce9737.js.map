{"version":3,"sources":["webpack:///external [\"wp\",\"domReady\"]","webpack:///external [\"wp\",\"url\"]","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///./src/topic-index-condensed/controller/frontend.js"],"names":["module","exports","window","path","replace","concat","domReady","controller","document","querySelector","isAccordion","classList","contains","console","log","jQuery","accordion","onOpen","newUrlArgs","menuItem","this","dataset","slug","newUrl","addQueryArgs","location","href","removeQueryArgs","history","pushState","title","querySelectorAll","forEach","i","addEventListener","elm","uuid","target","getAttribute","currentlyActiveMenuItem","remove","currentlyActivePage","hideActive","menu","setAttribute","add","page","makeActive"],"mappings":";;;;;;;;;;;;;;;;;2HAAcA,EAAOC,QAAUC,OAAW,GAAY,U,iBCAxCF,EAAOC,QAAUC,OAAW,GAAO,K,mBCSjC,IAAIC,EAAK,uBAA6CC,QAAQ,kBAAkB,IAChG,IAAwBF,OAAO,YAAYG,OAAOF,K,iHC2ClDG,KAAS,WACL,IAAMC,EAAaC,SAASC,cAAc,wDAC1C,GAAKF,EAAa,CACd,IAAMG,EAAcH,EAAWI,UAAUC,SAAS,aAElD,GADAC,QAAQC,IAAI,cAAeJ,GACtBA,EACDK,OAAOR,GAAYS,UAAU,CACzBC,OAAQ,WACJ,IAAMC,EAAa,CAAEC,SAAUC,KAAKC,QAAQC,MAC5CT,QAAQC,IAAII,GACZ,IAAIK,EAASC,uBAAatB,OAAOuB,SAASC,KAAMR,GAChDK,EAASI,0BAAgBJ,EAAQ,cACjCV,QAAQC,IAAIS,GACZrB,OAAO0B,QAAQC,UAAUX,EAAYV,SAASsB,MAAOP,WAK3ChB,EAAWwB,iBACzB,uDAEMC,SAAQ,SAAAC,GACdA,EAAEC,iBAAiB,SAAS,SAAAC,GACxB,IAAMC,EAAOD,EAAIE,OAAOC,aAAa,cAvCtC,WACf,IAAMC,EAA0B/B,SAASC,cAAT,8DAG5B8B,GACAA,EAAwB5B,UAAU6B,OAAO,UAG7C,IAAMC,EAAsBjC,SAASC,cAAT,yDAGxBgC,GACAA,EAAoB9B,UAAU6B,OAAO,UA4BzBE,GAxED,SAACN,GAChBvB,QAAQC,IAAI,aAAcsB,GAC1B,IAAMO,EAAOnC,SAASC,cAClB,uGAEA,SAAWkC,EAAKL,aAAa,sBAC7BK,EAAKC,aAAa,oBAAqB,SAE3C,IAAMzB,EAAWX,SAASC,cAAT,yEACqD2B,EADrD,OAGbjB,GACAA,EAASR,UAAUkC,IAAI,UAG3B,IAAMC,EAAOtC,SAASC,cAAT,oEACoD2B,EADpD,OAGb,GAAIU,EAAM,CACNjC,QAAQC,IAAIgC,GAEZ,IAAM5B,EAAa,CAAEC,SAAUA,EAASE,QAAQC,MAChDT,QAAQC,IAAII,GACZ,IAAIK,EAASC,uBAAatB,OAAOuB,SAASC,KAAMR,GAChDK,EAASI,0BAAgBJ,EAAQ,cACjCV,QAAQC,IAAIS,GACZrB,OAAO0B,QAAQC,UAAUX,EAAYV,SAASsB,MAAOP,GAErDuB,EAAKnC,UAAUkC,IAAI,WA6CPE,CAAWX,e","file":"frontend/topic-index-condensed-89ce9737.js","sourcesContent":["(function() { module.exports = window[\"wp\"][\"domReady\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","import domReady from '@wordpress/dom-ready';\nimport { addQueryArgs, removeQueryArgs, getQueryArg } from '@wordpress/url';\n\nimport './style.scss';\n\nconst makeActive = (uuid, isAccordion = false) => {\n    console.log('makeActive', uuid);\n    const menu = document.querySelector(\n        '.wp-block-prc-block-topic-index-condensed-controller .wp-block-prc-block-topic-index-condensed-menu',\n    );\n    if ('true' === menu.getAttribute('data-borderHidden')) {\n        menu.setAttribute('data-borderHidden', 'false');\n    }\n    const menuItem = document.querySelector(\n        `.wp-block-prc-block-topic-index-condensed-menu-item[data-uuid=\"${uuid}\"]`,\n    );\n    if (menuItem) {\n        menuItem.classList.add('active');\n    }\n\n    const page = document.querySelector(\n        `.wp-block-prc-block-topic-index-condensed-page[data-uuid=\"${uuid}\"]`,\n    );\n    if (page) {\n        console.log(page);\n        // Update the url with new ?menuItem arg.\n        const newUrlArgs = { menuItem: menuItem.dataset.slug };\n        console.log(newUrlArgs);\n        let newUrl = addQueryArgs(window.location.href, newUrlArgs);\n        newUrl = removeQueryArgs(newUrl, 'menuItemId');\n        console.log(newUrl);\n        window.history.pushState(newUrlArgs, document.title, newUrl);\n\n        page.classList.add('active');\n    }\n};\n\nconst hideActive = () => {\n    const currentlyActiveMenuItem = document.querySelector(\n        `.wp-block-prc-block-topic-index-condensed-menu-item.active`,\n    );\n    if (currentlyActiveMenuItem) {\n        currentlyActiveMenuItem.classList.remove('active');\n    }\n\n    const currentlyActivePage = document.querySelector(\n        `.wp-block-prc-block-topic-index-condensed-page.active`,\n    );\n    if (currentlyActivePage) {\n        currentlyActivePage.classList.remove('active');\n    }\n};\n\ndomReady(() => {\n    const controller = document.querySelector('.wp-block-prc-block-topic-index-condensed-controller');\n    if ( controller ) {\n        const isAccordion = controller.classList.contains('accordion');\n        console.log('isAccordion', isAccordion);\n        if ( isAccordion ) {\n            jQuery(controller).accordion({\n                onOpen: function() {\n                    const newUrlArgs = { menuItem: this.dataset.slug };\n                    console.log(newUrlArgs);\n                    let newUrl = addQueryArgs(window.location.href, newUrlArgs);\n                    newUrl = removeQueryArgs(newUrl, 'menuItemId');\n                    console.log(newUrl);\n                    window.history.pushState(newUrlArgs, document.title, newUrl);\n                },\n        });\n        } else {\n            // Key off menu items.\n            const menuItems = controller.querySelectorAll(\n                '.wp-block-prc-block-topic-index-condensed-menu-item',\n            );\n            menuItems.forEach(i => {\n                i.addEventListener('click', elm => {\n                    const uuid = elm.target.getAttribute('data-uuid');\n                    hideActive();\n                    makeActive(uuid);\n                });\n            });\n        }\n    }\n});\n"],"sourceRoot":""}