/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryfrontendJsonp=window.wpackioprcBlocksLibraryfrontendJsonp||[]).push([[14],{1:function(e,t){e.exports=React},12:function(e,t){e.exports=wp.element},122:function(e,t){e.exports=ReactDOM},19:function(e,t){e.exports=wp.domReady},235:function(e,t,n){var r,a=n(22);!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return c(l(e),arguments)}function s(e,t){return i.apply(null,[e].concat(t||[]))}function c(e,t){var n,r,s,c,u,l,p,f,d,h=1,v=e.length,g="";for(r=0;r<v;r++)if("string"==typeof e[r])g+=e[r];else if("object"===a(e[r])){if((c=e[r]).keys)for(n=t[h],s=0;s<c.keys.length;s++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[s],c.keys[s-1]));n=n[c.keys[s]]}else n=c.param_no?t[c.param_no]:t[h++];if(o.not_type.test(c.type)&&o.not_primitive.test(c.type)&&n instanceof Function&&(n=n()),o.numeric_arg.test(c.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(o.number.test(c.type)&&(f=n>=0),c.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,c.width?parseInt(c.width):0);break;case"e":n=c.precision?parseFloat(n).toExponential(c.precision):parseFloat(n).toExponential();break;case"f":n=c.precision?parseFloat(n).toFixed(c.precision):parseFloat(n);break;case"g":n=c.precision?String(Number(n.toPrecision(c.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=c.precision?n.substring(0,c.precision):n;break;case"t":n=String(!!n),n=c.precision?n.substring(0,c.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=c.precision?n.substring(0,c.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=c.precision?n.substring(0,c.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}o.json.test(c.type)?g+=n:(!o.number.test(c.type)||f&&!c.sign?d="":(d=f?"+":"-",n=n.toString().replace(o.sign,"")),l=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",p=c.width-(d+n).length,u=c.width&&p>0?l.repeat(p):"",g+=c.align?d+n+u:"0"===l?d+u+n:u+d+n)}return g}var u=Object.create(null);function l(e){if(u[e])return u[e];for(var t,n=e,r=[],a=0;n;){if(null!==(t=o.text.exec(n)))r.push(t[0]);else if(null!==(t=o.modulo.exec(n)))r.push("%");else{if(null===(t=o.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var i=[],s=t[2],c=[];if(null===(c=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=o.key_access.exec(s)))i.push(c[1]);else{if(null===(c=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(c[1])}t[2]=i}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return u[e]=r}t.sprintf=i,t.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=s,void 0===(r=function(){return{sprintf:i,vsprintf:s}}.call(t,n,t,e))||(e.exports=r))}()},291:function(e,t,n){"use strict";var r=n(48);t.a=r.instance},310:function(e,t,n){e.exports=function(e,t){var n,r,a=0;function o(){var o,i,s=n,c=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(i=0;i<c;i++)if(s.args[i]!==arguments[i]){s=s.next;continue e}return s!==n&&(s===r&&(r=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=n,s.prev=null,n.prev=s,n=s),s.val}s=s.next}for(o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return s={args:o,val:e.apply(null,o)},n?(n.prev=s,s.next=n):r=s,a===t.maxSize?(r=r.prev).next=null:a++,n=s,s.val}return t=t||{},o.clear=function(){n=null,r=null,a=0},o}},311:function(e,t){e.exports=wp.hooks},312:function(e,t){e.exports=wp.htmlEntities},32:function(e,t){e.exports=wp.url},505:function(e,t,n){n(37),e.exports=n(507)},506:function(e,t,n){},507:function(e,t,n){"use strict";n.r(t);var r=n(28),a=n(67),o=n(108),i=n(10),s=n(3),c=n(60),u=n(39),l=n(79),p=n(127),f=p.a&&new p.a,d=f?function(e,t){return f.set(e,t),e}:l.a,h=n(31),v=Object.create,g=function(){function e(){}return function(t){if(!Object(h.a)(t))return{};if(v)return v(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var y=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=g(e.prototype),r=e.apply(n,t);return Object(h.a)(r)?r:n}},b=n(27);var m=function(e,t,n){var r=1&t,a=y(e);return function t(){var o=this&&this!==b.a&&this instanceof t?a:e;return o.apply(r?n:this,arguments)}},_=n(103),O=Math.max;var w=function(e,t,n,r){for(var a=-1,o=e.length,i=n.length,s=-1,c=t.length,u=O(o-i,0),l=Array(c+u),p=!r;++s<c;)l[s]=t[s];for(;++a<i;)(p||a<o)&&(l[n[a]]=e[a]);for(;u--;)l[s++]=e[a++];return l},j=Math.max;var x=function(e,t,n,r){for(var a=-1,o=e.length,i=-1,s=n.length,c=-1,u=t.length,l=j(o-s,0),p=Array(l+u),f=!r;++a<l;)p[a]=e[a];for(var d=a;++c<u;)p[d+c]=t[c];for(;++i<s;)(f||a<o)&&(p[d+n[i]]=e[a++]);return p};var S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};var k=function(){};function E(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}E.prototype=g(k.prototype),E.prototype.constructor=E;var R=E,C=n(106),D=f?function(e){return f.get(e)}:C.a,P={},I=Object.prototype.hasOwnProperty;var N=function(e){for(var t=e.name+"",n=P[t],r=I.call(P,t)?n.length:0;r--;){var a=n[r],o=a.func;if(null==o||o==e)return a.name}return t};function F(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}F.prototype=g(k.prototype),F.prototype.constructor=F;var T=F,M=n(14),A=n(25);var K=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var L=function(e){if(e instanceof R)return e.clone();var t=new T(e.__wrapped__,e.__chain__);return t.__actions__=K(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},U=Object.prototype.hasOwnProperty;function V(e){if(Object(A.a)(e)&&!Object(M.a)(e)&&!(e instanceof R)){if(e instanceof T)return e;if(U.call(e,"__wrapped__"))return L(e)}return new T(e)}V.prototype=k.prototype,V.prototype.constructor=V;var H=V;var B=function(e){var t=N(e),n=H[t];if("function"!=typeof n||!(t in R.prototype))return!1;if(e===n)return!0;var r=D(n);return!!r&&e===r[0]},z=n(189),q=Object(z.a)(d),G=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /;var Q=function(e){var t=e.match(G);return t?t[1].split(J):[]},X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var $=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(X,"{\n/* [wrapped with "+t+"] */\n")},Y=n(111),W=n(193),Z=n(80),ee=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var te=function(e,t){return Object(W.a)(ee,(function(n){var r="_."+n[0];t&n[1]&&!Object(Z.a)(e,r)&&e.push(r)})),e.sort()};var ne=function(e,t,n){var r=t+"";return Object(Y.a)(e,$(r,te(Q(r),n)))};var re=function(e,t,n,r,a,o,i,s,c,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var p=[e,t,a,l?o:void 0,l?i:void 0,l?void 0:o,l?void 0:i,s,c,u],f=n.apply(void 0,p);return B(e)&&q(f,p),f.placeholder=r,ne(f,e,t)};var ae=function(e){return e.placeholder},oe=n(66),ie=Math.min;var se=function(e,t){for(var n=e.length,r=ie(t.length,n),a=K(e);r--;){var o=t[r];e[r]=Object(oe.a)(o,n)?a[o]:void 0}return e};var ce=function(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n];i!==t&&"__lodash_placeholder__"!==i||(e[n]="__lodash_placeholder__",o[a++]=n)}return o};var ue=function e(t,n,r,a,o,i,s,c,u,l){var p=128&n,f=1&n,d=2&n,h=24&n,v=512&n,g=d?void 0:y(t);return function m(){for(var _=arguments.length,O=Array(_),j=_;j--;)O[j]=arguments[j];if(h)var k=ae(m),E=S(O,k);if(a&&(O=w(O,a,o,h)),i&&(O=x(O,i,s,h)),_-=E,h&&_<l){var R=ce(O,k);return re(t,n,e,m.placeholder,r,O,R,c,u,l-_)}var C=f?r:this,D=d?C[t]:t;return _=O.length,c?O=se(O,c):v&&_>1&&O.reverse(),p&&u<_&&(O.length=u),this&&this!==b.a&&this instanceof m&&(D=g||y(D)),D.apply(C,O)}};var le=function(e,t,n){var r=y(e);return function a(){for(var o=arguments.length,i=Array(o),s=o,c=ae(a);s--;)i[s]=arguments[s];var u=o<3&&i[0]!==c&&i[o-1]!==c?[]:ce(i,c);if((o-=u.length)<n)return re(e,t,ue,a.placeholder,void 0,i,u,void 0,void 0,n-o);var l=this&&this!==b.a&&this instanceof a?r:e;return Object(_.a)(l,this,i)}};var pe=function(e,t,n,r){var a=1&t,o=y(e);return function t(){for(var i=-1,s=arguments.length,c=-1,u=r.length,l=Array(u+s),p=this&&this!==b.a&&this instanceof t?o:e;++c<u;)l[c]=r[c];for(;s--;)l[c++]=arguments[++i];return Object(_.a)(p,a?n:this,l)}},fe=Math.min;var de=function(e,t){var n=e[1],r=t[1],a=n|r,o=a<131,i=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!i)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var s=t[3];if(s){var c=e[3];e[3]=c?w(c,s,t[4]):s,e[4]=c?ce(e[3],"__lodash_placeholder__"):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?x(c,s,t[6]):s,e[6]=c?ce(e[5],"__lodash_placeholder__"):t[6]),(s=t[7])&&(e[7]=s),128&r&&(e[8]=null==e[8]?t[8]:fe(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e},he=n(56),ve=Math.max;var ge=function(e,t,n,r,a,o,i,s){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=a=void 0),i=void 0===i?i:ve(Object(he.a)(i),0),s=void 0===s?s:Object(he.a)(s),u-=a?a.length:0,64&t){var l=r,p=a;r=a=void 0}var f=c?void 0:D(e),h=[e,t,n,r,a,l,p,o,i,s];if(f&&de(h,f),e=h[0],t=h[1],n=h[2],r=h[3],a=h[4],!(s=h[9]=void 0===h[9]?c?0:e.length:ve(h[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?le(e,t,s):32!=t&&33!=t||a.length?ue.apply(void 0,h):pe(e,t,n,r);else var v=m(e,t,n);return ne((f?d:q)(v,h),e,t)},ye=Object(u.a)((function(e,t){var n=ce(t,ae(ye));return ge(e,64,void 0,t,n)}));ye.placeholder={};var be=ye,me=n(164),_e=n(24),Oe=n(21),we=n(145),je=n(7),xe=n(196),Se=n(84),ke=n(5),Ee=n(17),Re=n.n(Ee),Ce=(n(0),n(1)),De=n.n(Ce),Pe=n(68),Ie=n.n(Pe),Ne=n(291),Fe=n(289),Te=n(33),Me=n(223),Ae=n(224),Ke=n(120),Le=n(243),Ue=n(539),Ve=n(6);function He(e){var t=e.categoryContent,n=e.resultsContent;return De.a.createElement(De.a.Fragment,null,De.a.createElement("div",{className:"name"},t),De.a.createElement("div",{className:"results"},n))}He.handledProps=["categoryContent","resultsContent"],He.propTypes={};var Be=He;function ze(e){var t=e.active,n=e.children,r=e.className,a=e.content,o=e.layoutRenderer,i=e.renderer,c=Object(ke.a)(Object(Te.a)(t,"active"),"category",r),u=Object(Me.a)(ze,e),l=Object(Ae.a)(ze,e),p=i(e),f=Ve.a.isNil(n)?a:n;return De.a.createElement(l,Object(s.a)({},u,{className:c}),o({categoryContent:p,resultsContent:f}))}ze.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],ze.defaultProps={layoutRenderer:Be,renderer:function(e){return e.name}},ze.propTypes={};var qe=ze,Ge=n(194),Je=function(e){var t=e.image,n=e.price,r=e.title,a=e.description;return[t&&De.a.createElement("div",{key:"image",className:"image"},Object(Ge.a)(t,{autoGenerateKey:!1})),De.a.createElement("div",{key:"content",className:"content"},n&&De.a.createElement("div",{className:"price"},n),r&&De.a.createElement("div",{className:"title"},r),a&&De.a.createElement("div",{className:"description"},a))]};Je.handledProps=[];var Qe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return Object(i.a)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,a=e.renderer,o=Object(ke.a)(Object(Te.a)(n,"active"),"result",r),i=Object(Me.a)(t,this.props),c=Object(Ae.a)(t,this.props);return De.a.createElement(c,Object(s.a)({},i,{className:o,onClick:this.handleClick}),a(this.props))},t}(Ce.Component);function Xe(e){var t=e.children,n=e.className,r=e.content,a=Object(ke.a)("results transition",n),o=Object(Me.a)(Xe,e),i=Object(Ae.a)(Xe,e);return De.a.createElement(i,Object(s.a)({},o,{className:a}),Ve.a.isNil(t)?r:t)}Qe.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],Qe.propTypes={},Qe.defaultProps={renderer:Je},Xe.handledProps=["as","children","className","content"],Xe.propTypes={};var $e=Xe,Ye=function(e){var t=e.input;return Object(Se.a)(t)?Object(s.a)({},e,{input:{className:"prompt"}}):Object(xe.a)(t)?Object(s.a)({},e,{input:Object(s.a)({},t,{className:Object(ke.a)(t.className,"prompt")})}):e},We=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleResultSelect=function(e,n){Object(je.a)(t.props,"onResultSelect",e,Object(s.a)({},t.props,{result:n}))},t.handleSelectionChange=function(e){var n=t.getSelectedResult();Object(je.a)(t.props,"onSelectionChange",e,Object(s.a)({},t.props,{result:n}))},t.closeOnEscape=function(e){Re.a.getCode(e)===Re.a.Escape&&(e.preventDefault(),t.close())},t.moveSelectionOnKeyDown=function(e){switch(Re.a.getCode(e)){case Re.a.ArrowDown:e.preventDefault(),t.moveSelectionBy(e,1);break;case Re.a.ArrowUp:e.preventDefault(),t.moveSelectionBy(e,-1)}},t.selectItemOnEnter=function(e){if(Re.a.getCode(e)===Re.a.Enter){var n=t.getSelectedResult();n&&(e.preventDefault(),t.setValue(n.title),t.handleResultSelect(e,n),t.close())}},t.closeOnDocumentClick=function(e){t.close()},t.handleMouseDown=function(e){t.isMouseDown=!0,Object(je.a)(t.props,"onMouseDown",e,t.props),Ne.a.sub("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,Ne.a.unsub("mouseup",t.handleDocumentMouseUp)},t.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),t.tryOpen()},t.handleItemClick=function(e,n){var r=n.id,a=t.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),t.setValue(a.title),t.handleResultSelect(e,a),t.close()},t.handleItemMouseDown=function(e){e.preventDefault()},t.handleFocus=function(e){Object(je.a)(t.props,"onFocus",e,t.props),t.setState({focus:!0})},t.handleBlur=function(e){Object(je.a)(t.props,"onBlur",e,t.props),t.setState({focus:!1})},t.handleSearchChange=function(e){e.stopPropagation();var n=t.props.minCharacters,r=t.state.open,a=e.target.value;Object(je.a)(t.props,"onSearchChange",e,Object(s.a)({},t.props,{value:a})),a.length<n?t.close():r||t.tryOpen(a),t.setValue(a)},t.getFlattenedResults=function(){var e=t.props,n=e.category,r=e.results;return n?Object(we.a)(r,(function(e,t){return e.concat(t.results)}),[]):r},t.getSelectedResult=function(e){void 0===e&&(e=t.state.selectedIndex);var n=t.getFlattenedResults();return Object(Oe.a)(n,e)},t.setValue=function(e){var n=t.props.selectFirstResult;t.setState({value:e,selectedIndex:n?0:-1})},t.moveSelectionBy=function(e,n){var r=t.state.selectedIndex,a=t.getFlattenedResults().length-1,o=r+n;o>a?o=0:o<0&&(o=a),t.setState({selectedIndex:o}),t.scrollSelectedItemIntoView(),t.handleSelectionChange(e)},t.scrollSelectedItemIntoView=function(){if(Object(Fe.a)()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},t.tryOpen=function(e){void 0===e&&(e=t.state.value);var n=t.props.minCharacters;e.length<n||t.open()},t.open=function(){t.setState({open:!0})},t.close=function(){t.setState({open:!1})},t.renderSearchInput=function(e){var n=t.props,r=n.icon,a=n.input,o=t.state.value;return Ue.a.create(a,{autoGenerateKey:!1,defaultProps:Object(s.a)({},e,{autoComplete:"off",icon:r,onChange:t.handleSearchChange,onClick:t.handleInputClick,tabIndex:"0",value:o}),overrideProps:Ye})},t.renderNoResults=function(){var e=t.props,n=e.noResultsDescription,r=e.noResultsMessage;return De.a.createElement("div",{className:"message empty"},De.a.createElement("div",{className:"header"},r),n&&De.a.createElement("div",{className:"description"},n))},t.renderResult=function(e,n,r,a){var i=e.childKey,c=Object(o.a)(e,["childKey"]);void 0===a&&(a=0);var u=t.props.resultRenderer,l=t.state.selectedIndex,p=n+a;return De.a.createElement(Qe,Object(s.a)({key:null!=i?i:c.id||c.title,active:l===p,onClick:t.handleItemClick,onMouseDown:t.handleItemMouseDown,renderer:u},c,{id:p}))},t.renderResults=function(){var e=t.props.results;return Object(_e.a)(e,t.renderResult)},t.renderCategories=function(){var e=t.props,n=e.categoryLayoutRenderer,r=e.categoryRenderer,a=e.results,i=t.state.selectedIndex,c=0;return Object(_e.a)(a,(function(e){var a=e.childKey,u=Object(o.a)(e,["childKey"]),l=Object(s.a)({key:null!=a?a:u.name,active:Object(me.a)(i,c,c+u.results.length),layoutRenderer:n,renderer:r},u),p=be(t.renderResult,c);return c+=u.results.length,De.a.createElement(qe,l,u.results.map(p))}))},t.renderMenuContent=function(){var e=t.props,n=e.category,r=e.showNoResults,a=e.results;return Object(c.a)(a)?r?t.renderNoResults():null:n?t.renderCategories():t.renderResults()},t.renderResultsMenu=function(){var e=t.state.open?"visible":"",n=t.renderMenuContent();if(n)return De.a.createElement($e,{className:e},n)},t}Object(i.a)(t,e),t.getAutoControlledStateFromProps=function(e,t){if(void 0!==t.prevValue&&Ie()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!Ie()(e,this.props)||!Ie()(t,this.state)},n.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&Ne.a.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),Ne.a.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),Ne.a.sub("click",this.closeOnDocumentClick),Ne.a.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),Ne.a.unsub("click",this.closeOnDocumentClick),Ne.a.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},n.componentWillUnmount=function(){Ne.a.unsub("click",this.closeOnDocumentClick),Ne.a.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},n.render=function(){var e=this.state,n=e.searchClasses,r=e.focus,a=e.open,o=this.props,i=o.aligned,c=o.category,u=o.className,l=o.fluid,p=o.loading,f=o.size,d=Object(ke.a)("ui",a&&"active visible",f,n,Object(Te.a)(c,"category"),Object(Te.a)(r,"focus"),Object(Te.a)(l,"fluid"),Object(Te.a)(p,"loading"),Object(Te.e)(i,"aligned"),"search",u),h=Object(Me.a)(t,this.props),v=Object(Ae.a)(t,this.props),g=Object(Ke.c)(h,{htmlProps:Ke.b}),y=g[0],b=g[1];return De.a.createElement(v,Object(s.a)({},b,{className:d,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(y),this.renderResultsMenu())},t}(Le.a);We.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","resultRenderer","results","selectFirstResult","showNoResults","size","value"],We.propTypes={},We.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},We.autoControlledProps=["open","value"],We.Category=qe,We.Result=Qe,We.Results=$e;var Ze,et,tt,nt,rt=n(12),at=n(310),ot=n.n(at);n(235),ot()(console.error);Ze={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},et=["(","?"],tt={")":["("],":":["?","?:"]},nt=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var it={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function st(e){var t=function(e){for(var t,n,r,a,o=[],i=[];t=e.match(nt);){for(n=t[0],(r=e.substr(0,t.index).trim())&&o.push(r);a=i.pop();){if(tt[n]){if(tt[n][0]===a){n=tt[n][1]||n;break}}else if(et.indexOf(a)>=0||Ze[a]<Ze[n]){i.push(a);break}o.push(a)}tt[n]||i.push(n),e=e.substr(t.index+n.length)}return(e=e.trim())&&o.push(e),o.concat(i.reverse())}(e);return function(e){return function(e,t){var n,r,a,o,i,s,c=[];for(n=0;n<e.length;n++){if(i=e[n],o=it[i]){for(r=o.length,a=Array(r);r--;)a[r]=c.pop();try{s=o.apply(null,a)}catch(e){return e}}else s=t.hasOwnProperty(i)?t[i]:+i;c.push(s)}return c[0]}(t,e)}}var ct={contextDelimiter:"",onMissingKey:null};function ut(e,t){var n;for(n in this.data=e,this.pluralForms={},this.options={},ct)this.options[n]=void 0!==t&&n in t?t[n]:ct[n]}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ut.prototype.getPluralForm=function(e,t){var n,r,a,o,i=this.pluralForms[e];return i||("function"!=typeof(a=(n=this.data[e][""])["Plural-Forms"]||n["plural-forms"]||n.plural_forms)&&(r=function(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(0===(r=t[n].trim()).indexOf("plural="))return r.substr(7)}(n["Plural-Forms"]||n["plural-forms"]||n.plural_forms),o=st(r),a=function(e){return+o({n:e})}),i=this.pluralForms[e]=a),i(t)},ut.prototype.dcnpgettext=function(e,t,n,r,a){var o,i,s;return o=void 0===a?0:this.getPluralForm(e,a),i=n,t&&(i=t+this.options.contextDelimiter+n),(s=this.data[e][i])&&s[o]?s[o]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),0===o?n:r)};var ft={"":{plural_forms:function(e){return 1===e?0:1}}},dt=/^i18n\.(n?gettext|has_translation)(_|$)/,ht=function(e,t,n){var r=new ut({}),a=new Set,o=function(){a.forEach((function(e){return e()}))},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";r.data[t]=pt(pt(pt({},ft),r.data[t]),e),r.data[t][""]=pt(pt({},ft[""]),r.data[t][""])},s=function(e,t){i(e,t),o()},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return r.data[e]||i(void 0,e),r.dcnpgettext(e,t,n,a,o)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return e},l=function(e,t,r){var a=c(r,t,e);return n?(a=n.applyFilters("i18n.gettext_with_context",a,e,t,r),n.applyFilters("i18n.gettext_with_context_"+u(r),a,e,t,r)):a};if(e&&s(e,t),n){var p=function(e){dt.test(e)&&o()};n.addAction("hookAdded","core/i18n",p),n.addAction("hookRemoved","core/i18n",p)}return{getLocaleData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return r.data[e]},setLocaleData:s,subscribe:function(e){return a.add(e),function(){return a.delete(e)}},__:function(e,t){var r=c(t,void 0,e);return n?(r=n.applyFilters("i18n.gettext",r,e,t),n.applyFilters("i18n.gettext_"+u(t),r,e,t)):r},_x:l,_n:function(e,t,r,a){var o=c(a,void 0,e,t,r);return n?(o=n.applyFilters("i18n.ngettext",o,e,t,r,a),n.applyFilters("i18n.ngettext_"+u(a),o,e,t,r,a)):o},_nx:function(e,t,r,a,o){var i=c(o,a,e,t,r);return n?(i=n.applyFilters("i18n.ngettext_with_context",i,e,t,r,a,o),n.applyFilters("i18n.ngettext_with_context_"+u(o),i,e,t,r,a,o)):i},isRTL:function(){return"rtl"===l("ltr","text direction")},hasTranslation:function(e,t,a){var o,i,s=t?t+""+e:e,c=!(null===(o=r.data)||void 0===o||null===(i=o[null!=a?a:"default"])||void 0===i||!i[s]);return n&&(c=n.applyFilters("i18n.has_translation",c,e,t,a),c=n.applyFilters("i18n.has_translation_"+u(a),c,e,t,a)),c}}}(void 0,void 0,n(311).defaultHooks),vt=(ht.getLocaleData.bind(ht),ht.setLocaleData.bind(ht),ht.subscribe.bind(ht),ht.__.bind(ht)),gt=(ht._x.bind(ht),ht._n.bind(ht),ht._nx.bind(ht),ht.isRTL.bind(ht),ht.hasTranslation.bind(ht),n(19)),yt=n.n(gt),bt=n(69),mt=n.n(bt),_t=n(32),Ot=n(312);n(506);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt={loading:!1,results:[{key:null,value:null,title:"Start typing to search topics..."}],value:"",selected:!1},St=function(e,t){switch(t.type){case"CLEAN_QUERY":return xt;case"START_SEARCH":return jt(jt({},e),{},{loading:!0,value:t.query});case"FINISH_SEARCH":return jt(jt({},e),{},{loading:!1,results:t.results});case"UPDATE_SELECTION":return jt(jt({},e),{},{loading:!0,value:t.selection.title,selected:t.selection.value});default:throw new Error}},kt=function(e){var t=e.restrictToTermId,n=void 0===t?0:t,a=Object(rt.useReducer)(St,xt),o=Object(r.a)(a,2),i=o[0],s=o[1],c=i.loading,u=i.results,l=i.value,p=i.selected,f=Object(rt.useRef)(),d=Object(rt.useCallback)((function(e,t){clearTimeout(f.current),s({type:"START_SEARCH",query:t.value}),f.current=setTimeout((function(){0!==t.value.length?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(n){var r={per_page:25};""!==e&&(r.search=e),0!==t&&""!==t&&(r.parent=t);var a={method:"GET",path:Object(_t.addQueryArgs)("/prc-api/v2/blocks/topic-index-search",r)};console.log("Search Request->",a),mt()(a).then((function(e){console.log("... returns: ",e);var t=e.map((function(e){return{key:e.id,value:e.link,title:Object(Ot.decodeEntities)(e.name)}}));n(t)}))}))}(t.value,n).then((function(e){s({type:"FINISH_SEARCH",results:e})})):s({type:"CLEAN_QUERY"})}),300)}),[]);return Object(rt.useEffect)((function(){return function(){clearTimeout(f.current)}}),[]),Object(rt.useEffect)((function(){!1!==p&&setTimeout((function(){window.location=p}),1e3)}),[p]),React.createElement(We,{loading:c,onResultSelect:function(e,t){var n=t.result;s({type:"UPDATE_SELECTION",selection:n})},onSearchChange:d,results:u,value:l,defaultValue:null,fluid:!0,placeholder:vt("Start typing to search for a topic")})};yt()((function(){var e=document.querySelectorAll(".js-react-topic-index-search-field");e&&e.forEach((function(e){var t=e.getAttribute("data-term-id");console.log(e,t),Object(rt.render)(React.createElement(kt,{restrictToTermId:t}),e)}))}))},67:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},69:function(e,t){e.exports=wp.apiFetch}},[[505,0,1,2]]]);
//# sourceMappingURL=topic-index-search-field-e57fcd8c.js.map