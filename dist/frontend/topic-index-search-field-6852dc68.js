/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 2.1.9
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2022 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryfrontendJsonp=window.wpackioprcBlocksLibraryfrontendJsonp||[]).push([[19],{1:function(e,t){e.exports=window.React},123:function(e,t){e.exports=window.ReactDOM},22:function(e,t){e.exports=window.wp.domReady},23:function(e,t){e.exports=window.wp.url},244:function(e,t,n){"use strict";var r=n(2),a=n(12),o=n(29),c=n(18),i=n(6),s=n(17),u=n(10),l=n(81),p=n(4),d=(n(0),n(1)),f=n.n(d),h=n(162),v=n(107),b=n(15),O=n(163),y=n(5),j=n(119),m=n(219),g=n(120),_=n(145),w=function(e){function t(){for(var n,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=e.call.apply(e,[this].concat(o))||this).inputRef=Object(d.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return Object(u.a)(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return Object(u.a)(r)?t?-1:void 0:r},n.focus=function(){return n.inputRef.current.focus()},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=Object(s.a)(e,"target.value");Object(i.a)(n.props,"onChange",e,Object(r.a)({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return Object(r.a)({},t,e.props,{ref:function(t){Object(l.a)(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,a=e.disabled,o=e.type,c=n.computeTabIndex(),i=Object(h.a)(t,n.props),s=Object(v.c)(i),u=s[0],l=s[1];return[Object(r.a)({},u,{disabled:a,type:o,tabIndex:c,onChange:n.handleChange,ref:n.inputRef}),l]},n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this,n=this.props,a=n.action,i=n.actionPosition,s=n.children,u=n.className,l=n.disabled,h=n.error,v=n.fluid,w=n.focus,C=n.icon,R=n.iconPosition,E=n.input,S=n.inverted,I=n.label,N=n.labelPosition,P=n.loading,k=n.size,D=n.transparent,x=n.type,T=Object(p.a)("ui",k,Object(b.a)(l,"disabled"),Object(b.a)(h,"error"),Object(b.a)(v,"fluid"),Object(b.a)(w,"focus"),Object(b.a)(S,"inverted"),Object(b.a)(P,"loading"),Object(b.a)(D,"transparent"),Object(b.e)(i,"action")||Object(b.a)(a,"action"),Object(b.e)(R,"icon")||Object(b.a)(C||P,"icon"),Object(b.e)(N,"labeled")||Object(b.a)(I,"labeled"),"input",u),A=Object(O.a)(t,this.props),M=this.partitionProps(),K=M[0],F=M[1];if(!y.a.isNil(s)){var U=Object(c.a)(d.Children.toArray(s),(function(t){return"input"!==t.type?t:Object(d.cloneElement)(t,e.handleChildOverrides(t,K))}));return f.a.createElement(A,Object(r.a)({},F,{className:T}),U)}var V=m.a.create(a,{autoGenerateKey:!1}),B=_.a.create(I,{defaultProps:{className:Object(p.a)("label",Object(o.a)(N,"corner")&&N)},autoGenerateKey:!1});return f.a.createElement(A,Object(r.a)({},F,{className:T}),"left"===i&&V,"right"!==N&&B,Object(j.b)(E||x,{defaultProps:K,autoGenerateKey:!1}),g.a.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==i&&V,"right"===N&&B)},t}(d.Component);w.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],w.propTypes={},w.defaultProps={type:"text"},w.create=Object(j.f)(w,(function(e){return{type:e}})),t.a=w},28:function(e,t){e.exports=window.wp.i18n},308:function(e,t,n){"use strict";var r=n(47);t.a=r.instance},334:function(e,t){e.exports=window.wp.htmlEntities},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(48);var a=n(43),o=n(49);function c(e,t){return Object(r.a)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||Object(a.a)(e,t)||Object(o.a)()}},39:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},43:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(39);function a(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},44:function(e,t,n){"use strict";var r=n(65),a=n(60),o=n(54),c=n(13),i=n(26),s=n(74),u=n(109),l=n(94),p=Object.prototype.hasOwnProperty;t.a=function(e){if(null==e)return!0;if(Object(i.a)(e)&&(Object(c.a)(e)||"string"==typeof e||"function"==typeof e.splice||Object(s.a)(e)||Object(l.a)(e)||Object(o.a)(e)))return!e.length;var t=Object(a.a)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Object(u.a)(e))return!Object(r.a)(e).length;for(var n in e)if(p.call(e,n))return!1;return!0}},48:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},49:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},52:function(e,t,n){var r=n(21);e.exports=function(e,t,n,a){var o=n?n.call(a,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==r(e)||!e||"object"!==r(t)||!t)return!1;var c=Object.keys(e),i=Object.keys(t);if(c.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<c.length;u++){var l=c[u];if(!s(l))return!1;var p=e[l],d=t[l];if(!1===(o=n?n.call(a,p,d,l):void 0)||void 0===o&&p!==d)return!1}return!0}},523:function(e,t,n){n(32),e.exports=n(524)},524:function(e,t,n){"use strict";n.r(t);var r=n(34),a=n(64),o=n(66),c=n(12),i=n(2),s=n(44),u=n(40),l=n(111),p=n(151),d=p.a&&new p.a,f=d?function(e,t){return d.set(e,t),e}:l.a,h=n(41),v=Object.create,b=function(){function e(){}return function(t){if(!Object(h.a)(t))return{};if(v)return v(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var O=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=b(e.prototype),r=e.apply(n,t);return Object(h.a)(r)?r:n}},y=n(35);var j=function(e,t,n){var r=1&t,a=O(e);return function t(){var o=this&&this!==y.a&&this instanceof t?a:e;return o.apply(r?n:this,arguments)}},m=n(133),g=Math.max;var _=function(e,t,n,r){for(var a=-1,o=e.length,c=n.length,i=-1,s=t.length,u=g(o-c,0),l=Array(s+u),p=!r;++i<s;)l[i]=t[i];for(;++a<c;)(p||a<o)&&(l[n[a]]=e[a]);for(;u--;)l[i++]=e[a++];return l},w=Math.max;var C=function(e,t,n,r){for(var a=-1,o=e.length,c=-1,i=n.length,s=-1,u=t.length,l=w(o-i,0),p=Array(l+u),d=!r;++a<l;)p[a]=e[a];for(var f=a;++s<u;)p[f+s]=t[s];for(;++c<i;)(d||a<o)&&(p[f+n[c]]=e[a++]);return p};var R=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};var E=function(){};function S(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}S.prototype=b(E.prototype),S.prototype.constructor=S;var I=S,N=n(114),P=d?function(e){return d.get(e)}:N.a,k={},D=Object.prototype.hasOwnProperty;var x=function(e){for(var t=e.name+"",n=k[t],r=D.call(k,t)?n.length:0;r--;){var a=n[r],o=a.func;if(null==o||o==e)return a.name}return t};function T(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}T.prototype=b(E.prototype),T.prototype.constructor=T;var A=T,M=n(13),K=n(31);var F=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var U=function(e){if(e instanceof I)return e.clone();var t=new A(e.__wrapped__,e.__chain__);return t.__actions__=F(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},V=Object.prototype.hasOwnProperty;function B(e){if(Object(K.a)(e)&&!Object(M.a)(e)&&!(e instanceof I)){if(e instanceof A)return e;if(V.call(e,"__wrapped__"))return U(e)}return new A(e)}B.prototype=E.prototype,B.prototype.constructor=B;var H=B;var L=function(e){var t=x(e),n=H[t];if("function"!=typeof n||!(t in I.prototype))return!1;if(e===n)return!0;var r=P(n);return!!r&&e===r[0]},G=n(209),q=Object(G.a)(f),z=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /;var J=function(e){var t=e.match(z);return t?t[1].split(Q):[]},Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var W=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Y,"{\n/* [wrapped with "+t+"] */\n")},$=n(117),X=n(214),Z=n(87),ee=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var te=function(e,t){return Object(X.a)(ee,(function(n){var r="_."+n[0];t&n[1]&&!Object(Z.a)(e,r)&&e.push(r)})),e.sort()};var ne=function(e,t,n){var r=t+"";return Object($.a)(e,W(r,te(J(r),n)))};var re=function(e,t,n,r,a,o,c,i,s,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var p=[e,t,a,l?o:void 0,l?c:void 0,l?void 0:o,l?void 0:c,i,s,u],d=n.apply(void 0,p);return L(e)&&q(d,p),d.placeholder=r,ne(d,e,t)};var ae=function(e){return e.placeholder},oe=n(68),ce=Math.min;var ie=function(e,t){for(var n=e.length,r=ce(t.length,n),a=F(e);r--;){var o=t[r];e[r]=Object(oe.a)(o,n)?a[o]:void 0}return e};var se=function(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var c=e[n];c!==t&&"__lodash_placeholder__"!==c||(e[n]="__lodash_placeholder__",o[a++]=n)}return o};var ue=function e(t,n,r,a,o,c,i,s,u,l){var p=128&n,d=1&n,f=2&n,h=24&n,v=512&n,b=f?void 0:O(t);return function j(){for(var m=arguments.length,g=Array(m),w=m;w--;)g[w]=arguments[w];if(h)var E=ae(j),S=R(g,E);if(a&&(g=_(g,a,o,h)),c&&(g=C(g,c,i,h)),m-=S,h&&m<l){var I=se(g,E);return re(t,n,e,j.placeholder,r,g,I,s,u,l-m)}var N=d?r:this,P=f?N[t]:t;return m=g.length,s?g=ie(g,s):v&&m>1&&g.reverse(),p&&u<m&&(g.length=u),this&&this!==y.a&&this instanceof j&&(P=b||O(P)),P.apply(N,g)}};var le=function(e,t,n){var r=O(e);return function a(){for(var o=arguments.length,c=Array(o),i=o,s=ae(a);i--;)c[i]=arguments[i];var u=o<3&&c[0]!==s&&c[o-1]!==s?[]:se(c,s);if((o-=u.length)<n)return re(e,t,ue,a.placeholder,void 0,c,u,void 0,void 0,n-o);var l=this&&this!==y.a&&this instanceof a?r:e;return Object(m.a)(l,this,c)}};var pe=function(e,t,n,r){var a=1&t,o=O(e);return function t(){for(var c=-1,i=arguments.length,s=-1,u=r.length,l=Array(u+i),p=this&&this!==y.a&&this instanceof t?o:e;++s<u;)l[s]=r[s];for(;i--;)l[s++]=arguments[++c];return Object(m.a)(p,a?n:this,l)}},de=Math.min;var fe=function(e,t){var n=e[1],r=t[1],a=n|r,o=a<131,c=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!c)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var i=t[3];if(i){var s=e[3];e[3]=s?_(s,i,t[4]):i,e[4]=s?se(e[3],"__lodash_placeholder__"):t[4]}return(i=t[5])&&(s=e[5],e[5]=s?C(s,i,t[6]):i,e[6]=s?se(e[5],"__lodash_placeholder__"):t[6]),(i=t[7])&&(e[7]=i),128&r&&(e[8]=null==e[8]?t[8]:de(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e},he=n(75),ve=Math.max;var be=function(e,t,n,r,a,o,c,i){var s=2&t;if(!s&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=a=void 0),c=void 0===c?c:ve(Object(he.a)(c),0),i=void 0===i?i:Object(he.a)(i),u-=a?a.length:0,64&t){var l=r,p=a;r=a=void 0}var d=s?void 0:P(e),h=[e,t,n,r,a,l,p,o,c,i];if(d&&fe(h,d),e=h[0],t=h[1],n=h[2],r=h[3],a=h[4],!(i=h[9]=void 0===h[9]?s?0:e.length:ve(h[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?le(e,t,i):32!=t&&33!=t||a.length?ue.apply(void 0,h):pe(e,t,n,r);else var v=j(e,t,n);return ne((d?f:q)(v,h),e,t)},Oe=Object(u.a)((function(e,t){var n=se(t,ae(Oe));return be(e,64,void 0,t,n)}));Oe.placeholder={};var ye=Oe,je=n(189),me=n(18),ge=n(17),_e=n(97),we=n(6),Ce=n(217),Re=n(91),Ee=n(4),Se=n(14),Ie=n.n(Se),Ne=(n(0),n(1)),Pe=n.n(Ne),ke=n(52),De=n.n(ke),xe=n(308),Te=n(307),Ae=n(15),Me=n(162),Ke=n(163),Fe=n(107),Ue=n(310),Ve=n(244),Be=n(5);function He(e){var t=e.categoryContent,n=e.resultsContent;return Pe.a.createElement(Pe.a.Fragment,null,Pe.a.createElement("div",{className:"name"},t),Pe.a.createElement("div",{className:"results"},n))}He.handledProps=["categoryContent","resultsContent"],He.propTypes={};var Le=He;function Ge(e){var t=e.active,n=e.children,r=e.className,a=e.content,o=e.layoutRenderer,c=e.renderer,s=Object(Ee.a)(Object(Ae.a)(t,"active"),"category",r),u=Object(Me.a)(Ge,e),l=Object(Ke.a)(Ge,e),p=c(e),d=Be.a.isNil(n)?a:n;return Pe.a.createElement(l,Object(i.a)({},u,{className:s}),o({categoryContent:p,resultsContent:d}))}Ge.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],Ge.defaultProps={layoutRenderer:Le,renderer:function(e){return e.name}},Ge.propTypes={};var qe=Ge,ze=n(119),Qe=function(e){var t=e.image,n=e.price,r=e.title,a=e.description;return[t&&Pe.a.createElement("div",{key:"image",className:"image"},Object(ze.a)(t,{autoGenerateKey:!1})),Pe.a.createElement("div",{key:"content",className:"content"},n&&Pe.a.createElement("div",{className:"price"},n),r&&Pe.a.createElement("div",{className:"title"},r),a&&Pe.a.createElement("div",{className:"description"},a))]};Qe.handledProps=[];var Je=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return Object(c.a)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,a=e.renderer,o=Object(Ee.a)(Object(Ae.a)(n,"active"),"result",r),c=Object(Me.a)(t,this.props),s=Object(Ke.a)(t,this.props);return Pe.a.createElement(s,Object(i.a)({},c,{className:o,onClick:this.handleClick}),a(this.props))},t}(Ne.Component);function Ye(e){var t=e.children,n=e.className,r=e.content,a=Object(Ee.a)("results transition",n),o=Object(Me.a)(Ye,e),c=Object(Ke.a)(Ye,e);return Pe.a.createElement(c,Object(i.a)({},o,{className:a}),Be.a.isNil(t)?r:t)}Je.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],Je.propTypes={},Je.defaultProps={renderer:Qe},Ye.handledProps=["as","children","className","content"],Ye.propTypes={};var We=Ye,$e=function(e){var t=e.input;return Object(Re.a)(t)?Object(i.a)({},e,{input:{className:"prompt"}}):Object(Ce.a)(t)?Object(i.a)({},e,{input:Object(i.a)({},t,{className:Object(Ee.a)(t.className,"prompt")})}):e},Xe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleResultSelect=function(e,n){Object(we.a)(t.props,"onResultSelect",e,Object(i.a)({},t.props,{result:n}))},t.handleSelectionChange=function(e){var n=t.getSelectedResult();Object(we.a)(t.props,"onSelectionChange",e,Object(i.a)({},t.props,{result:n}))},t.closeOnEscape=function(e){Ie.a.getCode(e)===Ie.a.Escape&&(e.preventDefault(),t.close())},t.moveSelectionOnKeyDown=function(e){switch(Ie.a.getCode(e)){case Ie.a.ArrowDown:e.preventDefault(),t.moveSelectionBy(e,1);break;case Ie.a.ArrowUp:e.preventDefault(),t.moveSelectionBy(e,-1)}},t.selectItemOnEnter=function(e){if(Ie.a.getCode(e)===Ie.a.Enter){var n=t.getSelectedResult();n&&(e.preventDefault(),t.setValue(n.title),t.handleResultSelect(e,n),t.close())}},t.closeOnDocumentClick=function(e){t.close()},t.handleMouseDown=function(e){t.isMouseDown=!0,Object(we.a)(t.props,"onMouseDown",e,t.props),xe.a.sub("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,xe.a.unsub("mouseup",t.handleDocumentMouseUp)},t.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),t.tryOpen()},t.handleItemClick=function(e,n){var r=n.id,a=t.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),t.setValue(a.title),t.handleResultSelect(e,a),t.close()},t.handleItemMouseDown=function(e){e.preventDefault()},t.handleFocus=function(e){Object(we.a)(t.props,"onFocus",e,t.props),t.setState({focus:!0})},t.handleBlur=function(e){Object(we.a)(t.props,"onBlur",e,t.props),t.setState({focus:!1})},t.handleSearchChange=function(e){e.stopPropagation();var n=t.props.minCharacters,r=t.state.open,a=e.target.value;Object(we.a)(t.props,"onSearchChange",e,Object(i.a)({},t.props,{value:a})),a.length<n?t.close():r||t.tryOpen(a),t.setValue(a)},t.getFlattenedResults=function(){var e=t.props,n=e.category,r=e.results;return n?Object(_e.a)(r,(function(e,t){return e.concat(t.results)}),[]):r},t.getSelectedResult=function(e){void 0===e&&(e=t.state.selectedIndex);var n=t.getFlattenedResults();return Object(ge.a)(n,e)},t.setValue=function(e){var n=t.props.selectFirstResult;t.setState({value:e,selectedIndex:n?0:-1})},t.moveSelectionBy=function(e,n){var r=t.state.selectedIndex,a=t.getFlattenedResults().length-1,o=r+n;o>a?o=0:o<0&&(o=a),t.setState({selectedIndex:o}),t.scrollSelectedItemIntoView(),t.handleSelectionChange(e)},t.scrollSelectedItemIntoView=function(){if(Object(Te.a)()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},t.tryOpen=function(e){void 0===e&&(e=t.state.value);var n=t.props.minCharacters;e.length<n||t.open()},t.open=function(){t.setState({open:!0})},t.close=function(){t.setState({open:!1})},t.renderSearchInput=function(e){var n=t.props,r=n.icon,a=n.input,o=t.state.value;return Ve.a.create(a,{autoGenerateKey:!1,defaultProps:Object(i.a)({},e,{autoComplete:"off",icon:r,onChange:t.handleSearchChange,onClick:t.handleInputClick,tabIndex:"0",value:o}),overrideProps:$e})},t.renderNoResults=function(){var e=t.props,n=e.noResultsDescription,r=e.noResultsMessage;return Pe.a.createElement("div",{className:"message empty"},Pe.a.createElement("div",{className:"header"},r),n&&Pe.a.createElement("div",{className:"description"},n))},t.renderResult=function(e,n,r,a){var c=e.childKey,s=Object(o.a)(e,["childKey"]);void 0===a&&(a=0);var u=t.props.resultRenderer,l=t.state.selectedIndex,p=n+a;return Pe.a.createElement(Je,Object(i.a)({key:null!=c?c:s.id||s.title,active:l===p,onClick:t.handleItemClick,onMouseDown:t.handleItemMouseDown,renderer:u},s,{id:p}))},t.renderResults=function(){var e=t.props.results;return Object(me.a)(e,t.renderResult)},t.renderCategories=function(){var e=t.props,n=e.categoryLayoutRenderer,r=e.categoryRenderer,a=e.results,c=t.state.selectedIndex,s=0;return Object(me.a)(a,(function(e){var a=e.childKey,u=Object(o.a)(e,["childKey"]),l=Object(i.a)({key:null!=a?a:u.name,active:Object(je.a)(c,s,s+u.results.length),layoutRenderer:n,renderer:r},u),p=ye(t.renderResult,s);return s+=u.results.length,Pe.a.createElement(qe,l,u.results.map(p))}))},t.renderMenuContent=function(){var e=t.props,n=e.category,r=e.showNoResults,a=e.results;return Object(s.a)(a)?r?t.renderNoResults():null:n?t.renderCategories():t.renderResults()},t.renderResultsMenu=function(){var e=t.state.open?"visible":"",n=t.renderMenuContent();if(n)return Pe.a.createElement(We,{className:e},n)},t}Object(c.a)(t,e),t.getAutoControlledStateFromProps=function(e,t){if(void 0!==t.prevValue&&De()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!De()(e,this.props)||!De()(t,this.state)},n.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&xe.a.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),xe.a.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),xe.a.sub("click",this.closeOnDocumentClick),xe.a.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),xe.a.unsub("click",this.closeOnDocumentClick),xe.a.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},n.componentWillUnmount=function(){xe.a.unsub("click",this.closeOnDocumentClick),xe.a.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},n.render=function(){var e=this.state,n=e.searchClasses,r=e.focus,a=e.open,o=this.props,c=o.aligned,s=o.category,u=o.className,l=o.fluid,p=o.loading,d=o.size,f=Object(Ee.a)("ui",a&&"active visible",d,n,Object(Ae.a)(s,"category"),Object(Ae.a)(r,"focus"),Object(Ae.a)(l,"fluid"),Object(Ae.a)(p,"loading"),Object(Ae.e)(c,"aligned"),"search",u),h=Object(Me.a)(t,this.props),v=Object(Ke.a)(t,this.props),b=Object(Fe.c)(h,{htmlProps:Fe.b}),O=b[0],y=b[1];return Pe.a.createElement(v,Object(i.a)({},y,{className:f,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(O),this.renderResultsMenu())},t}(Ue.a);Xe.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","resultRenderer","results","selectFirstResult","showNoResults","size","value"],Xe.propTypes={},Xe.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},Xe.autoControlledProps=["open","value"],Xe.Category=qe,Xe.Result=Je,Xe.Results=We;var Ze=n(9),et=n(28),tt=n(22),nt=n.n(tt),rt=n(59),at=n.n(rt),ot=n(23),ct=n(334);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut={loading:!1,results:[{key:null,value:null,title:"Start typing to search for a topic..."}],value:"",selected:!1},lt=function(e,t){switch(t.type){case"CLEAN_QUERY":return ut;case"START_SEARCH":return st(st({},e),{},{loading:!0,value:t.query});case"FINISH_SEARCH":return st(st({},e),{},{loading:!1,results:t.results});case"UPDATE_SELECTION":return st(st({},e),{},{loading:!0,value:t.selection.title,selected:t.selection.value});default:throw new Error}},pt=function(e){var t=e.restrictToTermId,n=void 0===t?0:t,a=Object(Ze.useReducer)(lt,ut),o=Object(r.a)(a,2),c=o[0],i=o[1],s=c.loading,u=c.results,l=c.value,p=c.selected,d=Object(Ze.useRef)(),f=Object(Ze.useCallback)((function(e,t){clearTimeout(d.current),i({type:"START_SEARCH",query:t.value}),d.current=setTimeout((function(){0!==t.value.length?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(n){var r={per_page:25};""!==e&&(r.search=e),0!==t&&""!==t&&(r.parent=t);var a={method:"GET",path:Object(ot.addQueryArgs)("/prc-api/v2/blocks/topic-index-search",r)};console.log("Search Request->",a),at()(a).then((function(e){console.log("... returns: ",e);var t=e.map((function(e){return{key:e.id,value:e.link,title:Object(ct.decodeEntities)(e.name)}}));n(t)}))}))}(t.value,n).then((function(e){i({type:"FINISH_SEARCH",results:e})})):i({type:"CLEAN_QUERY"})}),300)}),[]);return Object(Ze.useEffect)((function(){return function(){clearTimeout(d.current)}}),[]),Object(Ze.useEffect)((function(){!1!==p&&setTimeout((function(){window.location=p}),1e3)}),[p]),React.createElement(Xe,{loading:s,onResultSelect:function(e,t){var n=t.result;i({type:"UPDATE_SELECTION",selection:n})},onSearchChange:f,results:u,value:l,defaultValue:null,fluid:!0,placeholder:Object(et.__)("Start typing to search for a topic...")})};nt()((function(){var e=document.querySelectorAll(".js-react-topic-index-search-field");e&&e.forEach((function(e){var t=e.getAttribute("data-term-id");console.log(e,t),Object(Ze.render)(React.createElement(pt,{restrictToTermId:t}),e)}))}))},59:function(e,t){e.exports=window.wp.apiFetch},64:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},9:function(e,t){e.exports=window.wp.element},97:function(e,t,n){"use strict";var r=n(115),a=n(37),o=n(33);var c=function(e,t,n,r,a){return a(e,(function(e,a,o){n=r?(r=!1,e):t(n,e,a,o)})),n},i=n(13);t.a=function(e,t,n){var s=Object(i.a)(e)?r.a:c,u=arguments.length<3;return s(e,Object(o.a)(t,4),n,u,a.a)}}},[[523,0,1,2]]]);
//# sourceMappingURL=topic-index-search-field-6852dc68.js.map