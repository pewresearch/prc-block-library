{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.element\"","webpack:///external \"wp.domReady\"","webpack:///external \"wp.url\"","webpack:///external \"wp.htmlEntities\"","webpack:///./src/topic-index-search-field/frontend.js"],"names":["module","exports","React","ReactDOM","wp","apiFetch","element","domReady","url","htmlEntities","TopicSearchField","restrictToTermId","useState","key","value","text","disabled","data","setData","processing","toggleProcessing","loading","toggleLoading","searchTerm","setSearchTerm","selected","select","useEffect","args","per_page","search","parent","path","addQueryArgs","then","topics","tmpData","map","t","id","link","decodeEntities","name","catch","e","console","error","finally","onSubmit","window","location","Group","Dropdown","placeholder","selection","options","onSearchChange","searchQuery","onChange","style","width","Button","content","type","fields","document","querySelectorAll","forEach","elm","getAttribute","log","render"],"mappings":";;;;;;;;;;;;;;;;;0HAAAA,EAAOC,QAAUC,O,kBCAjBF,EAAOC,QAAUE,U,kBCAjBH,EAAOC,QAAUG,GAAGC,U,iBCApBL,EAAOC,QAAUG,GAAGE,S,iBCApBN,EAAOC,QAAUG,GAAGG,U,iBCApBP,EAAOC,QAAUG,GAAGI,K,kBCApBR,EAAOC,QAAUG,GAAGK,c,qKCcdC,EAAmB,SAAC,GAA8B,IAAD,IAA3BC,wBAA2B,MAAR,EAAQ,IAC3BC,mBAAS,CAC7B,CACIC,IAAK,UACLC,MAAO,KACPC,KAAM,oBACNC,UAAU,KANiC,mBAC5CC,EAD4C,KACtCC,EADsC,OASZN,oBAAS,GATG,mBAS5CO,EAT4C,KAShCC,EATgC,OAUlBR,oBAAS,GAVS,mBAU5CS,EAV4C,KAUnCC,EAVmC,OAWfV,mBAAS,IAXM,mBAW5CW,EAX4C,KAWhCC,EAXgC,OAYxBZ,oBAAS,GAZe,mBAY5Ca,EAZ4C,KAYlCC,EAZkC,KAcnDC,qBAAU,WACN,IAAMC,EAAO,CAAEC,SAAU,IACrB,KAAON,IACPK,EAAKE,OAASP,GAEd,IAAMZ,GAAoB,KAAOA,IACjCiB,EAAKG,OAASpB,GAElB,IAAMqB,EAAOC,uBAAa,eAAgBL,GAC1CvB,IAAS,CAAE2B,SACNE,MAAK,SAAAC,GACF,IAAMC,EAAUD,EAAOE,KAAI,SAAAC,GACvB,MAAO,CACHzB,IAAKyB,EAAEC,GACPzB,MAAOwB,EAAEE,KACTzB,KAAM0B,yBAAeH,EAAEI,UAG/BxB,EAAQkB,MAEXO,OAAM,SAAAC,GAAC,OAAIC,QAAQC,MAAMF,MACzBG,SAAQ,kBAAMzB,GAAc,QAClC,CAACC,IAOJ,OACI,oBAAC,IAAD,CAAMyB,SANO,WACb5B,GAAiB,GACjB6B,OAAOC,SAAWzB,IAKd,oBAAC,IAAK0B,MAAN,KACI,oBAAC,IAAKC,SAAN,CACIC,YAAY,8BACZvB,QAAM,EACNwB,WAAS,EACTC,QAAStC,EACTI,QAASA,EACTmC,eAAgB,SAACZ,EAAD,OAAMa,EAAN,EAAMA,YAAN,OACZjC,EAAciC,IAElBC,SAAU,SAACd,EAAD,OAAM9B,EAAN,EAAMA,MAAN,OAAkBY,EAAOZ,IACnC6C,MAAO,CAAEC,MAAO,WAEpB,oBAAC,IAAKC,OAAN,CACIC,QAAQ,KACRC,KAAK,SACL/C,UAAU,IAAUS,EACpBJ,QAASF,OAO7BZ,KAAS,WACL,IAAMyD,EAASC,SAASC,iBACpB,sCAEAF,GACAA,EAAOG,SAAQ,SAAAC,GACX,IAAMzD,EAAmByD,EAAIC,aAAa,gBAC1CxB,QAAQyB,IAAIF,EAAKzD,GACjB4D,iBACI,oBAAC7D,EAAD,CAAkBC,iBAAkBA,IACpCyD,W","file":"frontend/topic-index-search-field-fe816673.js","sourcesContent":["module.exports = React;","module.exports = ReactDOM;","module.exports = wp.apiFetch;","module.exports = wp.element;","module.exports = wp.domReady;","module.exports = wp.url;","module.exports = wp.htmlEntities;","/**\n * External dependencies\n */\nimport { Form } from 'semantic-ui-react';\n\n/**\n * WordPress dependencies\n */\nimport { render, useState, useEffect } from '@wordpress/element';\nimport domReady from '@wordpress/dom-ready';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\n\nconst TopicSearchField = ({ restrictToTermId = 0 }) => {\n    const [data, setData] = useState([\n        {\n            key: 'default',\n            value: null,\n            text: 'Loading values...',\n            disabled: true,\n        },\n    ]);\n    const [processing, toggleProcessing] = useState(false);\n    const [loading, toggleLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [selected, select] = useState(false);\n    \n    useEffect(() => {\n        const args = { per_page: 25 };\n        if ('' !== searchTerm) {\n            args.search = searchTerm;\n        }\n        if (0 !== restrictToTermId && '' !== restrictToTermId) {\n            args.parent = restrictToTermId;\n        }\n        const path = addQueryArgs('/wp/v2/topic', args);\n        apiFetch({ path })\n            .then(topics => {\n                const tmpData = topics.map(t => {\n                    return {\n                        key: t.id,\n                        value: t.link,\n                        text: decodeEntities(t.name),\n                    };\n                });\n                setData(tmpData);\n            })\n            .catch(e => console.error(e))\n            .finally(() => toggleLoading(false));\n    }, [searchTerm]);\n\n    const onSubmit = () => {\n        toggleProcessing(true);\n        window.location = selected;\n    };\n\n    return (\n        <Form onSubmit={onSubmit}>\n            <Form.Group>\n                <Form.Dropdown\n                    placeholder=\"Start typing or click arrow\"\n                    search\n                    selection\n                    options={data}\n                    loading={loading}\n                    onSearchChange={(e, { searchQuery }) =>\n                        setSearchTerm(searchQuery)\n                    }\n                    onChange={(e, { value }) => select(value)}\n                    style={{ width: '200px' }}\n                />\n                <Form.Button\n                    content=\"Go\"\n                    type=\"submit\"\n                    disabled={false === selected}\n                    loading={processing}\n                />\n            </Form.Group>\n        </Form>\n    );\n};\n\ndomReady(() => {\n    const fields = document.querySelectorAll(\n        '.js-react-topic-index-search-field',\n    );\n    if (fields) {\n        fields.forEach(elm => {\n            const restrictToTermId = elm.getAttribute('data-term-id');\n            console.log(elm, restrictToTermId);\n            render(\n                <TopicSearchField restrictToTermId={restrictToTermId} />,\n                elm,\n            );\n        });\n    }\n});\n"],"sourceRoot":""}