{"version":3,"sources":["webpack:///./node_modules/enquire.js/src/Util.js","webpack:///external [\"wp\",\"domReady\"]","webpack:///./node_modules/enquire.js/src/index.js","webpack:///./node_modules/enquire.js/src/MediaQueryDispatch.js","webpack:///./node_modules/enquire.js/src/MediaQuery.js","webpack:///./node_modules/enquire.js/src/QueryHandler.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///./src/cover/frontend.js"],"names":["module","exports","isFunction","target","isArray","Object","prototype","toString","apply","each","collection","fn","i","length","window","MediaQueryDispatch","MediaQuery","Util","matchMedia","Error","this","queries","browserIsIncapable","matches","constructor","register","q","options","shouldDegrade","isUnconditional","match","handler","addHandler","unregister","query","removeHandler","clear","QueryHandler","handlers","mql","self","listener","currentTarget","assess","addListener","constuctor","qh","push","on","h","equals","destroy","splice","removeListener","action","deferSetup","setup","initialised","off","unmatch","path","replace","concat","scollSnapInit","document","querySelectorAll","forEach","cover","id","Math","random","substr","generateRandomString","setAttribute","el","referenceNode","returnPoint","createElement","parentNode","insertBefore","items","lastItem","topWatcher","IntersectionObserver","payload","p","isIntersecting","console","log","nextSibling","classList","remove","add","middleWatcher","top","boundingClientRect","scroll","behavior","root","threshold","bottomWatcher","parentElement","observe","domReady"],"mappings":"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","file":"frontend/cover-1edc3fd7.js","sourcesContent":["/**\n * Helper function for iterating over a collection\n *\n * @param collection\n * @param fn\n */function each(collection,fn){var i=0,length=collection.length,cont;for(i;i<length;i++){cont=fn(collection[i],i);if(cont===false){break;//allow early exit\n}}}/**\n * Helper function for determining whether target object is an array\n *\n * @param target the object under test\n * @return {Boolean} true if array, false otherwise\n */function isArray(target){return Object.prototype.toString.apply(target)==='[object Array]';}/**\n * Helper function for determining whether target object is a function\n *\n * @param target the object under test\n * @return {Boolean} true if function, false otherwise\n */function isFunction(target){return typeof target==='function';}module.exports={isFunction:isFunction,isArray:isArray,each:each};","(function() { module.exports = window[\"wp\"][\"domReady\"]; }());","var MediaQueryDispatch=require('./MediaQueryDispatch');module.exports=new MediaQueryDispatch();","var MediaQuery=require('./MediaQuery');var Util=require('./Util');var each=Util.each;var isFunction=Util.isFunction;var isArray=Util.isArray;/**\n * Allows for registration of query handlers.\n * Manages the query handler's state and is responsible for wiring up browser events\n *\n * @constructor\n */function MediaQueryDispatch(){if(!window.matchMedia){throw new Error('matchMedia not present, legacy browsers require a polyfill');}this.queries={};this.browserIsIncapable=!window.matchMedia('only all').matches;}MediaQueryDispatch.prototype={constructor:MediaQueryDispatch,/**\n     * Registers a handler for the given media query\n     *\n     * @param {string} q the media query\n     * @param {object || Array || Function} options either a single query handler object, a function, or an array of query handlers\n     * @param {function} options.match fired when query matched\n     * @param {function} [options.unmatch] fired when a query is no longer matched\n     * @param {function} [options.setup] fired when handler first triggered\n     * @param {boolean} [options.deferSetup=false] whether setup should be run immediately or deferred until query is first matched\n     * @param {boolean} [shouldDegrade=false] whether this particular media query should always run on incapable browsers\n     */register:function register(q,options,shouldDegrade){var queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable;if(!queries[q]){queries[q]=new MediaQuery(q,isUnconditional);}//normalise to object in an array\nif(isFunction(options)){options={match:options};}if(!isArray(options)){options=[options];}each(options,function(handler){if(isFunction(handler)){handler={match:handler};}queries[q].addHandler(handler);});return this;},/**\n     * unregisters a query and all it's handlers, or a specific handler for a query\n     *\n     * @param {string} q the media query to target\n     * @param {object || function} [handler] specific handler to unregister\n     */unregister:function unregister(q,handler){var query=this.queries[q];if(query){if(handler){query.removeHandler(handler);}else{query.clear();delete this.queries[q];}}return this;}};module.exports=MediaQueryDispatch;","var QueryHandler=require('./QueryHandler');var each=require('./Util').each;/**\n * Represents a single media query, manages it's state and registered handlers for this query\n *\n * @constructor\n * @param {string} query the media query string\n * @param {boolean} [isUnconditional=false] whether the media query should run regardless of whether the conditions are met. Primarily for helping older browsers deal with mobile-first design\n */function MediaQuery(query,isUnconditional){this.query=query;this.isUnconditional=isUnconditional;this.handlers=[];this.mql=window.matchMedia(query);var self=this;this.listener=function(mql){// Chrome passes an MediaQueryListEvent object, while other browsers pass MediaQueryList directly\nself.mql=mql.currentTarget||mql;self.assess();};this.mql.addListener(this.listener);}MediaQuery.prototype={constuctor:MediaQuery,/**\n     * add a handler for this query, triggering if already active\n     *\n     * @param {object} handler\n     * @param {function} handler.match callback for when query is activated\n     * @param {function} [handler.unmatch] callback for when query is deactivated\n     * @param {function} [handler.setup] callback for immediate execution when a query handler is registered\n     * @param {boolean} [handler.deferSetup=false] should the setup callback be deferred until the first time the handler is matched?\n     */addHandler:function addHandler(handler){var qh=new QueryHandler(handler);this.handlers.push(qh);this.matches()&&qh.on();},/**\n     * removes the given handler from the collection, and calls it's destroy methods\n     *\n     * @param {object || function} handler the handler to remove\n     */removeHandler:function removeHandler(handler){var handlers=this.handlers;each(handlers,function(h,i){if(h.equals(handler)){h.destroy();return!handlers.splice(i,1);//remove from array and exit each early\n}});},/**\n     * Determine whether the media query should be considered a match\n     *\n     * @return {Boolean} true if media query can be considered a match, false otherwise\n     */matches:function matches(){return this.mql.matches||this.isUnconditional;},/**\n     * Clears all handlers and unbinds events\n     */clear:function clear(){each(this.handlers,function(handler){handler.destroy();});this.mql.removeListener(this.listener);this.handlers.length=0;//clear array\n},/*\n        * Assesses the query, turning on all handlers if it matches, turning them off if it doesn't match\n        */assess:function assess(){var action=this.matches()?'on':'off';each(this.handlers,function(handler){handler[action]();});}};module.exports=MediaQuery;","/**\n * Delegate to handle a media query being matched and unmatched.\n *\n * @param {object} options\n * @param {function} options.match callback for when the media query is matched\n * @param {function} [options.unmatch] callback for when the media query is unmatched\n * @param {function} [options.setup] one-time callback triggered the first time a query is matched\n * @param {boolean} [options.deferSetup=false] should the setup callback be run immediately, rather than first time query is matched?\n * @constructor\n */function QueryHandler(options){this.options=options;!options.deferSetup&&this.setup();}QueryHandler.prototype={constructor:QueryHandler,/**\n     * coordinates setup of the handler\n     *\n     * @function\n     */setup:function setup(){if(this.options.setup){this.options.setup();}this.initialised=true;},/**\n     * coordinates setup and triggering of the handler\n     *\n     * @function\n     */on:function on(){!this.initialised&&this.setup();this.options.match&&this.options.match();},/**\n     * coordinates the unmatch event for the handler\n     *\n     * @function\n     */off:function off(){this.options.unmatch&&this.options.unmatch();},/**\n     * called when a handler is to be destroyed.\n     * delegates to the destroy or unmatch callbacks, depending on availability.\n     *\n     * @function\n     */destroy:function destroy(){this.options.destroy?this.options.destroy():this.off();},/**\n     * determines equality by reference.\n     * if object is supplied compare options, if function, compare match callback\n     *\n     * @function\n     * @param {object || function} [target] the target for comparison\n     */equals:function equals(target){return this.options===target||this.options.match===target;}};module.exports=QueryHandler;","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","/**\n * External Dependencies\n */\nimport enquire from 'enquire.js';\n\n/**\n * WordPress Dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\n\nconst insertBefore = (el, referenceNode) => {\n    referenceNode.parentNode.insertBefore(el, referenceNode);\n};\n\nconst insertAfter = (el, referenceNode) => {\n    referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\n};\n\nconst generateRandomString = (length=6)=>Math.random().toString(20).substr(2, length)\n\nconst scollSnapInit = () => {\n\tconst snapCovers = document.querySelectorAll('.wp-block-cover.is-style-snap-groups');\n\tsnapCovers.forEach(cover => {\n\n\t\tconst id = generateRandomString();\n\n\t\tcover.setAttribute('data-top-watcher-id', id);\n\t\t// cover.classList.add('locked'); // init with locked\n\n\t\tconst returnPoint = document.createElement('div');\n\t\treturnPoint.setAttribute('id', id);\n\t\tinsertBefore(returnPoint, cover);\n\n\t\tconst items = cover.querySelectorAll('.wp-block-group');\n\t\tconst lastItem = items[items.length - 1];\n\n\t\tconst topWatcher = new IntersectionObserver((payload) => {\n\t\t\tconst p = payload[0];\n\t\t\tconst isIntersecting = p.isIntersecting;\n\t\t\tconsole.log('topWatcher', isIntersecting, p);\n\n\t\t\tif ( ! isIntersecting ) {\n\t\t\t\tp.target.nextSibling.classList.add('active');\n\t\t\t} else {\n\t\t\t\tp.target.nextSibling.classList.remove('active');\n\t\t\t}\n\t\t});\n\n\t\tconst scrollingBackSnapToTop = (top) => {\n\t\t\twindow.scroll({\n\t\t\t\ttop: top,\n\t\t\t\tbehavior: \"smooth\"\n\t\t\t});\n\t\t}\n\n\t\tconst middleWatcher = new IntersectionObserver((payload) => {\n\t\t\tconst p = payload[0];\n\t\t\tconst isIntersecting = p.isIntersecting;\n\t\t\tconsole.log('middleWatcher', isIntersecting, p);\n\t\t\tif ( isIntersecting ) {\n\t\t\t\tconsole.log(\"I would add locked now\");\n\t\t\t\tp.target.classList.add('locked');\n\t\t\t\tscrollingBackSnapToTop(p.boundingClientRect.top);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"I would remove locked now\");\n\t\t\t\tp.target.classList.remove('locked');\n\t\t\t}\n\t\t}, {\n\t\t\troot: null,\n\t\t\tthreshold: [0.70]\n\t\t});\n\n\t\tconst bottomWatcher = new IntersectionObserver((payload) => {\n\t\t\tconst p = payload[0];\n\t\t\tconst isIntersecting = p.isIntersecting;\n\t\t\tconsole.log('bottomWatcher', isIntersecting, p);\n\t\t\tif ( isIntersecting) {\n\t\t\t\tp.target.parentElement.parentElement.classList.remove('locked');\n\t\t\t}\n\t\t}, {\n\t\t\troot: cover, // Declaring null uses the entire viewport.\n\t\t\tthreshold: 0.5, //  The percentage of the bottomPost to come into view.\n\t\t\t// rootMargin: `-${navHeight}px`, // The offset based on the nav bar's height.\n\t\t});\n\n\t\ttopWatcher.observe(returnPoint);\n\t\tmiddleWatcher.observe(cover);\n\t\tbottomWatcher.observe(lastItem);\n\t});\n}\n\ndomReady(() => {\n\tscollSnapInit();\n});\n"],"sourceRoot":""}