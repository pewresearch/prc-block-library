{"version":3,"sources":["webpack:///external \"React\"","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"regeneratorRuntime\"","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"domReady\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-fetch.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-search/search-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/functions/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/mailchimp/index.js","webpack:///external [\"wp\",\"url\"]","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"keycodes\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///./src/carousel/frontend.js","webpack:///external [\"wp\",\"element\"]"],"names":["module","exports","window","regeneratorRuntime","styled","Button","DragHandle","sortableHandle","style","marginRight","cursor","flexShrink","width","height","xmlns","viewBox","role","aria-hidden","focusable","d","Wrapper","PickedItem","item","isOrderable","handleItemDelete","mode","type","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","id","result","console","log","newItem","title","rendered","name","url","link","uuid","useEffect","border","paddingTop","paddingBottom","paddingLeft","className","decodeEntities","filterURLForDisplay","safeDecodeURI","onClick","aria-label","__","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","map","index","itemKey","length","key","sortIndex","totalItems","randomId","Math","random","toString","substr","mailChimpInterests","label","value","getScrollingDirection","changeEvent","prcBlocks","carouselBlocks","watched","some","e","target","currentY","boundingClientRect","y","isIntersecting","currentRatio","intersectionRatio","previousY","find","previousRatio","ratio","direction","activateCarousel","elm","activated","includes","push","location","hash","toggleBodyLock","classList","add","debug","warn","deactivateCarousel","carouselBlock","stage","getAttribute","remove","filter","ID","watch","carouselObserverCallback","entry","forEach","change","scrollingDirection","lastCarouselSlideCallback","parentElement","boundingClientRectHeight","intersectClientRectHeight","intersectionRect","firstCarouselSlideCallback","useActiveCarouselEffect","mutationList","mutation","attributeName","contains","coverBlock","setTimeout","scrollIntoView","behavior","block","hasOwnProperty","thresholds","carousel","lastSlide","firstSlide","enable","body","document","querySelector","domReady","carousels","querySelectorAll","isMobile","Array","from","carouselObserver","IntersectionObserver","threshold","isCarouselActiveObserver","MutationObserver","lastCarouselSlideObserver","firstCarouselSlideObserver","firstCarouselSlide","lastCarouselSlide","carouselId","setAttribute","firstCarouselSlideId","lastCarouseSlideId","observe","attributes","timer","postContents","firstElementChild","snapFirstCoverCarousel"],"mappings":"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","file":"frontend/carousel-1916e9cc.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"domReady\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","import { useEffect, useRef, useReducer } from '@wordpress/element';\n\n/**\n * A react hook to fetch data from a url and store status, errors, and date in state.\n * Usage: const { status, data, error } = useFetch(url);\n * Adapted from https://www.smashingmagazine.com/2020/07/custom-react-hook-fetch-cache-data/\n * Example application: https://codesandbox.io/s/usefetch-demo-clt9o\n * @param {*} url\n * @returns {object} status, data, and error\n */\nconst useFetch = (url) => {\n\tconst cache = useRef({});\n\n\t// initial state, no preloaded data\n\tconst initialState = {\n\t\tstatus: 'idle',\n\t\terror: null,\n\t\tdata: [],\n\t};\n\n\t// reducer function to update state depending on current status of fetch\n\tconst reducer = (state, action) => {\n\t\tswitch (action.type) {\n\t\t\tcase 'FETCHING':\n\t\t\t\treturn { ...initialState, status: 'fetching' };\n\t\t\tcase 'FETCHED':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'fetched',\n\t\t\t\t\tdata: action.payload,\n\t\t\t\t};\n\t\t\tcase 'FETCH_ERROR':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\terror: action.payload,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t};\n\t// useReducer instead of useState to set multiple values simultaneously and prevent unnecessary rerenders.\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\tuseEffect(() => {\n\t\tlet cancelRequest = false;\n\t\tif (!url) return undefined;\n\n\t\tconst fetchData = async () => {\n\t\t\tdispatch({ type: 'FETCHING' });\n\t\t\tif (cache.current[url]) {\n\t\t\t\tconst data = cache.current[url];\n\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url);\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tcache.current[url] = data;\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: 'FETCH_ERROR',\n\t\t\t\t\t\t\tpayload: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\t// cleanup switch to prevent data leak on unmount\n\t\treturn function cleanup() {\n\t\t\tcancelRequest = true;\n\t\t};\n\t}, [url]);\n\n\treturn state;\n};\n\nexport default useFetch;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nfunction SearchItem({\n\tsuggestion,\n\tonClick,\n\tsearchTerm,\n\tisSelected,\n\tid,\n\tcontentTypes,\n}) {\n\tconst showType = suggestion.type && 1 < contentTypes.length;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight\n\t\t\t\t\t\t\ttext={decodeEntities(suggestion.title)}\n\t\t\t\t\t\t\thighlight={searchTerm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{'post_tag' === suggestion.type ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n}\n\nexport default SearchItem;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(\n\t({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\t\tconst ItemComponent =\n\t\t\tfalse !== ChildComponent\n\t\t\t\t? isOrderable\n\t\t\t\t\t? SortableElement(ChildComponent)\n\t\t\t\t\t: ChildComponent\n\t\t\t\t: isOrderable\n\t\t\t\t? SortableElement(PickedItem)\n\t\t\t\t: PickedItem;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{items.map((item, index) => {\n\t\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ItemComponent\n\t\t\t\t\t\t\tisOrderable={\n\t\t\t\t\t\t\t\tisOrderable && 1 < items.length ? isOrderable : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\t\t\tsortIndex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nexport default SortableList;\n","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nfunction ifMatchSetAttribute(\n\tneedle,\n\thaystack,\n\tattrKey,\n\tattrValue,\n\tsetAttributes,\n) {\n\tif (needle === haystack) {\n\t\tsetAttributes({ [attrKey]: attrValue });\n\t}\n}\n\nfunction randomId() {\n\t// Math.random should be unique because of its seeding algorithm.\n\t// Convert it to base 36 (numbers + letters), and grab the first 9 characters\n\t// after the decimal.\n\treturn `_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction getTermsByLetter(taxonomy, letter) {\n\treturn new Promise((resolve) => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then((terms) => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n}\n\nfunction getTerms(taxonomy, perPage = 25) {\n\treturn new Promise((resolve) => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then((terms) => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n}\n\nfunction getTermsAsOptions(\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy, perPage).then((data) => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tconst value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n}\n\nfunction getTermsAsTree(taxonomy) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy).then((data) => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map((i) => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter((e) => 0 === e.parent);\n\t\t\tparentTerms.forEach((e) => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter((f) => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach((cT) => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n}\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n\t{\n\t\tlabel: 'Weekly roundup of all new publications',\n\t\tvalue: '7c1390ba46',\n\t},\n\t{\n\t\tlabel: 'Quarterly update from the president',\n\t\tvalue: 'a33430a835',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Global attitudes & trends (twice a month)',\n\t\tvalue: '9203343b04',\n\t},\n\t{\n\t\tlabel: 'Internet, science & tech (monthly)',\n\t\tvalue: 'ea87b26abe',\n\t},\n\t{\n\t\tlabel: 'Daily briefing of media news',\n\t\tvalue: '1d2638430b',\n\t},\n\t{\n\t\tlabel: 'Race & ethnicity (monthly)',\n\t\tvalue: '0e7495c7b2',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Weekly newsletter',\n\t\tvalue: 'a7d4f3268f',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Daily religion headlines',\n\t\tvalue: '1a647764b2',\n\t},\n\t{\n\t\tlabel: 'Social & demographic trends (monthly)',\n\t\tvalue: '3836f62305',\n\t},\n\t{\n\t\tlabel: 'Methodological research (quarterly)',\n\t\tvalue: '6d1e80bbaf',\n\t},\n\t{\n\t\tlabel: 'U.S. politics & policy (monthly)',\n\t\tvalue: 'fa5fdbc701',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Immigration',\n\t\tvalue: 'xxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Census',\n\t\tvalue: 'xxxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - Muslims and Islam',\n\t\tvalue: 'xxxxx',\n\t},\n];\n\nexport { mailChimpInterests };\n","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","/* eslint-disable no-undef */\n/** External Dependencies */\nimport { randomId } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\n// eslint-disable-next-line no-prototype-builtins\nif (!window.hasOwnProperty('prcBlocks')) {\n\twindow.prcBlocks = {};\n}\nwindow.prcBlocks.carouselBlocks = {\n\tdebug: false,\n\twatched: [],\n\tactivated: [],\n\tthresholds: {\n\t\tcarousel: [0.7, 0.9],\n\t\tlastSlide: [0.9],\n\t\tfirstSlide: [0.9],\n\t},\n\ttoggleBodyLock: (enable = true) => {\n\t\tconst body = document.querySelector('body');\n\t\tif (true === enable) {\n\t\t\tbody.classList.add('carousel-locked');\n\t\t} else {\n\t\t\tbody.classList.remove('carousel-locked');\n\t\t}\n\t},\n};\n\n/**\n * Helper Functions:\n */\n\nfunction getScrollingDirection(changeEvent) {\n\t// if not in watched list then return  null.\n\tif (\n\t\t!window.prcBlocks.carouselBlocks.watched.some(\n\t\t\t(e) => e.id === changeEvent.target.id,\n\t\t)\n\t) {\n\t\treturn null;\n\t}\n\n\tconst currentY = changeEvent.boundingClientRect.y;\n\tconst { isIntersecting, intersectionRatio, target } = changeEvent;\n\tconst currentRatio = intersectionRatio;\n\tconst { id } = target;\n\n\tconst previousY = window.prcBlocks.carouselBlocks.watched.find(\n\t\t(e) => e.id === id,\n\t).y;\n\n\tconst previousRatio = window.prcBlocks.carouselBlocks.watched.find(\n\t\t(e) => e.id === id,\n\t).ratio;\n\n\tlet direction = null;\n\n\t// Scrolling down/up\n\tif (currentY < previousY) {\n\t\tif (currentRatio > previousRatio && isIntersecting) {\n\t\t\tdirection = 'scrolling-down-enter';\n\t\t} else {\n\t\t\tdirection = 'scrolling-down-leave';\n\t\t}\n\t} else if (currentY > previousY && isIntersecting) {\n\t\tif (currentRatio < previousRatio) {\n\t\t\tdirection = 'scrolling-up-leave';\n\t\t} else {\n\t\t\tdirection = 'scrolling-up-enter';\n\t\t}\n\t}\n\n\twindow.prcBlocks.carouselBlocks.watched.find((e) => e.id === id).y = currentY;\n\twindow.prcBlocks.carouselBlocks.watched.find((e) => e.id === id).ratio =\n\t\tcurrentRatio;\n\n\treturn direction;\n}\n\nfunction activateCarousel(id, elm) {\n\tif (id && !window.prcBlocks.carouselBlocks.activated.includes(id)) {\n\t\twindow.prcBlocks.carouselBlocks.activated.push(id);\n\n\t\t// If not on mobile or if the url doesnt have a hash then lock the body:\n\t\tif (!window.location.hash) {\n\t\t\twindow.prcBlocks.carouselBlocks.toggleBodyLock(true);\n\t\t}\n\n\t\t// Finally, allow the carousel to scroll it's contents:\n\t\telm.classList.add('active');\n\n\t\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\t\tconsole.warn('Activating carousel:', id);\n\t\t}\n\t}\n}\n\nfunction deactivateCarousel(carouselBlock, stage = 1) {\n\tif (!carouselBlock) {\n\t\tconsole.warn('No carousel block found to deactivate.');\n\t}\n\n\tconst id = carouselBlock.getAttribute('id');\n\n\tif (1 === stage) {\n\t\twindow.prcBlocks.carouselBlocks.toggleBodyLock(false);\n\t\tcarouselBlock.classList.remove('active');\n\t}\n\n\tif (2 === stage) {\n\t\twindow.prcBlocks.carouselBlocks.activated =\n\t\t\twindow.prcBlocks.carouselBlocks.activated.filter((ID) => ID !== id);\n\t}\n\n\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\tconsole.warn(`Deactivating Carousel (Stage: ${stage})`, id);\n\t}\n}\n\nfunction snapFirstCoverCarousel(timer = 800) {\n\tconst postContents = document.querySelector('.post-content');\n\tif (postContents.firstElementChild.classList.contains('wp-block-cover')) {\n\t\tconst coverBlock = postContents.firstElementChild;\n\t\tif (coverBlock) {\n\t\t\tconst carouselBlock = coverBlock.querySelector(\n\t\t\t\t'.wp-block-prc-block-carousel',\n\t\t\t);\n\t\t\tif (carouselBlock) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tactivateCarousel(carouselBlock.id, carouselBlock);\n\t\t\t\t}, timer);\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Initialize watch definition:\nfunction watch(id) {\n\t// If the element is not in the watched list, then add it.\n\tif (!window.prcBlocks.carouselBlocks.watched.some((e) => e.id === id)) {\n\t\twindow.prcBlocks.carouselBlocks.watched.push({\n\t\t\tid,\n\t\t\ty: 0, // When we add horizontal support we need to add X.\n\t\t\tratio: 0,\n\t\t});\n\t}\n}\n\n/**\n * Observer Callbacks:\n */\n\nfunction carouselObserverCallback(entry) {\n\tentry.forEach((change) => {\n\t\tconst { intersectionRatio, target } = change;\n\t\tconst { id } = target;\n\t\tconst scrollingDirection = getScrollingDirection(change);\n\n\t\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\t\tconsole.log(\n\t\t\t\t'observing change...',\n\t\t\t\tchange,\n\t\t\t\tchange.target.classList,\n\t\t\t\tintersectionRatio,\n\t\t\t\tscrollingDirection,\n\t\t\t\tid,\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\t0.8 >= intersectionRatio &&\n\t\t\t('scrolling-down-enter' === scrollingDirection ||\n\t\t\t\t'scrolling-up-enter' === scrollingDirection) &&\n\t\t\t!window.prcBlocks.carouselBlocks.activated.includes(id)\n\t\t) {\n\t\t\tconsole.log(\"Just entered the carousel's viewport.\");\n\t\t}\n\n\t\tif (\n\t\t\t0.8 <= intersectionRatio &&\n\t\t\t'scrolling-down-enter' === scrollingDirection &&\n\t\t\t!window.prcBlocks.carouselBlocks.activated.includes(id)\n\t\t) {\n\t\t\tactivateCarousel(id, change.target);\n\t\t}\n\n\t\tif (\n\t\t\t0.8 <= intersectionRatio &&\n\t\t\t'scrolling-down-leave' === scrollingDirection &&\n\t\t\twindow.prcBlocks.carouselBlocks.activated.includes(id)\n\t\t) {\n\t\t\tdeactivateCarousel(change.target, 2);\n\t\t}\n\t});\n}\n\nfunction lastCarouselSlideCallback(entry) {\n\tentry.forEach((change) => {\n\t\tconst { id } = change.target;\n\t\tconst carouselBlock = change.target.parentElement;\n\t\tconst scrollingDirection = getScrollingDirection(change);\n\n\t\tconst boundingClientRectHeight = change.boundingClientRect.height;\n\t\tconst intersectClientRectHeight = change.intersectionRect.height;\n\t\tconst intersectionRatio =\n\t\t\tintersectClientRectHeight / boundingClientRectHeight;\n\n\t\tif (\n\t\t\t'scrolling-down-enter' === scrollingDirection &&\n\t\t\t0.5 <= intersectionRatio\n\t\t) {\n\t\t\tdeactivateCarousel(carouselBlock, 1);\n\t\t\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`This is exiting the carousel 'scrolling-down-enter' -> deactivating carousel:`,\n\t\t\t\t\tid,\n\t\t\t\t\tchange,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif ('scrolling-up-enter' === scrollingDirection) {\n\t\t\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`This is re-entering the carousel 'scrolling-up-enter' -> reactivating carousel:`,\n\t\t\t\t\tid,\n\t\t\t\t\tchange,\n\t\t\t\t);\n\t\t\t}\n\t\t\tactivateCarousel(id, carouselBlock);\n\t\t}\n\t});\n}\n\nfunction firstCarouselSlideCallback(entry) {\n\tentry.forEach((change) => {\n\t\tconst carouselBlock = change.target.parentElement;\n\t\tconst scrollingDirection = getScrollingDirection(change);\n\t\tif ('scrolling-up-enter' === scrollingDirection) {\n\t\t\tdeactivateCarousel(carouselBlock, 1);\n\t\t\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"This is existing the carousel 'scrolling-up-enter' ->\",\n\t\t\t\t\tchange,\n\t\t\t\t\twindow.prcBlocks,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n}\n\n/**\n * Watches for active carousel and then snaps the cover block into view.\n * @param {*} mutationList\n * @param {*} observer\n */\nfunction useActiveCarouselEffect(mutationList) {\n\tmutationList.forEach((mutation) => {\n\t\tif (\n\t\t\t'attributes' === mutation.type &&\n\t\t\t'class' === mutation.attributeName &&\n\t\t\tmutation.target.classList.contains('active')\n\t\t) {\n\t\t\tconst coverBlock = mutation.target.parentElement.parentElement;\n\t\t\tif (window.prcBlocks.carouselBlocks.debug) {\n\t\t\t\tconsole.warn('Snapping to top of cover block...', coverBlock);\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tcoverBlock.scrollIntoView({\n\t\t\t\t\tbehavior: 'smooth',\n\t\t\t\t\tblock: 'start',\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t}\n\t});\n}\n\n/**\n * Initialize Carousels:\n */\n\ndomReady(() => {\n\tconst carousels = document.querySelectorAll('.wp-block-prc-block-carousel');\n\tconst carouselBlocks = Array.from(carousels);\n\tconst isMobile = carouselBlocks.some((e) => e.getAttribute('data-is-mobile'));\n\n\t/**\n\t * Initialize Observers:\n\t */\n\n\tconst carouselObserver = new IntersectionObserver(carouselObserverCallback, {\n\t\tthreshold: window.prcBlocks.carouselBlocks.thresholds.carousel,\n\t});\n\n\t// This may seem overkill but I found performance wise it was better to watch for the class change and then initiate a manual scroll.\n\tconst isCarouselActiveObserver = new MutationObserver(\n\t\tuseActiveCarouselEffect,\n\t);\n\n\t/**\n\t * Watches the last carousel slide and when in view depending on scroll position will unlock the carousel or re-lock it.\n\t */\n\tconst lastCarouselSlideObserver = new IntersectionObserver(\n\t\tlastCarouselSlideCallback,\n\t\t{\n\t\t\tthreshold: window.prcBlocks.carouselBlocks.thresholds.lastSlide,\n\t\t},\n\t);\n\n\t/**\n\t * Watches the first carousel slide (when scrolling back up) and will unlock the carousel.\n\t */\n\tconst firstCarouselSlideObserver = new IntersectionObserver(\n\t\tfirstCarouselSlideCallback,\n\t\t{\n\t\t\tthreshold: window.prcBlocks.carouselBlocks.thresholds.firstSlide,\n\t\t},\n\t);\n\n\tif (carousels.length) {\n\t\tcarousels.forEach((carousel) => {\n\t\t\tconst firstCarouselSlide = carousel.querySelector(\n\t\t\t\t':scope > .wp-block-group:first-child',\n\t\t\t);\n\t\t\tconst lastCarouselSlide = carousel.querySelector(\n\t\t\t\t':scope > .wp-block-group:last-child',\n\t\t\t);\n\n\t\t\t// Track elements:\n\t\t\tconst carouselId = randomId();\n\t\t\tcarousel.setAttribute('id', carouselId);\n\t\t\twatch(carouselId);\n\n\t\t\tconst firstCarouselSlideId = randomId();\n\t\t\tfirstCarouselSlide.setAttribute('id', firstCarouselSlideId);\n\t\t\twatch(firstCarouselSlideId);\n\n\t\t\tconst lastCarouseSlideId = randomId();\n\t\t\tlastCarouselSlide.setAttribute('id', lastCarouseSlideId);\n\t\t\twatch(lastCarouseSlideId);\n\n\t\t\t// Watch inner workings...\n\t\t\tcarouselObserver.observe(carousel);\n\t\t\tisCarouselActiveObserver.observe(carousel, {\n\t\t\t\tattributes: true,\n\t\t\t});\n\t\t\tlastCarouselSlideObserver.observe(lastCarouselSlide);\n\t\t\tfirstCarouselSlideObserver.observe(firstCarouselSlide);\n\t\t});\n\n\t\t// On mobile, if the first element is a cover block and that block contains a carousel then after a few seconds lets scroll that into view for the user.\n\t\tif (isMobile) {\n\t\t\tsnapFirstCoverCarousel(800);\n\t\t}\n\t}\n});\n","(function() { module.exports = window[\"wp\"][\"element\"]; }());"],"sourceRoot":""}