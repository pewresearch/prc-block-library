{"version":3,"sources":["webpack:///./node_modules/enquire.js/src/Util.js","webpack:///external [\"wp\",\"domReady\"]","webpack:///./node_modules/enquire.js/src/index.js","webpack:///./node_modules/enquire.js/src/MediaQueryDispatch.js","webpack:///./node_modules/enquire.js/src/MediaQuery.js","webpack:///./node_modules/enquire.js/src/QueryHandler.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///./src/table-of-contents/frontend.js"],"names":["module","exports","isFunction","target","isArray","Object","prototype","toString","apply","each","collection","fn","i","length","window","MediaQueryDispatch","MediaQuery","Util","matchMedia","Error","this","queries","browserIsIncapable","matches","constructor","register","q","options","shouldDegrade","isUnconditional","match","handler","addHandler","unregister","query","removeHandler","clear","QueryHandler","handlers","mql","self","listener","currentTarget","assess","addListener","constuctor","qh","push","on","h","equals","destroy","splice","removeListener","action","deferSetup","setup","initialised","off","unmatch","path","replace","concat","hasOwnProperty","prcBlocks","tableOfContents","breakpoints","elms","toggleTitle","groupElm","titleElm","querySelector","classList","toggle","toggleGroupBlock","domReady","document","querySelectorAll","forEach","block","elm","console","log","parentElement","addEventListener","contains","jQuery","sticky","clickHandler","threshold","getAttribute","enquire","setTimeout"],"mappings":"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","file":"frontend/table-of-contents-40c1c611.js","sourcesContent":["/**\n * Helper function for iterating over a collection\n *\n * @param collection\n * @param fn\n */function each(collection,fn){var i=0,length=collection.length,cont;for(i;i<length;i++){cont=fn(collection[i],i);if(cont===false){break;//allow early exit\n}}}/**\n * Helper function for determining whether target object is an array\n *\n * @param target the object under test\n * @return {Boolean} true if array, false otherwise\n */function isArray(target){return Object.prototype.toString.apply(target)==='[object Array]';}/**\n * Helper function for determining whether target object is a function\n *\n * @param target the object under test\n * @return {Boolean} true if function, false otherwise\n */function isFunction(target){return typeof target==='function';}module.exports={isFunction:isFunction,isArray:isArray,each:each};","(function() { module.exports = window[\"wp\"][\"domReady\"]; }());","var MediaQueryDispatch=require('./MediaQueryDispatch');module.exports=new MediaQueryDispatch();","var MediaQuery=require('./MediaQuery');var Util=require('./Util');var each=Util.each;var isFunction=Util.isFunction;var isArray=Util.isArray;/**\n * Allows for registration of query handlers.\n * Manages the query handler's state and is responsible for wiring up browser events\n *\n * @constructor\n */function MediaQueryDispatch(){if(!window.matchMedia){throw new Error('matchMedia not present, legacy browsers require a polyfill');}this.queries={};this.browserIsIncapable=!window.matchMedia('only all').matches;}MediaQueryDispatch.prototype={constructor:MediaQueryDispatch,/**\n     * Registers a handler for the given media query\n     *\n     * @param {string} q the media query\n     * @param {object || Array || Function} options either a single query handler object, a function, or an array of query handlers\n     * @param {function} options.match fired when query matched\n     * @param {function} [options.unmatch] fired when a query is no longer matched\n     * @param {function} [options.setup] fired when handler first triggered\n     * @param {boolean} [options.deferSetup=false] whether setup should be run immediately or deferred until query is first matched\n     * @param {boolean} [shouldDegrade=false] whether this particular media query should always run on incapable browsers\n     */register:function register(q,options,shouldDegrade){var queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable;if(!queries[q]){queries[q]=new MediaQuery(q,isUnconditional);}//normalise to object in an array\nif(isFunction(options)){options={match:options};}if(!isArray(options)){options=[options];}each(options,function(handler){if(isFunction(handler)){handler={match:handler};}queries[q].addHandler(handler);});return this;},/**\n     * unregisters a query and all it's handlers, or a specific handler for a query\n     *\n     * @param {string} q the media query to target\n     * @param {object || function} [handler] specific handler to unregister\n     */unregister:function unregister(q,handler){var query=this.queries[q];if(query){if(handler){query.removeHandler(handler);}else{query.clear();delete this.queries[q];}}return this;}};module.exports=MediaQueryDispatch;","var QueryHandler=require('./QueryHandler');var each=require('./Util').each;/**\n * Represents a single media query, manages it's state and registered handlers for this query\n *\n * @constructor\n * @param {string} query the media query string\n * @param {boolean} [isUnconditional=false] whether the media query should run regardless of whether the conditions are met. Primarily for helping older browsers deal with mobile-first design\n */function MediaQuery(query,isUnconditional){this.query=query;this.isUnconditional=isUnconditional;this.handlers=[];this.mql=window.matchMedia(query);var self=this;this.listener=function(mql){// Chrome passes an MediaQueryListEvent object, while other browsers pass MediaQueryList directly\nself.mql=mql.currentTarget||mql;self.assess();};this.mql.addListener(this.listener);}MediaQuery.prototype={constuctor:MediaQuery,/**\n     * add a handler for this query, triggering if already active\n     *\n     * @param {object} handler\n     * @param {function} handler.match callback for when query is activated\n     * @param {function} [handler.unmatch] callback for when query is deactivated\n     * @param {function} [handler.setup] callback for immediate execution when a query handler is registered\n     * @param {boolean} [handler.deferSetup=false] should the setup callback be deferred until the first time the handler is matched?\n     */addHandler:function addHandler(handler){var qh=new QueryHandler(handler);this.handlers.push(qh);this.matches()&&qh.on();},/**\n     * removes the given handler from the collection, and calls it's destroy methods\n     *\n     * @param {object || function} handler the handler to remove\n     */removeHandler:function removeHandler(handler){var handlers=this.handlers;each(handlers,function(h,i){if(h.equals(handler)){h.destroy();return!handlers.splice(i,1);//remove from array and exit each early\n}});},/**\n     * Determine whether the media query should be considered a match\n     *\n     * @return {Boolean} true if media query can be considered a match, false otherwise\n     */matches:function matches(){return this.mql.matches||this.isUnconditional;},/**\n     * Clears all handlers and unbinds events\n     */clear:function clear(){each(this.handlers,function(handler){handler.destroy();});this.mql.removeListener(this.listener);this.handlers.length=0;//clear array\n},/*\n        * Assesses the query, turning on all handlers if it matches, turning them off if it doesn't match\n        */assess:function assess(){var action=this.matches()?'on':'off';each(this.handlers,function(handler){handler[action]();});}};module.exports=MediaQuery;","/**\n * Delegate to handle a media query being matched and unmatched.\n *\n * @param {object} options\n * @param {function} options.match callback for when the media query is matched\n * @param {function} [options.unmatch] callback for when the media query is unmatched\n * @param {function} [options.setup] one-time callback triggered the first time a query is matched\n * @param {boolean} [options.deferSetup=false] should the setup callback be run immediately, rather than first time query is matched?\n * @constructor\n */function QueryHandler(options){this.options=options;!options.deferSetup&&this.setup();}QueryHandler.prototype={constructor:QueryHandler,/**\n     * coordinates setup of the handler\n     *\n     * @function\n     */setup:function setup(){if(this.options.setup){this.options.setup();}this.initialised=true;},/**\n     * coordinates setup and triggering of the handler\n     *\n     * @function\n     */on:function on(){!this.initialised&&this.setup();this.options.match&&this.options.match();},/**\n     * coordinates the unmatch event for the handler\n     *\n     * @function\n     */off:function off(){this.options.unmatch&&this.options.unmatch();},/**\n     * called when a handler is to be destroyed.\n     * delegates to the destroy or unmatch callbacks, depending on availability.\n     *\n     * @function\n     */destroy:function destroy(){this.options.destroy?this.options.destroy():this.off();},/**\n     * determines equality by reference.\n     * if object is supplied compare options, if function, compare match callback\n     *\n     * @function\n     * @param {object || function} [target] the target for comparison\n     */equals:function equals(target){return this.options===target||this.options.match===target;}};module.exports=QueryHandler;","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","/**\n * External Dependencies\n */\nimport enquire from 'enquire.js';\n\n/**\n * WordPress Dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\nimport './style.scss';\n\nif ( !window.hasOwnProperty('prcBlocks') ) {\n\twindow.prcBlocks = {};\n}\nwindow.prcBlocks.tableOfContents = {\n\tbreakpoints: [],\n\telms: {},\n};\n\nconst watchPostContentForChange = () => {\n\t// We will need to watch the post content for changes. and create intersection observers for each chapter block.\n\t// When we hit the chapter we should get the id and mark it as active...\n}\n\nconst toggleTitle = (groupElm, matched = false) => {\n\tif ( ! groupElm ) {\n\t\treturn;\n\t}\n\tconst titleElm = groupElm.querySelector('h3');\n\tif ( ! titleElm ) {\n\t\treturn;\n\t}\n\ttitleElm.classList.toggle('has-white-color');\n\ttitleElm.classList.toggle('has-text-color');\n\ttitleElm.classList.toggle('has-slate-background-color');\n\ttitleElm.classList.toggle('has-background');\n}\n\nconst toggleGroupBlock = (groupElm, matched = false) => {\n\tif ( ! groupElm ) {\n\t\treturn;\n\t}\n\tgroupElm.classList.toggle('is-style-card-alt');\n\tgroupElm.classList.toggle('mobile-toc');\n\tgroupElm.classList.toggle('ui');\n\tgroupElm.classList.toggle('sticky');\n}\n\nconst onMatch = (elm) => {\n\tsetTimeout(()=>{\n\t\tconst groupElm = elm.parentElement;\n\t\ttoggleGroupBlock(groupElm, true);\n\t\ttoggleTitle(groupElm, true);\n\t\tjQuery(groupElm).sticky();\n\t}, 100);\n}\n\nconst onReturn = (elm) => {\n\tsetTimeout(()=>{\n\t\tconst groupElm = elm.parentElement;\n\t\ttoggleGroupBlock(groupElm, false);\n\t\ttoggleTitle(groupElm, false);\n\t}, 100);\n}\n\nconst clickHandler = elm => {\n\tconsole.log(\"clickHandler\", elm);\n\tconst groupElm = elm.parentElement;\n\tconst titleElm = groupElm.querySelector('h3');\n\ttitleElm.addEventListener('click', () => {\n\t\tif (groupElm.classList.contains('mobile-toc')) {\n\t\t\tgroupElm.classList.toggle('is-open');\n\t\t\tjQuery(groupElm).sticky('refresh');\n\t\t}\n\t});\n}\n\ndomReady(() => {\n\tconst tableOfContents = document.querySelectorAll('.wp-block-prc-block-table-of-contents');\n\t// If there are any TOC blocks init them. (There should only be one, per page)\n\tif (tableOfContents.length) {\n\t\ttableOfContents.forEach(block => {\n\t\t\tclickHandler(block);\n\t\t\tconst threshold = block.getAttribute('data-mobile-threshold');\n\t\t\tenquire.register(`screen and (max-width: ${threshold}px)`, {\n\t\t\t\tmatch : () => {\n\t\t\t\t\tonMatch(block);\n\t\t\t\t},\n\t\t\t\tunmatch : () => {\n\t\t\t\t\tonReturn(block);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n});\n"],"sourceRoot":""}