/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window["wpackioprcBlocksLibrarymailchimp-formJsonp"]=window["wpackioprcBlocksLibrarymailchimp-formJsonp"]||[]).push([[3],{1:function(e,t){e.exports=React},101:function(e,t){e.exports=wp.components},151:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(58);function a(e,t){if(e){if("string"==typeof e)return Object(n.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(e,t):void 0}}},152:function(e,t){e.exports=wp.blocks},153:function(e,t){e.exports=wp.blockEditor},183:function(e,t,r){r(110),e.exports=r(307)},24:function(e,t){e.exports=wp.element},30:function(e,t){e.exports=wp.i18n},307:function(e,t,r){"use strict";r.r(t);var n=r(58);var a=r(151);var i,c=r(152),o=r(30),s=r(153),l=r(101),m=r(24),u=r(57),d=window.prcMailchimpForm.interests,p=function(e){var t=e.interest,r=e.setAttributes;return React.createElement(s.InspectorControls,null,React.createElement(l.PanelBody,{title:Object(o.__)("Mailchimp Form Options")},React.createElement("div",null,React.createElement(l.SelectControl,{label:"Choose Newsletter",value:t,options:d,onChange:function(e){r({interest:e})}}))))},f=function(e){var t=e.attributes,r=e.setAttributes,n=t.interest,a={display:!1,interest:n};return React.createElement(m.Fragment,null,React.createElement(p,{interest:n,setAttributes:r}),React.createElement(u.a,a))},b=function(e){var t=e.attributes.interest;return React.createElement("div",{className:"js-react-mailchimp-form","data-segment-id":t})},y=["prc-block/mailchimp-form",{title:Object(o.__)("Mailchimp Form"),icon:"feedback",category:"widgets",keywords:[Object(o.__)("prc"),Object(o.__)("mailchimp"),Object(o.__)("newsletter"),Object(o.__)("newsletter signup")],supports:{html:!1},attributes:{interest:{type:"string",default:""}},edit:f,save:b}];c.registerBlockType.apply(void 0,function(e){if(Array.isArray(e))return Object(n.a)(e)}(i=y)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(i)||Object(a.a)(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},49:function(e,t){e.exports=ReactDOM},57:function(e,t,r){"use strict";var n=r(170),a=r(81),i=r(32),c=Object(n.a)({error:!1,loading:!1,emailAddress:"",dimmerActive:!1,dimmerMessage:"BLANK DIMMER MESSAGE"})((function(e){var t=e.display,r=e.interest,n=e.error,c=e.loading,o=e.emailAddress,s=e.dimmerActive,l=e.dimmerMessage,m=e.setState;return React.createElement(a.a.Dimmable,{as:"div",id:"js-mailchimp-form",dimmed:s},React.createElement(i.a,{className:"mailchimp",error:n,onSubmit:function(e){if(e.preventDefault(),!0===t){var n=o;m({loading:!0}),setTimeout((function(){jQuery.ajax({url:"".concat(window.siteURL,"/wp-json/prc-api/v2/mailchimp/subscribe?").concat(jQuery.param({email:n,interests:r})),type:"POST"}).done((function(){console.info("Succesfully subscribed"),m({dimmerMessage:"You have succesfully subscribed to this newsletter."})})).fail((function(e){var t={error:!0,dimmerMessage:""};"add-member-error"===e.responseJSON.code?t.dimmerMessage="This email address is already subscribed to this newsletter.":t.dimmerMessage="Unfortunatley we could not subscribe you to this newsletter at this time, please try again later.",m(t)})).always((function(){m({loading:!1,emailAddress:"",dimmerActive:!0})}))}),2e3)}}},React.createElement(i.a.Field,null,React.createElement(i.a.Input,{placeholder:"Email address",type:"email","data-validate":"mc-email",required:!0,onChange:function(e){m({emailAddress:e.target.value})},value:o}),React.createElement(i.a.Button,{secondary:!0,loading:c,content:"SIGN UP"}))),React.createElement(a.a,{active:s,onClickOutside:function(){m({dimmerActive:!1})}},React.createElement("p",{className:"sans-serif"},l," (Click to close)")))}));t.a=c},58:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},77:function(e,t){e.exports=lodash}},[[183,0,1]]]);
//# sourceMappingURL=main-0b544dd8.js.map