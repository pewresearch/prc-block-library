{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.components\"","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///external \"wp.blocks\"","webpack:///external \"wp.blockEditor\"","webpack:///external \"wp.element\"","webpack:///external \"wp.i18n\"","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/mailchimp-form/edit.js","webpack:///./src/mailchimp-form/save.js","webpack:///./src/mailchimp-form/settings.js","webpack:///./src/mailchimp-form/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///external \"ReactDOM\"","webpack:///./src/mailchimp-form/component.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///external \"lodash\""],"names":["module","exports","React","wp","components","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","blocks","blockEditor","element","i18n","arr","interests","window","prcMailchimpForm","SidebarControls","interest","setAttributes","title","__","label","value","options","onChange","id","edit","props","attributes","formProps","display","save","className","data-segment-id","settings","icon","category","keywords","supports","html","type","default","registerBlockType","isArray","arrayLikeToArray","iter","Symbol","iterator","unsupportedIterableToArray","TypeError","ReactDOM","MailchimpForm","withState","error","loading","emailAddress","dimmerActive","dimmerMessage","setState","Dimmable","as","dimmed","onSubmit","e","preventDefault","email","setTimeout","jQuery","ajax","url","siteURL","param","done","console","info","fail","jqXHR","failState","responseJSON","code","always","Field","Input","placeholder","data-validate","required","target","Button","secondary","content","active","onClickOutside","_arrayLikeToArray","len","length","i","arr2","lodash"],"mappings":"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","file":"mailchimp-form/main-0b544dd8.js","sourcesContent":["module.exports = React;","module.exports = wp.components;","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","module.exports = wp.blocks;","module.exports = wp.blockEditor;","module.exports = wp.element;","module.exports = wp.i18n;","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import { __ } from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { PanelBody, SelectControl } from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\nimport MailchimpForm from './component';\n\nconst { interests } = window.prcMailchimpForm;\n\nconst SidebarControls = ({ interest, setAttributes }) => {\n    return (\n        <InspectorControls>\n            <PanelBody title={__('Mailchimp Form Options')}>\n                <div>\n                    <SelectControl\n                        label=\"Choose Newsletter\"\n                        value={interest}\n                        options={interests}\n                        onChange={id => {\n                            setAttributes({ interest: id });\n                        }}\n                    />\n                </div>\n            </PanelBody>\n        </InspectorControls>\n    );\n};\n\n\nconst edit = props => {\n    const { attributes, setAttributes } = props;\n    const { interest } = attributes;\n    const formProps = {\n        display: false,\n        interest,\n    };\n    return (\n        <Fragment>\n            <SidebarControls\n                interest={interest}\n                setAttributes={setAttributes}\n            />\n            <MailchimpForm {...formProps} />\n        </Fragment>\n    );\n};\n\nexport default edit;","const save = ({ attributes }) => {\n    const { interest } = attributes;\n    return (\n        <div\n            className=\"js-react-mailchimp-form\"\n            data-segment-id={interest}\n        />\n    );\n};\n\nexport default save;\n","import { __ } from '@wordpress/i18n';\nimport edit from './edit';\nimport save from './save';\n\nconst settings = [\n    'prc-block/mailchimp-form',\n    {\n        // Block name. Block names must be string that contains a namespace prefix. Example: my-plugin/my-custom-block.\n        title: __('Mailchimp Form'), // Block title.\n        icon: 'feedback', // Block icon from Dashicons → https://developer.wordpress.org/resource/dashicons/.\n        category: 'widgets', // Block category — Group blocks together based on common traits E.g. common, formatting, layout widgets, embed.\n        keywords: [\n            __('prc'),\n            __('mailchimp'),\n            __('newsletter'),\n            __('newsletter signup'),\n        ],\n        supports: {\n            html: false, // We do not want to give people the ability to edit the raw html of this block.\n        },\n        // Attributes are really react props.\n        attributes: {\n            interest: {\n                type: 'string',\n                default: '',\n            },\n        },\n        edit,\n        save,\n    },\n];\n\nexport default settings;\n","import { registerBlockType } from '@wordpress/blocks';\nimport settings from './settings';\n\nregisterBlockType(...settings);\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = ReactDOM;","import { withState } from '@wordpress/compose';\nimport { Form, Dimmer } from 'semantic-ui-react';\n\nconst defaultState = {\n    error: false,\n    loading: false,\n    emailAddress: '',\n    dimmerActive: false,\n    dimmerMessage: 'BLANK DIMMER MESSAGE',\n};\n\nconst MailchimpForm = withState(defaultState)(({\n        display,\n        interest,\n        error,\n        loading,\n        emailAddress,\n        dimmerActive,\n        dimmerMessage,\n        setState,\n    }) => {\n\n        const submitHandler = e => {\n            e.preventDefault();\n\n            if (true !== display) {\n                return; // Never allow running this from inside Gutenberg.\n            }\n\n            // Request (POST wp-json/prc-api/v2/mailchimp/subscribe)\n            const email = emailAddress;\n\n            setState({ loading: true });\n\n            setTimeout(() => {\n                jQuery\n                    .ajax({\n                        url: `${\n                            window.siteURL\n                        }/wp-json/prc-api/v2/mailchimp/subscribe?${jQuery.param(\n                            {\n                                email,\n                                interests: interest,\n                            })}`,\n                        type: 'POST',\n                    })\n                    .done(() => {\n                        console.info('Succesfully subscribed');\n                        setState({\n                            dimmerMessage:\n                                'You have succesfully subscribed to this newsletter.',\n                        });\n                    })\n                    .fail(jqXHR => {\n                        const failState = {\n                            error: true,\n                            dimmerMessage: '',\n                        };\n                        if ('add-member-error' === jqXHR.responseJSON.code) {\n                            failState.dimmerMessage =\n                                'This email address is already subscribed to this newsletter.';\n                        } else {\n                            failState.dimmerMessage =\n                                'Unfortunatley we could not subscribe you to this newsletter at this time, please try again later.';\n                        }\n                        setState(failState);\n                    })\n                    .always(() => {\n                        setState({\n                            loading: false,\n                            emailAddress: '',\n                            dimmerActive: true,\n                        });\n                    });\n            }, 2000);\n        };\n\n        return (\n            <Dimmer.Dimmable\n                as=\"div\"\n                id=\"js-mailchimp-form\"\n                dimmed={dimmerActive}\n            >\n                <Form\n                    className=\"mailchimp\"\n                    error={error}\n                    onSubmit={submitHandler}\n                >\n                    <Form.Field>\n                        <Form.Input\n                            placeholder=\"Email address\"\n                            type=\"email\"\n                            data-validate=\"mc-email\"\n                            required\n                            onChange={e => {\n                                setState({\n                                    emailAddress: e.target.value,\n                                });\n                            }}\n                            value={emailAddress}\n                        />\n                        <Form.Button\n                            secondary\n                            loading={loading}\n                            content=\"SIGN UP\"\n                        />\n                    </Form.Field>\n                </Form>\n\n                <Dimmer\n                    active={dimmerActive}\n                    onClickOutside={() => {\n                        setState({ dimmerActive: false });\n                    }}\n                >\n                    <p className=\"sans-serif\">\n                        {dimmerMessage} (Click to close)\n                    </p>\n                </Dimmer>\n            </Dimmer.Dimmable>\n        );\n    },\n);\n\nexport default MailchimpForm;\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","module.exports = lodash;"],"sourceRoot":""}