{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.blocks\"","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.url\"","webpack:///external \"wp.components\"","webpack:///external \"wp.blockEditor\"","webpack:///./src/_shared/get-terms/index.js","webpack:///./src/story-item/component.js","webpack:///./src/story-item/index.js","webpack:///external \"wp.i18n\"","webpack:///external \"ReactDOM\"","webpack:///external \"moment\"","webpack:///external \"wp.element\""],"names":["module","exports","React","wp","blocks","apiFetch","url","components","blockEditor","getTerms","taxonomy","returnTermID","console","log","collection","api","collections","undefined","Promise","resolve","reject","data","fetch","hide_empty","per_page","then","terms","index","length","obj","label","name","value","id","push","ALLOWED_MEDIA_TYPES","MetaEditor","props","state","open","editLabel","labelOptions","setState","bind","getLabelOptions","this","style","display","alignItems","options","onChange","setAttributes","marginBottom","className","date","Component","ImageEditor","mediaHandler","media","slot","image","imageID","imageSlot","onSelect","allowedTypes","render","img","controls","icon","title","isActive","isChartArt","onClick","imgClass","src","class","isPrimary","Image","edit","link","isMedium","classes","classNames","ui","medium","bordered","enabled","href","imgURL","width","addQueryArgs","w","appendImageWidth","Description","content","sansSerif","tagName","excerpt","placeholder","multiline","Content","Extra","extra","Kicker","labelSlug","replace","toLowerCase","moment","format","PostTitle","size","as","Header","currentSize","Item","Meta","map","active","headerSize","StoryItem","editMode","isStacked","isBordered","emphasis","stacked","enableHeader","enableExcerpt","enableExtra","EditSidebar","path","siteID","includes","getSiteIDFromURL","post","info","postID","__","disabled","setPostByURL","checked","enableProgramsTaxonomy","registerBlockType","category","keywords","styles","isDefault","supports","html","attributes","type","default","source","selector","horizontal","isSelected","save","i18n","ReactDOM","element"],"mappings":"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","file":"story-item/main-09762c5e.js","sourcesContent":["module.exports = React;","module.exports = wp.blocks;","module.exports = wp.apiFetch;","module.exports = wp.url;","module.exports = wp.components;","module.exports = wp.blockEditor;","// @TODO: convert froomo wp api to apifetch https://www.npmjs.com/package/@wordpress/api-fetch\n\nconst getTerms = (taxonomy, returnTermID) => {\n\tconsole.log('getting terms for '+taxonomy);\n\t// Set up taxonomy collection:\n\tconst collection = new wp.api.collections[taxonomy];\n\tif ( undefined === collection ) {\n\t\treturn false;\n\t}\n\treturn new Promise( (resolve, reject) => {\n\t\tlet data = [];\n\t\tcollection.fetch( {data: { hide_empty: false, per_page: 25 }} ).then( ( terms ) => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tlet obj = {\n\t\t\t\t\tlabel: terms[index].name,\n\t\t\t\t}\n\t\t\t\tif ( true === returnTermID ) {\n\t\t\t\t\tobj.value = terms[index].id;\n\t\t\t\t} else {\n\t\t\t\t\tobj.value = terms[index].name;\n\t\t\t\t}\n\t\t\t\tdata.push(obj);\n\t\t\t}\n\t\n\t\t\tresolve(data);\n\t\t} );\n\t} ) ;\n}\n\nexport default getTerms;","// WordPress Core\nimport { Component, Fragment, RawHTML } from '@wordpress/element';\nimport { RichText, BlockControls, MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { Button, SelectControl, TextControl, Popover, Toolbar } from '@wordpress/components';\n\n// Utilities\nimport { addQueryArgs } from '@wordpress/url';\nimport * as moment from 'moment';\nimport classNames from 'classnames/bind';\n\nimport getTerms from '../_shared/get-terms';\n\n// Elements\nimport { Item } from 'semantic-ui-react';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nconst formatDate = ( dateString ) => {\n\treturn moment(dateString).format(\"MMM D, YYYY\");\n}\n\nclass MetaEditor extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\teditLabel: false,\n\t\t\ttaxonomy: 'Formats',\n\t\t\tlabelOptions: [],\n\t\t}\n\t\tthis.setState = this.setState.bind(this);\n\t\tthis.getLabelOptions = this.getLabelOptions.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getLabelOptions();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif ( this.state.taxonomy !== this.props.taxonomy ) {\n\t\t\tthis.getLabelOptions();\n\t\t}\n\t}\n\n\tgetLabelOptions() {\n\t\tif ( undefined === wp.api.collections[this.props.taxonomy] ) {\n\t\t\t// Exit early, critical error that we don't want to stop the block from loading.\n\t\t\treturn;\n\t\t}\n\t\tconst setState = this.setState;\n\t\t\n\t\tgetTerms(this.props.taxonomy, false).then((data)=>{\n\t\t\tlet labelOptions = data;\n\t\t\tsetState({ taxonomy: this.props.taxonomy, labelOptions: labelOptions });\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div style={{display: 'flex', alignItems: 'center'}}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tvalue={ this.props.label }\n\t\t\t\t\t\t\toptions={this.state.labelOptions}\n\t\t\t\t\t\t\tonChange={ ( label ) => { this.props.setAttributes({label}) } }\n\t\t\t\t\t\t\tstyle={{marginBottom: '0px'}}\n\t\t\t\t\t\t\tclassName='story-label-select'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>&nbsp;|&nbsp;</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tvalue={ this.props.date }\n\t\t\t\t\t\t\tonChange={ ( date ) => {\n\t\t\t\t\t\t\t\tthis.props.setAttributes( { date: date } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nclass ImageEditor extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.mediaHandler = this.mediaHandler.bind(this);\n\t}\n\tmediaHandler(media) {\n\t\tconsole.log(media);\n\t\t//wp-image-358278\n\t\tif ( 'disabled' === this.props.slot ) {\n\t\t\tthis.props.setAttributes( { image: media.url, imageID: media.id, imageSlot: 'default' } )\n\t\t} else {\n\t\t\tthis.props.setAttributes( { image: media.url, imageID: media.id } )\n\t\t}\n\t}\n\trender() {\n\t\treturn(\n\t\t\t<MediaUploadCheck>\n\t\t\t<MediaUpload\n\t\t\t\tonSelect={this.mediaHandler}\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{ '' !== this.props.img && (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t{ ('default' !== this.props.slot && 'disabled' !== this.props.slot) && (\n\t\t\t\t\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t\t\t\t\t<Toolbar controls={[{\n\t\t\t\t\t\t\t\t\t\t\ticon: 'art',\n\t\t\t\t\t\t\t\t\t\t\ttitle: `Chart Art`,\n\t\t\t\t\t\t\t\t\t\t\tisActive: this.props.isChartArt,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => { this.props.setAttributes({ isChartArt: this.props.isChartArt ? false : true  }) },\n\t\t\t\t\t\t\t\t\t\t}]} />\n\t\t\t\t\t\t\t\t\t</BlockControls>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<div className={this.props.imgClass}>\n\t\t\t\t\t\t\t\t\t<img className={'wp-image-'+this.props.id} src={this.props.img} onClick={ open }/>\n\t\t\t\t\t\t\t\t\t<div class=\"sans-serif\"><i>Click image to open media library</i></div>\n\t\t\t\t\t\t\t\t\t<div class=\"sans-serif remove-image\" onClick={()=>{this.props.setAttributes({image:'', imageSlot: 'disabled'})}}>Or click here to <strong>REMOVE IMAGE</strong></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ '' === this.props.img && (\n\t\t\t\t\t\t\t<p><Button isPrimary onClick={ open }>Insert Image</Button></p>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t</MediaUploadCheck>\n\t\t)\n\t}\n}\n\nconst Image = function({ isChartArt, img, edit, link }) {\n\tlet isMedium = false;\n\tif ( 'left' === img.slot || 'right' === img.slot ) {\n\t\tisMedium = true;\n\t}\n\tlet classes = classNames({ ui: true, medium: isMedium, image: true, bordered: isChartArt });\n\tconst appendImageWidth = (imgURL, slot) => {\n\t\tif ( '' === imgURL ) {\n\t\t\treturn imgURL;\n\t\t}\n\t\t\n\t\tlet width = '564';\n\t\tif ( 'left' === slot || 'right' === slot ) {\n\t\t\twidth = '345';\n\t\t}\n\t\treturn addQueryArgs( imgURL, { w: width } );\n\t}\n\treturn(\n\t\t<Fragment>\n\t\t\t{ undefined !== img && (\n\t\t\t\t<Fragment>\n\t\t\t\t{ true === edit.enabled && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ImageEditor id={img.id} slot={img.slot} img={img.src} imgClass={classes} isChartArt={isChartArt} setAttributes={edit.setAttributes}/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t\t{ true !== edit.enabled && (\n\t\t\t\t\t<div className={classes}>\n\t\t\t\t\t\t<a href={link}>\n\t\t\t\t\t\t\t<img className={'wp-image-'+img.id} src={appendImageWidth(img.src, img.slot)}/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t</Fragment>\n\t)\t\n}\n\nconst Description = function({ content, enabled, edit, sansSerif }) {\n\tlet classes = classNames( 'description', {'sans-serif': sansSerif} );\n\treturn(\n\t\t<Fragment>\n\t\t\t{ true === enabled && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{true === edit.enabled && (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\ttagName=\"div\" // The tag here is the element output and editable in the admin\n\t\t\t\t\t\t\tvalue={ content } // Any existing content, either from the database or an attribute default\n\t\t\t\t\t\t\tonChange={ ( excerpt ) => edit.setAttributes( { excerpt } ) } // Store updated content as a block attribute\n\t\t\t\t\t\t\tplaceholder={ content } // Display this text before any content has been added by the user\n\t\t\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\t\t\tclassName={ classes }\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{true !== edit.enabled && ( \n\t\t\t\t\t\t<RichText.Content tagName=\"div\" value={ content } className={ classes }/>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t</Fragment>\n\t)\n}\n\nconst Extra = function({ enabled, content, edit }) {\n\tlet classes = classNames( 'extra' );\n\treturn(\n\t\t<Fragment>\n\t\t\t{true === edit.enabled && true === enabled && (\n\t\t\t\t<RichText\n\t\t\t\t\ttagName=\"ul\" // The tag here is the element output and editable in the admin\n\t\t\t\t\tvalue={ content } // Any existing content, either from the database or an attribute default\n\t\t\t\t\tonChange={ ( extra ) => edit.setAttributes( { extra } ) } // Store updated content as a block attribute\n\t\t\t\t\tplaceholder={ content } // Display this text before any content has been added by the user\n\t\t\t\t\tmultiline=\"li\"\n\t\t\t\t\tclassName={ classes }\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{true !== edit.enabled && true === enabled && ( \n\t\t\t\t<RichText.Content tagName=\"div\" value={ content } className={ classes }/>\n\t\t\t)}\n\t\t</Fragment>\n\t)\n}\n\nconst Kicker = ({ label, date }) => {\n\tconst labelSlug = label.replace(/\\s+/g, '-').toLowerCase();\n\tlet classes = classNames( labelSlug, 'label' );\n\treturn(\n\t\t<Fragment><span className={classes}>{label ? label : 'Report'}</span> | {formatDate(date)}</Fragment>\n\t)\n}\n\nconst PostTitle = ({ title, link, size, as = 'a' }) => {\n\treturn(\n\t\t<RichText.Content href={link} tagName={as} value={ title }/>\n\t)\n}\n\nconst Header = function({ title, label, date, link, enabled, size, taxonomy, edit }) {\n\tconst currentSize = size;\n\tconst createSizeControls = function( size ) {\n\t\tlet active = false;\n\t\tif ( size === currentSize ) {\n\t\t\tactive = true;\n\t\t}\n        return {\n            icon: 'editor-textcolor',\n            title: `Size: ${ size }`,\n            isActive: active,\n            onClick: () => { edit.setAttributes({headerSize: size}) },\n        };\n\t}\n\treturn(\n\t\t<Fragment>\n\t\t\t{ true === enabled && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<Item.Meta>\n\t\t\t\t\t\t{ true === edit.enabled && (\n\t\t\t\t\t\t\t<MetaEditor date={date} label={label} taxonomy={taxonomy} setAttributes={edit.setAttributes}/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ true !== edit.enabled && (\n\t\t\t\t\t\t\t<Kicker label={label} date={date}/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Item.Meta>\n\t\t\t\t\t<Item.Header className={size}>\n\t\t\t\t\t\t{ true === edit.enabled && (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t\t\t\t<Toolbar controls={ [ 'small', 'normal', 'large' ].map( createSizeControls ) } />\n\t\t\t\t\t\t\t\t</BlockControls>\n\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\ttagName=\"div\" // The tag here is the element output and editable in the admin\n\t\t\t\t\t\t\t\t\tvalue={ title } // Any existing content, either from the database or an attribute default\n\t\t\t\t\t\t\t\t\tonChange={ ( title ) => edit.setAttributes( { title } ) } // Store updated content as a block attribute\n\t\t\t\t\t\t\t\t\tplaceholder='Title' // Display this text before any content has been added by the user\n\t\t\t\t\t\t\t\t\tmultiline=\"br\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{ true !== edit.enabled && true === enabled && ( \n\t\t\t\t\t\t\t<PostTitle title={title} link={link} as='a' size={size}/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Item.Header>\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t</Fragment>\n\t)\n}\n\nclass StoryItem extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\tcomponentDidMount() {\n\t\tconsole.log(this.props);\n\t}\n\n\trender() {\n\t\tlet edit = {\n\t\t\tenabled: false,\n\t\t}\n\t\tif ( undefined !== this.props.editMode ) {\n\t\t\tedit.enabled = true;\n\t\t\tedit.setAttributes = this.props.setAttributes;\n\t\t}\n\n\t\tlet taxonomy = 'Formats';\n\t\tif ( true === this.props.options.taxonomy ) {\n\t\t\ttaxonomy = 'Programs';\n\t\t}\n\n\t\tlet isStacked = true;\n\t\tif ( 'left' === this.props.image.slot || 'right' === this.props.image.slot ) {\n\t\t\tisStacked = false;\n\t\t}\n\n\t\tlet isBordered = false;\n\t\tif ( true === this.props.options.emphasis ) {\n\t\t\tisBordered = true;\n\t\t}\n\n\t\tlet classes = classNames( this.props.classNames, 'story-item', {stacked: isStacked, bordered: isBordered} );\n\t\t\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t<Item as=\"article\" className={classes}>\n\t\t\t\t\t{ ('top' === this.props.image.slot || 'left' === this.props.image.slot) && (\n\t\t\t\t\t\t<Image \n\t\t\t\t\t\timg={{\n\t\t\t\t\t\t\tsrc: this.props.image.src, \n\t\t\t\t\t\t\tid: this.props.image.id,\n\t\t\t\t\t\t\tslot: this.props.image.slot\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tlink={this.props.link}\n\t\t\t\t\t\tedit={edit}\n\t\t\t\t\t\tisChartArt={this.props.image.isChartArt}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<Item.Content>\n\t\t\t\t\t\t<Header \n\t\t\t\t\t\ttitle={this.props.title}\n\t\t\t\t\t\tdate={this.props.date}\n\t\t\t\t\t\tlabel={this.props.label}\n\t\t\t\t\t\tlink={this.props.link}\n\t\t\t\t\t\tedit={edit}\n\t\t\t\t\t\tenabled={this.props.options.enableHeader}\n\t\t\t\t\t\tsize={this.props.options.headerSize}\n\t\t\t\t\t\ttaxonomy={taxonomy}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ 'default' === this.props.image.slot && (\n\t\t\t\t\t\t\t<Image \n\t\t\t\t\t\t\timg={{\n\t\t\t\t\t\t\t\tsrc: this.props.image.src, \n\t\t\t\t\t\t\t\tid: this.props.image.id,\n\t\t\t\t\t\t\t\tslot: this.props.image.slot\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tlink={this.props.link}\n\t\t\t\t\t\t\tedit={edit}\n\t\t\t\t\t\t\tisChartArt={this.props.image.isChartArt}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<Description content={this.props.excerpt} enabled={this.props.options.enableExcerpt} edit={edit} sansSerif={ ! this.props.options.enableHeader}/>\n\t\t\t\t\t\t<Extra enabled={this.props.options.enableExtra} content={this.props.extra} edit={edit}/>\n\t\t\t\t\t</Item.Content>\n\t\t\t\t\t{ ('bottom' === this.props.image.slot || 'right' === this.props.image.slot) && (\n\t\t\t\t\t\t<Image \n\t\t\t\t\t\timg={{\n\t\t\t\t\t\t\tsrc: this.props.image.src, \n\t\t\t\t\t\t\tid: this.props.image.id,\n\t\t\t\t\t\t\tslot: this.props.image.slot\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tlink={this.props.link}\n\t\t\t\t\t\tedit={edit}\n\t\t\t\t\t\tisChartArt={this.props.image.isChartArt}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Item>\n\t\t\t</Fragment>\n\t\t)\n\t}\t\n}\n\nexport default StoryItem;","/**\n * BLOCK: prc-blocks\n *\n * Registering a basic block with Gutenberg.\n * Simple block, renders and saves the same content without any interactivity.\n */\n\n//  Import CSS.\nimport './editor.scss';\n// Our front end styles are included in our theme\n\nimport { __ } from \"@wordpress/i18n\";\nimport { registerBlockType } from '@wordpress/blocks';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { Button, PanelBody, ToggleControl, TextControl } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport * as moment from 'moment';\nimport StoryItem from './component';\n\nconst todaysDate = () => {\n\treturn moment().format(\"MMM D, YYYY\");\n}\n\nclass EditSidebar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\turl: '',\n\t\t}\n\t\tthis.setPostByURL = this.setPostByURL.bind(this);\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.setState({url: this.props.link});\n\t}\n\n\t/**\n\t * Loading Posts\n\t */\n\tsetPostByURL = () => {\n\t\tconsole.log('GetPostByURL: ' + this.props.link);\n\t\tconsole.log(this.props);\n\t\tconst setAttributes = this.props.setAttributes;\n\t\tlet url = this.props.link;\n\n\t\tconst getSiteIDFromURL = (url) => {\n\t\t\tlet siteID = 1;\n\t\t\tif ( url.includes('https://www.pewresearch.org/global/' ) || url.includes('https://www.pewglobal.org/' ) ) {\n\t\t\t\tsiteID = 2;\n\t\t\t} else if ( url.includes('https://www.pewresearch.org/hispanic/' ) || url.includes('https://www.pewhispanic.org/' ) ) {\n\t\t\t\tsiteID = 5;\n\t\t\t} else if ( url.includes('https://www.pewresearch.org/science/' ) ) {\n\t\t\t\tsiteID = 16;\n\t\t\t} else if ( url.includes('https://www.pewresearch.org/methods/' ) ) {\n\t\t\t\tsiteID = 10;\n\t\t\t} else if ( url.includes('https://www.people-press.org/' ) ) {\n\t\t\t\tsiteID = 4;\n\t\t\t} else if ( url.includes('https://www.pewforum.org/' ) ) {\n\t\t\t\tsiteID = 7;\n\t\t\t} else if ( url.includes('https://www.journalism.org/' ) ) {\n\t\t\t\tsiteID = 8;\n\t\t\t} else if ( url.includes('https://www.pewsocialtrends.org/' ) ) {\n\t\t\t\tsiteID = 3;\n\t\t\t} else if ( url.includes('https://www.pewresearch.org/internet/' || url.includes('https://www.pewinternet.org/' ) ) ) {\n\t\t\t\tsiteID = 9;\n\t\t\t} else if ( url.includes('https://www.pewresearch.org/' ) ) {\n\t\t\t\tsiteID = 1;\n\t\t\t}\n\t\t\treturn siteID;\n\t\t}\n\n\t\tif ( undefined === setAttributes || undefined === url ) {\n\t\t\treturn;\n\t\t}\n\n\t\tapiFetch( { path: '/prc-api/v2/blocks/helpers/get-post-by-url/?url=' + url + '&siteID=' + getSiteIDFromURL(url) } ).then( post => {\n\t\t\tconsole.info('Post Returned:');\n\t\t\tconsole.log(post);\n\t\t\tif ( false !== post ) {\n\t\t\t\tsetAttributes({\n\t\t\t\t\ttitle: post.title,\n\t\t\t\t\timage: post.image,\n\t\t\t\t\texcerpt: post.excerpt,\n\t\t\t\t\tlink: post.link,\n\t\t\t\t\tlabel: post.label,\n\t\t\t\t\tdate: post.date,\n\t\t\t\t\tpostID: post.id,\n\t\t\t\t\textra: '', // We want to clear extra when pulling a new post\n\t\t\t\t});\n\t\t\t}\n        } );\n\t} \n\n\trender = () => {\n\t\tconst setAttributes = this.props.setAttributes;\n\t\treturn(\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Story Item Options' ) }>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"Post ID\"\n\t\t\t\t\t\t\tvalue={ this.props.postID }\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='story-item-link'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel=\"Link\"\n\t\t\t\t\t\t\t\tvalue={ this.props.link }\n\t\t\t\t\t\t\t\tonChange={ ( link ) => setAttributes({link}) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button onClick={this.setPostByURL} isPrimary>Fetch</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p><strong>Content Options:</strong></p>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ this.props.options.enableHeader ? 'Header Enabled' : 'Header Disabled' }\n\t\t\t\t\t\t\tchecked={ this.props.options.enableHeader }\n\t\t\t\t\t\t\tonChange={ (value) => { setAttributes({ enableHeader: value }); } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ this.props.options.enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled' }\n\t\t\t\t\t\t\tchecked={ this.props.options.enableExcerpt }\n\t\t\t\t\t\t\tonChange={ (value) => { setAttributes({ enableExcerpt: value }); } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ this.props.options.enableExtra ? 'Extras Enabled' : 'Extras Disabled' }\n\t\t\t\t\t\t\tchecked={ this.props.options.enableExtra }\n\t\t\t\t\t\t\tonChange={ (value) => { setAttributes({ enableExtra: value }); } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ this.props.options.emphasis ? 'Emphasis Enabled' : 'Emphasis Disabled' }\n\t\t\t\t\t\t\tchecked={ this.props.options.emphasis }\n\t\t\t\t\t\t\tonChange={ (value) => { setAttributes({ emphasis: value }); } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ this.props.options.taxonomy ? 'Programs' : 'Formats' }\n\t\t\t\t\t\t\tchecked={ this.props.options.taxonomy }\n\t\t\t\t\t\t\tonChange={ (value) => { \n\t\t\t\t\t\t\t\tsetAttributes({ enableProgramsTaxonomy: value });\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t)\n\t}\n}\n\n/**\n * Register: aa Gutenberg Block.\n *\n * Registers a new block provided a unique name and an object defining its\n * behavior. Once registered, the block is made editor as an option to any\n * editor interface where blocks are implemented.\n *\n * @link https://wordpress.org/gutenberg/handbook/block-api/\n * @param  {string}   name     Block name.\n * @param  {Object}   settings Block settings.\n * @return {?WPBlock}          The block, if it has been successfully\n *                             registered; otherwise `undefined`.\n */\nregisterBlockType( 'prc-block/story-item', {\n\t// Block name. Block names must be string that contains a namespace prefix. Example: my-plugin/my-custom-block.\n\ttitle: __( 'Story Item' ), // Block title.\n\ticon: 'format-aside', // Block icon from Dashicons → https://developer.wordpress.org/resource/dashicons/.\n\tcategory: 'widgets', // Block category — Group blocks together based on common traits E.g. common, formatting, layout widgets, embed.\n\tkeywords: [\n\t\t__( 'prc' ),\n\t\t__( 'story' ),\n\t\t__( 'post' ),\n\t\t__( 'story item' ),\n\t],\n\tstyles: [\n\t\t{\n\t\t\tname: 'disabled',\n\t\t\tlabel: 'Image Disabled',\n\t\t},\n\t\t{\n\t\t\tname: 'default',\n\t\t\tlabel: 'Default Image Alignment',\n\t\t\tisDefault: true,\n\t\t},\n\t\t{\n\t\t\tname: 'top',\n\t\t\tlabel: 'Image Aligned Top',\n\t\t},\n\t\t{\n\t\t\tname: 'bottom',\n\t\t\tlabel: 'Image Aligned Bottom',\n\t\t},\n\t\t{\n\t\t\tname: 'left',\n\t\t\tlabel: 'Image Aligned Left',\n\t\t},\n\t\t{\n\t\t\tname: 'right',\n\t\t\tlabel: 'Image Aligned Right',\n\t\t}\n\t],\n\tsupports: {\n\t\thtml: false, // We do not want to give people the ability to edit the raw html of this block.\n\t},\n\t// Attributes are really react props. \n\tattributes: {\n\t\t// Item Content\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'Title',\n\t\t},\n\t\timage: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\timageID: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\texcerpt: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tmultiline: 'p',\n\t\t\tselector: '.description',\n\t\t\tdefault: '<p>Excerpt</p>',\n\t\t},\n\t\tlink: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlabel: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'Report',\n\t\t},\n\t\tdate: {\n\t\t\ttype: 'string',\n\t\t\tdefault: todaysDate(),\n\t\t},\n\t\textra: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tmultiline: 'li',\n\t\t\tselector: '.extra',\n\t\t\tdefault: '',\n\t\t},\n\t\t// Post Meta Data:\n\t\tpostID: {\n\t\t\ttype: 'integer',\n\t\t},\n\t\t// Item Options\n\t\temphasis: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t\tisChartArt: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t\timageSlot: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'disabled',\n\t\t},\n\t\thorizontal: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t\tstacked: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tenableHeader: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tenableExcerpt: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tenableExtra: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t\tenableProgramsTaxonomy: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t\theaderSize: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'normal',\n\t\t},\n\t},\n\t// example: {\n\t// \tattributes: {\n\t// \t\tlink: 'http://www.pewresearch.org',\n\t// \t\ttitle: 'Anim fugiat incididunt consectetur sunt duis',\n\t// \t\texcerpt: 'Ex tempor ut occaecat consequat irure veniam commodo aliqua cupidatat pariatur ad aliquip et. In fugiat Lorem occaecat ex nostrud non incididunt cillum occaecat ex deserunt sit enim ipsum. Sunt elit consectetur quis culpa labore qui pariatur laboris minim incididunt consequat amet.',\n\t// \t\textra: '<a href=\"#\"><strong>Est in cupidatat:</strong> nulla occaecat dolor sint culpa do anim.</a>',\n\t// \t\timageSlot: 'top',\n\t// \t\timage: 'https://images.unsplash.com/photo-1555293442-818eb55f7ca0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=3500&q=80',\n\t// \t},\n\t// },\n\t\n\n\t/**\n\t * The edit function describes the structure of your block in the context of the editor.\n\t * This represents what the editor will render when the block is used.\n\t *\n\t * The \"edit\" property must be a valid function.\n\t *\n\t * @link https://wordpress.org/gutenberg/handbook/block-api/block-edit-save/\n\t *\n\t * @param {Object} props Props.\n\t * @returns {Mixed} JSX Component.\n\t */\n\tedit: ( props ) => {\n\t\t// Set Image Slot by Style\n\t\tif ( 'is-style-default' === props.attributes.className ) {\n\t\t\tprops.setAttributes({ imageSlot: 'default' });\n\t\t} else if ( 'is-style-top' === props.attributes.className ) {\n\t\t\tprops.setAttributes({ imageSlot: 'top' });\n\t\t} else if ( 'is-style-bottom' === props.attributes.className ) {\n\t\t\tprops.setAttributes({ imageSlot: 'bottom' });\n\t\t} else if ( 'is-style-left' === props.attributes.className ) {\n\t\t\tprops.setAttributes({ imageSlot: 'left' });\n\t\t} else if ( 'is-style-right' === props.attributes.className ) {\n\t\t\tprops.setAttributes({ imageSlot: 'right' });\n\t\t} else if ( 'is-style-disabled' === props.attributes.className ) {\n\t\t\tprops.setAttributes({ imageSlot: 'disabled' });\n\t\t}\n\t\t\n\t\tlet data = {\n\t\t\tpostID: props.attributes.postID,\n\t\t\ttitle: props.attributes.title,\n\t\t\tlink: props.attributes.link,\n\t\t\tdate: props.attributes.date,\n\t\t\tlabel: props.attributes.label,\n\t\t\texcerpt: props.attributes.excerpt,\n\t\t\textra: props.attributes.extra,\n\t\t\timage: {\n\t\t\t\tid: props.attributes.imageID,\n\t\t\t\tslot: props.attributes.imageSlot,\n\t\t\t\tsrc: props.attributes.image,\n\t\t\t\tisChartArt: props.attributes.isChartArt,\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\temphasis: props.attributes.emphasis,\n\t\t\t\tenableHeader: props.attributes.enableHeader,\n\t\t\t\tenableExcerpt: props.attributes.enableExcerpt,\n\t\t\t\tenableExtra: props.attributes.enableExtra,\n\t\t\t\theaderSize: props.attributes.headerSize,\n\t\t\t\ttaxonomy: props.attributes.enableProgramsTaxonomy,\n\t\t\t},\n\t\t\tclassNames: props.attributes.className,\n\t\t};\n\t\t\n\t\tif ( true === props.isSelected ) {\n\t\t\tdata.editMode = true;\n\t\t\tdata.setAttributes = props.setAttributes;\n\t\t}\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t{ true === props.isSelected && (\n\t\t\t\t\t<EditSidebar {...data}/>\n\t\t\t\t) }\n\t\t\t\t<StoryItem {...data}/>\n\t\t\t</Fragment>\n\t\t)\n\t},\n\n\t// Seth Learning Note: SO save literally only transforms on post_content filter. You won't see this result inside the gutenberg editor, you will however see it if you look at code view.\n\t/**\n\t * The save function defines the way in which the different attributes should be combined\n\t * into the final markup, which is then serialized by Gutenberg into post_content.\n\t *\n\t * The \"save\" property must be specified and must be a valid function.\n\t *\n\t * @link https://wordpress.org/gutenberg/handbook/block-api/block-edit-save/\n\t *\n\t * @param {Object} props Props.\n\t * @returns {Mixed} JSX Frontend HTML.\n\t */\n\tsave: ( props ) => {\n\t\tconst data = {\n\t\t\tpostID: props.attributes.postID,\n\t\t\ttitle: props.attributes.title,\n\t\t\tlink: props.attributes.link,\n\t\t\tdate: props.attributes.date,\n\t\t\tlabel: props.attributes.label,\n\t\t\texcerpt: props.attributes.excerpt,\n\t\t\textra: props.attributes.extra,\n\t\t\timage: {\n\t\t\t\tid: props.attributes.imageID,\n\t\t\t\tslot: props.attributes.imageSlot,\n\t\t\t\tsrc: props.attributes.image,\n\t\t\t\tisChartArt: props.attributes.isChartArt,\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\temphasis: props.attributes.emphasis,\n\t\t\t\tenableHeader: props.attributes.enableHeader,\n\t\t\t\tenableExcerpt: props.attributes.enableExcerpt,\n\t\t\t\tenableExtra: props.attributes.enableExtra,\n\t\t\t\theaderSize: props.attributes.headerSize,\n\t\t\t},\n\t\t\tclassNames: props.attributes.className,\n\t\t};\n\t\treturn (\n\t\t\t<StoryItem {...data}/>\n\t\t);\n\t},\n} );\n","module.exports = wp.i18n;","module.exports = ReactDOM;","module.exports = moment;","module.exports = wp.element;"],"sourceRoot":""}