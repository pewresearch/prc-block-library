{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.element\"","webpack:///external \"wp.blockEditor\"","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./src/story-item/wp-object-select/index.js","webpack:///./src/story-item/edit/controls.js","webpack:///./src/story-item/edit/image.js","webpack:///./src/story-item/edit/description.js","webpack:///./src/story-item/edit/extra.js","webpack:///./src/_shared/helpers/get-terms/index.js","webpack:///./node_modules/@wordpress/keycodes/build-module/platform.js","webpack:///./node_modules/@wordpress/keycodes/build-module/index.js","webpack:///./src/story-item/edit/header.js","webpack:///./src/story-item/edit/index.js","webpack:///./src/story-item/save.js","webpack:///./src/story-item/transforms.js","webpack:///./src/story-item/index.js","webpack:///external \"wp.components\"","webpack:///external \"moment\"","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.data\"","webpack:///external \"wp.blocks\"","webpack:///external \"wp.i18n\"","webpack:///external \"wp.url\"","webpack:///external \"ReactDOM\"","webpack:///external \"lodash\""],"names":["module","exports","React","wp","element","blockEditor","_slicedToArray","arr","i","Array","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","WPObjectSearchField","setPostAsAttributes","post","setAttributes","storyItem","title","hasOwnProperty","rendered","excerpt","link","label","date","postID","id","extra","art","image","setPostByURL","url","undefined","apiFetch","path","method","data","then","console","log","catch","error","setPostByStubID","postId","refresh","URLControl","useState","isLinkOpen","setIsLinkOpen","aria-expanded","aria-haspopup","__","icon","onClick","showTooltip","position","onClose","type","subType","onChange","obj","p","raw","className","showInitialSuggestions","suggestionsQuery","subtype","settings","POPOVER_PROPS","isAlternate","ToolbarDropdown","selected","options","iconPaths","prefixLabel","iconWidth","iconHeight","iconViewBox","Icon","isPressed","width","height","viewBox","xmlns","d","popoverProps","renderToggle","onToggle","isOpen","renderContent","isCollapsed","controls","map","size","index","isActive","sprintf","ToolbarControls","attributes","imageSize","imageSlot","headerSize","isChartArt","newLevel","1","2","3","includes","newSize","A1","A2","A3","A4","XL","Controls","context","rootClientId","isRefreshing","enableHeader","enableExcerpt","enableExcerptBelow","enableExtra","enableBreakingNews","enableEmphasis","enableProgramsTaxonomy","enableMeta","inLoop","useEffect","isEmpty","isInteger","isSecondary","isBusy","style","marginBottom","checked","window","prcBreakingNews","alert","ALLOWED_MEDIA_TYPES","Edit","img","setArt","rawUrl","chartArt","onSelect","media","allowedTypes","render","openFn","open","placeholder","Img","slot","isXL","isA1","isA2","isA3","isA4","classNames","ui","bordered","Description","content","sansSerif","enabled","classes","tagName","multiline","Content","Extra","breakingNews","href","getTerms","taxonomy","perPage","Promise","resolve","terms","slug","replace","toLowerCase","name","parent","isAppleOS","_window","arguments","platform","navigator","indexOf","ALT","CTRL","COMMAND","SHIFT","modifiers","primary","_isApple","primaryShift","primaryAlt","secondary","access","ctrl","alt","ctrlShift","shift","shiftAlt","displayShortcutList","modifier","character","concat","join","_replacementKeyMap","isApple","replacementKeyMap","modifierKeys","reduce","accumulator","key","replacementKey","capitalizedCharacter","shortcutList","_replacementKeyMap2","getEventModifiers","event","filter","getModifiers","mods","eventMods","KickerEditor","labelOptions","setLabelOptions","termValue","sortByLabel","Object","keys","forEach","termObj","sort","a","b","getTermsAsOptions","display","alignItems","l","Header","altHeaderWeight","large","medium","small","light","Item","Meta","t","allowedFormats","edit","isSelected","clientId","useSelect","select","getBlockRootClientId","dataHandler","enableAltHeaderWeight","stacked","ifMatchSetAttribute","setImageSlotByClassName","TopAndLeftSlot","DefaultSlot","BottomAndRightSlot","JSON","parse","as","save","transforms","from","isMatch","node","nodeName","test","textContent","transform","createBlock","trim","to","blocks","metadata","description","keywords","example","moment","format","variations","isDefault","registerBlockType","components","i18n","ReactDOM","lodash"],"mappings":"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","file":"story-item/main-8fd8fbee.js","sourcesContent":["module.exports = React;","module.exports = wp.element;","module.exports = wp.blockEditor;","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/**\n * WordPress Dependencies\n */\n\nconst WPObjectSearchField = () => {\n    return(\n        <div>\n            <h1>Input Field Here</h1>\n        </div>\n    );\n}\n\nexport {\n    WPObjectSearchField\n}","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { isEmpty, isInteger } from 'lodash';\nimport { dispatch } from '@wordpress/data';\nimport {\n    InspectorControls,\n    BlockControls,\n    __experimentalLinkControl as LinkControl,\n} from '@wordpress/block-editor';\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport {\n    Button,\n    PanelBody,\n    ToggleControl,\n    Dropdown,\n    Toolbar,\n    ToolbarButton,\n    ToolbarGroup,\n    Path,\n    SVG,\n    Popover,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { isURL, prependHTTP } from '@wordpress/url';\n\nimport { WPObjectSearchField } from '../wp-object-select';\n\nconst setPostAsAttributes = (post, setAttributes) => {\n    const storyItem = {\n        title: post.title.hasOwnProperty('rendered')\n            ? post.title.rendered\n            : post.title,\n        excerpt: post.excerpt.hasOwnProperty('rendered')\n            ? post.excerpt.rendered\n            : post.excerpt,\n        link: post.link,\n        label: post.hasOwnProperty('label') ? post.label : 'Report',\n        date: post.date,\n        postID: post.id,\n        extra: '', // We want to clear extra when pulling a new post\n    };\n    // If the post has art then let the image editor mounting effect handle setting it.\n    // Get art...\n    if (!post.art) {\n        storyItem.image = post.image;\n    }\n    setAttributes(storyItem);\n};\n\n/**\n * Set's post attributes by url if a post is not found then failover and set just the link as what was passed through.\n * @param {string} url\n * @param {func} setAttributes\n */\nconst setPostByURL = (url, setAttributes) => {\n    if (undefined === url || undefined === setAttributes) {\n        return;\n    }\n    apiFetch({\n        path: '/prc-api/v2/blocks/helpers/get-post-by-url',\n        method: 'POST',\n        data: { url },\n    })\n        .then(post => {\n            console.log('setPostbyURL', post);\n            if (false !== post) {\n                setPostAsAttributes(post, setAttributes);\n            }\n        })\n        .catch(err => {\n            console.error(err);\n            setAttributes({ link: url });\n        });\n};\n\nconst setPostByStubID = (postId, setAttributes, refresh) => {\n    if (undefined === postId || undefined === setAttributes) {\n        return;\n    }\n    if (undefined !== refresh) {\n        refresh(true);\n    }\n    apiFetch({\n        path: `/wp/v2/stub/${postId}`,\n        method: 'GET',\n    })\n        .then(post => {\n            console.log('setPostByStubID', postId, post);\n            if (false !== post) {\n                // We should lookup the meta link here real quick and apply that to the post.link object before posting attributes.\n                setPostAsAttributes(post, setAttributes);\n            }\n        })\n        .catch(err => console.error(err))\n        .then(() => {\n            if (undefined !== refresh) {\n                refresh(false);\n            }\n        });\n};\n\nconst URLControl = ({ url, setAttributes }) => {\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n    return (\n        <Fragment>\n            <ToolbarButton\n                aria-expanded={isLinkOpen}\n                aria-haspopup=\"true\"\n                label={__('Set Link')}\n                icon=\"admin-links\"\n                onClick={() => setIsLinkOpen(!isLinkOpen)}\n                showTooltip\n            />\n            {true === isLinkOpen && (\n                <Popover\n                    position=\"bottom center\"\n                    onClose={() => setIsLinkOpen(false)}\n                >\n                    <WPObjectSearchField\n                    value={{\n                        id: 1234,\n                        type: 'post',\n                        subType: 'stub',\n                    }}\n                    type='post'\n                    subType='stub'\n                    onChange={obj => {\n                        if (!obj.hasOwnProperty('type') && !obj.hasOwnProperty('raw') ) {\n                            return;\n                        }\n                        // If this returns an  ID then its a stub id so we can go ahead and get info from wp api.\n                        if (obj.hasOwnProperty('subType') && 'post' === obj.type && 'stub' === obj.subType) {\n                            setPostByStubID(p.id, setAttributes);\n                        } else if('url' === obj.type && obj.raw.hasOwnProperty('url') ) {\n                            setPostByURL(obj.raw.url, setAttributes);\n                        }\n                    }}\n                    />\n                    <LinkControl\n                        className=\"wp-block-navigation-link__inline-link-input\"\n                        value={{ url }}\n                        showInitialSuggestions\n                        suggestionsQuery={{ type: 'post', subtype: 'stub' }}\n                        onChange={p => {\n                            // If for whatever reason what is returned does not have the url property then bail out.\n                            if (!p.hasOwnProperty('url')) {\n                                return;\n                            }\n                            // If this returns an  ID then its a stub id so we can go ahead and get info from wp api.\n                            if (p.hasOwnProperty('id')) {\n                                setPostByStubID(p.id, setAttributes);\n                            } else {\n                                setPostByURL(p.url, setAttributes);\n                            }\n                        }}\n                        settings={[]}\n                    />\n                </Popover>\n            )}\n        </Fragment>\n    );\n};\n\nconst POPOVER_PROPS = {\n    className: 'block-library-heading-level-dropdown',\n    isAlternate: true,\n};\n\nconst ToolbarDropdown = ({\n    selected,\n    options,\n    iconPaths,\n    label,\n    prefixLabel = '%s',\n    onChange,\n    iconWidth = '24',\n    iconHeight = '24',\n    iconViewBox = '0 0 24 24',\n}) => {\n    const Icon = ({ selected, isPressed = false }) => {\n        if (!iconPaths.hasOwnProperty(selected)) {\n            return null;\n        }\n\n        return (\n            <SVG\n                width={iconWidth}\n                height={iconHeight}\n                viewBox={iconViewBox}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                isPressed={isPressed}\n            >\n                <Path d={iconPaths[selected]} />\n            </SVG>\n        );\n    };\n\n    return (\n        <Dropdown\n            popoverProps={POPOVER_PROPS}\n            renderToggle={({ onToggle, isOpen }) => {\n                return (\n                    <ToolbarButton\n                        aria-expanded={isOpen}\n                        aria-haspopup=\"true\"\n                        icon={<Icon selected={selected} />}\n                        label={label}\n                        onClick={onToggle}\n                        showTooltip\n                    />\n                );\n            }}\n            renderContent={() => (\n                <Toolbar\n                    className=\"block-library-heading-level-toolbar\"\n                    label={label}\n                >\n                    <ToolbarGroup\n                        isCollapsed={false}\n                        controls={options.map((size, index) => {\n                            const isActive = selected === size;\n                            return {\n                                icon: (\n                                    <Icon\n                                        selected={size}\n                                        isPressed={isActive}\n                                    />\n                                ),\n                                title: sprintf(\n                                    // translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n                                    __(prefixLabel),\n                                    size,\n                                ),\n                                isActive,\n                                onClick() {\n                                    onChange(size);\n                                },\n                            };\n                        })}\n                    />\n                </Toolbar>\n            )}\n        />\n    );\n};\n\nconst ToolbarControls = ({ attributes, setAttributes }) => {\n    const { link, imageSize, imageSlot, headerSize, isChartArt } = attributes;\n    return (\n        <BlockControls>\n            <ToolbarGroup>\n                <URLControl url={link} setAttributes={setAttributes} />\n            </ToolbarGroup>\n            <ToolbarGroup>\n                <ToolbarDropdown\n                    label={__('Change Heading Level')}\n                    selected={headerSize}\n                    options={[1, 2, 3]}\n                    onChange={newLevel =>\n                        setAttributes({ headerSize: newLevel })\n                    }\n                    iconPaths={{\n                        1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n                        2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n                        3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n                    }}\n                    iconHeight=\"24\"\n                    iconWidth=\"24\"\n                    prefixLabel=\"Heading %d\"\n                    iconViewBox=\"0 0 20 20\"\n                />\n            </ToolbarGroup>\n            {'disabled' !== imageSlot && (\n                <ToolbarGroup>\n                    {!['legacy-260', 'legacy-260-173'].includes(imageSize) && (\n                        <ToolbarDropdown\n                            label={__('Change Image Size')}\n                            selected={imageSize}\n                            options={['A1', 'A2', 'A3', 'A4', 'XL']}\n                            onChange={newSize =>\n                                setAttributes({ imageSize: newSize })\n                            }\n                            iconPaths={{\n                                A1:\n                                    'M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z',\n                                A2:\n                                    'M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z',\n                                A3:\n                                    'M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z',\n                                A4:\n                                    'M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z',\n                                XL:\n                                    'M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z',\n                            }}\n                            prefixLabel=\"%s Image Size\"\n                        />\n                    )}\n                    <ToolbarButton\n                        icon=\"chart-pie\"\n                        isPressed={isChartArt}\n                        label={__('Enable Chart Art')}\n                        onClick={() => {\n                            setAttributes({\n                                isChartArt: !isChartArt,\n                            });\n                        }}\n                    />\n                </ToolbarGroup>\n            )}\n        </BlockControls>\n    );\n};\n\nconst Controls = ({ attributes, setAttributes, context, rootClientId }) => {\n    const [isRefreshing, refresh] = useState(false);\n    const {\n        postID,\n        link,\n        imageSlot,\n        enableHeader,\n        enableExcerpt,\n        enableExcerptBelow,\n        enableExtra,\n        enableBreakingNews,\n        enableEmphasis,\n        enableProgramsTaxonomy,\n        enableMeta,\n        inLoop,\n    } = attributes;\n\n    const label = __('Story Item options');\n\n    useEffect(() => {\n        // On mount load the latest post details from the url.\n        if (!isEmpty(link) && undefined === postID) {\n            setPostByURL(link, setAttributes);\n        }\n    }, [link]);\n\n    return (\n        <Fragment>\n            <ToolbarControls {...{ attributes, setAttributes }} />\n            <InspectorControls>\n                <PanelBody title={label}>\n                    {isInteger(postID) && (\n                        <Button\n                            isSecondary\n                            isBusy={isRefreshing}\n                            onClick={() =>\n                                setPostByStubID(postID, setAttributes, refresh)\n                            }\n                            style={{ marginBottom: '1em' }}\n                        >\n                            Refresh Post\n                        </Button>\n                    )}\n                     <ToggleControl\n                        label={\n                            enableMeta\n                                ? 'Meta Enabled'\n                                : 'Meta Disabled'\n                        }\n                        checked={enableMeta}\n                        onChange={() => {\n                            setAttributes({ enableMeta: !enableMeta });\n                        }}\n                    />\n                    <ToggleControl\n                        label={\n                            enableHeader ? 'Header Enabled' : 'Header Disabled'\n                        }\n                        checked={enableHeader}\n                        onChange={() => {\n                            setAttributes({ enableHeader: !enableHeader });\n                        }}\n                    />\n                    <ToggleControl\n                        label={\n                            enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled'\n                        }\n                        checked={enableExcerpt}\n                        onChange={() => {\n                            setAttributes({ enableExcerpt: !enableExcerpt });\n                        }}\n                    />\n                    {true === enableExcerpt &&\n                        ('right' === imageSlot || 'left' === imageSlot) && (\n                            <ToggleControl\n                                label={\n                                    enableExcerptBelow\n                                        ? 'Excerpt Will Appear Below'\n                                        : 'Excerpt Will Appear Normally'\n                                }\n                                checked={enableExcerptBelow}\n                                onChange={() => {\n                                    setAttributes({\n                                        enableExcerptBelow: !enableExcerptBelow,\n                                    });\n                                }}\n                            />\n                        )}\n                    <ToggleControl\n                        label={\n                            enableExtra ? 'Extras Enabled' : 'Extras Disabled'\n                        }\n                        checked={enableExtra}\n                        onChange={() => {\n                            setAttributes({ enableExtra: !enableExtra });\n                        }}\n                    />\n                    <ToggleControl\n                        label={\n                            enableBreakingNews\n                                ? 'Breaking News Enabled'\n                                : 'Breaking News Disabled'\n                        }\n                        checked={enableBreakingNews}\n                        onChange={() => {\n                            if (false !== window.prcBreakingNews) {\n                                setAttributes({\n                                    enableBreakingNews: !enableBreakingNews,\n                                });\n                            } else {\n                                // eslint-disable-next-line no-alert\n                                alert(\n                                    'There are no currently active, authorized, breaking news events. The breaking news toggle will be set back to false.',\n                                );\n                                setAttributes({\n                                    enableBreakingNews: false,\n                                });\n                            }\n                        }}\n                    />\n                    <ToggleControl\n                        label={enableProgramsTaxonomy ? 'Programs' : 'Formats'}\n                        checked={enableProgramsTaxonomy}\n                        onChange={() => {\n                            setAttributes({\n                                enableProgramsTaxonomy: !enableProgramsTaxonomy,\n                            });\n                        }}\n                    />\n                    <ToggleControl\n                        label={\n                            enableEmphasis\n                                ? 'Emphasis Enabled'\n                                : 'Emphasis Disabled'\n                        }\n                        checked={enableEmphasis}\n                        onChange={() => {\n                            setAttributes({ enableEmphasis: !enableEmphasis });\n                        }}\n                    />\n                    <ToggleControl\n                        label={\n                            inLoop\n                                ? 'Pub Listing Style On Mobile'\n                                : 'Normal Styling On Mobile'\n                        }\n                        checked={inLoop}\n                        onChange={() => {\n                            setAttributes({ inLoop: !inLoop });\n                        }}\n                    />\n                </PanelBody>\n            </InspectorControls>\n        </Fragment>\n    );\n};\n\nexport default Controls;\n","import { Fragment, useState, useEffect } from '@wordpress/element';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport classNames from 'classnames/bind';\n\nimport { ImageDisplay } from '@pewresearch/app-components';\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n\nconst Edit = ({ img, size, postId, setAttributes }) => {\n    const [art, setArt] = useState(false);\n\n    // When the postId changes go fetch new art for this post and store it in state and also store the correct image url in attributes.\n    useEffect(() => {\n        if (0 !== postId && false !== setAttributes) {\n            apiFetch({\n                path: `/prc-api/v2/get-art/?postId=${postId}`,\n            }).then(data => {\n                if (false !== data) {\n                    setArt(data);\n                    setAttributes({ image: data[size].rawUrl });\n                } else {\n                    // If no art on any subsequent art fetches set to false\n                    setArt(false);\n                }\n            });\n        }\n    }, [postId]);\n\n    /**\n     * If the art or size changes then go check the art object and set the approrpiate image and chart art given the arts options.\n     */\n    useEffect(() => {\n        if (\n            false !== art &&\n            undefined !== art[size] &&\n            false !== setAttributes\n        ) {\n            setAttributes({\n                image: art[size].rawUrl,\n                isChartArt: art[size].chartArt,\n            });\n        }\n    }, [art, size]);\n\n    return (\n        <MediaUploadCheck>\n            <MediaUpload\n                onSelect={media => setAttributes({ image: media.url })}\n                allowedTypes={ALLOWED_MEDIA_TYPES}\n                render={({ open }) => {\n                    let openFn = open;\n                    if (undefined !== postId && ! ['legacy-260', 'legacy-260-173'].includes(size)) {\n                        openFn = () => alert(\"You are unable to edit this image as it is locked to a post. To edit, visit this post and edit its origin post. \" + postId);\n                    }\n                    return(\n                        <Fragment>\n                            {\n                                // If we have an actual image here then display it otherwise give us the placeholder\n                            }\n                            {undefined !== img && 0 !== img.length && (\n                                <ImageDisplay\n                                    img={img}\n                                    size={size}\n                                    link=\"\"\n                                    onClick={openFn}\n                                />\n                            )}\n                            {(undefined === img || 0 === img.length) && (\n                                <ImageDisplay\n                                    img={img}\n                                    size={size}\n                                    link=\"\"\n                                    onClick={openFn}\n                                    placeholder\n                                />\n                            )}\n                        </Fragment>\n                    )\n                }}\n            />\n        </MediaUploadCheck>\n    );\n};\n\n/**\n * Props:\n * img: string url of image to display\n * size: string of image/slot size (A1,A2,A3,A4)\n * link: string of url to go to when image is clicked on front end\n * slot: if set to null then no image size chooser will be display\n * chartArt: if set to null then no chart art button will appear\n * setAttributes: defaults to false unless otherwise provided a function to pass data back up to a HOC state.\n *\n * <Img id={} img={} size={} slot={} chartArt={} postId={} setAttributes={}/>\n */\n\nconst Img = ({ img, size, slot, chartArt, postId, setAttributes }) => {\n    console.log('<Img>', img);\n\n    const classes = () => {\n        let isXL = false;\n        let isA1 = false;\n        let isA2 = false;\n        let isA3 = false;\n        let isA4 = false;\n        if (false !== slot) {\n            if ('XL' === size) {\n                isXL = true;\n            } else if ('A1' === size) {\n                isA1 = true;\n            } else if ('A2' === size) {\n                isA2 = true;\n            } else if ('A3' === size) {\n                isA3 = true;\n            } else if ('A4' === size) {\n                isA4 = true;\n            }\n        }\n\n        return classNames({\n            ui: true,\n            XL: isXL,\n            A1: isA1,\n            A2: isA2,\n            A3: isA3,\n            A4: isA4,\n            image: true,\n            bordered: chartArt,\n        });\n    };\n\n    return (\n        <div className={classes()}>\n            <Edit\n                img={img}\n                size={size}\n                postId={postId}\n                setAttributes={setAttributes}\n            />\n        </div>\n    );\n};\n\nexport default Img;\n","// WordPress Core\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\nimport classNames from 'classnames/bind';\n\nconst Description = ({ content, sansSerif, enabled, setAttributes }) => {\n    if (true !== enabled) {\n        return <Fragment />;\n    }\n\n    const classes = classNames('description', { 'sans-serif': sansSerif });\n\n    return (\n        <Fragment>\n            {false !== setAttributes && (\n                <RichText\n                    tagName=\"div\"\n                    value={content}\n                    onChange={excerpt => setAttributes({ excerpt })}\n                    placeholder={content}\n                    multiline=\"p\"\n                    className={classes}\n                />\n            )}\n            {false === setAttributes && (\n                <RichText.Content\n                    tagName=\"div\"\n                    value={content}\n                    className={classes}\n                />\n            )}\n        </Fragment>\n    );\n};\n\nexport default Description;\n","// WordPress Core\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst Extra = ({ content, breakingNews, enabled, setAttributes }) => {\n    return (\n        <Fragment>\n            {false !== setAttributes && true === enabled && (\n                <RichText\n                    tagName=\"ul\"\n                    value={content}\n                    onChange={extra => setAttributes({ extra })}\n                    placeholder={content}\n                    multiline=\"li\"\n                    className=\"extra\"\n                />\n            )}\n            {false === setAttributes && true === enabled && (\n                <RichText.Content\n                    tagName=\"ul\"\n                    value={content}\n                    className=\"extra\"\n                />\n            )}\n            {true === breakingNews && false !== window.prcBreakingNews && (\n                <ul className=\"extra-breaking-news\">\n                    <li>\n                        <a\n                            href={window.prcBreakingNews.url}\n                            className=\"kicker-breaking-news\"\n                        >\n                            {window.prcBreakingNews.label}\n                        </a>\n                    </li>\n                </ul>\n            )}\n        </Fragment>\n    );\n};\n\nexport default Extra;\n","// @TODO: convert froomo wp api to apifetch https://www.npmjs.com/package/@wordpress/api-fetch\nimport apiFetch from '@wordpress/api-fetch';\n\nconst getTermsByLetter = (taxonomy, letter) => {\n    return new Promise(resolve => {\n        apiFetch({\n            path: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n        }).then(terms => {\n            resolve(terms);\n        });\n    });\n};\n\nconst getTerms = (taxonomy, perPage = 25) => {\n    return new Promise(resolve => {\n        const data = {};\n        apiFetch({\n            path: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n        }).then(terms => {\n            for (let index = 0; index < terms.length; index++) {\n                const slug = terms[index].slug.replace(\n                    `${taxonomy.toLowerCase()}_`,\n                    '',\n                );\n                data[terms[index].id] = {\n                    id: terms[index].id,\n                    name: terms[index].name,\n                    parent: terms[index].parent,\n                    slug,\n                };\n            }\n            resolve(data);\n        });\n    });\n};\n\nconst getTermsAsOptions = (\n    taxonomy,\n    perPage,\n    termValue = 'name',\n    sortByLabel = true,\n) => {\n    return new Promise(resolve => {\n        getTerms(taxonomy, perPage).then(data => {\n            const labelOptions = [];\n\n            Object.keys(data).forEach(key => {\n                const termObj = data[key];\n\n                let value = termObj.name;\n                if ('termid' === termValue) {\n                    value = termObj.id;\n                }\n\n                let label = termObj.name;\n                if (undefined !== termObj.parent && 0 !== termObj.parent) {\n                    label = ` -- ${label}`;\n                }\n\n                labelOptions.push({\n                    value,\n                    label,\n                });\n            });\n\n            if (false !== sortByLabel) {\n                labelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n            }\n\n            resolve(labelOptions);\n        });\n    });\n};\n\nconst getTermsAsTree = taxonomy => {\n    return new Promise(resolve => {\n        getTerms(taxonomy).then(data => {\n            const treeData = [];\n            // Convert data from object of objects to array of objects.\n            const convertedData = Object.keys(data).map(i => data[i]);\n            // Filter out the parent terms first\n            const parentTerms = convertedData.filter(e => 0 === e.parent);\n            parentTerms.forEach(e => {\n                // Get children by filtering for terms with parent matching this id in loop.\n                const c = convertedData.filter(f => f.parent === e.id);\n                const children = [];\n                // Construct children array.\n                c.forEach(cT => {\n                    children.push({\n                        name: cT.name,\n                        id: cT.id,\n                    });\n                });\n                // Finally, push the fully structured parent -> child relationship to the tree data.\n                treeData.push({\n                    name: e.name,\n                    id: e.id,\n                    children,\n                });\n            });\n\n            resolve(treeData);\n        });\n    });\n};\n\nexport default getTerms;\nexport { getTerms, getTermsByLetter, getTermsAsOptions, getTermsAsTree };\n","/**\n * External dependencies\n */import{includes}from'lodash';/**\n * Return true if platform is MacOS.\n *\n * @param {Window?} _window window object by default; used for DI testing.\n *\n * @return {boolean} True if MacOS; false otherwise.\n */export function isAppleOS(){var _window=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!_window){if(typeof window==='undefined'){return false;}_window=window;}var platform=_window.navigator.platform;return platform.indexOf('Mac')!==-1||includes(['iPad','iPhone'],platform);}","import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";/**\n * Note: The order of the modifier keys in many of the [foo]Shortcut()\n * functions in this file are intentional and should not be changed. They're\n * designed to fit with the standard menu keyboard shortcuts shown in the\n * user's platform.\n *\n * For example, on MacOS menu shortcuts will place Shift before Command, but\n * on Windows Control will usually come first. So don't provide your own\n * shortcut combos directly to keyboardShortcut().\n */ /**\n * External dependencies\n */import{get,mapValues,includes,capitalize,xor}from'lodash';/**\n * WordPress dependencies\n */import{__}from'@wordpress/i18n';/**\n * Internal dependencies\n */import{isAppleOS}from'./platform';/** @typedef {typeof ALT | CTRL | COMMAND | SHIFT } WPModifierPart */ /** @typedef {'primary' | 'primaryShift' | 'primaryAlt' | 'secondary' | 'access' | 'ctrl' | 'alt' | 'ctrlShift' | 'shift' | 'shiftAlt'} WPKeycodeModifier */ /**\n * An object of handler functions for each of the possible modifier\n * combinations. A handler will return a value for a given key.\n *\n * @template T\n *\n * @typedef {Record<WPKeycodeModifier, T>} WPModifierHandler\n */ /**\n * @template T\n *\n * @typedef {(character: string, isApple?: () => boolean) => T} WPKeyHandler\n */ /** @typedef {(event: KeyboardEvent, character: string, isApple?: () => boolean) => boolean} WPEventKeyHandler */ /**\n * Keycode for BACKSPACE key.\n */export var BACKSPACE=8;/**\n * Keycode for TAB key.\n */export var TAB=9;/**\n * Keycode for ENTER key.\n */export var ENTER=13;/**\n * Keycode for ESCAPE key.\n */export var ESCAPE=27;/**\n * Keycode for SPACE key.\n */export var SPACE=32;/**\n * Keycode for LEFT key.\n */export var LEFT=37;/**\n * Keycode for UP key.\n */export var UP=38;/**\n * Keycode for RIGHT key.\n */export var RIGHT=39;/**\n * Keycode for DOWN key.\n */export var DOWN=40;/**\n * Keycode for DELETE key.\n */export var DELETE=46;/**\n * Keycode for F10 key.\n */export var F10=121;/**\n * Keycode for ALT key.\n */export var ALT='alt';/**\n * Keycode for CTRL key.\n */export var CTRL='ctrl';/**\n * Keycode for COMMAND/META key.\n */export var COMMAND='meta';/**\n * Keycode for SHIFT key.\n */export var SHIFT='shift';/**\n * Keycode for ZERO key.\n */export var ZERO=48;/**\n * Object that contains functions that return the available modifier\n * depending on platform.\n *\n * @type {WPModifierHandler< ( isApple: () => boolean ) => WPModifierPart[]>}\n */export var modifiers={primary:function primary(_isApple){return _isApple()?[COMMAND]:[CTRL];},primaryShift:function primaryShift(_isApple){return _isApple()?[SHIFT,COMMAND]:[CTRL,SHIFT];},primaryAlt:function primaryAlt(_isApple){return _isApple()?[ALT,COMMAND]:[CTRL,ALT];},secondary:function secondary(_isApple){return _isApple()?[SHIFT,ALT,COMMAND]:[CTRL,SHIFT,ALT];},access:function access(_isApple){return _isApple()?[CTRL,ALT]:[SHIFT,ALT];},ctrl:function ctrl(){return[CTRL];},alt:function alt(){return[ALT];},ctrlShift:function ctrlShift(){return[CTRL,SHIFT];},shift:function shift(){return[SHIFT];},shiftAlt:function shiftAlt(){return[SHIFT,ALT];}};/**\n * An object that contains functions to get raw shortcuts.\n *\n * These are intended for user with the KeyboardShortcuts.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * rawShortcut.primary( 'm' )\n * // \"meta+m\"\"\n * ```\n *\n * @type {WPModifierHandler<WPKeyHandler<string>>} Keyed map of functions to raw\n *                                                 shortcuts.\n */export var rawShortcut=mapValues(modifiers,function(modifier){return(/** @type {WPKeyHandler<string>} */function(character){var _isApple=arguments.length>1&&arguments[1]!==undefined?arguments[1]:isAppleOS;return[].concat(_toConsumableArray(modifier(_isApple)),[character.toLowerCase()]).join('+');});});/**\n * Return an array of the parts of a keyboard shortcut chord for display.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * displayShortcutList.primary( 'm' );\n * // [ \"\", \"M\" ]\n * ```\n *\n * @type {WPModifierHandler<WPKeyHandler<string[]>>} Keyed map of functions to\n *                                                   shortcut sequences.\n */export var displayShortcutList=mapValues(modifiers,function(modifier){return(/** @type {WPKeyHandler<string[]>} */function(character){var _replacementKeyMap;var _isApple=arguments.length>1&&arguments[1]!==undefined?arguments[1]:isAppleOS;var isApple=_isApple();var replacementKeyMap=(_replacementKeyMap={},_defineProperty(_replacementKeyMap,ALT,isApple?'':'Alt'),_defineProperty(_replacementKeyMap,CTRL,isApple?'':'Ctrl'),_defineProperty(_replacementKeyMap,COMMAND,''),_defineProperty(_replacementKeyMap,SHIFT,isApple?'':'Shift'),_replacementKeyMap);var modifierKeys=modifier(_isApple).reduce(function(accumulator,key){var replacementKey=get(replacementKeyMap,key,key);// If on the Mac, adhere to platform convention and don't show plus between keys.\nif(isApple){return[].concat(_toConsumableArray(accumulator),[replacementKey]);}return[].concat(_toConsumableArray(accumulator),[replacementKey,'+']);},/** @type {string[]} */[]);var capitalizedCharacter=capitalize(character);return[].concat(_toConsumableArray(modifierKeys),[capitalizedCharacter]);});});/**\n * An object that contains functions to display shortcuts.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * displayShortcut.primary( 'm' );\n * // \"M\"\n * ```\n *\n * @type {WPModifierHandler<WPKeyHandler<string>>} Keyed map of functions to\n *                                                 display shortcuts.\n */export var displayShortcut=mapValues(displayShortcutList,function(shortcutList){return(/** @type {WPKeyHandler<string>} */function(character){var _isApple=arguments.length>1&&arguments[1]!==undefined?arguments[1]:isAppleOS;return shortcutList(character,_isApple).join('');});});/**\n * An object that contains functions to return an aria label for a keyboard\n * shortcut.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * shortcutAriaLabel.primary( '.' );\n * // \"Command + Period\"\n * ```\n *\n * @type {WPModifierHandler<WPKeyHandler<string>>} Keyed map of functions to\n *                                                 shortcut ARIA labels.\n */export var shortcutAriaLabel=mapValues(modifiers,function(modifier){return(/** @type {WPKeyHandler<string>} */function(character){var _replacementKeyMap2;var _isApple=arguments.length>1&&arguments[1]!==undefined?arguments[1]:isAppleOS;var isApple=_isApple();var replacementKeyMap=(_replacementKeyMap2={},_defineProperty(_replacementKeyMap2,SHIFT,'Shift'),_defineProperty(_replacementKeyMap2,COMMAND,isApple?'Command':'Control'),_defineProperty(_replacementKeyMap2,CTRL,'Control'),_defineProperty(_replacementKeyMap2,ALT,isApple?'Option':'Alt'),_defineProperty(_replacementKeyMap2,',',__('Comma')),_defineProperty(_replacementKeyMap2,'.',__('Period')),_defineProperty(_replacementKeyMap2,'`',__('Backtick')),_replacementKeyMap2);return[].concat(_toConsumableArray(modifier(_isApple)),[character]).map(function(key){return capitalize(get(replacementKeyMap,key,key));}).join(isApple?' ':' + ');});});/**\n * From a given KeyboardEvent, returns an array of active modifier constants for\n * the event.\n *\n * @param {KeyboardEvent} event Keyboard event.\n *\n * @return {Array<WPModifierPart>} Active modifier constants.\n */function getEventModifiers(event){return(/** @type {WPModifierPart[]} */[ALT,CTRL,COMMAND,SHIFT].filter(function(key){return event[/** @type {'altKey' | 'ctrlKey' | 'metaKey' | 'shiftKey'} */\"\".concat(key,\"Key\")];}));}/**\n * An object that contains functions to check if a keyboard event matches a\n * predefined shortcut combination.\n *\n * @example\n * ```js\n * // Assuming an event for M key press:\n * isKeyboardEvent.primary( event, 'm' );\n * // true\n * ```\n *\n * @type {WPModifierHandler<WPEventKeyHandler>} Keyed map of functions\n *                                                       to match events.\n */export var isKeyboardEvent=mapValues(modifiers,function(getModifiers){return(/** @type {WPEventKeyHandler} */function(event,character){var _isApple=arguments.length>2&&arguments[2]!==undefined?arguments[2]:isAppleOS;var mods=getModifiers(_isApple);var eventMods=getEventModifiers(event);if(xor(mods,eventMods).length){return false;}if(!character){return includes(mods,event.key.toLowerCase());}return event.key===character;});});","// WordPress Core\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport { SelectControl, TextControl } from '@wordpress/components';\nimport { RichText } from '@wordpress/block-editor';\nimport classNames from 'classnames/bind';\nimport { Item } from 'semantic-ui-react';\n\nimport { getTermsAsOptions } from 'shared';\n\nconst KickerEditor = ({ label, date, taxonomy, setAttributes }) => {\n    const [labelOptions, setLabelOptions] = useState([]);\n\n    useEffect(() => {\n        getTermsAsOptions(taxonomy).then(options => {\n            setLabelOptions(options);\n        });\n    }, [taxonomy]);\n\n    return (\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n            <div>\n                <SelectControl\n                    value={label}\n                    options={labelOptions}\n                    onChange={l => {\n                        setAttributes({ label: l });\n                    }}\n                    style={{ marginBottom: '0px' }}\n                    className=\"story-label-select\"\n                />\n            </div>\n            <div>&nbsp;|&nbsp;</div>\n            <div>\n                <TextControl\n                    value={date}\n                    onChange={d => {\n                        setAttributes({ date: d });\n                    }}\n                    style={{ marginBottom: '0px' }}\n                    className=\"story-label-select\"\n                />\n            </div>\n        </div>\n    );\n}\n\nconst Header = ({\n    title,\n    label,\n    date,\n    size,\n    enabled,\n    taxonomy,\n    setAttributes,\n    altHeaderWeight,\n}) => {\n    const {enableHeader, enableMeta} = enabled;\n    if (true !== enableHeader) {\n        return <Fragment />;\n    }\n\n    const classes = classNames({\n        large: (1 === size),\n        medium: (2 === size),\n        small: (3 === size),\n        light: altHeaderWeight,\n        'sans-serif': true !== enableMeta,\n    });\n\n    return (\n        <Fragment>\n            {true === enableMeta && (\n                <Item.Meta>\n                    <KickerEditor\n                        date={date}\n                        label={label}\n                        taxonomy={taxonomy}\n                        setAttributes={setAttributes}\n                    />\n                </Item.Meta>\n            )}\n            <Item.Header className={classes}>\n                <RichText\n                    tagName=\"div\"\n                    value={title}\n                    onChange={t => setAttributes({ title: t })}\n                    allowedFormats={['italic']}\n                    placeholder=\"Title\"\n                    multiline=\"br\"\n                />\n            </Item.Header>\n        </Fragment>\n    );\n};\n\nexport default Header;\n","/**\n * External Dependencies\n */\nimport { Item } from 'semantic-ui-react';\nimport { ifMatchSetAttribute, StoryItem } from '@pewresearch/app-components';\n\n/**\n * WordPress Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { Fragment } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport Controls from './controls';\nimport Image from './image';\nimport Description from './description';\nimport Extra from './extra';\nimport Header from './header';\nimport Placeholder from './placeholder';\n\n// Sets the image slot based on the style classname selected.\nconst setImageSlotByClassName = (className, setAttributes) => {\n    ifMatchSetAttribute(\n        'is-style-top',\n        className,\n        'imageSlot',\n        'top',\n        setAttributes,\n    );\n    ifMatchSetAttribute(\n        'is-style-bottom',\n        className,\n        'imageSlot',\n        'bottom',\n        setAttributes,\n    );\n    ifMatchSetAttribute(\n        'is-style-left',\n        className,\n        'imageSlot',\n        'left',\n        setAttributes,\n    );\n    ifMatchSetAttribute(\n        'is-style-right',\n        className,\n        'imageSlot',\n        'right',\n        setAttributes,\n    );\n    ifMatchSetAttribute(\n        'is-style-disabled',\n        className,\n        'imageSlot',\n        'disabled',\n        setAttributes,\n    );\n    // Default\n    ifMatchSetAttribute(\n        'is-style-default',\n        className,\n        'imageSlot',\n        'default',\n        setAttributes,\n    );\n};\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId, context }) => {\n    const {\n        title,\n        excerpt,\n        extra,\n        link,\n        label,\n        date,\n        image,\n        imageSlot,\n        imageSize,\n        isChartArt,\n        postId = postID,\n        headerSize,\n        enableEmphasis,\n        enableHeader,\n        enableExcerpt,\n        enableExcerptBelow,\n        enableExtra,\n        enableBreakingNews,\n        enableProgramsTaxonomy,\n        enableMeta,\n        className,\n    } = attributes;\n\n    if ( null === postId ) {\n        <Placeholder />\n    }\n\n    const { rootClientId } = useSelect(\n        select => {\n            return {\n                rootClientId: select('core/block-editor').getBlockRootClientId(\n                    clientId,\n                ),\n            };\n        },\n        [clientId],\n    );\n\n    const dataHandler = setAttributes;\n    const enableAltHeaderWeight = !enableExcerpt;\n    const taxonomy = enableProgramsTaxonomy ? 'Programs' : 'Formats';\n\n    const classes = classNames(className, 'story', {\n        stacked: 'top' === imageSlot || 'bottom' === imageSlot,\n        bordered: enableEmphasis,\n        'alt-description': enableExcerptBelow,\n    });\n\n    setImageSlotByClassName(className, setAttributes);\n\n    const Img = () => {\n        return (\n            <Image\n                img={image}\n                size={imageSize}\n                link={link}\n                slot={imageSlot}\n                chartArt={isChartArt}\n                postId={postId}\n                setAttributes={dataHandler}\n            />\n        );\n    };\n\n    const TopAndLeftSlot = () => {\n        if ('top' !== imageSlot && 'left' !== imageSlot) {\n            return <Fragment />;\n        }\n\n        return <Img />;\n    };\n\n    const DefaultSlot = () => {\n        if ('default' !== imageSlot) {\n            return <Fragment />;\n        }\n\n        return <Img />;\n    };\n\n    const BottomAndRightSlot = () => {\n        if ('bottom' !== imageSlot && 'right' !== imageSlot) {\n            return <Fragment />;\n        }\n\n        return <Img />;\n    };\n\n    return (\n        <Fragment>\n            {true === isSelected && (\n                <Fragment>\n                <Controls\n                {...{\n                    attributes,\n                    setAttributes,\n                    context: context.hasOwnProperty('prc-block/wp-query')\n                        ? JSON.parse(context['prc-block/wp-query'])\n                        : false,\n                    rootClientId,\n                }}\n                />\n                <Item as=\"article\" className={classes}>\n                    <TopAndLeftSlot />\n\n                    <Item.Content>\n                        <Header\n                            enabled={{enableHeader, enableMeta}}\n                            title={title}\n                            date={date}\n                            label={label}\n                            link={link}\n                            size={headerSize}\n                            taxonomy={taxonomy}\n                            setAttributes={dataHandler}\n                            altHeaderWeight={enableAltHeaderWeight}\n                        />\n\n                        <DefaultSlot />\n\n                        {true !== enableExcerptBelow && (\n                            <Description\n                                enabled={enableExcerpt}\n                                content={excerpt}\n                                sansSerif={!enableMeta || !enableHeader}\n                                setAttributes={dataHandler}\n                            />\n                        )}\n\n                        <Extra\n                            enabled={enableExtra}\n                            content={extra}\n                            breakingNews={enableBreakingNews}\n                            setAttributes={dataHandler}\n                        />\n                    </Item.Content>\n\n                    <BottomAndRightSlot />\n\n                    {true === enableExcerptBelow && (\n                        <Description\n                            enabled={enableExcerpt}\n                            content={excerpt}\n                            sansSerif={!enableHeader}\n                            setAttributes={dataHandler}\n                        />\n                    )}\n                </Item>\n                </Fragment>\n            )}\n            {true !== isSelected && <StoryItem {...attributes}/>}\n        </Fragment>\n    );\n};\n\nexport default edit;\n","// eslint-disable-next-line import/no-unresolved\nimport { Fragment } from '@wordpress/element';\n\n/** Returns a server side block callback */\nconst save = ({ attributes }) => {\n    const props = attributes;\n    return <Fragment></Fragment>;\n};\n\nexport default save;\n","import { createBlock } from '@wordpress/blocks';\n\n/**\n * Match pewresearch.org post links (not staff links) and insert story items with only the url and base image options selected, this will then let the story item fetch the details (but shouldnt we actually do that as part of the transform?)\n */\nconst transforms = {\n    from: [\n        {\n            type: 'raw',\n            isMatch: node =>\n                'P' === node.nodeName &&\n                /^https?:\\/\\/(www\\.)?pewresearch\\.(org|local)\\/((?!staff).)*$/i.test(\n                    node.textContent,\n                ),\n            transform: node => {\n                return createBlock('prc-block/story-item', {\n                    link: node.textContent.trim(),\n                    className: 'is-style-default',\n                    imageSize: 'A1',\n                    imageSlot: 'default',\n                });\n            },\n        },\n    ],\n    to: [\n        {\n            type: 'block',\n            blocks: ['prc-block/story-item'],\n            transform: ({ url }) => {\n                return createBlock('prc-block/story-item', {\n                    link: url,\n                    className: 'is-style-default',\n                    imageSize: 'A1',\n                    imageSlot: 'default',\n                });\n            },\n        },\n    ],\n};\n\nexport default transforms;\n","/** External dependencies */\nimport { test } from '@pewresearch/app-components';\n\n/**\n * WordPress dependencies\n */\nimport * as moment from 'moment';\nimport { __ } from '@wordpress/i18n';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport transforms from './transforms';\n\nconst { name } = metadata;\n\nconst settings = {\n    title: __('Story Item'),\n    icon: 'format-aside',\n    description: __(\n        'A story item is a visual display of a post, usually referencing a stub post.',\n    ),\n    keywords: [__('prc'), __('story'), __('post'), __('story item')],\n    example: {\n        attributes: {\n            title: 'Ultricies Ipsum Nibh Egestas Purus',\n            excerpt:\n                '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>',\n            extra: '<li></li>',\n            link: '#',\n            label: 'Report',\n            date: moment().format('MM-DD-YYYY'),\n            image:\n                'https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg',\n            imageSlot: 'top',\n            imageSize: 'A2',\n        },\n    },\n    variations: [\n        {\n            name: 'story-item-default',\n            isDefault: true,\n            title: __('Story Item'),\n            description: __('The default story item'),\n            attributes: {\n                imageSlot: 'default',\n                imageSize: 'A1',\n            },\n        },\n        {\n            name: 'story-item-pub-listing',\n            title: __('Pub Listing Story Item'),\n            attributes: {\n                className: 'is-style-left',\n                imageSlot: 'left',\n                imageSize: 'A3',\n            },\n        },\n    ],\n    transforms,\n    edit,\n    save,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n","module.exports = wp.components;","module.exports = moment;","module.exports = wp.apiFetch;","module.exports = wp.data;","module.exports = wp.blocks;","module.exports = wp.i18n;","module.exports = wp.url;","module.exports = ReactDOM;","module.exports = lodash;"],"sourceRoot":""}