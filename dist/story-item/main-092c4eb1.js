/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window["wpackioprcBlocksLibrarystory-itemJsonp"]=window["wpackioprcBlocksLibrarystory-itemJsonp"]||[]).push([[3],{0:function(e,t){e.exports=React},1:function(e,t){e.exports=wp.element},12:function(e,t){e.exports=lodash},13:function(e,t){e.exports=wp.blockEditor},149:function(e){e.exports=JSON.parse('{"name":"prc-block/story-item","category":"layout","attributes":{"title":{"type":"string"},"excerpt":{"type":"string","multiline":"p","default":"<p>Excerpt</p>"},"extra":{"type":"string","multiline":"li"},"link":{"type":"string"},"label":{"type":"string","default":"Report"},"date":{"type":"string"},"image":{"type":"string"},"imageSlot":{"type":"string","default":"default"},"imageSize":{"type":"string","default":"A1"},"isChartArt":{"type":"boolean","default":false},"postID":{"type":"integer"},"headerSize":{"type":"integer","default":2},"enableAltHeaderWeight":{"type":"boolean","default":false},"enableEmphasis":{"type":"boolean","default":false},"enableHeader":{"type":"boolean","default":true},"enableExcerpt":{"type":"boolean","default":true},"enableExcerptBelow":{"type":"boolean","default":false},"enableExtra":{"type":"boolean","default":false},"enableBreakingNews":{"type":"boolean","default":false},"enableProgramsTaxonomy":{"type":"boolean","default":false},"enableMeta":{"type":"boolean","default":true},"inLoop":{"type":"boolean","default":false}},"usesContext":["prc-block/wp-query"],"styles":[{"name":"default","label":"Default Image Alignment","isDefault":true},{"name":"top","label":"Image Aligned Top"},{"name":"bottom","label":"Image Aligned Bottom"},{"name":"left","label":"Image Aligned Left"},{"name":"right","label":"Image Aligned Right"},{"name":"disabled","label":"Disable Image"}],"supports":{"html":false}}')},2:function(e,t){e.exports=wp.components},202:function(e,t,a){a(155),e.exports=a(221)},221:function(e,t,a){"use strict";a.r(t);var n=a(33),l=a(73),r=a(24),i=a(5),c=a(37),o=a(149),s=a(26),u=a.n(s),m=a(1),d=a(34),p=a(246),b=a(32),g=a.n(b),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return new Promise((function(a){var n={};g()({path:"/wp/v2/".concat(e,"?per_page=").concat(t)}).then((function(t){for(var l=0;l<t.length;l++){var r=t[l].slug.replace("".concat(e.toLowerCase(),"_"),"");n[t[l].id]={id:t[l].id,name:t[l].name,parent:t[l].parent,slug:r}}a(n)}))}))},h=function(e,t,a,l,r){e===t&&r(Object(n.a)({},a,l))},E=a(2),R=a(13),v=(a(152),a(182),a(53)),y=(a(181),a(146),a(59),function(e){var t=e.wpQueryContext,a=e.rootClientId,n=e.postId;console.log("<ContextControls>",t,a,n);var l=t.includes(n);return console.log("isActive?",l),React.createElement(R.BlockControls,null,React.createElement(E.Toolbar,{controls:[{icon:"sticky",title:"Pin This",isActive:l,onClick:function(){var e=t,l=e.findIndex((function(e){return e===n}));-1===l?e.push(n):e.splice(l,1),console.log("dispatching...",n),console.log(e),Object(d.dispatch)("core/block-editor").updateBlockAttributes(a,{pinned:JSON.stringify(e)})}}]}))}),w=a(12),k=function(e,t){var a={title:e.title.hasOwnProperty("rendered")?e.title.rendered:e.title,excerpt:e.excerpt.hasOwnProperty("rendered")?e.excerpt.rendered:e.excerpt,link:e.link,label:e.hasOwnProperty("label")?e.label:"Report",date:e.date,postID:e.id,extra:""};e.art||(a.image=e.image),t(a)},x=function(e,t){void 0!==e&&void 0!==t&&g()({path:"/prc-api/v2/blocks/helpers/get-post-by-url",method:"POST",data:{url:e}}).then((function(e){console.log("setPostbyURL",e),!1!==e&&k(e,t)})).catch((function(a){console.error(a),t({link:e})}))},A=function(e,t,a){void 0!==e&&void 0!==t&&(void 0!==a&&a(!0),g()({path:"/wp/v2/stub/".concat(e),method:"GET"}).then((function(a){console.log("setPostByStubID",e,a),!1!==a&&k(a,t)})).catch((function(e){return console.error(e)})).then((function(){void 0!==a&&a(!1)})))},C=function(e){var t=e.url,a=e.setAttributes,n=Object(m.useState)(!1),l=Object(v.a)(n,2),r=l[0],c=l[1];return React.createElement(m.Fragment,null,React.createElement(E.ToolbarButton,{"aria-expanded":r,"aria-haspopup":"true",label:Object(i.__)("Set Link"),icon:"admin-links",onClick:function(){return c(!r)},showTooltip:!0}),!0===r&&React.createElement(E.Popover,{position:"bottom center",onClose:function(){return c(!1)}},React.createElement(R.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:{url:t},showInitialSuggestions:!0,suggestionsQuery:{type:"post",subtype:"stub"},onChange:function(e){e.hasOwnProperty("url")&&(e.hasOwnProperty("id")?A(e.id,a):x(e.url,a))},settings:[]})))},O={className:"block-library-heading-level-dropdown",isAlternate:!0},S=function(e){var t=e.selected,a=e.options,n=e.iconPaths,l=e.label,r=e.prefixLabel,c=void 0===r?"%s":r,o=e.onChange,s=e.iconWidth,u=void 0===s?"24":s,m=e.iconHeight,d=void 0===m?"24":m,p=e.iconViewBox,b=void 0===p?"0 0 24 24":p,g=function(e){var t=e.selected,a=e.isPressed,l=void 0!==a&&a;return n.hasOwnProperty(t)?React.createElement(E.SVG,{width:u,height:d,viewBox:b,xmlns:"http://www.w3.org/2000/svg",isPressed:l},React.createElement(E.Path,{d:n[t]})):null};return React.createElement(E.Dropdown,{popoverProps:O,renderToggle:function(e){var a=e.onToggle,n=e.isOpen;return React.createElement(E.ToolbarButton,{"aria-expanded":n,"aria-haspopup":"true",icon:React.createElement(g,{selected:t}),label:l,onClick:a,showTooltip:!0})},renderContent:function(){return React.createElement(E.Toolbar,{className:"block-library-heading-level-toolbar",label:l},React.createElement(E.ToolbarGroup,{isCollapsed:!1,controls:a.map((function(e,a){var n=t===e;return{icon:React.createElement(g,{selected:e,isPressed:n}),title:Object(i.sprintf)(Object(i.__)(c),e),isActive:n,onClick:function(){o(e)}}}))}))}})},H=function(e){var t=e.attributes,a=e.setAttributes,n=t.link,l=t.imageSize,r=t.imageSlot,c=t.headerSize,o=t.isChartArt;return React.createElement(R.BlockControls,null,React.createElement(E.ToolbarGroup,null,React.createElement(C,{url:n,setAttributes:a})),React.createElement(E.ToolbarGroup,null,React.createElement(S,{label:Object(i.__)("Change Heading Level"),selected:c,options:[1,2,3],onChange:function(e){return a({headerSize:e})},iconPaths:{1:"M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z",2:"M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z",3:"M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z"},iconHeight:"24",iconWidth:"24",prefixLabel:"Heading %d",iconViewBox:"0 0 20 20"})),"disabled"!==r&&React.createElement(E.ToolbarGroup,null,!["legacy-260","legacy-260-173"].includes(l)&&React.createElement(S,{label:Object(i.__)("Change Image Size"),selected:l,options:["A1","A2","A3","A4","XL"],onChange:function(e){return a({imageSize:e})},iconPaths:{A1:"M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z",A2:"M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z",A3:"M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z",A4:"M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z",XL:"M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z"},prefixLabel:"%s Image Size"}),React.createElement(E.ToolbarButton,{icon:"chart-pie",isPressed:o,label:Object(i.__)("Enable Chart Art"),onClick:function(){a({isChartArt:!o})}})))},N=function(e){var t=e.attributes,a=e.setAttributes,n=e.context,l=e.rootClientId,r=Object(m.useState)(!1),c=Object(v.a)(r,2),o=c[0],s=c[1],u=t.postID,d=t.link,p=t.imageSlot,b=t.enableHeader,g=t.enableExcerpt,f=t.enableExcerptBelow,h=t.enableExtra,k=t.enableBreakingNews,C=t.enableEmphasis,O=t.enableProgramsTaxonomy,S=t.enableMeta,N=t.inLoop,j=Object(i.__)("Story Item options");return Object(m.useEffect)((function(){Object(w.isEmpty)(d)||void 0!==u||x(d,a)}),[d]),React.createElement(m.Fragment,null,React.createElement(H,{attributes:t,setAttributes:a}),!1!==n&&React.createElement(y,{wpQueryContext:n,rootClientId:l,postId:u}),React.createElement(R.InspectorControls,null,React.createElement(E.PanelBody,{title:j},Object(w.isInteger)(u)&&React.createElement(E.Button,{isSecondary:!0,isBusy:o,onClick:function(){return A(u,a,s)},style:{marginBottom:"1em"}},"Refresh Post"),React.createElement(E.ToggleControl,{label:S?"Meta Enabled":"Meta Disabled",checked:S,onChange:function(){a({enableMeta:!S})}}),React.createElement(E.ToggleControl,{label:b?"Header Enabled":"Header Disabled",checked:b,onChange:function(){a({enableHeader:!b})}}),React.createElement(E.ToggleControl,{label:g?"Excerpt Enabled":"Excerpt Disabled",checked:g,onChange:function(){a({enableExcerpt:!g})}}),!0===g&&("right"===p||"left"===p)&&React.createElement(E.ToggleControl,{label:f?"Excerpt Will Appear Below":"Excerpt Will Appear Normally",checked:f,onChange:function(){a({enableExcerptBelow:!f})}}),React.createElement(E.ToggleControl,{label:h?"Extras Enabled":"Extras Disabled",checked:h,onChange:function(){a({enableExtra:!h})}}),React.createElement(E.ToggleControl,{label:k?"Breaking News Enabled":"Breaking News Disabled",checked:k,onChange:function(){!1!==window.prcBreakingNews?a({enableBreakingNews:!k}):(alert("There are no currently active, authorized, breaking news events. The breaking news toggle will be set back to false."),a({enableBreakingNews:!1}))}}),React.createElement(E.ToggleControl,{label:O?"Programs":"Formats",checked:O,onChange:function(){a({enableProgramsTaxonomy:!O})}}),React.createElement(E.ToggleControl,{label:C?"Emphasis Enabled":"Emphasis Disabled",checked:C,onChange:function(){a({enableEmphasis:!C})}}),React.createElement(E.ToggleControl,{label:N?"Pub Listing Style On Mobile":"Normal Styling On Mobile",checked:N,onChange:function(){a({inLoop:!N})}}))))},j=["image"],M=function(e){var t=e.img,a=e.size,n=e.postId,r=e.setAttributes,i=Object(m.useState)(!1),c=Object(v.a)(i,2),o=c[0],s=c[1];return Object(m.useEffect)((function(){0!==n&&!1!==r&&g()({path:"/prc-api/v2/get-art/?postId=".concat(n)}).then((function(e){!1!==e?(s(e),r({image:e[a].rawUrl})):s(!1)}))}),[n]),Object(m.useEffect)((function(){!1!==o&&void 0!==o[a]&&!1!==r&&r({image:o[a].rawUrl,isChartArt:o[a].chartArt})}),[o,a]),React.createElement(R.MediaUploadCheck,null,React.createElement(R.MediaUpload,{onSelect:function(e){return r({image:e.url})},allowedTypes:j,render:function(e){var r=e.open;return void 0===n||["legacy-260","legacy-260-173"].includes(a)||(r=function(){return alert("You are unable to edit this image as it is locked to a post. To edit, visit this post and edit its origin post. "+n)}),React.createElement(m.Fragment,null,void 0!==t&&0!==t.length&&React.createElement(l.ImageDisplay,{img:t,size:a,link:"",onClick:r}),(void 0===t||0===t.length)&&React.createElement(l.ImageDisplay,{img:t,size:a,link:"",onClick:r,placeholder:!0}))}}))},z=function(e){var t=e.img,a=e.size,n=e.slot,l=e.chartArt,r=e.postId,i=e.setAttributes;console.log("<Img>",t);var c,o,s,m,d;return React.createElement("div",{className:(c=!1,o=!1,s=!1,m=!1,d=!1,!1!==n&&("XL"===a?c=!0:"A1"===a?o=!0:"A2"===a?s=!0:"A3"===a?m=!0:"A4"===a&&(d=!0)),u()({ui:!0,XL:c,A1:o,A2:s,A3:m,A4:d,image:!0,bordered:l}))},React.createElement(M,{img:t,size:a,postId:r,setAttributes:i}))},T=function(e){var t=e.content,a=e.sansSerif,n=e.enabled,l=e.setAttributes;if(!0!==n)return React.createElement(m.Fragment,null);var r=u()("description",{"sans-serif":a});return React.createElement(m.Fragment,null,!1!==l&&React.createElement(R.RichText,{tagName:"div",value:t,onChange:function(e){return l({excerpt:e})},placeholder:t,multiline:"p",className:r}),!1===l&&React.createElement(R.RichText.Content,{tagName:"div",value:t,className:r}))},B=function(e){var t=e.content,a=e.breakingNews,n=e.enabled,l=e.setAttributes;return React.createElement(m.Fragment,null,!1!==l&&!0===n&&React.createElement(R.RichText,{tagName:"ul",value:t,onChange:function(e){return l({extra:e})},placeholder:t,multiline:"li",className:"extra"}),!1===l&&!0===n&&React.createElement(R.RichText.Content,{tagName:"ul",value:t,className:"extra"}),!0===a&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))},I=function(e){var t=e.label,a=e.date,n=e.taxonomy,l=e.setAttributes,r=Object(m.useState)([]),i=Object(v.a)(r,2),c=i[0],o=i[1];return Object(m.useEffect)((function(){(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(l){f(e,t).then((function(e){var t=[];Object.keys(e).forEach((function(n){var l=e[n],r=l.name;"termid"===a&&(r=l.id);var i=l.name;void 0!==l.parent&&0!==l.parent&&(i=" -- ".concat(i)),t.push({value:r,label:i})})),!1!==n&&t.sort((function(e,t){return e.label>t.label?1:-1})),l(t)}))}))})(n).then((function(e){o(e)}))}),[n]),React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("div",null,React.createElement(E.SelectControl,{value:t,options:c,onChange:function(e){l({label:e})},style:{marginBottom:"0px"},className:"story-label-select"})),React.createElement("div",null," | "),React.createElement("div",null,React.createElement(E.TextControl,{value:a,onChange:function(e){l({date:e})},style:{marginBottom:"0px"},className:"story-label-select"})))},P=function(e){var t=e.title,a=e.label,n=e.date,l=e.size,r=e.enabled,i=e.taxonomy,c=e.setAttributes,o=e.altHeaderWeight,s=r.enableHeader,d=r.enableMeta;if(!0!==s)return React.createElement(m.Fragment,null);var b=u()({large:1===l,medium:2===l,small:3===l,light:o,"sans-serif":!0!==d});return React.createElement(m.Fragment,null,!0===d&&React.createElement(p.a.Meta,null,React.createElement(I,{date:n,label:a,taxonomy:i,setAttributes:c})),React.createElement(p.a.Header,{className:b},React.createElement(R.RichText,{tagName:"div",value:t,onChange:function(e){return c({title:e})},allowedFormats:["italic"],placeholder:"Title",multiline:"br"})))},L=function(e){var t=e.attributes,a=e.setAttributes,n=e.isSelected,l=e.clientId,r=e.context,i=t.title,c=t.excerpt,o=t.extra,s=t.link,b=t.label,g=t.date,f=t.image,E=t.imageSlot,R=t.imageSize,v=t.isChartArt,y=t.postID,w=t.headerSize,k=t.enableEmphasis,x=t.enableHeader,A=t.enableExcerpt,C=t.enableExcerptBelow,O=t.enableExtra,S=t.enableBreakingNews,H=t.enableProgramsTaxonomy,j=t.enableMeta,M=t.className,I=Object(d.useSelect)((function(e){return{rootClientId:e("core/block-editor").getBlockRootClientId(l)}}),[l]).rootClientId,L=a,_=!A,D=H?"Programs":"Formats",F=u()(M,"story",{stacked:"top"===E||"bottom"===E,bordered:k,"alt-description":C});!function(e,t){h("is-style-top",e,"imageSlot","top",t),h("is-style-bottom",e,"imageSlot","bottom",t),h("is-style-left",e,"imageSlot","left",t),h("is-style-right",e,"imageSlot","right",t),h("is-style-disabled",e,"imageSlot","disabled",t),h("is-style-default",e,"imageSlot","default",t)}(M,a);var V=function(){return React.createElement(z,{img:f,size:R,link:s,slot:E,chartArt:v,postId:y,setAttributes:L})},Z=function(){return"top"!==E&&"left"!==E?React.createElement(m.Fragment,null):React.createElement(V,null)},W=function(){return"default"!==E?React.createElement(m.Fragment,null):React.createElement(V,null)},Y=function(){return"bottom"!==E&&"right"!==E?React.createElement(m.Fragment,null):React.createElement(V,null)};return React.createElement(m.Fragment,null,!0===n&&React.createElement(N,{attributes:t,setAttributes:a,context:!!r.hasOwnProperty("prc-block/wp-query")&&JSON.parse(r["prc-block/wp-query"]),rootClientId:I}),React.createElement(p.a,{as:"article",className:F},React.createElement(Z,null),React.createElement(p.a.Content,null,React.createElement(P,{enabled:{enableHeader:x,enableMeta:j},title:i,date:g,label:b,link:s,size:w,taxonomy:D,setAttributes:L,altHeaderWeight:_}),React.createElement(W,null),!0!==C&&React.createElement(T,{enabled:A,content:c,sansSerif:!j||!x,setAttributes:L}),React.createElement(B,{enabled:O,content:o,breakingNews:S,setAttributes:L})),React.createElement(Y,null),!0===C&&React.createElement(T,{enabled:A,content:c,sansSerif:!x,setAttributes:L})))},_=function(e){e.attributes;return React.createElement(m.Fragment,null)},D={from:[{type:"raw",isMatch:function(e){return"P"===e.nodeName&&/^https?:\/\/(www\.)?pewresearch\.(org|local)\/((?!staff).)*$/i.test(e.textContent)},transform:function(e){return Object(c.createBlock)("prc-block/story-item",{link:e.textContent.trim(),className:"is-style-default",imageSize:"A1",imageSlot:"default"})}}],to:[{type:"block",blocks:["prc-block/story-item"],transform:function(e){var t=e.url;return Object(c.createBlock)("prc-block/story-item",{link:t,className:"is-style-default",imageSize:"A1",imageSlot:"default"})}}]};function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=o.name,W={title:Object(i.__)("Story Item"),icon:"format-aside",description:Object(i.__)("A story item is a visual display of a post, usually referencing a stub post."),keywords:[Object(i.__)("prc"),Object(i.__)("story"),Object(i.__)("post"),Object(i.__)("story item")],example:{attributes:{title:"Ultricies Ipsum Nibh Egestas Purus",excerpt:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>",extra:"<li></li>",link:"#",label:"Report",date:r().format("MM-DD-YYYY"),image:"https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg",imageSlot:"top",imageSize:"A2"}},variations:[{name:"story-item-default",isDefault:!0,title:Object(i.__)("Story Item"),description:Object(i.__)("The default story item"),attributes:{imageSlot:"default",imageSize:"A1"}},{name:"story-item-pub-listing",title:Object(i.__)("Pub Listing Story Item"),attributes:{className:"is-style-left",imageSlot:"left",imageSize:"A3"}}],transforms:D,edit:L,save:_};Object(c.registerBlockType)(Z,V(V({},o),W))},24:function(e,t){e.exports=moment},32:function(e,t){e.exports=wp.apiFetch},34:function(e,t){e.exports=wp.data},37:function(e,t){e.exports=wp.blocks},46:function(e,t){e.exports=ReactDOM},5:function(e,t){e.exports=wp.i18n},59:function(e,t){e.exports=wp.url},73:function(e,t,a){"use strict";a.d(t,"b",(function(){return x}));var n=a(24),l=a.n(n),r=(a(32),a(5),a(34),a(2),a(37),a(1)),i=(a(13),a(111),a(51)),c=(a(133),a(42)),o=a.n(c),s=a(132),u=a(72),m=a(59),d={default:"564,317",small:"690,388",hidpi:"1128,634",smallHidpi:"1380,776"},p={default:"268,151",small:"690,388",hidpi:"536,301",smallHidpi:"1380,776"},b={default:"194,110",small:"148,84",hidpi:"388,220",smallHidpi:"296,168"},g={default:"268,151",small:"690,388",hidpi:"536,302",smallHidpi:"1380,776"},f={default:"720,405",small:"690,388",hidpi:"1440,810",smallHidpi:"1380,776"},h={260:{default:"260,260",small:"260,260",hidpi:"520,520",smallHidpi:"520,520"},"260-173":{default:"260,173",small:"260,173",hidpi:"520,346",smallHidpi:"520,346"}},E=function(e){var t=e.img,a=e.size,n=e.link,l=e.onClick,i=void 0!==l&&l,c=e.placeholder,o=void 0!==c&&c,s=function(e){if(!0===o){return"https://via.placeholder.com/"+("A2"===a?"536x301":"A3"===a?"388x220":"A4"===a?"536x302":"XL"===a?"1440x810":"legacy-260"===a?"260x260":"legacy-260-173"===a?"260x173":"1128x634")+".png?text="+a}if(""===t||!1===t)return t;var n={resize:d[e]};return"A2"===a?n={resize:p[e]}:"A3"===a?n={resize:b[e]}:"A4"===a?n={resize:g[e]}:"XL"===a&&(n={resize:f[e]}),"legacy-260"===a?n={resize:h[260][e]}:"legacy-260-173"===a&&(n={resize:h["260-173"][e]}),Object(m.addQueryArgs)(t,n)},E=function(e){return void 0===e&&(e=767),[{srcSet:s("default")+" 1x, "+s("hidpi")+" 2x",media:"(min-width: "+e+"px)"},{srcSet:s("small")+" 1x, "+s("smallHidpi")+" 2x",media:"(max-width: "+e+"px)"}]};return!1!==i?React.createElement("div",{onClick:i},!0===o&&React.createElement("img",{src:s(),alt:"Click to insert"}),!0!==o&&React.createElement(u.a,{sources:E(),alt:"Click to edit"})):React.createElement(r.Fragment,null,""===n&&React.createElement(u.a,{sources:E()}),""!==n&&React.createElement("a",{href:n},React.createElement(u.a,{sources:E()})))},R=function(e){var t,a,n,l,r,i=e.img,c=e.link,s=e.size,u=e.slot,m=e.chartArt;return React.createElement("div",{className:(t=!1,a=!1,n=!1,l=!1,r=!1,!1!==u&&("XL"===s?t=!0:"A1"===s?a=!0:"A2"===s?n=!0:"A3"===s?l=!0:"A4"===s&&(r=!0)),o()({ui:!0,XL:t,A1:a,A2:n,A3:l,A4:r,image:!0,bordered:m}))},React.createElement(E,{img:i,size:s,link:c}))},v=function(e){var t=e.content,a=e.sansSerif;if(!0!==e.enabled)return React.createElement(r.Fragment,null);var n=o()("description",{"sans-serif":a});return React.createElement("div",{className:n},React.createElement(r.RawHTML,null,t))},y=function(e){var t=e.content,a=e.breakingNews,n=e.enabled;return React.createElement(r.Fragment,null,!0===n&&React.createElement(i.a.Extra,{as:"ul"},React.createElement(r.RawHTML,null,t)),!0===a&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))},w=function(e){var t,a=e.label,n=void 0===a?"Report":a,i=e.date,c=null!==n?n.replace(/\s+/g,"-").toLowerCase():"report",s=o()(c,"label"),u=(t=i,l()(t).format("MMM D, YYYY"));return React.createElement(r.Fragment,null,React.createElement("span",{className:s},n||"Report")," | ",React.createElement("span",{className:"date"},u))},k=function(e){var t=e.title,a=e.label,n=e.date,l=e.link,c=e.size,s=e.enabled,u=e.isStyleMobileLoop,m=e.image,d=e.imageSize,p=e.isChartArt,b=e.altHeaderWeight,g=s.enableHeader,f=s.enableMeta;if(!0!==g)return React.createElement(r.Fragment,null);var h=o()({large:1===parseInt(c,0),medium:2===parseInt(c,0),small:3===parseInt(c,0),light:b,"sans-serif":!f});return React.createElement(r.Fragment,null,!0===f&&React.createElement(i.a.Meta,null,React.createElement(w,{label:a,date:n})),React.createElement(i.a.Header,{className:h},!0===u&&React.createElement(R,{img:m,size:d,link:l,slot:"left",chartArt:p}),React.createElement("a",{href:l},React.createElement(r.RawHTML,null,t))))},x=function(e){var t=e.title,a=e.excerpt,n=e.extra,l=e.link,c=e.label,u=e.date,m=e.image,d=e.imageSlot,p=e.imageSize,b=e.isChartArt,g=e.headerSize,f=e.enableEmphasis,h=e.enableHeader,E=e.enableMeta,w=e.enableExcerpt,x=e.enableExcerptBelow,A=e.enableExtra,C=e.enableBreakingNews,O=e.extraContent,S=void 0!==O&&O,H=e.className,N=e.inLoop,j=void 0!==N&&N,M=Object(s.a)("(max-width: 990px)"),z=!1;!1===w&&(z=!0);var T=!0;"left"!==d&&"right"!==d||(T=!1);var B=!1;!0===j&&!0===M&&(B=!0),!1===j&&!0===M&&"disabled"!==d&&(d="top",p="A2"),B&&(d="left",p="A3");var I=o()(H,"story",{stacked:T,bordered:f,"alt-description":x,"is-style-mobile-loop":B}),P=function(){return React.createElement(R,{img:m,size:p,link:l,slot:d,chartArt:b,onClick:function(){window.location=l}})},L=function(){return"top"!==d&&"left"!==d||!0===j&&!0===M?React.createElement(r.Fragment,null):React.createElement(P,null)},_=function(){return"default"!==d||!0===j&&!0===M?React.createElement(r.Fragment,null):React.createElement(P,null)},D=function(){return"bottom"!==d&&"right"!==d||!0===j&&!0===M?React.createElement(r.Fragment,null):React.createElement(P,null)};return React.createElement(i.a,{as:"article",className:I},React.createElement(L,null),React.createElement(i.a.Content,null,React.createElement(k,{enabled:{enableHeader:h,enableMeta:E},title:t,date:u,label:c,link:l,size:g,isStyleMobileLoop:B,image:m,imageSize:p,chartArt:b,altHeaderWeight:z}),React.createElement(_,null),!0!==x&&React.createElement(v,{enabled:w,content:a,sansSerif:!h||!E}),!0===x&&!0===M&&React.createElement(v,{enabled:w,content:a,sansSerif:!h}),React.createElement(y,{enabled:A,content:n,breakingNews:C}),!1!==S&&React.createElement(r.RawHTML,null,S)),React.createElement(D,null),!0===x&&!1===M&&React.createElement(v,{enabled:w,content:a,sansSerif:!h}))}}},[[202,0,1,4]]]);
//# sourceMappingURL=main-092c4eb1.js.map