{"version":3,"sources":["webpack:///external \"wp.element\"","webpack:///external \"wp.i18n\"","webpack:///external \"wp.components\"","webpack:///external \"lodash\"","webpack:///external \"wp.blockEditor\"","webpack:///external \"wp.data\"","webpack:///external \"wp.blocks\"","webpack:///external \"regeneratorRuntime\"","webpack:///external \"wp.url\"","webpack:///./node_modules/@wordpress/icons/build-module/library/share.js","webpack:///./src/social-link/edit.js","webpack:///./src/social-link/index.js","webpack:///./src/social-link/save.js"],"names":["module","exports","wp","element","i18n","components","lodash","blockEditor","data","blocks","regeneratorRuntime","url","viewBox","xmlns","d","getSuggestionsQuery","type","subtype","compose","withSelect","select","ownProps","getClientIdsOfDescendants","getBlockAttributes","hasSelectedInnerBlock","getSelectedBlockClientId","getBlockParentsByBlockName","clientId","getSettings","hasDescendants","length","isImmediateParentOfSelectedBlock","selectedBlockHasDescendants","userCanCreatePages","canUser","userCanCreatePosts","withDispatch","dispatch","registry","insertLinkBlock","insertBlock","navItems","insertionPoint","createBlock","attributes","context","isSelected","setAttributes","insertBlocksAfter","mergeBlocks","onReplace","label","opensInNewTab","description","rel","title","link","saveEntityRecord","useDispatch","useState","isLinkOpen","setIsLinkOpen","listItemRef","useRef","isDraggingWithin","elementRef","setIsDraggingWithin","useEffect","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","useIsDraggingWithin","itemLabelPlaceholder","__","ref","isDraggingBlocks","useSelect","isURL","prependHTTP","test","focus","selection","defaultView","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","selectLabelText","placeCaretAtHorizontalEdge","userCanCreate","pageTitle","a","postType","status","page","id","rendered","blockProps","useBlockProps","className","classnames","bindGlobal","shortcuts","rawShortcut","primary","name","icon","linkIcon","shortcut","displayShortcut","onClick","value","onChange","descriptionValue","help","titleValue","autoComplete","relValue","identifier","labelValue","onMerge","__unstableOnSplitAtEnd","aria-label","placeholder","keepPlaceholderOnFocus","withoutInteractiveFormatting","allowedFormats","position","onClose","showInitialSuggestions","withCreateSuggestion","createSuggestion","createSuggestionButtonText","searchTerm","format","createInterpolateElement","sprintf","mark","noDirectEntry","noURLSuggestion","suggestionsQuery","normalizedTitle","normalizedURL","newTitle","newURL","newOpensInNewTab","encodeURI","replace","escape","metadata","settings","shareIcon","__experimentalLabel","merge","leftAttributes","rightLabel","edit","save","Content","registerBlockType"],"mappings":";;;;;;;;;;;;;;;;;+GAAAA,EAAOC,QAAUC,GAAGC,S,cCApBH,EAAOC,QAAUC,GAAGE,M,cCApBJ,EAAOC,QAAUC,GAAGG,Y,cCApBL,EAAOC,QAAUK,Q,eCAjBN,EAAOC,QAAUC,GAAGK,a,cCApBP,EAAOC,QAAUC,GAAGM,M,cCApBR,EAAOC,QAAUC,GAAGO,Q,oBCApBT,EAAOC,QAAUS,oB,cCAjBV,EAAOC,QAAUC,GAAGS,K,4dCEkZ,EAA7W,wBAAc,IAAI,CAACC,QAAQ,YAAYC,MAAM,8BAA8B,wBAAc,IAAK,CAACC,EAAE,6P,mIC6G1J,SAASC,EAAoBC,GACzB,OAAQA,GACJ,IAAK,OACL,IAAK,OACD,MAAO,CAAEA,KAAM,OAAQC,QAASD,GACpC,IAAK,QACD,MAAO,CAAEA,KAAM,OAAQC,QAAS,SACpC,IAAK,UACD,MAAO,CAAED,KAAM,OAAQC,QAAS,WACpC,IAAK,WACD,MAAO,CAAED,KAAM,OAAQC,QAAS,YACpC,QACI,MAAO,IAuRJC,kBAAQ,CACnBC,sBAAW,SAACC,EAAQC,GAAc,IAAD,IAQzBD,EAAO,qBALPE,GAHyB,EAEzBC,mBAFyB,EAGzBD,2BACAE,EAJyB,EAIzBA,sBAEAC,GANyB,EAKzBC,2BALyB,EAMzBD,0BAGIE,GATqB,EAOzBC,YAEiBP,EAAbM,UACFE,IAAmBP,EAA0B,CAACK,IAAWG,OAW/D,MAAO,CACHC,iCAVqCP,EACrCG,GACA,GASAE,iBACAG,+BAPiC,UAACV,EAA0B,CADxCG,aACa,aAAC,EAElCK,QAMAG,mBAAoBb,EAAO,QAAQc,QAAQ,SAAU,SACrDC,mBAAoBf,EAAO,QAAQc,QAAQ,SAAU,aAG7DE,wBAAa,SAACC,EAAUhB,EAAUiB,GAC9B,MAAO,CACHC,gBADG,WACgB,IACPZ,EAAaN,EAAbM,SAEAa,EAAgBH,EAAS,qBAAzBG,YAKFC,GAAWnB,EAHqBgB,EAASlB,OAC3C,qBADIE,2BAGmC,CAACK,IACtCe,EAAiBD,EAASX,OAASW,EAASX,OAAS,EAI3DU,EAFsBG,sBAAY,uBAEPD,EAAgBf,SA7C5CT,EAnRf,YAYI,IAXA0B,EAWD,EAXCA,WACAC,EAUD,EAVCA,QACAC,EASD,EATCA,WAEAC,GAOD,EARChB,iCAQD,EAPCgB,eAOD,KANCR,gBAMD,EALCN,2BAKD,aAJCE,0BAID,SAHCa,EAGD,EAHCA,kBACAC,EAED,EAFCA,YACAC,EACD,EADCA,UAGIC,EAOAP,EAPAO,MACAnC,EAMA4B,EANA5B,KACAoC,EAKAR,EALAQ,cACAzC,EAIAiC,EAJAjC,IACA0C,EAGAT,EAHAS,YACAC,EAEAV,EAFAU,IACAC,EACAX,EADAW,MAEEC,EAAO,CACT7C,MACAyC,iBAEIK,EAAqBC,sBAAY,QAAjCD,iBAdT,EAeqCE,oBAAS,GAf9C,mBAeQC,EAfR,KAeoBC,EAfpB,KAgBOC,EAAcC,iBAAO,MACrBC,EA9FkB,SAAAC,GAAe,IAAD,EACUN,oBAAS,GADnB,mBAC/BK,EAD+B,KACbE,EADa,KAuCtC,OApCAC,qBAAU,WAAO,IACLC,EAAkBH,EAAWI,QAA7BD,cAER,SAASE,EAAgBC,GAErBC,EAAgBD,GAIpB,SAASE,IACLP,GAAoB,GAGxB,SAASM,EAAgBD,GAEjBN,EAAWI,QAAQK,SAASH,EAAMI,QAClCT,GAAoB,GAEpBA,GAAoB,GAW5B,OAJAE,EAAcQ,iBAAiB,YAAaN,GAC5CF,EAAcQ,iBAAiB,UAAWH,GAC1CL,EAAcQ,iBAAiB,YAAaJ,GAErC,WACHJ,EAAcS,oBAAoB,YAAaP,GAC/CF,EAAcS,oBAAoB,UAAWJ,GAC7CL,EAAcS,oBAAoB,YAAaL,MAEpD,IAEIR,EAuDkBc,CAAoBhB,GACvCiB,EAAuBC,aAAG,aAC1BC,EAAMlB,mBAENmB,EAAmBC,qBACrB,SAAA/D,GAAM,OAAIA,EAAO,qBAAqB8D,qBACtC,IAOJf,qBAAU,WACDxD,GACDkD,GAAc,KAEnB,IAMHM,qBAAU,WACDrB,GACDe,GAAc,KAEnB,CAACf,IAGJqB,qBAAU,WACFP,GAAcjD,IAEVyE,gBAAMC,sBAAYlC,KAAW,cAAcmC,KAAKnC,GAa5D,WACI8B,EAAIZ,QAAQkB,QADW,IAEfnB,EAAkBa,EAAIZ,QAAtBD,cAEFoB,EADkBpB,EAAhBqB,YACsBC,eACxBC,EAAQvB,EAAcwB,cAE5BD,EAAME,mBAAmBZ,EAAIZ,SAC7BmB,EAAUM,kBACVN,EAAUO,SAASJ,GApBXK,GAGAC,YAA2BhB,EAAIZ,SAAS,MAGjD,CAAC1D,IAiBJ,IAAIuF,GAAgB,EA3ErB,4CAkFC,WAA4BC,GAA5B,iBAAAC,EAAA,6DACUC,EAAWrF,GAAQ,OAD7B,SAGuByC,EAAiB,WAAY4C,EAAU,CACtD9C,MAAO4C,EACPG,OAAQ,YALhB,cAGUC,EAHV,yBAQW,CACHC,GAAID,EAAKC,GACTH,WACA9C,MAAOgD,EAAKhD,MAAMkD,SAClB9F,IAAK4F,EAAK/C,OAZlB,4CAlFD,sBA4EMxC,GAAQ,SAAWA,EAEb,SAAWA,IAClBkF,EAAgB/D,GAFhB+D,EAAgBjE,EAqBpB,IAAMyE,EAAaC,wBAAc,CAC7B1B,IAAKnB,EACL8C,UAAWC,IAAW,OAAQ,CAC1B,aACI/D,IAECoC,EAEL,cAAepC,IAAeoC,EAC9B,qBAAsBlB,EACtB,aAAcrD,MAItB,OACI,oBAAC,WAAD,KACI,oBAAC,gBAAD,KACI,oBAAC,eAAD,KACI,oBAAC,oBAAD,CACImG,YAAU,EACVC,UAAS,eACJC,IAAYC,QAAQ,MAAO,kBACxBpD,GAAc,QAG1B,oBAAC,gBAAD,CACIqD,KAAK,OACLC,KAAMC,IACN7D,MAAOyB,aAAG,QACVqC,SAAUC,IAAgBL,QAAQ,KAClCM,QAAS,kBAAM1D,GAAc,QAKzC,oBAAC,oBAAD,KACI,oBAAC,YAAD,CAAWN,MAAOyB,aAAG,kBACjB,oBAAC,kBAAD,CACIwC,MAAOnE,GAAe,GACtBoE,SAAU,SAAAC,GACN3E,EAAc,CAAEM,YAAaqE,KAEjCvE,MAAO6B,aAAG,eACV2C,KAAM3C,aACF,qFAGR,oBAAC,cAAD,CACIwC,MAAOjE,GAAS,GAChBkE,SAAU,SAAAG,GACN7E,EAAc,CAAEQ,MAAOqE,KAE3BzE,MAAO6B,aAAG,cACV6C,aAAa,QAEjB,oBAAC,cAAD,CACIL,MAAOlE,GAAO,GACdmE,SAAU,SAAAK,GACN/E,EAAc,CAAEO,IAAKwE,KAEzB3E,MAAO6B,aAAG,YACV6C,aAAa,UAKzB,0BAASnB,EACL,oBAAC,WAAD,CACIzB,IAAKA,EACL8C,WAAW,QACXnB,UACI,kBAAoB/D,EAAQ,kBACtB,kBACA,GAEV2E,MAAOrE,EACPsE,SAAU,SAAAO,GAAU,OAChBjF,EAAc,CAAEI,MAAO6E,KAE3BC,QAAShF,EACTC,UAAWA,EACXgF,uBAAwB,kBACpBlF,EAAkBL,sBAAY,yBAElCwF,aAAYnD,aAAG,wBACfoD,YAAarD,EACbsD,wBAAsB,EACtBC,8BAA4B,EAC5BC,eAAgB,CACZ,YACA,cACA,aACA,wBAGP3E,GACG,oBAAC,UAAD,CACI4E,SAAS,gBACTC,QAAS,kBAAM5E,GAAc,KAE7B,oBAAC,4BAAD,CACI+C,UAAU,8CACVY,MAAOhE,EACPkF,wBAAsB,EACtBC,qBAAsBzC,EACtB0C,iBA3MzB,4CA4MyBC,2BAA4B,SAAAC,GACxB,IAAIC,EAQJ,OALIA,EAFA,SAAW/H,EAEFgE,aAAG,gCAGHA,aAAG,gCAETgE,mCACHC,kBAAQF,EAAQD,GAChB,CAAEI,KAAM,oCAGhBC,gBAAiBnI,EACjBoI,kBAAmBpI,EACnBqI,iBAAkBtI,EAAoBC,GACtCyG,SAAU,eASQ6B,EAIAC,EAbR,yDAKN,GALM,IACNhG,MAAOiG,OADD,MACY,GADZ,MAEN7I,IAAK8I,OAFC,MAEQ,GAFR,EAGSC,EAHT,EAGNtG,cACAoD,EAJM,EAINA,GAJM,OAMNzD,EAAc,CACVpC,IAAKgJ,UAAUF,GACftG,OACUmG,EAAkBE,EAASI,QAC7B,kBACA,IAEEL,EAAgBE,EAAOG,QACzB,kBACA,IAGA,KAAOJ,GACPF,IAAoBC,GACpBpG,IAAUqG,EAEHK,iBAAOL,GAEdrG,GAIG0G,iBAAON,IAElBnG,cAAesG,EACflD,gB,6kBCzX5BU,EAAS4C,EAAT5C,KAEF6C,EAAW,CACbxG,MAAOyB,aAAG,eACVmC,KAAM6C,EACN3G,YAAa2B,aACT,6EAkBJiF,oBAAqB,qBAAG9G,OACxB+G,MAvBa,SAuBPC,EAvBO,GAuBsC,IAAD,IAA1BhH,MAAOiH,OAAmB,MAAN,GAAM,EAC9C,OAAO,EAAP,KACOD,GADP,IAEIhH,MAAOgH,EAAehH,MAAQiH,KAGtCC,OACAC,KCzCW,WACX,OAAO,oBAAC,cAAYC,QAAb,QD2CXC,4BAAkBtD,EAAD,OAAY4C,GAAaC,M","file":"menu/social-link-592f5f73.js","sourcesContent":["module.exports = wp.element;","module.exports = wp.i18n;","module.exports = wp.components;","module.exports = lodash;","module.exports = wp.blockEditor;","module.exports = wp.data;","module.exports = wp.blocks;","module.exports = regeneratorRuntime;","module.exports = wp.url;","import{createElement}from\"@wordpress/element\";/**\n * WordPress dependencies\n */import{Path,SVG}from'@wordpress/primitives';var share=createElement(SVG,{viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},createElement(Path,{d:\"M9 11.8l6.1-4.5c.1.4.4.7.9.7h2c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-2c-.6 0-1 .4-1 1v.4l-6.4 4.8c-.2-.1-.4-.2-.6-.2H6c-.6 0-1 .4-1 1v2c0 .6.4 1 1 1h2c.2 0 .4-.1.6-.2l6.4 4.8v.4c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-2c0-.6-.4-1-1-1h-2c-.5 0-.8.3-.9.7L9 12.2v-.4z\"}));export default share;","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { escape, get, head, find } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n    useSelect,\n    useDispatch,\n    withDispatch,\n    withSelect,\n} from '@wordpress/data';\nimport {\n    KeyboardShortcuts,\n    PanelBody,\n    Popover,\n    TextControl,\n    TextareaControl,\n    ToolbarButton,\n    ToolbarGroup,\n} from '@wordpress/components';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n    BlockControls,\n    InnerBlocks,\n    __experimentalUseInnerBlocksProps as useInnerBlocksProps,\n    InspectorControls,\n    RichText,\n    __experimentalLinkControl as LinkControl,\n    useBlockProps,\n} from '@wordpress/block-editor';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport {\n    Fragment,\n    useState,\n    useEffect,\n    useRef,\n    createInterpolateElement,\n} from '@wordpress/element';\nimport { placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { link as linkIcon } from '@wordpress/icons';\n\nconst isStyle = (needle, haystack) => {\n    const arr = haystack.split(' ');\n    return arr.includes(needle);\n};\n\n/**\n * A React hook to determine if it's dragging within the target element.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\n *\n * @return {boolean} Is dragging within the target element.\n */\nconst useIsDraggingWithin = elementRef => {\n    const [isDraggingWithin, setIsDraggingWithin] = useState(false);\n\n    useEffect(() => {\n        const { ownerDocument } = elementRef.current;\n\n        function handleDragStart(event) {\n            // Check the first time when the dragging starts.\n            handleDragEnter(event);\n        }\n\n        // Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\n        function handleDragEnd() {\n            setIsDraggingWithin(false);\n        }\n\n        function handleDragEnter(event) {\n            // Check if the current target is inside the item element.\n            if (elementRef.current.contains(event.target)) {\n                setIsDraggingWithin(true);\n            } else {\n                setIsDraggingWithin(false);\n            }\n        }\n\n        // Bind these events to the document to catch all drag events.\n        // Ideally, we can also use `event.relatedTarget`, but sadly that\n        // doesn't work in Safari.\n        ownerDocument.addEventListener('dragstart', handleDragStart);\n        ownerDocument.addEventListener('dragend', handleDragEnd);\n        ownerDocument.addEventListener('dragenter', handleDragEnter);\n\n        return () => {\n            ownerDocument.removeEventListener('dragstart', handleDragStart);\n            ownerDocument.removeEventListener('dragend', handleDragEnd);\n            ownerDocument.removeEventListener('dragenter', handleDragEnter);\n        };\n    }, []);\n\n    return isDraggingWithin;\n};\n\n/**\n * Given the Link block's type attribute, return the query params to give to\n * /wp/v2/search.\n *\n * @param {string} type Link block's type attribute.\n * @return {{ type?: string, subtype?: string }} Search query params.\n */\nfunction getSuggestionsQuery(type) {\n    switch (type) {\n        case 'post':\n        case 'page':\n            return { type: 'post', subtype: type };\n        case 'topic':\n            return { type: 'term', subtype: 'topic' };\n        case 'formats':\n            return { type: 'term', subtype: 'formats' };\n        case 'programs':\n            return { type: 'term', subtype: 'programs' };\n        default:\n            return {};\n    }\n}\n\nfunction NavigationLinkEdit({\n    attributes,\n    context,\n    isSelected,\n    isImmediateParentOfSelectedBlock,\n    setAttributes,\n    insertLinkBlock,\n    userCanCreatePages = false,\n    userCanCreatePosts = false,\n    insertBlocksAfter,\n    mergeBlocks,\n    onReplace,\n}) {\n    const {\n        label,\n        type,\n        opensInNewTab,\n        url,\n        description,\n        rel,\n        title,\n    } = attributes;\n    const link = {\n        url,\n        opensInNewTab,\n    };\n    const { saveEntityRecord } = useDispatch('core');\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n    const listItemRef = useRef(null);\n    const isDraggingWithin = useIsDraggingWithin(listItemRef);\n    const itemLabelPlaceholder = __('Add link…');\n    const ref = useRef();\n\n    const isDraggingBlocks = useSelect(\n        select => select('core/block-editor').isDraggingBlocks(),\n        [],\n    );\n\n    // Show the LinkControl on mount if the URL is empty\n    // ( When adding a new menu item)\n    // This can't be done in the useState call because it conflicts\n    // with the autofocus behavior of the BlockListBlock component.\n    useEffect(() => {\n        if (!url) {\n            setIsLinkOpen(true);\n        }\n    }, []);\n\n    /**\n     * The hook shouldn't be necessary but due to a focus loss happening\n     * when selecting a suggestion in the link popover, we force close on block unselection.\n     */\n    useEffect(() => {\n        if (!isSelected) {\n            setIsLinkOpen(false);\n        }\n    }, [isSelected]);\n\n    // If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\n    useEffect(() => {\n        if (isLinkOpen && url) {\n            // Does this look like a URL and have something TLD-ish?\n            if (isURL(prependHTTP(label)) && /^.+\\.[a-z]+/.test(label)) {\n                // Focus and select the label text.\n                selectLabelText();\n            } else {\n                // Focus it (but do not select).\n                placeCaretAtHorizontalEdge(ref.current, true);\n            }\n        }\n    }, [url]);\n\n    /**\n     * Focus the Link label text and select it.\n     */\n    function selectLabelText() {\n        ref.current.focus();\n        const { ownerDocument } = ref.current;\n        const { defaultView } = ownerDocument;\n        const selection = defaultView.getSelection();\n        const range = ownerDocument.createRange();\n        // Get the range of the current ref contents so we can add this range to the selection.\n        range.selectNodeContents(ref.current);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n\n    let userCanCreate = false;\n    if (!type || 'page' === type) {\n        userCanCreate = userCanCreatePages;\n    } else if ('post' === type) {\n        userCanCreate = userCanCreatePosts;\n    }\n\n    async function handleCreate(pageTitle) {\n        const postType = type || 'page';\n\n        const page = await saveEntityRecord('postType', postType, {\n            title: pageTitle,\n            status: 'publish',\n        });\n\n        return {\n            id: page.id,\n            postType,\n            title: page.title.rendered,\n            url: page.link,\n        };\n    }\n\n    const blockProps = useBlockProps({\n        ref: listItemRef,\n        className: classnames('item', {\n            'is-editing':\n                isSelected &&\n                // Don't show the element as editing while dragging.\n                !isDraggingBlocks,\n            // Don't select the element while dragging.\n            'is-selected': isSelected && !isDraggingBlocks,\n            'is-dragging-within': isDraggingWithin,\n            'has-link': !!url,\n        }),\n    });\n\n    return (\n        <Fragment>\n            <BlockControls>\n                <ToolbarGroup>\n                    <KeyboardShortcuts\n                        bindGlobal\n                        shortcuts={{\n                            [rawShortcut.primary('k')]: () =>\n                                setIsLinkOpen(true),\n                        }}\n                    />\n                    <ToolbarButton\n                        name=\"link\"\n                        icon={linkIcon}\n                        title={__('Link')}\n                        shortcut={displayShortcut.primary('k')}\n                        onClick={() => setIsLinkOpen(true)}\n                    />\n                </ToolbarGroup>\n            </BlockControls>\n\n            <InspectorControls>\n                <PanelBody title={__('Link settings')}>\n                    <TextareaControl\n                        value={description || ''}\n                        onChange={descriptionValue => {\n                            setAttributes({ description: descriptionValue });\n                        }}\n                        label={__('Description')}\n                        help={__(\n                            'The description will be displayed in the menu if the current theme supports it.',\n                        )}\n                    />\n                    <TextControl\n                        value={title || ''}\n                        onChange={titleValue => {\n                            setAttributes({ title: titleValue });\n                        }}\n                        label={__('Link title')}\n                        autoComplete=\"off\"\n                    />\n                    <TextControl\n                        value={rel || ''}\n                        onChange={relValue => {\n                            setAttributes({ rel: relValue });\n                        }}\n                        label={__('Link rel')}\n                        autoComplete=\"off\"\n                    />\n                </PanelBody>\n            </InspectorControls>\n\n            <div {...blockProps}>\n                <RichText\n                    ref={ref}\n                    identifier=\"label\"\n                    className={\n                        'is-style-text' === context['prc-block/menu']\n                            ? 'ui basic button'\n                            : ''\n                    }\n                    value={label}\n                    onChange={labelValue =>\n                        setAttributes({ label: labelValue })\n                    }\n                    onMerge={mergeBlocks}\n                    onReplace={onReplace}\n                    __unstableOnSplitAtEnd={() =>\n                        insertBlocksAfter(createBlock('prc-block/menu-link'))\n                    }\n                    aria-label={__('Navigation link text')}\n                    placeholder={itemLabelPlaceholder}\n                    keepPlaceholderOnFocus\n                    withoutInteractiveFormatting\n                    allowedFormats={[\n                        'core/bold',\n                        'core/italic',\n                        'core/image',\n                        'core/strikethrough',\n                    ]}\n                />\n                {isLinkOpen && (\n                    <Popover\n                        position=\"bottom center\"\n                        onClose={() => setIsLinkOpen(false)}\n                    >\n                        <LinkControl\n                            className=\"wp-block-navigation-link__inline-link-input\"\n                            value={link}\n                            showInitialSuggestions\n                            withCreateSuggestion={userCanCreate}\n                            createSuggestion={handleCreate}\n                            createSuggestionButtonText={searchTerm => {\n                                let format;\n                                if ('post' === type) {\n                                    /* translators: %s: search term. */\n                                    format = __('Create post: <mark>%s</mark>');\n                                } else {\n                                    /* translators: %s: search term. */\n                                    format = __('Create page: <mark>%s</mark>');\n                                }\n                                return createInterpolateElement(\n                                    sprintf(format, searchTerm),\n                                    { mark: <mark /> },\n                                );\n                            }}\n                            noDirectEntry={!!type}\n                            noURLSuggestion={!!type}\n                            suggestionsQuery={getSuggestionsQuery(type)}\n                            onChange={({\n                                title: newTitle = '',\n                                url: newURL = '',\n                                opensInNewTab: newOpensInNewTab,\n                                id,\n                            } = {}) =>\n                                setAttributes({\n                                    url: encodeURI(newURL),\n                                    label: (() => {\n                                        const normalizedTitle = newTitle.replace(\n                                            /http(s?):\\/\\//gi,\n                                            '',\n                                        );\n                                        const normalizedURL = newURL.replace(\n                                            /http(s?):\\/\\//gi,\n                                            '',\n                                        );\n                                        if (\n                                            '' !== newTitle &&\n                                            normalizedTitle !== normalizedURL &&\n                                            label !== newTitle\n                                        ) {\n                                            return escape(newTitle);\n                                        }\n                                        if (label) {\n                                            return label;\n                                        }\n                                        // If there's no label, add the URL.\n                                        return escape(normalizedURL);\n                                    })(),\n                                    opensInNewTab: newOpensInNewTab,\n                                    id,\n                                })\n                            }\n                        />\n                    </Popover>\n                )}\n            </div>\n        </Fragment>\n    );\n}\n\nexport default compose([\n    withSelect((select, ownProps) => {\n        const {\n            getBlockAttributes,\n            getClientIdsOfDescendants,\n            hasSelectedInnerBlock,\n            getBlockParentsByBlockName,\n            getSelectedBlockClientId,\n            getSettings,\n        } = select('core/block-editor');\n        const { clientId } = ownProps;\n        const hasDescendants = !!getClientIdsOfDescendants([clientId]).length;\n\n        const isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n            clientId,\n            false,\n        );\n        const selectedBlockId = getSelectedBlockClientId();\n        const selectedBlockHasDescendants = !!getClientIdsOfDescendants([\n            selectedBlockId,\n        ])?.length;\n\n        return {\n            isImmediateParentOfSelectedBlock,\n            hasDescendants,\n            selectedBlockHasDescendants,\n            userCanCreatePages: select('core').canUser('create', 'pages'),\n            userCanCreatePosts: select('core').canUser('create', 'posts'),\n        };\n    }),\n    withDispatch((dispatch, ownProps, registry) => {\n        return {\n            insertLinkBlock() {\n                const { clientId } = ownProps;\n\n                const { insertBlock } = dispatch('core/block-editor');\n\n                const { getClientIdsOfDescendants } = registry.select(\n                    'core/block-editor',\n                );\n                const navItems = getClientIdsOfDescendants([clientId]);\n                const insertionPoint = navItems.length ? navItems.length : 0;\n\n                const blockToInsert = createBlock('prc-block/menu-link');\n\n                insertBlock(blockToInsert, insertionPoint, clientId);\n            },\n        };\n    }),\n])(NavigationLinkEdit);\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { share as shareIcon } from '@wordpress/icons';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\n\nconst { name } = metadata;\n\nconst settings = {\n    title: __('Social Link'),\n    icon: shareIcon,\n    description: __(\n        'Add a link to a social network to a profile or to share the current post.',\n    ),\n    // variations: [\n    //     {\n    //         name: 'link',\n    //         isDefault: true,\n    //         title: __('Link'),\n    //         description: __('A link to a URL.'),\n    //         attributes: {},\n    //     },\n    //     {\n    //         name: 'post',\n    //         icon: postIcon,\n    //         title: __('Post Link'),\n    //         description: __('A link to a post.'),\n    //         attributes: { type: 'post' },\n    //     },\n    // ],\n    __experimentalLabel: ({ label }) => label,\n    merge(leftAttributes, { label: rightLabel = '' }) {\n        return {\n            ...leftAttributes,\n            label: leftAttributes.label + rightLabel,\n        };\n    },\n    edit,\n    save,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n","/**\n * WordPress dependencies\n */\nimport { InnerBlocks } from '@wordpress/block-editor';\n\nexport default function save() {\n    return <InnerBlocks.Content />;\n}\n"],"sourceRoot":""}