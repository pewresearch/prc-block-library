/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibrarymenuJsonp=window.wpackioprcBlocksLibrarymenuJsonp||[]).push([[4],[function(e,t){e.exports=wp.element},function(e,t){e.exports=wp.i18n},function(e,t){e.exports=wp.components},function(e,t){e.exports=lodash},,function(e,t){e.exports=wp.blockEditor},function(e,t){e.exports=wp.data},function(e,t){e.exports=wp.blocks},,,,,,,function(e,t){e.exports=regeneratorRuntime},function(e,t){e.exports=wp.url},,,,,,,,,,function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/social-link","category":"layout","attributes":{"label":{"type":"string"},"description":{"type":"string"},"id":{"type":"number"},"type":{"type":"string"},"url":{"type":"string"},"title":{"type":"string"}},"usesContext":["prc-block/menu"],"supports":{"reusable":false,"html":false}}')},,,,,,function(e,t,n){n(19),e.exports=n(34)},,,function(e,t,n){"use strict";n.r(t);var r=n(4),c=n(1),o=n(0),a=n(23),i=Object(o.createElement)(a.b,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(o.createElement)(a.a,{d:"M9 11.8l6.1-4.5c.1.4.4.7.9.7h2c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-2c-.6 0-1 .4-1 1v.4l-6.4 4.8c-.2-.1-.4-.2-.6-.2H6c-.6 0-1 .4-1 1v2c0 .6.4 1 1 1h2c.2 0 .4-.1.6-.2l6.4 4.8v.4c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-2c0-.6-.4-1-1-1h-2c-.5 0-.8.3-.9.7L9 12.2v-.4z"})),l=n(7),s=n(25),u=n(14),p=n.n(u),b=n(20),d=n(9),f=n(8),g=n.n(f),m=n(3),k=n(29),O=n(6),v=n(2),h=n(16),j=n(5),y=n(15),w=n(36),E=n(35);function C(e){switch(e){case"post":case"page":return{type:"post",subtype:e};case"topic":return{type:"term",subtype:"topic"};case"formats":return{type:"term",subtype:"formats"};case"programs":return{type:"term",subtype:"programs"};default:return{}}}var _=Object(k.a)([Object(O.withSelect)((function(e,t){var n,r=e("core/block-editor"),c=(r.getBlockAttributes,r.getClientIdsOfDescendants),o=r.hasSelectedInnerBlock,a=(r.getBlockParentsByBlockName,r.getSelectedBlockClientId),i=(r.getSettings,t.clientId),l=!!c([i]).length;return{isImmediateParentOfSelectedBlock:o(i,!1),hasDescendants:l,selectedBlockHasDescendants:!!(null===(n=c([a()]))||void 0===n?void 0:n.length),userCanCreatePages:e("core").canUser("create","pages"),userCanCreatePosts:e("core").canUser("create","posts")}})),Object(O.withDispatch)((function(e,t,n){return{insertLinkBlock:function(){var r=t.clientId,c=e("core/block-editor").insertBlock,o=(0,n.select("core/block-editor").getClientIdsOfDescendants)([r]),a=o.length?o.length:0;c(Object(l.createBlock)("prc-block/menu-link"),a,r)}}}))])((function(e){var t=e.attributes,n=e.context,a=e.isSelected,i=(e.isImmediateParentOfSelectedBlock,e.setAttributes),s=(e.insertLinkBlock,e.userCanCreatePages),u=void 0!==s&&s,f=e.userCanCreatePosts,k=void 0!==f&&f,_=e.insertBlocksAfter,R=e.mergeBlocks,B=e.onReplace,x=t.label,S=t.type,L=t.opensInNewTab,P=t.url,I=t.description,T=t.rel,D=t.title,N={url:P,opensInNewTab:L},A=Object(O.useDispatch)("core").saveEntityRecord,U=Object(o.useState)(!1),F=Object(d.a)(U,2),H=F[0],J=F[1],V=Object(o.useRef)(null),z=function(e){var t=Object(o.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1];return Object(o.useEffect)((function(){var t=e.current.ownerDocument;function n(e){o(e)}function r(){c(!1)}function o(t){e.current.contains(t.target)?c(!0):c(!1)}return t.addEventListener("dragstart",n),t.addEventListener("dragend",r),t.addEventListener("dragenter",o),function(){t.removeEventListener("dragstart",n),t.removeEventListener("dragend",r),t.removeEventListener("dragenter",o)}}),[]),r}(V),G=Object(c.__)("Add linkâ€¦"),M=Object(o.useRef)(),K=Object(O.useSelect)((function(e){return e("core/block-editor").isDraggingBlocks()}),[]);Object(o.useEffect)((function(){P||J(!0)}),[]),Object(o.useEffect)((function(){a||J(!1)}),[a]),Object(o.useEffect)((function(){H&&P&&(Object(y.isURL)(Object(y.prependHTTP)(x))&&/^.+\.[a-z]+/.test(x)?function(){M.current.focus();var e=M.current.ownerDocument,t=e.defaultView.getSelection(),n=e.createRange();n.selectNodeContents(M.current),t.removeAllRanges(),t.addRange(n)}():Object(w.a)(M.current,!0))}),[P]);var Q=!1;function q(){return(q=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S||"page",e.next=3,A("postType",n,{title:t,status:"publish"});case 3:return r=e.sent,e.abrupt("return",{id:r.id,postType:n,title:r.title.rendered,url:r.link});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}S&&"page"!==S?"post"===S&&(Q=k):Q=u;var W=Object(j.useBlockProps)({ref:V,className:g()("item",{"is-editing":a&&!K,"is-selected":a&&!K,"is-dragging-within":z,"has-link":!!P})});return React.createElement(o.Fragment,null,React.createElement(j.BlockControls,null,React.createElement(v.ToolbarGroup,null,React.createElement(v.KeyboardShortcuts,{bindGlobal:!0,shortcuts:Object(r.a)({},h.b.primary("k"),(function(){return J(!0)}))}),React.createElement(v.ToolbarButton,{name:"link",icon:E.a,title:Object(c.__)("Link"),shortcut:h.a.primary("k"),onClick:function(){return J(!0)}}))),React.createElement(j.InspectorControls,null,React.createElement(v.PanelBody,{title:Object(c.__)("Link settings")},React.createElement(v.TextareaControl,{value:I||"",onChange:function(e){i({description:e})},label:Object(c.__)("Description"),help:Object(c.__)("The description will be displayed in the menu if the current theme supports it.")}),React.createElement(v.TextControl,{value:D||"",onChange:function(e){i({title:e})},label:Object(c.__)("Link title"),autoComplete:"off"}),React.createElement(v.TextControl,{value:T||"",onChange:function(e){i({rel:e})},label:Object(c.__)("Link rel"),autoComplete:"off"}))),React.createElement("div",W,React.createElement(j.RichText,{ref:M,identifier:"label",className:"is-style-text"===n["prc-block/menu"]?"ui basic button":"",value:x,onChange:function(e){return i({label:e})},onMerge:R,onReplace:B,__unstableOnSplitAtEnd:function(){return _(Object(l.createBlock)("prc-block/menu-link"))},"aria-label":Object(c.__)("Navigation link text"),placeholder:G,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),H&&React.createElement(v.Popover,{position:"bottom center",onClose:function(){return J(!1)}},React.createElement(j.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:N,showInitialSuggestions:!0,withCreateSuggestion:Q,createSuggestion:function(e){return q.apply(this,arguments)},createSuggestionButtonText:function(e){var t;return t="post"===S?Object(c.__)("Create post: <mark>%s</mark>"):Object(c.__)("Create page: <mark>%s</mark>"),Object(o.createInterpolateElement)(Object(c.sprintf)(t,e),{mark:React.createElement("mark",null)})},noDirectEntry:!!S,noURLSuggestion:!!S,suggestionsQuery:C(S),onChange:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.title,c=void 0===r?"":r,o=n.url,a=void 0===o?"":o,l=n.opensInNewTab,s=n.id;return i({url:encodeURI(a),label:(e=c.replace(/http(s?):\/\//gi,""),t=a.replace(/http(s?):\/\//gi,""),""!==c&&e!==t&&x!==c?Object(m.escape)(c):x||Object(m.escape)(t)),opensInNewTab:l,id:s})}}))))}));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=s.name,S={title:Object(c.__)("Social Link"),icon:i,description:Object(c.__)("Add a link to a social network to a profile or to share the current post."),__experimentalLabel:function(e){return e.label},merge:function(e,t){var n=t.label,r=void 0===n?"":n;return B(B({},e),{},{label:e.label+r})},edit:_,save:function(){return React.createElement(j.InnerBlocks.Content,null)}};Object(l.registerBlockType)(x,B(B({},s),S))}],[[31,0,1]]]);
//# sourceMappingURL=social-link-592f5f73.js.map