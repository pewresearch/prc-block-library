/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibrarypostsJsonp=window.wpackioprcBlocksLibrarypostsJsonp||[]).push([[3],{0:function(t,e){t.exports=React},126:function(t,e){t.exports=wp.blocks},144:function(t,e,a){a(93),t.exports=a(266)},24:function(t,e,a){"use strict";a(50);var r=a(51),o=a.n(r);e.a=function(t,e,a,r){return console.log("format"),console.log(e),console.log("program"),console.log(a),new Promise((function(s,n){var c=[];o()({path:"/prc-api/v2/blocks/helpers/get-posts/?perPage="+t+"&format="+e+"&program="+a+"&labelTaxonomy="+r}).then((function(e){for(var a=0;a<t;a++)c.push({id:e[a].id,title:e[a].title,excerpt:e[a].excerpt,date:e[a].date,link:e[a].link,label:e[a].label,image:e[a].image});s(c)}))}))}},26:function(t,e,a){"use strict";var r=a(11),o=a(23),s=a(12),n=a(13),c=a(14),i=a(9),l=a(44),u=function(t){function e(t){return Object(r.a)(this,e),Object(s.a)(this,Object(n.a)(e).call(this,t))}return Object(c.a)(e,t),Object(o.a)(e,[{key:"posts",value:function(t){t.loaded,t.setState,t.clientID;var e=t.data,a=t.disableLink;return React.createElement(l.a,{relaxed:"very",link:!0,divided:!0},!1!==e&&e.map((function(t,e){return!0===a?React.createElement(l.a.Item,null,React.createElement("span",{className:"meta date"},t.date),React.createElement(i.RawHTML,null,t.title)):React.createElement(l.a.Item,null,React.createElement("span",{className:"meta date"},t.date),React.createElement("a",{href:t.link},React.createElement(i.RawHTML,null,t.title)))})))}},{key:"render",value:function(){var t=this.posts;return React.createElement(i.Fragment,null,React.createElement(t,{data:this.props.posts,disableLink:this.props.disableLink}))}}]),e}(i.Component);e.a=u},266:function(t,e,a){"use strict";a.r(e);var r=a(11),o=a(12),s=a(13),n=a(10),c=a(14),i=a(15),l=a(30),u=a(126),p=a(49),m=a(31),b=a(9),M=a(24),j=function(t,e){console.log("getting terms for "+t);var a=new wp.api.collections[t];return void 0!==a&&new Promise((function(t,r){var o=[];a.fetch({data:{hide_empty:!1,per_page:25}}).then((function(a){for(var r=0;r<a.length;r++){var s={label:a[r].name};s.value=!0===e?a[r].id:a[r].name,o.push(s)}t(o)}))}))},g=a(26),d=a(41),y=a(40),N=function(t){function e(t){var a;return Object(r.a)(this,e),a=Object(o.a)(this,Object(s.a)(e).call(this,t)),Object(i.a)(Object(n.a)(a),"componentDidMount",(function(){var t=a.setState,e=a.props.setAttributes;j("Formats",!0).then((function(e){t({formats:e})})),j("Programs",!0).then((function(e){var a=e;a.push({value:0,label:"All"}),t({programs:a})})),!1===a.props.attributes.posts&&(Object(M.a)(a.props.attributes.per_page,a.props.attributes.format,a.props.attributes.program,a.props.attributes.taxonomyToDisplay).then((function(t){e({posts:t})})),!0===a.props.className.includes("is-style-fact-tank")&&(e({format:10818955}),Object(M.a)(a.props.attributes.per_page,a.props.attributes.format,10818955,a.props.attributes.taxonomyToDisplay).then((function(t){e({posts:t})}))))})),Object(i.a)(Object(n.a)(a),"insertStoryBlock",(function(t,e,a){console.log("Insert Story Block");var r=window.wp.data.select("core/block-editor").getBlockHierarchyRootClientId(clientID),o=window.wp.data.select("core/block-editor").getBlockOrder(r),s=window.wp.data.select("core/block-editor").getBlock(o[1]);console.log(o[1]),console.log(s),console.log(r);var n=window.wp.blocks.createBlock("prc-block/story-item",{title:e.title,image:e.image,excerpt:e.excerpt,link:e.link,label:e.label,date:e.date,extra:"",postID:e.id,emphasis:!1,isChartArt:!1,imageSlot:"top",horizontal:!1,stacked:!0,enableHeader:!0,enableExcerpt:!1,enableExtra:!1,enableProgramsTaxonomy:!1,headerSize:"normal"});window.wp.data.dispatch("core/block-editor").insertBlocks(n,a,t)})),Object(i.a)(Object(n.a)(a),"render",(function(){var t=a.props.setAttributes;return React.createElement(p.InspectorControls,null,React.createElement(m.PanelBody,{title:Object(l.__)("Posts Block Options")},React.createElement(m.TextControl,{label:"Title",value:a.props.attributes.title,onChange:function(e){return t({title:e})}}),React.createElement(m.TextControl,{label:"Number of Posts",value:Number(a.props.attributes.per_page),onChange:function(e){t({per_page:Number(e)}),Object(M.a)(e,a.props.attributes.format,a.props.attributes.program,a.props.attributes.taxonomyToDisplay).then((function(e){t({posts:e})}))}}),React.createElement(m.SelectControl,{label:"Format",value:a.props.attributes.format,options:a.state.formats,onChange:function(e){t({format:Number(e)}),Object(M.a)(a.props.attributes.per_page,e,a.props.attributes.program,a.props.attributes.taxonomyToDisplay).then((function(e){t({posts:e})}))}}),React.createElement(m.SelectControl,{label:"Research Program",value:a.props.attributes.program,options:a.state.programs,onChange:function(e){t({program:Number(e)}),Object(M.a)(a.props.attributes.per_page,a.props.attributes.format,e,a.props.attributes.taxonomyToDisplay).then((function(e){t({posts:e})}))}}),React.createElement(m.SelectControl,{label:"Label Taxonomy",value:a.props.attributes.taxonomyToDisplay,options:[{label:"Formats",value:"formats"},{label:"Programs",value:"programs"}],onChange:function(e){t({taxonomyToDisplay:e}),Object(M.a)(a.props.attributes.per_page,a.props.attributes.format,a.props.attributes.program,e).then((function(e){t({posts:e})}))}}),React.createElement(m.ToggleControl,{label:"Dynamic Mode",help:a.props.attributes.dynamic?"Updates posts in real time, every 5 minutes.":"Posts are saved statically (will not update in real time).",checked:a.props.attributes.dynamic,onChange:function(){return t({dynamic:!a.props.attributes.dynamic})}}),React.createElement("strong",null,"Background Color:"),React.createElement("br",null),React.createElement(m.ColorPalette,{colors:[{name:"White",color:"#fff"},{name:"Oatmeal",color:"#f8f9f5"}],value:a.props.attributes.backgroundColor,onChange:function(e){return t({backgroundColor:e})}})))})),a.state={formats:!1,programs:!1},a.setState=a.setState.bind(Object(n.a)(a)),a}return Object(c.a)(e,t),e}(b.Component);Object(u.registerBlockType)("prc-block/posts",{title:Object(l.__)("Posts Block"),icon:"align-left",category:"widgets",keywords:[Object(l.__)("prc"),Object(l.__)("fact tank"),Object(l.__)("posts listing"),Object(l.__)("posts"),Object(l.__)("posts widget"),Object(l.__)("publication listing")],styles:[{name:"list",label:"Simple List",isDefault:!0},{name:"fact-tank",label:"Fact Tank"},{name:"columns",label:"Columns"}],supports:{html:!1},attributes:{title:{type:"string",default:"Title"},moreLink:{type:"string",default:""},format:{type:"integer",default:10818957},program:{type:"integer",default:0},per_page:{type:"integer",default:5},backgroundColor:{tyle:"string",default:"#fff"},dynamic:{type:"boolean",default:!1},taxonomyToDisplay:{type:"string",default:"formats"},posts:{type:"array",default:!1}},edit:function(t){var e=t.attributes,a=t.attributes.className,r=!1;void 0!==a&&a.includes("is-style-fact-tank")&&(r=!0);var o=!1;(void 0===a||a.includes("is-style-list"))&&(o=!0);var s=!1;return void 0!==a&&a.includes("is-style-columns")&&(s=!0),e.className=a,!0===t.isSelected&&(e.setAttributes=t.setAttributes),e.clientID=t.clientId,e.disableLink=!0,React.createElement(b.Fragment,null,!0===t.isSelected&&React.createElement(N,t),React.createElement("div",{className:e.className},!0===r&&React.createElement(d.a,e),!0===o&&React.createElement(g.a,e),!0===s&&React.createElement(y.a,e)))},save:function(t){var e=t.attributes,a=t.attributes.className,r=!1;void 0!==a&&a.includes("is-style-fact-tank")&&(r=!0);var o=!1;void 0!==a&&a.includes("is-style-list")&&(o=!0);var s=!1;return void 0!==a&&a.includes("is-style-columns")&&(s=!0),e.className=a,e.disableLink=!1,React.createElement("div",{className:e.className},!0!==t.attributes.dynamic&&!0===r&&React.createElement(d.a,e),!0!==t.attributes.dynamic&&!0===o&&React.createElement(g.a,e),!0!==t.attributes.dynamic&&!0===s&&React.createElement(y.a,e),!0===t.attributes.dynamic&&React.createElement("div",{className:"js-react-posts-block","data-title":t.attributes.title,"data-format":t.attributes.format,"data-program":t.attributes.program,"data-number":t.attributes.per_page,"data-background":t.attributes.backgroundColor,"data-style":a}))}})},30:function(t,e){t.exports=wp.i18n},31:function(t,e){t.exports=wp.components},39:function(t,e){t.exports=ReactDOM},40:function(t,e,a){"use strict";var r=a(11),o=a(12),s=a(13),n=a(10),c=a(14),i=a(15),l=a(9),u=(a(49),a(45)),p=function(t){function e(t){var a;return Object(r.a)(this,e),a=Object(o.a)(this,Object(s.a)(e).call(this,t)),Object(i.a)(Object(n.a)(a),"componentDidMount",(function(){console.log("Columns Mounted"),console.log(a.props)})),Object(i.a)(Object(n.a)(a),"render",(function(){var t=a.props.posts;return React.createElement("div",{style:{marginBottom:"2rem"}},React.createElement("div",{className:"ui sub header",style:{marginBottom:"1rem"}},a.props.title),React.createElement(u.a,{divided:!0,padded:!0,stackable:!0,columns:"equal",style:{backgroundColor:a.props.backgroundColor}},React.createElement(u.a.Row,null,!1!==t&&t.map((function(t,e){var a={attributes:{title:t.title,image:t.image,excerpt:t.excerpt,link:t.link,label:t.label,date:t.date,extra:"",postID:t.id,emphasis:!1,isChartArt:!1,imageSlot:"top",horizontal:!1,stacked:!0,enableHeader:!0,enableExcerpt:!1,enableExtra:!1,enableProgramsTaxonomy:!1,headerSize:"normal",classNames:"is-style-top"}};return React.createElement(u.a.Column,null,React.createElement(StoryItem,a))})))))})),a.state={defaultOptions:{emphasis:!1,enableHeader:!0,enableExcerpt:!0,headerSize:"small"}},a}return Object(c.a)(e,t),e}(l.Component);e.a=p},41:function(t,e,a){"use strict";var r=a(11),o=a(23),s=a(12),n=a(13),c=a(10),i=a(14),l=a(9),u=a(53),p=a(26),m=a(0),b=a.n(m);b.a.createElement("style",null,".fact-tank-logo_svg__cls-2{fill:#ddd9c7}.fact-tank-logo_svg__cls-3{fill:#808184}.fact-tank-logo_svg__cls-4{fill:#231f20}");var M=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(s.a)(this,Object(n.a)(e).call(this,t))).svgHeader=a.svgHeader.bind(Object(c.a)(a)),a}return Object(i.a)(e,t),Object(o.a)(e,[{key:"svgHeader",value:function(t){var e=t.svg,a=t.width,r=a/5;return React.createElement("img",{style:{margin:"auto",display:"block"},src:e,width:a+"px",height:r+"px"})}},{key:"render",value:function(){var t=this.svgHeader,e=Object(u.addQueryArgs)(window.siteURL,{format:"fact-tank"});return React.createElement("div",{id:"js-fact-tank-widget"},React.createElement(t,{svg:"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMjUgNDAiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDpub25lO3N0cm9rZTojZWE5ZTJjO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS13aWR0aDo0LjcycHg7fS5jbHMtMntmaWxsOiNkZGQ5Yzc7fS5jbHMtM3tmaWxsOiM4MDgxODQ7fS5jbHMtNHtmaWxsOiMyMzFmMjA7fS5jbHMtNXtmaWxsOiNlYTllMmM7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5GYWN0VGFuay1sb2dvczwvdGl0bGU+PHBvbHlsaW5lIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIxODUuMjIgMjAuNjkgMTk0LjE1IDEyLjUyIDIwMy4wMyAyMi40MiAyMTkuNjIgNi42MSIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxOTQuMTUgMTkuMjMgMTk0LjE1IDQwLjA4IDIwMC43IDQwLjA4IDIwMC43IDI2LjQ5IDE5NC4xNSAxOS4yMyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIyMDIuOTMgMjguNTEgMjAyLjkzIDQwLjA4IDIwOS40OCA0MC4wOCAyMDkuNDggMjIuMjUgMjAyLjkzIDI4LjUxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjIxMS43MSAyMC4xMiAyMTEuNzEgNDAuMDggMjE4LjI2IDQwLjA4IDIxOC4yNiAxMy44NyAyMTEuNzEgMjAuMTIiLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMTg1LjM3IDI2LjU2IDE4NS4zNyA0MC4wOCAxOTEuOTIgNDAuMDggMTkxLjkyIDIwLjU3IDE4NS4zNyAyNi41NiIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTI3Ljg4LDMuODN2Ni4yM0gxNC4zN1YxOS41SDI0Ljc5djYuMjRIMTQuMzdWNDBINi40NlYzLjgzWiIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTQzLjQ4LDMuODMsNTMuNzgsNDBINDUuNjVsLTEuNzktNy40M0gzMy42NkwzMS45Myw0MEgyNC42MUwzNS40NSwzLjgzWm0tNC43Nyw3Ljc1TDM1LjE4LDI2LjM0aDcuMTZaIi8+PHBhdGggY2xhc3M9ImNscy0zIiBkPSJNNzksMjcuMzFjLS42NSw4LjE5LTUuNDIsMTMuMjMtMTIuNjQsMTMuMjMtOC42OCwwLTEzLjYxLTYuNzgtMTMuNjEtMTguNlM1Ny42MywzLjI4LDY2LjQyLDMuMjhjNC41LDAsNy45MiwxLjc5LDEwLDUuMjcsMS40MiwyLjI3LDIsNC42MSwyLjM0LDguNzNsLTcuMjcuNTRjLS4yMi0zLjE1LS40My00LjM5LTEuMTQtNS42NGE0LjI4LDQuMjgsMCwwLDAtMy45LTIuNDRjLTMuODYsMC01LjQzLDMuNzQtNS40MywxMi44LDAsOC4xOSwxLjU3LDExLjU1LDUuNDMsMTEuNTUsMi44NywwLDQuNS0yLjI4LDUuMDktNy4yN1oiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iOTEuNTEgNDAgOTEuNTEgMy44MyA3OC45NSAzLjgzIDc4Ljk1IDEwLjYxIDg2LjE2IDEwLjYxIDg2LjE2IDQwIDkxLjUxIDQwIi8+PHBhdGggY2xhc3M9ImNscy00IiBkPSJNMTIyLDMuODMsMTMyLjI3LDQwaC04LjEzbC0xLjc5LTcuNDNoLTEwLjJMMTEwLjQyLDQwSDEwMy4xTDExMy45NCwzLjgzWm0tNC43Nyw3Ljc1LTMuNTMsMTQuNzZoNy4xNloiLz48cGF0aCBjbGFzcz0iY2xzLTQiIGQ9Ik0xNDMuODIsMy44MywxNTMsMjYuMjhWMy44M2g2LjE4VjQwaC03LjFsLTExLTI2LjE5VjQwSDEzNVYzLjgzWiIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTE3MC45NCwzLjgzVjE4LjlsOC43OS0xNS4wN2g4TDE3OC43LDE3LjExLDE4OC41MSw0MGgtOC4xOGwtNi40LTE2LjY1LTMsNC40VjQwSDE2M1YzLjgzWiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNCIgcG9pbnRzPSI5Mi45MiAzLjgzIDkyLjkyIDQwIDk4LjE3IDQwIDk4LjE3IDEwLjYxIDEwNS41NCAxMC42MSAxMDUuNTQgMy44MyA5Mi45MiAzLjgzIi8+PHBvbHlnb24gY2xhc3M9ImNscy01IiBwb2ludHM9IjE4My42NiAxOC45NyAxODYuMTkgMjMuMDcgMTg3LjM5IDIxLjkxIDE4My42NiAxOC45NyIvPjwvc3ZnPg==",width:"200"}),React.createElement("div",{class:"ui segment inverted beige",style:{borderTop:"1px solid #b2b3a5"}},React.createElement("p",{className:"tagline"},"NEWS IN THE NUMBERS"),React.createElement(p.a,this.props),React.createElement("a",{href:e,className:"read-more"},"More From Fact Tank")))}}]),e}(l.Component);e.a=M},49:function(t,e){t.exports=wp.blockEditor},50:function(t,e){t.exports=moment},51:function(t,e){t.exports=wp.apiFetch},53:function(t,e){t.exports=wp.url},9:function(t,e){t.exports=wp.element}},[[144,0,1]]]);
//# sourceMappingURL=main-7705cbf7.js.map