{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.blocks\"","webpack:///external \"wp.blockEditor\"","webpack:///external \"wp.i18n\"","webpack:///./src/posts/styles/list.js","webpack:///./src/posts/index.js","webpack:///external \"wp.element\"","webpack:///external \"wp.components\"","webpack:///external \"ReactDOM\""],"names":["module","exports","React","wp","blocks","blockEditor","i18n","PostsList","props","data","disableLink","console","log","List","relaxed","divided","map","item","index","Item","className","date","title","href","link","Posts","this","posts","Component","EditSidebar","getPosts","attributes","per_page","format","perPage","program","setAttributes","collection","api","collections","Stub","args","Number","programs","fetch","then","length","push","rendered","dateString","moment","__","label","value","onChange","options","columns","bind","registerBlockType","icon","category","keywords","styles","name","isDefault","supports","html","type","default","static","edit","isSelected","save","element","components","ReactDOM"],"mappings":"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","file":"posts/main-e9ec0415.js","sourcesContent":["module.exports = React;","module.exports = wp.blocks;","module.exports = wp.blockEditor;","module.exports = wp.i18n;","\nimport { Component, Fragment, RawHTML } from '@wordpress/element';\nimport { Item, List } from 'semantic-ui-react';\nimport classNames from 'classnames/bind';\n\nclass PostsList extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\tposts({data, disableLink}){\n\t\tconsole.log(data);\n\t\treturn(\n\t\t\t<List relaxed divided>\n\t\t\t{ false !== data && data.map((item, index) => {\n\t\t\t\tif ( true === disableLink ) {\n\t\t\t\t\treturn <List.Item><span className=\"meta date\">{item.date}</span><RawHTML>{item.title}</RawHTML></List.Item>\n\t\t\t\t} else {\n\t\t\t\t\treturn <List.Item><span className=\"meta date\">{item.date}</span><a href={item.link}><RawHTML>{item.title}</RawHTML></a></List.Item>\n\t\t\t\t}\n\t\t\t}) }\n\t\t\t</List>\n\t\t)\n\t}\n\n\trender() {\n\t\tconst Posts = this.posts;\n\t\treturn(\n\t\t\t<Posts data={ this.props.posts } disableLink={this.props.disableLink}/>\n\t\t)\n\t}\t\n}\n\nexport default PostsList;","import { __ } from \"@wordpress/i18n\";\nimport { registerBlockType } from '@wordpress/blocks';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { Button, PanelBody, ToggleControl, TextControl, SelectControl } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\n\nimport PostsList from './styles/list';\nimport FactTankList from './styles/fact-tank';\n\nclass EditSidebar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.getPosts = this.getPosts.bind(this);\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.getPosts(this.props.attributes.per_page, this.props.attributes.format);\n\t}\n\n\tgetPosts = (perPage, format, program) => {\n\t\tconst formatDate = function( dateString ) {\n\t\t\treturn moment(dateString).format(\"MMM D, YYYY\");\n\t\t}\n\t\tconst setAttributes = this.props.setAttributes;\n\t\tconst collection = new wp.api.collections.Stub();\n\n\t\tlet args = { 'per_page': Number(perPage), 'formats': [ Number(format) ] };\n\t\tif ( 0 !== program ) {\n\t\t\targs.programs = Number(program);\n\t\t}\n\t\tlet data = [];\n\n\t\tcollection.fetch( { data: args } ).then( ( posts ) => {\n\t\t\tfor ( let index = 0; index < posts.length; index++ ) {\n\t\t\t\tdata.push({\n\t\t\t\t\ttitle: posts[index].title.rendered,\n\t\t\t\t\tdate: formatDate(posts[index].date),\n\t\t\t\t\tlink: posts[index].link,\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetAttributes({ posts: data });\n\t\t});\n\t}\n\n\trender = () => {\n\t\tconsole.log('edit sidebar');\n\t\tconsole.log(this.props);\n\t\tconst setAttributes = this.props.setAttributes;\n\t\t// If the style is fact-tank then the format should be set to fact-tank\n\t\tif ( \"wp-block-prc-block-posts is-style-fact-tank\" === this.props.className ) {\n\t\t\tsetAttributes({format: 10818955});\n\t\t\tthis.getPosts(this.props.attributes.per_page, 10818955, this.props.attributes.program); \n\t\t}\n\t\treturn(\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Posts Block Options' ) }>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel=\"Number of Posts\"\n\t\t\t\t\t\tvalue={ Number(this.props.attributes.per_page) }\n\t\t\t\t\t\tonChange={ ( per_page ) => { \n\t\t\t\t\t\t\tsetAttributes( { per_page: Number(per_page) } );\n\t\t\t\t\t\t\tthis.getPosts(per_page, this.props.attributes.format, this.props.attributes.program); \n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Format\"\n\t\t\t\t\t\tvalue={ this.props.attributes.format }\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t{ label: 'Report', value: 10818957 },\n\t\t\t\t\t\t\t{ label: 'Feature', value: 10818948 },\n\t\t\t\t\t\t\t{ label: 'Fact Tank', value: 10818955 },\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={ ( format ) => { \n\t\t\t\t\t\t\tsetAttributes( { format: Number(format) } );\n\t\t\t\t\t\t\tthis.getPosts(this.props.attributes.per_page, format, this.props.attributes.program);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Research Program\"\n\t\t\t\t\t\tvalue={ this.props.attributes.program }\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t{ label: 'All Programs', value: 0 },\n\t\t\t\t\t\t\t{ label: 'Global', value: 10818960 },\n\t\t\t\t\t\t\t{ label: 'Internet', value: 10818962 },\n\t\t\t\t\t\t\t{ label: 'Religion', value: 10818963 },\n\t\t\t\t\t\t\t{ label: 'Journalism', value: 10818964 },\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={ ( program ) => { \n\t\t\t\t\t\t\tsetAttributes( { program: Number(program) } );\n\t\t\t\t\t\t\tthis.getPosts(this.props.attributes.per_page, this.props.attributes.format, program);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t{ \"wp-block-prc-block-posts is-style-columns\" === this.props.className && (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"Column Count\"\n\t\t\t\t\t\t\tvalue={ Number(this.props.attributes.columns) }\n\t\t\t\t\t\t\tonChange={ ( columns ) => { \n\t\t\t\t\t\t\t\tsetAttributes( { columns } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t)\n\t}\n}\n\n/**\n * Register: aa Gutenberg Block.\n *\n * Registers a new block provided a unique name and an object defining its\n * behavior. Once registered, the block is made editor as an option to any\n * editor interface where blocks are implemented.\n *\n * @link https://wordpress.org/gutenberg/handbook/block-api/\n * @param  {string}   name     Block name.\n * @param  {Object}   settings Block settings.\n * @return {?WPBlock}          The block, if it has been successfully\n *                             registered; otherwise `undefined`.\n */\nregisterBlockType( 'prc-block/posts', {\n\t// Block name. Block names must be string that contains a namespace prefix. Example: my-plugin/my-custom-block.\n\ttitle: __( 'Posts Block' ), // Block title.\n\ticon: 'align-left', // Block icon from Dashicons → https://developer.wordpress.org/resource/dashicons/.\n\tcategory: 'widgets', // Block category — Group blocks together based on common traits E.g. common, formatting, layout, widgets, embed.\n\tkeywords: [\n\t\t__( 'prc' ),\n\t\t__( 'fact tank' ),\n\t\t__( 'posts listing' ),\n\t\t__( 'posts' ),\n\t\t__( 'posts widget' ),\n\t\t__( 'publication listing' ),\n\t],\n\tstyles: [\n\t\t{\n\t\t\tname: 'list',\n\t\t\tlabel: 'Simple List',\n\t\t\tisDefault: true,\n\t\t},\n\t\t{\n\t\t\tname: 'fact-tank',\n\t\t\tlabel: 'Fact Tank',\n\t\t},\n\t\t{\n\t\t\tname: 'publication-listing',\n\t\t\tlabel: 'Publication Listing',\n\t\t},\n\t\t{\n\t\t\tname: '4-story-lede',\n\t\t\tlabel: '4 Story Lede',\n\t\t},\n\t\t{\n\t\t\tname: 'columns',\n\t\t\tlabel: 'Columns',\n\t\t}\n\t],\n\tsupports: {\n\t\thtml: false, // We do not want to give people the ability to edit the raw html of this block.\n\t},\n\t// Attributes are really react props. \n\tattributes: {\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'Title',\n\t\t},\n\t\tformat: {\n\t\t\ttype: 'integer',\n\t\t\tdefault: 10818957, // Report\n\t\t},\n\t\tprogram: {\n\t\t\ttype: 'integer',\n\t\t\tdefault: 0,\n\t\t},\n\t\tper_page: {\n\t\t\ttype: 'integer',\n\t\t\tdefault: 10,\n\t\t},\n\t\t// If static is true then we should output on save only a holder div that would contain the options and the style template to use and then the frontend loader will load the posts. This mean will be \n\t\tstatic: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '5',\n\t\t},\n\t\tposts: {\n\t\t\ttype: 'array',\n\t\t\tdefault: false,\n\t\t}\n\t},\n\n\t/**\n\t * The edit function describes the structure of your block in the context of the editor.\n\t * This represents what the editor will render when the block is used.\n\t *\n\t * The \"edit\" property must be a valid function.\n\t *\n\t * @link https://wordpress.org/gutenberg/handbook/block-api/block-edit-save/\n\t *\n\t * @param {Object} props Props.\n\t * @returns {Mixed} JSX Component.\n\t */\n\tedit: ( props ) => {\n\t\tconst data = props.attributes;\n\t\tdata.className = props.className;\n\t\tif ( true === props.isSelected ) {\n\t\t\tdata.setAttributes = props.setAttributes;\n\t\t}\n\t\tdata.disableLink = true; // While editing we do not want users to accidentally click on a post.\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t{ true === props.isSelected && (\n\t\t\t\t\t<EditSidebar {...props}/>\n\t\t\t\t) }\n\t\t\t\t<div className={data.className}>\n\t\t\t\t\t<PostsList {...data}/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t)\n\t},\n\t\n\t/**\n\t * The save function defines the way in which the different attributes should be combined\n\t * into the final markup, which is then serialized by Gutenberg into post_content.\n\t *\n\t * The \"save\" property must be specified and must be a valid function.\n\t *\n\t * @link https://wordpress.org/gutenberg/handbook/block-api/block-edit-save/\n\t *\n\t * @param {Object} props Props.\n\t * @returns {Mixed} JSX Frontend HTML.\n\t */\n\tsave: ( props ) => {\n\t\tconst data = props.attributes;\n\t\tdata.className = props.className;\n\t\tdata.disableLink = false;\n\t\treturn (\n\t\t\t<div className={data.className}>\n\t\t\t\t<PostsList {...data}/>\n\t\t\t</div>\n\t\t);\n\t},\n} );\n","module.exports = wp.element;","module.exports = wp.components;","module.exports = ReactDOM;"],"sourceRoot":""}