/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibrarypostsJsonp=window.wpackioprcBlocksLibrarypostsJsonp||[]).push([[0],{0:function(t,e){t.exports=React},103:function(t,e){t.exports=wp.blocks},104:function(t,e){t.exports=wp.blockEditor},122:function(t,e,a){a(123),t.exports=a(242)},125:function(t,e){t.exports=moment},242:function(t,e,a){"use strict";a.r(e);var o=a(22),n=a(23),r=a(24),s=a(16),c=a(25),l=a(15),i=a(26),p=a(103),u=a(104),b=a(53),m=a(28),f=a(32),g=a(248),d=(a(124),a(125),function(t){function e(t){return Object(o.a)(this,e),Object(n.a)(this,Object(r.a)(e).call(this,t))}return Object(c.a)(e,t),Object(f.a)(e,[{key:"posts",value:function(t){var e=t.data;return console.log(e),React.createElement(g.a,{relaxed:!0,divided:!0},!1!==e&&e.map((function(t,e){return React.createElement(g.a.Item,null,React.createElement("span",{className:"meta date"},t.date),React.createElement("a",{href:t.link},React.createElement(m.RawHTML,null,t.title)))})))}},{key:"render",value:function(){var t=this.posts;return React.createElement(m.Fragment,null,React.createElement(t,{data:this.props.posts}))}}]),e}(m.Component)),O=function(t){function e(t){var a;return Object(o.a)(this,e),a=Object(n.a)(this,Object(r.a)(e).call(this,t)),Object(l.a)(Object(s.a)(a),"componentDidMount",(function(){a.getPosts(a.props.attributes.per_page,a.props.attributes.format)})),Object(l.a)(Object(s.a)(a),"getPosts",(function(t,e){console.info("Getting Posts");var o=a.props.setAttributes,n=[],r=[Number(e)];t=Number(t),console.log("per page"),console.log(t),console.log("format"),console.log(r),(new wp.api.collections.Stub).fetch({data:{per_page:t,formats:r}}).then((function(t){console.log(t);for(var e=0;e<t.length;e++)n.push({title:t[e].title.rendered,date:(a=t[e].date,moment(a).format("MMM D, YYYY")),link:t[e].link});var a;o({posts:n})}))})),Object(l.a)(Object(s.a)(a),"render",(function(){var t=a.props.setAttributes;return console.log(a.props),React.createElement(u.InspectorControls,null,React.createElement(b.PanelBody,{title:Object(i.__)("Posts Block Options")},React.createElement(b.TextControl,{label:"Number of Posts",value:Number(a.props.attributes.per_page),onChange:function(e){t({per_page:Number(e)}),a.getPosts(e,a.props.attributes.format)}}),React.createElement(b.SelectControl,{label:"Format",value:a.props.attributes.format,options:[{label:"Report",value:10818957},{label:"Feature",value:10818948},{label:"Fact Tank",value:10818955}],onChange:function(e){t({format:Number(e)}),a.getPosts(a.props.attributes.per_page,e)}})))})),a.getPosts=a.getPosts.bind(Object(s.a)(a)),a}return Object(c.a)(e,t),e}(m.Component);Object(p.registerBlockType)("prc-block/posts",{title:Object(i.__)("Posts Block"),icon:"align-left",category:"widgets",keywords:[Object(i.__)("prc"),Object(i.__)("fact tank"),Object(i.__)("posts listing"),Object(i.__)("posts"),Object(i.__)("posts widget")],styles:[{name:"default",isDefault:!0},{name:"beige",label:"Beige (Borderless)"},{name:"oatmeal",label:"Oatmeal (Borderless)"}],supports:{html:!1},attributes:{title:{type:"string",default:"Title"},format:{type:"integer",default:10818957},program:{type:"string",default:""},per_page:{type:"interger",default:10},static:{type:"boolean",default:!0},posts:{type:"array",default:!1}},edit:function(t){return!0===t.isSelected&&(t.attributes.setAttributes=t.setAttributes),React.createElement(m.Fragment,null,!0===t.isSelected&&React.createElement(O,t),React.createElement(d,t.attributes))},save:function(t){return React.createElement(d,t.attributes)}})},26:function(t,e){t.exports=wp.i18n},28:function(t,e){t.exports=wp.element},39:function(t,e){t.exports=ReactDOM},53:function(t,e){t.exports=wp.components}},[[122,1,2]]]);
//# sourceMappingURL=main-dc5090ff.js.map