{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.components\"","webpack:///external \"wp.blockEditor\"","webpack:///./src/posts/frontend.js","webpack:///external \"moment\"","webpack:///external \"ReactDOM\"","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.element\"","webpack:///external \"wp.url\"","webpack:///external \"lodash\"","webpack:///external \"wp.htmlEntities\""],"names":["module","exports","React","wp","components","blockEditor","DynamicPosts","props","setState","getPosts","per_page","formatID","programID","then","posts","setInterval","state","fetchInterval","bind","data","this","disableLiink","isFactTank","undefined","style","includes","isList","isColumns","Component","document","addEventListener","querySelector","querySelectorAll","elm","title","getAttribute","format","formatSlug","program","programSlug","backgroundColor","render","moment","ReactDOM","apiFetch","element","url","lodash","htmlEntities"],"mappings":";;;;;;;;;;;;;;;;;mHAAAA,EAAOC,QAAUC,O,iBCAjBF,EAAOC,QAAUE,GAAGC,Y,iBCApBJ,EAAOC,QAAUE,GAAGE,a,6lDCQdC,E,wCACF,WAAYC,GAAQ,IAAD,6BACf,cAAMA,GADS,gDASC,WAAO,IACfC,EADc,eACdA,SAERC,YACI,EAAKF,MAAMG,SACX,EAAKH,MAAMI,SACX,EAAKJ,MAAMK,UACX,WACA,GACFC,MAAK,SAAAC,GACHN,EAAS,CAAEM,aAGfC,aAAY,WACRN,YACI,EAAKF,MAAMG,SACX,EAAKH,MAAMI,SACX,EAAKJ,MAAMK,UACX,WACA,GACFC,MAAK,SAAAC,GACHN,EAAS,CAAEM,eAEhB,EAAKE,MAAMC,kBA9Bd,EAAKD,MAAQ,CACTF,OAAO,EACPG,cAAe,KAEnB,EAAKT,SAAW,EAAKA,SAASU,KAAd,gBAND,E,qDAoCf,IAAMC,EAAOC,KAAKb,MAClBY,EAAKL,MAAQM,KAAKJ,MAAMF,MACxBK,EAAKE,cAAe,EAEpB,IAAIC,GAAa,OAEbC,IAAcH,KAAKb,MAAMiB,OACzBJ,KAAKb,MAAMiB,MAAMC,SAAS,wBAE1BH,GAAa,GAEjB,IAAII,GAAS,OAETH,IAAcH,KAAKb,MAAMiB,OACzBJ,KAAKb,MAAMiB,MAAMC,SAAS,mBAE1BC,GAAS,GAEb,IAAIC,GAAY,EAOhB,YALIJ,IAAcH,KAAKb,MAAMiB,OACzBJ,KAAKb,MAAMiB,MAAMC,SAAS,sBAE1BE,GAAY,GAGZ,oBAAC,WAAD,MACK,IAASL,GAAc,oBAAC,IAAiBH,IACzC,IAASO,GAAU,oBAAC,IAAcP,IAClC,IAASQ,GAAa,oBAAC,IAAiBR,Q,GAlE9BS,aAyE3BC,SAASC,iBAAiB,oBAAoB,WAC1C,GAAID,SAASE,cAAc,yBAA0B,CACjD,IADiD,MACpCF,SAASG,iBAAiB,0BADU,IAEjD,2BAAwB,CAAC,IAAdC,EAAa,QACd1B,EAAQ,CACV2B,MAAOD,EAAIE,aAAa,cACxBC,OAAQH,EAAIE,aAAa,eACzBxB,SAAUsB,EAAIE,aAAa,kBAC3BE,WAAYJ,EAAIE,aAAa,oBAC7BG,QAASL,EAAIE,aAAa,gBAC1BvB,UAAWqB,EAAIE,aAAa,mBAC5BI,YAAaN,EAAIE,aAAa,qBAC9BzB,SAAUuB,EAAIE,aAAa,eAC3BK,gBAAiBP,EAAIE,aAAa,mBAClCX,MAAOS,EAAIE,aAAa,eAE5BM,iBAAO,oBAACnC,EAAiBC,GAAW0B,IAfS,oC,iBClFzDjC,EAAOC,QAAUyC,Q,iBCAjB1C,EAAOC,QAAU0C,U,iBCAjB3C,EAAOC,QAAUE,GAAGyC,U,gBCApB5C,EAAOC,QAAUE,GAAG0C,S,iBCApB7C,EAAOC,QAAUE,GAAG2C,K,iBCApB9C,EAAOC,QAAU8C,Q,iBCAjB/C,EAAOC,QAAUE,GAAG6C,e","file":"posts/frontend-eff9d2f2.js","sourcesContent":["module.exports = React;","module.exports = wp.components;","module.exports = wp.blockEditor;","import { render, Component, Fragment } from '@wordpress/element';\n\nimport { getPosts } from '../_shared';\n\nimport PostsList from './styles/list';\nimport FactTankList from './styles/fact-tank';\nimport PostsColumns from './styles/columns';\n\nclass DynamicPosts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            posts: false,\n            fetchInterval: 50000, // In minutes @TODO on production change this to 5 minutes and not 5 seconds\n        };\n        this.setState = this.setState.bind(this);\n    }\n\n    componentDidMount = () => {\n        const { setState } = this;\n        // Fetch immediately, then fetch every x milliseconds.\n        getPosts(\n            this.props.per_page,\n            this.props.formatID,\n            this.props.programID,\n            'formats',\n            true,\n        ).then(posts => {\n            setState({ posts });\n        });\n\n        setInterval(() => {\n            getPosts(\n                this.props.per_page,\n                this.props.formatID,\n                this.props.programID,\n                'formats',\n                true,\n            ).then(posts => {\n                setState({ posts });\n            });\n        }, this.state.fetchInterval);\n    };\n\n    render() {\n        const data = this.props;\n        data.posts = this.state.posts;\n        data.disableLiink = false;\n\n        let isFactTank = false;\n        if (\n            undefined !== this.props.style &&\n            this.props.style.includes('is-style-fact-tank')\n        ) {\n            isFactTank = true;\n        }\n        let isList = false;\n        if (\n            undefined !== this.props.style &&\n            this.props.style.includes('is-style-list')\n        ) {\n            isList = true;\n        }\n        let isColumns = false;\n        if (\n            undefined !== this.props.style &&\n            this.props.style.includes('is-style-columns')\n        ) {\n            isColumns = true;\n        }\n        return (\n            <Fragment>\n                {true === isFactTank && <FactTankList {...data} />}\n                {true === isList && <PostsList {...data} />}\n                {true === isColumns && <PostsColumns {...data} />}\n            </Fragment>\n        );\n    }\n}\n\n// When DOM is fully loaded load the filters\ndocument.addEventListener('DOMContentLoaded', function() {\n    if (document.querySelector('.js-react-posts-block')) {\n        const elms = document.querySelectorAll('.js-react-posts-block');\n        for (const elm of elms) {\n            const props = {\n                title: elm.getAttribute('data-title'),\n                format: elm.getAttribute('data-format'),\n                formatID: elm.getAttribute('data-format-id'),\n                formatSlug: elm.getAttribute('data-format-slug'),\n                program: elm.getAttribute('data-program'),\n                programID: elm.getAttribute('data-program-id'),\n                programSlug: elm.getAttribute('data-program-slug'),\n                per_page: elm.getAttribute('data-number'),\n                backgroundColor: elm.getAttribute('data-background'),\n                style: elm.getAttribute('data-style'),\n            };\n            render(<DynamicPosts {...props} />, elm);\n        }\n    }\n});\n","module.exports = moment;","module.exports = ReactDOM;","module.exports = wp.apiFetch;","module.exports = wp.element;","module.exports = wp.url;","module.exports = lodash;","module.exports = wp.htmlEntities;"],"sourceRoot":""}