/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibrarypostsJsonp=window.wpackioprcBlocksLibrarypostsJsonp||[]).push([[0],{0:function(e,t){e.exports=React},103:function(e,t){e.exports=wp.blocks},104:function(e,t){e.exports=wp.blockEditor},122:function(e,t,a){a(123),e.exports=a(241)},21:function(e,t){e.exports=wp.i18n},241:function(e,t,a){"use strict";a.r(t);var s=a(23),r=a(24),o=a(25),l=a(16),n=a(26),c=a(15),i=a(21),p=a(103),u=a(104),b=a(34),m=a(28),f=a(32),g=a(247),d=(a(124),function(e){function t(e){return Object(s.a)(this,t),Object(r.a)(this,Object(o.a)(t).call(this,e))}return Object(n.a)(t,e),Object(f.a)(t,[{key:"posts",value:function(e){var t=e.data,a=e.disableLink;return console.log(t),React.createElement(g.a,{relaxed:!0,divided:!0},!1!==t&&t.map((function(e,t){return!0===a?React.createElement(g.a.Item,null,React.createElement("span",{className:"meta date"},e.date),React.createElement(m.RawHTML,null,e.title)):React.createElement(g.a.Item,null,React.createElement("span",{className:"meta date"},e.date),React.createElement("a",{href:e.link},React.createElement(m.RawHTML,null,e.title)))})))}},{key:"render",value:function(){var e=this.posts;return React.createElement(e,{data:this.props.posts,disableLink:this.props.disableLink})}}]),t}(m.Component)),k=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(r.a)(this,Object(o.a)(t).call(this,e)),Object(c.a)(Object(l.a)(a),"componentDidMount",(function(){a.getPosts(a.props.attributes.per_page,a.props.attributes.format)})),Object(c.a)(Object(l.a)(a),"getPosts",(function(e,t,s){var r=a.props.setAttributes,o=new wp.api.collections.Stub,l={per_page:Number(e),formats:[Number(t)]};0!==s&&(l.programs=Number(s));var n=[];o.fetch({data:l}).then((function(e){for(var t=0;t<e.length;t++)n.push({title:e[t].title.rendered,date:(a=e[t].date,moment(a).format("MMM D, YYYY")),link:e[t].link});var a;r({posts:n})}))})),Object(c.a)(Object(l.a)(a),"render",(function(){console.log("edit sidebar"),console.log(a.props);var e=a.props.setAttributes;return"wp-block-prc-block-posts is-style-fact-tank"===a.props.className&&(e({format:10818955}),a.getPosts(a.props.attributes.per_page,10818955,a.props.attributes.program)),React.createElement(u.InspectorControls,null,React.createElement(b.PanelBody,{title:Object(i.__)("Posts Block Options")},React.createElement(b.TextControl,{label:"Number of Posts",value:Number(a.props.attributes.per_page),onChange:function(t){e({per_page:Number(t)}),a.getPosts(t,a.props.attributes.format,a.props.attributes.program)}}),React.createElement(b.SelectControl,{label:"Format",value:a.props.attributes.format,options:[{label:"Report",value:10818957},{label:"Feature",value:10818948},{label:"Fact Tank",value:10818955}],onChange:function(t){e({format:Number(t)}),a.getPosts(a.props.attributes.per_page,t,a.props.attributes.program)}}),React.createElement(b.SelectControl,{label:"Research Program",value:a.props.attributes.program,options:[{label:"All Programs",value:0},{label:"Global",value:10818960},{label:"Internet",value:10818962},{label:"Religion",value:10818963},{label:"Journalism",value:10818964}],onChange:function(t){e({program:Number(t)}),a.getPosts(a.props.attributes.per_page,a.props.attributes.format,t)}}),"wp-block-prc-block-posts is-style-columns"===a.props.className&&React.createElement(b.TextControl,{label:"Column Count",value:Number(a.props.attributes.columns),onChange:function(t){e({columns:t})}})))})),a.getPosts=a.getPosts.bind(Object(l.a)(a)),a}return Object(n.a)(t,e),t}(m.Component);Object(p.registerBlockType)("prc-block/posts",{title:Object(i.__)("Posts Block"),icon:"align-left",category:"widgets",keywords:[Object(i.__)("prc"),Object(i.__)("fact tank"),Object(i.__)("posts listing"),Object(i.__)("posts"),Object(i.__)("posts widget"),Object(i.__)("publication listing")],styles:[{name:"list",label:"Simple List",isDefault:!0},{name:"fact-tank",label:"Fact Tank"},{name:"publication-listing",label:"Publication Listing"},{name:"4-story-lede",label:"4 Story Lede"},{name:"columns",label:"Columns"}],supports:{html:!1},attributes:{title:{type:"string",default:"Title"},format:{type:"integer",default:10818957},program:{type:"integer",default:0},per_page:{type:"integer",default:10},static:{type:"boolean",default:!0},columns:{type:"string",default:"5"},posts:{type:"array",default:!1}},edit:function(e){var t=e.attributes;return t.className=e.className,!0===e.isSelected&&(t.setAttributes=e.setAttributes),t.disableLink=!0,React.createElement(m.Fragment,null,!0===e.isSelected&&React.createElement(k,e),React.createElement("div",{className:t.className},React.createElement(d,t)))},save:function(e){var t=e.attributes;return t.className=e.className,t.disableLink=!1,React.createElement("div",{className:t.className},React.createElement(d,t))}})},28:function(e,t){e.exports=wp.element},34:function(e,t){e.exports=wp.components},40:function(e,t){e.exports=ReactDOM}},[[122,1,2]]]);
//# sourceMappingURL=main-db95c0e0.js.map