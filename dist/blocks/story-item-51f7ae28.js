/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 2.1.17
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2022 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[58,2],{1:function(e,t){e.exports=window.React},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(148),r=n(30),l=n.n(r),c=function(e,t,n){0!==t&&!1!==n&&l()({path:"/prc-api/v2/get-art/?postId=".concat(t)}).then((function(t){!1!==t&&void 0!==t[e]&&!1!==n&&n({image:t[e].rawUrl,isChartArt:t[e].chartArt})}))},o=function(e){var t=e.setAttributes,n=e.postId,r=void 0!==n&&n,c=e.imageSize,o=void 0===c?"A1":c,i=e.isRefresh,s=void 0!==i&&i;!1!==r&&void 0!==t&&l()({path:"/wp/v2/stub/".concat(r),method:"GET"}).then((function(e){if(console.log("setPostAttributes -> by id:",r,e),!1!==e){var n=function e(t){var n=t.post,r=t.imageSize,l=t.isRefresh,c=void 0!==l&&l;console.log(e,n);var o=new Date(n.date),i=a(o).format("MMM D, YYYY"),s={title:n.title.hasOwnProperty("rendered")?n.title.rendered:n.title,excerpt:n.excerpt.hasOwnProperty("rendered")?n.excerpt.rendered:n.excerpt,url:n.link,label:n.hasOwnProperty("label")?n.label:"Report",date:i,postId:n.id};if(!0!==c&&(s.extra=""),n.art){var u=n.art;s.image=u[r].rawUrl,s.isChartArt=u[r].chartArt}return console.log("getAttributesFromPost",n,s),s}({post:e,imageSize:o,isRefresh:s});t(n)}})).catch((function(e){return console.error(e)}))}},148:function(e,t){e.exports=moment},2:function(e,t){e.exports=window.wp.i18n},23:function(e,t){e.exports=window.wp.primitives},3:function(e,t){e.exports=window.wp.components},30:function(e,t){e.exports=window.wp.apiFetch},32:function(e,t){e.exports=window.wp.url},4:function(e,t){e.exports=window.wp.element},40:function(e,t){e.exports=window.wp.htmlEntities},402:function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/story-item","title":"Story Item","category":"content-curation","icon":"format-aside","description":"A story item is a visual display of a post, usually referencing a stub post.","keywords":["prc","story","item","story item","stub"],"usesContext":["queryId","query","postId","postType","prc-block/column/width","prc-block/row/isEqual"],"attributes":{"title":{"type":"string"},"excerpt":{"type":"string","source":"html","multiline":"p","selector":".description"},"extra":{"type":"string","source":"html","multiline":"li","selector":".extra"},"url":{"type":"string","default":""},"label":{"type":"string"},"date":{"type":"string"},"image":{"type":"string"},"imageSlot":{"type":"string","default":"top"},"imageSize":{"type":"string","default":"A1"},"isChartArt":{"type":"boolean"},"postId":{"type":"integer"},"headerSize":{"type":"integer","default":2},"enableAltHeaderWeight":{"type":"boolean","default":false},"enableEmphasis":{"type":"boolean","default":false},"enableHeader":{"type":"boolean","default":true},"enableExcerpt":{"type":"boolean","default":true},"enableExcerptBelow":{"type":"boolean","default":false},"enableExtra":{"type":"boolean","default":false},"enableBreakingNews":{"type":"boolean","default":false},"disableMobileStyles":{"type":"boolean","default":false},"enableMeta":{"type":"boolean","default":true},"metaTaxonomy":{"type":"string","default":"formats"},"inLoop":{"type":"boolean","default":false},"isPreview":{"type":"boolean","default":false}},"supports":{"html":false,"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true}}}}')},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return z})),n.d(t,"e",(function(){return J})),n.d(t,"f",(function(){return Q})),n.d(t,"d",(function(){return X})),n.d(t,"g",(function(){return W})),n.d(t,"h",(function(){return K})),n.d(t,"i",(function(){return f}));var a=n(27),r=n(20),l=n(44),c=n(1099),o=n(132),i=n(53),s=n(9),u=n(4),d=n(2),m=n(3),p=n(34),b=n(31),g=n(30),h=n.n(g),f=function(e,t){var n=Object(u.useState)(e),a=Object(r.a)(n,2),l=a[0],c=a[1];return Object(u.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),l},v=(n(133),n(35));n(49);var y,E=n(32),R=n(40),x=Object(i.a)(m.Button)(y||(y=Object(l.a)(["\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n"])));var O,w=function(e){var t=e.suggestion,n=e.onClick,a=e.searchTerm,r=e.isSelected,l=e.id,c=e.contentTypes,o=t.type&&1<c.length;return React.createElement(m.Tooltip,{text:Object(R.decodeEntities)(t.title)},React.createElement(x,{id:l,onClick:n,className:"block-editor-link-control__search-item is-entity ".concat(r&&"is-selected"),style:{borderRadius:"0",boxSizing:"border-box"}},React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title",style:{paddingRight:o?null:0}},React.createElement(m.TextHighlight,{text:Object(R.decodeEntities)(t.title),highlight:a})),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info",style:{paddingRight:o?null:0}},Object(E.filterURLForDisplay)(Object(E.safeDecodeURI)(t.url))||"")),o&&React.createElement("span",{className:"block-editor-link-control__search-item-type"},"post_tag"===t.type?"tag":t.type)))},k="prc-content-search",j={};function C(e){var t=e.onSelectItem,n=e.placeholder,a=e.label,c=e.style,o=void 0===c?"search":c,i=e.contentTypes,s=e.mode,g=e.excludeItems,v=e.perPage,y=Object(u.useState)(""),E=Object(r.a)(y,2),R=E[0],x=E[1],C=f(R,500),A=Object(u.useMemo)((function(){return!!C.match(/^(http|https):\/\//)}),[C]),S=Object(u.useState)([]),_=Object(r.a)(S,2),P=_[0],T=_[1],I=Object(u.useState)(!1),N=Object(r.a)(I,2),B=N[0],H=N[1],z=Object(u.useState)(null),D=Object(r.a)(z,2),M=D[0],L=D[1],V=Object(u.useRef)(),F=Object(u.useRef)(!0),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];V.current=null,!1!==t&&(j[t]=e);var n=e.filter((function(e){var t=!0;return g.length&&(t=g.every((function(t){return t.id!==e.id}))),t}));T(n),H(!1)},Z=function(e){return void 0===e?new Error("url is undefined"):new Promise((function(t,n){h()({path:"/prc-api/v2/utils/get-post-by-url",method:"POST",data:{url:e}}).then((function(a){console.log("getPostByUrl",e,a),"object"!==Object(p.a)(a)&&n(new Error("post is not an object")),t(a)})).catch((function(e){return n(e)}))}))},G=!!C.length,q=!!P.length;Object(u.useEffect)((function(){return function(){F.current=!1}}),[]),Object(u.useEffect)((function(){""!==C&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(V.current&&V.current.abort(),""===e.trim())return console.log("Resetting search string..."),void U([]);V.current=new AbortController,H(!0);var n="wp/v2/search/?search=".concat(e,"&subtype=").concat(i.join(","),"&type=").concat(s,"&_embed&per_page=").concat(v);j[n]?U(j[n],n):t?(console.log("isUrl",e),Z(e).then((function(e){if(F.current){console.log("parse getPostByUrl",e);var t=e.ID,a=e.post_title,r=e.post_type,l=e.permalink,c=e.label;U([{id:t,subtype:r,title:a,type:"post",url:l,label:c}],n)}})).catch((function(t,n){console.log("Hey this is a url error, we didnt find a matching post... now what?",e),console.error(t,n),H(!1)}))):h()({path:n,signal:V.current.signal}).then((function(e){!1!==F.current&&(console.log("Not a url, searching.... here are the results:",e),U(e,n))})).catch((function(e,t){"fetch_error"!==e.code&&U([])}))}(C,A)}),[C,A]);var X=Object(b.a)(O||(O=Object(l.a)(["\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t"])));return Object(b.b)(m.NavigableMenu,{onNavigate:function(e){0===e&&L(null),L(e)},orientation:"vertical"},Object(b.b)("div",{style:{display:"flex"}},Object(b.b)("div",{style:{flexGrow:"1"}},"minimal"===o&&Object(b.b)(m.TextControl,{label:a,value:R,onChange:function(e){return x(e)},placeholder:n,autoComplete:"off"}),"search"===o&&Object(b.b)(m.SearchControl,{value:R,onChange:function(e){return x(e)},placeholder:n})),B&&Object(b.b)("div",{style:{position:"absolute",right:"minimal"===o?"8px":"50px",marginTop:"minimal"===o?"27px":"10px"}},Object(b.b)(m.Spinner,null))),G?Object(b.b)("ul",{className:"".concat(k,"-list"),style:{marginTop:"0",marginBottom:"0",marginLeft:"0",paddingLeft:"0",listStyle:"none"},css:X},!B&&!q&&!1===A&&Object(b.b)("li",{className:"".concat(k,"-list-item components-button"),style:{color:"inherit",cursor:"default",paddingLeft:"3px"}},Object(d.__)("Nothing found.","prc-block-components")),!B&&!q&&A&&Object(b.b)("li",{className:"".concat(k,"-list-item components-button"),style:{color:"inherit",cursor:"default",paddingLeft:"3px"}},Object(d.__)("Press enter to change url.","prc-block-components")),!B&&P.map((function(e,n){return console.log("searchResults map...",e),void 0===e.title?null:Object(b.b)("li",{key:e.id,className:"".concat(k,"-list-item"),style:{marginBottom:"0"}},Object(b.b)(w,{onClick:function(){return function(e){T([]),x(""),t(e)}(e)},searchTerm:C,suggestion:e,contentTypes:i,isSelected:M===n+1}))}))):null)}var A,S,_=n(54),P=Object(_.c)((function(){return React.createElement("svg",{style:{marginRight:"5px",cursor:"grab",flexShrink:0},width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z"}))})),T=Object(i.a)("div")(A||(A=Object(l.a)(["\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n"]))),I=function(e){var t=e.item,n=e.isOrderable,a=void 0!==n&&n,r=e.handleItemDelete,l=e.mode,c="post"===l?"postType":"taxonomy",o=Object(s.useSelect)((function(e){var n=e("core"),a=n.getEntityRecord,r=n.hasFinishedResolution,o=[c,t.type,t.id],i=a.apply(void 0,o);if(i){console.log("Has Item",i);var s={title:"post"===l?i.title.rendered:i.name,url:i.link,id:i.id};return t.uuid&&(s.uuid=t.uuid),s}if(r("getEntityRecord",o))return null}),[t.id,c]);return Object(u.useEffect)((function(){null===o&&r(t)}),[t,r,o]),o?React.createElement(T,{style:{border:"2px dashed #ddd",paddingTop:"10px",paddingBottom:"10px",paddingLeft:a?"3px":"8px"},className:"block-editor-link-control__search-item is-entity"},a?React.createElement(P,null):"",React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title"},Object(R.decodeEntities)(o.title)),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info"},Object(E.filterURLForDisplay)(Object(E.safeDecodeURI)(o.url))||"")),React.createElement("button",{type:"button",onClick:function(){r(o)},"aria-label":Object(d.__)("Delete item","10up-block-components")},"×")):React.createElement("div",null)},N=Object(_.a)((function(e){var t=e.items,n=e.isOrderable,a=e.handleItemDelete,r=e.mode,l=e.ChildComponent,c=void 0!==l&&l,o=!1!==c?n?Object(_.b)(c):c:n?Object(_.b)(I):I;return React.createElement("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif'}},t.map((function(e,l){var c=e.uuid?e.uuid:e.id;return React.createElement(o,{isOrderable:!!(n&&1<t.length)&&n,key:"item-".concat(c),index:l,handleItemDelete:a,sortIndex:l,item:e,mode:r,totalItems:t.length})})))})),B=Object(i.a)("div")(S||(S=Object(l.a)(["\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n"]))),H=function(e){var t,n=e.label,l=e.placeholder,i=e.mode,m=void 0===i?"post":i,p=e.contentTypes,b=void 0===p?["post","page"]:p,g=e.onPickChange,h=void 0===g?function(e){console.log("Content picker list change",e)}:g,f=e.maxContentItems,v=void 0===f?1:f,y=e.isOrderable,E=void 0!==y&&y,R=e.singlePickedLabel,x=void 0===R?Object(d.__)("You have selected the following item:","prc-block-components"):R,O=e.multiPickedLabel,w=void 0===O?Object(d.__)("You have selected the following items:","prc-block-components"):O,k=e.value,j=void 0===k?[]:k,A=e.uniqueContentItems,S=void 0===A||A,_=e.excludeCurrentPost,P=void 0===_||_,T=e.perPage,I=void 0===T?50:T,H=e.PickedItemChild,z=void 0!==H&&H,D=e.searchStyle,M=void 0===D?"search":D,L=Object(u.useState)(j),V=Object(r.a)(L,2),F=V[0],U=V[1],Z=null===(t=Object(s.select)("core/editor"))||void 0===t?void 0:t.getCurrentPostId();Object(u.useEffect)((function(){console.log("Init content state",j)}),[]),Object(u.useEffect)((function(){F!==j&&0!==F.length&&(console.log("useEffect onPickChange->",F),h(F))}),[F]);var G=Object(u.useMemo)((function(){var e=S?Object(a.a)(F):[];return P&&Z&&e.push({id:Z}),e}),[F,Z,P,S]);return React.createElement("div",{className:"".concat("prc-content-picker")},(!F.length||F.length&&F.length<v)&&React.createElement(C,{placeholder:l,label:n,excludeItems:G,onSelectItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("handleSelect->",e,t),U(!0===t?function(t){return[{uuid:Object(c.a)(),type:"subtype"in e?e.subtype:e.type,url:e.url}].concat(Object(a.a)(t))}:function(t){return[{id:e.id,uuid:Object(c.a)(),type:"subtype"in e?e.subtype:e.type,url:e.url}].concat(Object(a.a)(t))})},contentTypes:b,mode:m,perPage:I,style:M}),Boolean(null==F?void 0:F.length)>0&&React.createElement(B,null,React.createElement("span",{style:{marginTop:"15px",marginBottom:"2px",display:"block"}},F.length>1?w:x),React.createElement(N,{items:F,useDragHandle:!0,handleItemDelete:function(e){U((function(t){return t.filter((function(t){var n=t.id,a=t.uuid;return e.uuid?a!==e.uuid:n!==e.id}))}))},isOrderable:E,mode:m,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex,r=Object(a.a)(Object(o.default)(F,t,n));console.log("newContent?",r),U(r)},ChildComponent:z})))};function z(e){var t=e.blockProps,n=e.onChange,a=e.onSkip,r=e.mode,l=void 0===r?"post":r,c=e.contentTypes,o=void 0===c?["stub"]:c,i=e.label,s=void 0===i?Object(d.__)("Search for a post","prc-block-components"):i,p=e.placeholder,b=void 0===p?Object(d.__)("Search for a post or paste in a url...","prc-block-components"):p,g=e.value,h=void 0===g?[]:g,f=e.loadingComponent,v=void 0!==f&&f,y=e.children;return React.createElement("div",t,React.createElement(m.Placeholder,{label:"".concat(s,":"),isColumnLayout:!0},!1!==v&&React.createElement("div",{style:{textAlign:"center"}},React.createElement(m.Spinner,null),React.createElement("p",{className:"sans-serif"},"Loading object...")),!1===v&&React.createElement(u.Fragment,null,y,React.createElement(H,{onPickChange:function(e){console.log("Step1:",e),n(e)},mode:l,label:"".concat(s," or enter a url:"),placeholder:b,contentTypes:o,value:h}),React.createElement(m.Button,{isLink:!0,onClick:function(){a()},text:Object(d.__)("Skip"),style:{paddingLeft:"9px"}}))))}n(1090);var D=n(5);var M=function(e){var t=e.url,n=e.onChange,a=e.query,l=void 0===a?{type:"term",subtype:"topic"}:a,c=Object(u.useState)(!1),o=Object(r.a)(c,2),i=o[0],s=o[1];return React.createElement(u.Fragment,null,React.createElement(m.ToolbarButton,{"aria-expanded":i,"aria-haspopup":"true",label:Object(d.__)("Set Link"),icon:"admin-links",onClick:function(){return s(!i)},showTooltip:!0}),!0===i&&React.createElement(m.Popover,{position:"bottom center",onClose:function(){return s(!1)}},React.createElement(D.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:{url:t},showInitialSuggestions:!0,suggestionsQuery:l,onChange:function(e){return n(e)},settings:[]})))},L=n(1098),V=function(e){var t=e.url,n=e.heading,a=e.headingSize,r=void 0===a?"h2":a,l=e.disableIcon,c=void 0!==l&&l,o=e.setAttributes;return React.createElement(u.Fragment,null,React.createElement(D.BlockControls,null,React.createElement(m.ToolbarGroup,null,React.createElement(M,{url:t,onChange:function(e){o({url:e.url})}}))),React.createElement(m.Flex,{style:{paddingBottom:"1em"}},React.createElement(m.FlexItem,null,React.createElement(D.RichText,{tagName:r,value:n,onChange:function(e){return o({heading:e})},placeholder:"Heading...",formattingControls:[],keepPlaceholderOnFocus:!0,className:"sans-serif"})),!0!==c&&React.createElement(m.FlexBlock,null,React.createElement(L.a,{name:"chevron right",size:"small",style:{marginLeft:"0.5em"}}))))},F=n(8);var U=function(e){var t=e.label,n=void 0===t?"":t,a=e.blockName,r=e.clientId,l=(e.className,e.attributes),c=void 0===l?{}:l;return React.createElement(m.Button,{label:Object(d.__)(n),tooltipPosition:"bottom",onClick:function(){var e=Object(s.select)("core/block-editor").getBlock(r);console.log("debug info...",e.innerBlocks.length);var t=0===e.innerBlocks.length?0:e.innerBlocks.length+1,n=Object(F.createBlock)(a,c);Object(s.dispatch)("core/block-editor").insertBlock(n,t,r)},className:"block-editor-button-block-appender"},Object(d.__)(n))},Z=n(56),G=function(e){var t=e.level,n=e.isPressed,a=void 0!==n&&n,r={1:"M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z",2:"M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z",3:"M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z",4:"M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z",5:"M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z",6:"M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z"};return r.hasOwnProperty(t)?React.createElement(m.SVG,{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",isPressed:a},React.createElement(m.Path,{d:r[t]})):null},q={className:"block-library-heading-level-dropdown",isAlternate:!0},X=function(e){var t=e.selectedLevel,n=e.levels,a=void 0===n?[2,3]:n,r=e.onChange;return console.log("HeadingLevelToolbar",t),React.createElement(m.ToolbarGroup,null,React.createElement(m.Dropdown,{popoverProps:q,renderToggle:function(e){var n=e.onToggle,a=e.isOpen;return React.createElement(m.ToolbarButton,{"aria-expanded":a,"aria-haspopup":"true",icon:React.createElement(G,{level:t}),label:Object(d.__)("Change heading level"),onClick:n,onKeyDown:function(e){a||e.keyCode!==Z.DOWN||(e.preventDefault(),e.stopPropagation(),n())},showTooltip:!0})},renderContent:function(){return React.createElement(m.Toolbar,{className:"block-library-heading-level-toolbar",label:Object(d.__)("Change heading level")},React.createElement(m.ToolbarGroup,{isCollapsed:!1,controls:a.map((function(e){var n=e===t;return{icon:React.createElement(G,{level:e,isPressed:n}),title:Object(d.sprintf)(Object(d.__)("Heading %d"),e),isActive:n,onClick:function(){r(e)}}}))}))}}))};n(94),n(59);function W(e,t,n,a,r){e===t&&r(Object(v.a)({},n,a))}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return new Promise((function(n){var a={};h()({path:"/wp/v2/".concat(e,"?per_page=").concat(t)}).then((function(t){for(var r=0;r<t.length;r++){var l=t[r].slug.replace("".concat(e.toLowerCase(),"_"),"");a[t[r].id]={id:t[r].id,name:t[r].name,parent:t[r].parent,slug:l}}n(a)}))}))}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slug",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(r){Y(e,t).then((function(e){var t=[];Object.keys(e).forEach((function(a){var r=e[a],l=r[n],c=r.name;void 0!==r.parent&&0!==r.parent&&(c=" -- ".concat(c)),t.push({value:l,label:c})})),!1!==a&&t.sort((function(e,t){return e.label>t.label?1:-1})),r(t)}))}))}function Q(e){return new Promise((function(t){Y(e).then((function(e){var n=[],a=Object.keys(e).map((function(t){return e[t]}));a.filter((function(e){return 0===e.parent})).forEach((function(e){var t=a.filter((function(t){return t.parent===e.id})),r=[];t.forEach((function(e){r.push({name:e.name,id:e.id})})),n.push({name:e.name,id:e.id,children:r})})),t(n)}))}))}var K=[{label:"Weekly roundup of all new publications",value:"7c1390ba46"},{label:"Quarterly update from the president",value:"a33430a835"},{label:"--",value:!1},{label:"Global attitudes & trends (twice a month)",value:"9203343b04"},{label:"Internet, science & tech (monthly)",value:"ea87b26abe"},{label:"Daily briefing of media news",value:"1d2638430b"},{label:"Race & ethnicity (monthly)",value:"0e7495c7b2"},{label:"Religion & public life - Weekly newsletter",value:"a7d4f3268f"},{label:"Religion & public life - Daily religion headlines",value:"1a647764b2"},{label:"Social & demographic trends (monthly)",value:"3836f62305"},{label:"Methodological research (quarterly)",value:"6d1e80bbaf"},{label:"U.S. politics & policy (monthly)",value:"fa5fdbc701"},{label:"--",value:!1},{label:"Mini-course - U.S. Immigration",value:"xxx"},{label:"Mini-course - U.S. Census",value:"xxxx"},{label:"Mini-course - Muslims and Islam",value:"xxxxx"}]},49:function(e,t){e.exports=regeneratorRuntime},5:function(e,t){e.exports=window.wp.blockEditor},51:function(e,t){e.exports=window.lodash},56:function(e,t){e.exports=window.wp.keycodes},57:function(e,t){e.exports=window.ReactDOM},59:function(e,t){e.exports=window.wp.mediaUtils},8:function(e,t){e.exports=window.wp.blocks},9:function(e,t){e.exports=window.wp.data},964:function(e,t,n){n(19),e.exports=n(997)},997:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(148),l=n(8),c=n(5),o=n(4),i=[{attributes:{postID:{type:"integer"},link:{type:"string"},excerpt:{type:"string",multiline:"p"},enableExcerpt:{type:"boolean",default:!0},enableExcerptBelow:{type:"boolean",default:!1},enableAltTaxonomy:{type:"boolean",default:!1}},migrate:function(e){var t=e.postID,n=e.link,a=e.excerpt,r=e.enableExcerpt,l=e.enableExcerptBelow,c=e.enableAltTaxonomy,o=e.enableMeta;return console.log("Migrating...",{postID:t,link:n,excerpt:a,enableExcerpt:r,enableExcerptBelow:l,enableAltTaxonomy:c,enableMeta:o}),{postId:t,url:n,excerpt:a,enableExcerpt:r,enableExcerptBelow:l,metaTaxonomy:o?c?"research-teams":"formats":"disabled"}},save:function(e){return React.createElement(o.Fragment,null,0!==e.excerpt.length&&React.createElement(c.RichText.Content,{className:"excerpt",tagName:"div",value:e.excerpt}))}}],s=n(402),u=n(22),d=n(108),m=n.n(d),p=n(45),b=n(9),g=n(2),h=n(51),f=n(3),v=n(122);var y=function(e){var t=e.attributes,n=e.setAttributes,a=(e.context,e.rootClientId,Object(o.useState)(!1)),r=Object(u.a)(a,2),l=r[0],i=r[1],s=t.postId,d=t.imageSize,m=t.imageSlot,p=t.enableHeader,b=t.enableExcerpt,y=t.enableExcerptBelow,E=t.enableExtra,R=t.enableBreakingNews,x=t.enableEmphasis,O=t.disableMobileStyles,w=t.enableMeta,k=t.metaTaxonomy,j=Object(g.__)("Story Item Options");return React.createElement(o.Fragment,null,React.createElement(c.InspectorControls,null,React.createElement(f.PanelBody,{title:j},React.createElement(f.BaseControl,{help:Object(g.__)("Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).")},React.createElement(f.ToggleControl,{label:w?"Meta Enabled":"Meta Disabled",checked:w,onChange:function(){n({enableMeta:!w})}}),React.createElement(f.ToggleControl,{label:p?"Header Enabled":"Header Disabled",checked:p,onChange:function(){n({enableHeader:!p})}}),React.createElement(f.ToggleControl,{label:b?"Excerpt Enabled":"Excerpt Disabled",checked:b,onChange:function(){n({enableExcerpt:!b})}}),React.createElement(f.ToggleControl,{label:E?"Extras Enabled":"Extras Disabled",checked:E,onChange:function(){n({enableExtra:!E})}}),React.createElement(f.ToggleControl,{label:R?"Breaking News Enabled":"Breaking News Disabled",checked:R,onChange:function(){!1!==window.prcBreakingNews?n({enableBreakingNews:!R}):(alert("There are no currently active authorized breaking news events. The breaking news toggle will be set back to false."),n({enableBreakingNews:!1}))}}),React.createElement(f.ToggleControl,{label:x?"Emphasis Enabled":"Emphasis Disabled",checked:x,onChange:function(){n({enableEmphasis:!x})}})),React.createElement(f.CardDivider,null),React.createElement(f.SelectControl,{label:"Select Taxonomy To Display",value:k,options:[{label:"Formats",value:"formats"},{label:"Research Teams",value:"research-teams"},{label:"Disabled",value:"disabled"}],onChange:function(e){n({metaTaxonomy:e})}}))),React.createElement(c.InspectorAdvancedControls,null,React.createElement(f.ToggleControl,{label:O?"Mobile Styling Disabled":"Mobile Styling Enabled",help:Object(g.__)("If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile."),checked:O,onChange:function(){n({disableMobileStyles:!O})}}),!0===b&&("right"===m||"left"===m)&&React.createElement(o.Fragment,null,React.createElement(f.ToggleControl,{label:y?"Excerpt Will Appear Below Image":"Excerpt Will Appear Normally",help:Object(g.__)("If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image."),checked:y,onChange:function(){n({enableExcerptBelow:!y})}}),React.createElement(f.CardDivider,null)),Object(h.isInteger)(s)&&0!==s&&React.createElement("div",null,React.createElement(f.Button,{isSecondary:!0,isBusy:l,onClick:function(){i(!0),setTimeout((function(){Object(v.b)({postId:s,imageSize:d,isRefresh:!0,setAttributes:n}),i(!1)}),500)},style:{marginBottom:"1em"},text:Object(g.__)("Refresh Post Data")})),React.createElement("div",null,React.createElement(f.Button,{isDestructive:!0,isBusy:l,onClick:function(){i(!0),setTimeout((function(){n({title:"",excerpt:"",extra:"",url:"",label:"",date:"",image:"",postId:0}),i(!1)}),500)},style:{marginBottom:"1em"},text:Object(g.__)("Reset Story Item Block")}))))};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.attributes,n=e.setAttributes,a=e.blockProps,r=t.imageSize,l=Object(o.useState)(!1),c=Object(u.a)(l,2),i=c[0],s=c[1];return React.createElement(p.c,{onChange:function(e){console.log("Step2:",e),0<e.length&&void 0!==e[0].id&&(console.log("Step3:",e[0]),s(!0),Object(v.b)({postId:e[0].id,imageSize:r,isRefresh:!1,setAttributes:n}))},onSkip:function(){var e=(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});n({postId:0,label:"Report",date:e})},blockProps:R(R({},a),{},{style:{marginBottom:"16px"}}),loadingComponent:i})},O=n(1092),w=n(1093),k=n(1094),j=n(1095),C=n(1096),A=n(1097);function S(e){var t=e.svgPath,n=void 0!==t&&t,a=e.isPressed,r=void 0!==a&&a;return!1===n?null:React.createElement(f.SVG,{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",isPressed:r},React.createElement(f.Path,{d:n}))}function _(e){var t=e.selected;return"right"===t?O.a:"left"===t?w.a:"top"===t?k.a:"bottom"===t?j.a:"disabled"===t?C.a:A.a}function P(e){var t=e.selected,n=e.currentlyActive;return React.createElement(S,{svgPath:{A1:"M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z",A2:"M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z",A3:"M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z",A4:"M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z",XL:"M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z"}[t],isPressed:t===n})}function T(e){var t=e.selected,n=e.currentlyActive;return React.createElement(S,{svgPath:{1:"M15.81,15.63V18H8.19V6H11v9.63Z",2:"M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z",3:"M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z"}[t],isPressed:t===n})}var I=n(30),N=n.n(I);var B=function(e){var t=e.url,n=e.imageSize,a=void 0===n?"A1":n,r=e.setAttributes,l=Object(o.useState)(!1),c=Object(u.a)(l,2),i=c[0],s=c[1],d=Object(o.useState)(!1),m=Object(u.a)(d,2),b=m[0],h=m[1],y=Object(o.useState)(!1),E=Object(u.a)(y,2),R=E[0],x=E[1],O=Object(o.useState)(t),w=Object(u.a)(O,2),k=w[0],j=w[1],C=Object(o.useState)(null),A=Object(u.a)(C,2),S=A[0],_=A[1],P=Object(p.i)(k,500);Object(o.useEffect)((function(){P!==t&&(s(!0),N()({path:"/prc-api/v2/utils/get-post-by-url",method:"POST",data:{url:P}}).then((function(e){console.log("get-post-by-url",e),void 0!==e.ID&&(_(e),s(!1))})).catch((function(e){console.log("Error: ",e),_(!1),s(!1)})))}),[P]);var T=function(){return x(!1)};return React.createElement(o.Fragment,null,React.createElement(f.ToolbarButton,{"aria-expanded":b,"aria-haspopup":"true",label:Object(g.__)("Set URL"),icon:"admin-links",onClick:function(){return h(!b)},showTooltip:!0}),!0===R&&React.createElement(f.Modal,{title:Object(g.__)("Replace story item content","prc-blocks-story-item"),onRequestClose:T},React.createElement("p",null,"Replace this story item with ",React.createElement("strong",null,S.post_title),"?"),React.createElement(f.ButtonGroup,null,React.createElement(f.Button,{isDestructive:!0,onClick:function(){var e;e=S.ID,Object(v.b)({postId:e,imageSize:a,isRefresh:!1,setAttributes:r}),T()}},"Replace"),React.createElement(f.Button,{variant:"secondary",onClick:function(){r({url:P}),T()}},"Replace URL Only"),React.createElement(f.Button,{variant:"secondary",onClick:T},"Cancel"))),!0===b&&React.createElement(f.Popover,{position:"bottom center",onClose:function(){return h(!1)}},React.createElement("div",{style:{minWidth:"300px",padding:"8px",display:"flex",alignItems:"flex-end"}},React.createElement("div",{style:{flexGrow:"1"}},React.createElement(f.TextControl,{label:"URL",value:k,onChange:function(e){return j(e)},autoComplete:"off"})),React.createElement("div",{style:{paddingBottom:"7px",paddingLeft:"8px",width:"44px"}},i&&React.createElement("div",{style:{paddingBottom:"3px"}},React.createElement(f.Spinner,null)),!i&&!1===S&&React.createElement(f.Button,{icon:"yes-alt",variant:"tertiary",onClick:function(){r({url:P}),h(!1)}}),!i&&!1!==S&&null!==S&&React.createElement(f.Button,{icon:"warning",variant:"tertiary",onClick:function(){h(!1),x(!0)}})))))};var H=function(e){var t=e.attributes,n=e.setAttributes,a=e.context,r=(e.rootClientId,t.postId),l=t.url,i=t.imageSize,s=t.imageSlot,u=t.headerSize,d=t.isChartArt,m=t.title;console.log("Context",a);var p=void 0!==a["prc-block/column/width"]&&a["prc-block/column/width"],b=void 0!==a["prc-block/row/isEqual"]&&a["prc-block/row/isEqual"];console.log("columnWidth",p,b);var h=function(e){n({imageSize:e}),Object(v.a)(e,r,n),console.log("new image size, check column context",a)},y=Object(o.useCallback)((function(){return React.createElement(T,{selected:u,currentlyActive:u})}),[u]),E=Object(o.useCallback)((function(){return React.createElement(_,{selected:s})}),[s]),R=Object(o.useCallback)((function(){return React.createElement(P,{selected:i,currentlyActive:i})}),[i]);return React.createElement(c.BlockControls,null,React.createElement(f.ToolbarGroup,null,React.createElement(B,{title:m,id:r,url:l,type:"stub",setAttributes:n})),React.createElement(f.ToolbarGroup,null,React.createElement(f.ToolbarDropdownMenu,{icon:y,label:"Select Heading Size",controls:[{title:"Large",icon:React.createElement(T,{selected:1,currentlyActive:u}),isActive:1===u,onClick:function(){return n({headerSize:1})}},{title:"Medium",icon:React.createElement(T,{selected:2,currentlyActive:u}),isActive:2===u,onClick:function(){return n({headerSize:2})}},{title:"Small",icon:React.createElement(T,{selected:3,currentlyActive:u}),isActive:3===u,onClick:function(){return n({headerSize:3})}}]})),React.createElement(f.ToolbarGroup,null,React.createElement(f.ToolbarDropdownMenu,{icon:E,label:"Select Image Slot",controls:[{title:"Top",icon:React.createElement(_,{selected:"top"}),isActive:"top"===s,onClick:function(){n({imageSlot:"top"})}},{title:"Bottom",icon:React.createElement(_,{selected:"bottom"}),isActive:"bottom"===s,onClick:function(){n({imageSlot:"bottom"})}},{title:"Left",icon:React.createElement(_,{selected:"left"}),isActive:"left"===s,isDisabled:!0!==b&&!1!==p&&8>=p,onClick:function(){n({imageSlot:"left"})}},{title:"Right",icon:React.createElement(_,{selected:"right"}),isActive:"right"===s,isDisabled:!0!==b&&!1!==p&&8>=p,onClick:function(){n({imageSlot:"right"})}},{title:"Disabled",icon:React.createElement(_,{selected:"disabled"}),isActive:"disabled"===s,onClick:function(){n({imageSlot:"disabled"})}}]}),"disabled"!==s&&React.createElement(o.Fragment,null,React.createElement(f.ToolbarDropdownMenu,{icon:R,label:"Select Image Size",controls:[{title:"A1",icon:React.createElement(P,{selected:"A1",currentlyActive:i}),isActive:"A1"===i,onClick:function(){return h("A1")}},{title:"A2",icon:React.createElement(P,{selected:"A2",currentlyActive:i}),isActive:"A2"===i,onClick:function(){return h("A2")}},{title:"A3",icon:React.createElement(P,{selected:"A3",currentlyActive:i}),isActive:"A3"===i,onClick:function(){return h("A3")}},{title:"A4",icon:React.createElement(P,{selected:"A4",currentlyActive:i}),isActive:"A4"===i,onClick:function(){return h("A4")}},{title:"XL",icon:React.createElement(P,{selected:"XL",currentlyActive:i}),isActive:"XL"===i,onClick:function(){return h("XL")}}]}),React.createElement(f.ToolbarButton,{icon:"chart-pie",isPressed:d,label:Object(g.__)("Enable Chart Art"),onClick:function(){n({isChartArt:!d})}}))))};function z(e){var t=e.attributes,n=e.setAttributes,a=e.context,r=e.rootClientId;return React.createElement(o.Fragment,null,React.createElement(H,{attributes:t,setAttributes:n,context:a,rootClientId:r}),React.createElement(y,{attributes:t,setAttributes:n,context:a,rootClientId:r}))}var D=n(310),M=n(32),L=["image"],V={default:"564,317",small:"690,388",hidpi:"1128,634",smallHidpi:"1380,776"},F={default:"268,151",small:"690,388",hidpi:"536,301",smallHidpi:"1380,776"},U={default:"194,110",small:"148,84",hidpi:"388,220",smallHidpi:"296,168"},Z={default:"268,151",small:"690,388",hidpi:"536,302",smallHidpi:"1380,776"},G={default:"720,405",small:"690,388",hidpi:"1440,810",smallHidpi:"1380,776"};function q(e){var t=e.img,n=e.size,a=e.link,r=e.onClick,l=void 0!==r&&r,c=e.placeholder,i=void 0!==c&&c,s=function(e){if(!0===i){return"https://via.placeholder.com/".concat("A2"===n?"536x301":"A3"===n?"388x220":"A4"===n?"536x302":"XL"===n?"1440x810":"1128x634",".png?text=").concat(n)}if(""===t||!1===t)return t;var a={resize:V[e]};return"A2"===n?a={resize:F[e]}:"A3"===n?a={resize:U[e]}:"A4"===n?a={resize:Z[e]}:"XL"===n&&(a={resize:G[e]}),Object(M.addQueryArgs)(t,a)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:767;return[{srcSet:"".concat(s("default")," 1x, ").concat(s("hidpi")," 2x"),media:"(min-width: ".concat(e,"px)")},{srcSet:"".concat(s("small")," 1x, ").concat(s("smallHidpi")," 2x"),media:"(max-width: ".concat(e,"px)")}]};return!1!==l?React.createElement("button",{type:"button",onClick:l,style:{padding:0,border:"none",cursor:"pointer"}},!0===i&&React.createElement("img",{src:s(),alt:"Click to insert"}),!0!==i&&React.createElement(D.a,{sources:u(),alt:"Click to edit"})):React.createElement(o.Fragment,null,""===a&&React.createElement(D.a,{sources:u()}),""!==a&&React.createElement("a",{href:a},React.createElement(D.a,{sources:u()})))}function X(e){var t=e.img,n=e.size,a=e.setAttributes;return React.createElement(c.MediaUploadCheck,null,React.createElement(c.MediaUpload,{onSelect:function(e){return a({image:e.url})},allowedTypes:L,render:function(e){var a=e.open;return React.createElement(o.Fragment,null,void 0!==t&&0!==t.length&&React.createElement(q,{img:t,size:n,link:"",onClick:a}),(void 0===t||0===t.length)&&React.createElement(q,{img:t,size:n,link:"",onClick:a,placeholder:!0}))}}))}var W=function(e){var t,n,a,r,l,c=e.img,i=e.size,s=e.slot,u=e.chartArt,d=e.setAttributes;return"disabled"===s?React.createElement(o.Fragment,null):React.createElement("div",{className:(t=!1,n=!1,a=!1,r=!1,l=!1,!1!==s&&("XL"===i?t=!0:"A1"===i?n=!0:"A2"===i?a=!0:"A3"===i?r=!0:"A4"===i&&(l=!0)),m()({ui:!0,XL:t,A1:n,A2:a,A3:r,A4:l,image:!0,bordered:u}))},React.createElement(X,{img:c,size:i,setAttributes:d}))};var Y=function(e){var t=e.content,n=e.sansSerif,a=e.enabled,r=e.setAttributes;if(!0!==a)return React.createElement(o.Fragment,null);var l=m()("excerpt",{"sans-serif":n});return React.createElement(c.RichText,{tagName:"div",value:t,onChange:function(e){return r({excerpt:e})},placeholder:"Story item excerpt...",multiline:"p",className:l})};var J=function(e){var t=e.content,n=e.breakingNews,a=e.enabled,r=e.setAttributes;return React.createElement(o.Fragment,null,!0===a&&React.createElement(c.RichText,{tagName:"ul",value:t,onChange:function(e){return r({extra:e})},placeholder:t,multiline:"li",className:"extra"}),!0===n&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))};var Q=function(e){var t=e.title,n=e.size,a=e.enabled,r=e.setAttributes,l=e.altHeaderWeight;if(!0!==a)return React.createElement(o.Fragment,null);var i=m()("header",{large:1===n,medium:2===n,small:3===n,light:l});return React.createElement(c.RichText,{tagName:"header",value:t,onChange:function(e){return r({title:e})},allowedFormats:["italic"],placeholder:"Title",multiline:"br",className:i})};var K=function(e){var t=e.enabled,n=e.date,a=e.label,r=e.setAttributes,l=e.termOptions;if(!t)return React.createElement(o.Fragment,null);var c=void 0!==a?Object(M.cleanForSlug)(a.toLowerCase()):"report",i="short-read"===c?"fact-tank":c;return React.createElement("div",{className:"meta",style:{display:"flex",alignItems:"center"}},React.createElement("div",null,React.createElement(f.SelectControl,{value:i,options:l,onChange:function(e){r({label:e})},style:{marginBottom:"0px"},className:"story-label-select"})),React.createElement("div",null," | "),React.createElement("div",null,React.createElement(f.TextControl,{value:n,onChange:function(e){r({date:e})},style:{marginBottom:"0px"},className:"story-label-select"})))},$={A1:[1128,634],A2:[526,301],A3:[388,220],A4:[536,302],XL:[1440,810]};var ee=function(e){var t=e.attributes,n=t.title,a=t.excerpt,r=t.extra,l=t.label,o=t.date,i=t.image,s=t.imageSlot,u=t.imageSize,d=t.isChartArt,p=t.headerSize,b=t.enableEmphasis,g=t.enableHeader,h=t.enableExcerpt,f=t.enableExcerptBelow,v=t.enableExtra,y=t.enableBreakingNews,E=t.enableMeta,R=t.className,x={bordered:b,"alt-excerpt":f};"disbaled"!==s&&(x[s]=!0,x.aligned=!0);var O={className:m()("story item",R,x)};"disabled"!==s&&0<u.length&&(O["data-image-size"]=u);var w=Object(c.useBlockProps)(O),k=m()("header",{large:1===p,medium:2===p,small:3===p,light:!1}),j=m()("image",{bordered:d,XL:"XL"===u,A4:"A4"===u,A3:"A3"===u,A2:"A2"===u,A1:"A1"===u}),C=m()("excerpt");return React.createElement("article",w,E&&React.createElement("div",{className:"meta"},React.createElement("span",{className:"label"},l)," |"," ",React.createElement("span",{className:"date"},o)),"disabled"!==s&&React.createElement("div",{className:"".concat(j)},React.createElement("picture",null,React.createElement("img",{srcSet:i,width:$[u][0],height:$[u][1]}))),g&&React.createElement("header",{className:k},n),h&&React.createElement(c.RichText.Content,{tagName:"div",value:a,multiline:"p",className:C}),v&&React.createElement(c.RichText.Content,{tagName:"ul",value:r,className:"extra"}),!0===y&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.termOptions={formats:[],"research-teams":[]};var ae=function(e){var t=e.attributes,n=e.setAttributes,a=e.isSelected,r=e.clientId,l=e.context,i=t.title,s=t.excerpt,d=t.extra,g=t.label,h=t.date,f=t.image,v=t.imageSlot,y=t.imageSize,E=t.isChartArt,R=t.postId,O=t.headerSize,w=t.enableEmphasis,k=t.enableHeader,j=t.enableExcerpt,C=t.enableExcerptBelow,A=t.enableExtra,S=t.enableBreakingNews,_=t.enableMeta,P=t.metaTaxonomy,T=(t.inLoop,t.isPreview),I=t.className,N=Object(o.useState)(window.termOptions[P]),B=Object(u.a)(N,2),H=B[0],D=B[1];Object(o.useEffect)((function(){"disabled"!==P&&(0!==window.termOptions[P].length?D(window.termOptions[P]):Object(p.e)(P).then((function(e){window.termOptions[P].length||(window.termOptions[P]=e),D(e)})))}),[P]),Object(o.useEffect)((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};!e.postId&&e.postID&&(n.postId=e.postID),0!==Object.keys(n).length&&!1!==t&&(console.log("handlePostIdCaseChange",e,n),t(ne({},n)))}(t,n)}),[]),Object(o.useEffect)((function(){l.hasOwnProperty("query")&&l.hasOwnProperty("postId")&&!Number.isInteger(R)&&console.log("This post is from a query block...")}),[l]);var M=Object(b.useSelect)((function(e){return{rootClientId:e("core/block-editor").getBlockRootClientId(r)}}),[r]).rootClientId,L=!j,V={bordered:w,"alt-excerpt":C};"disbaled"!==v&&(V[v]=!0,V.aligned=!0);var F={className:m()("story item",I,V)};"disabled"!==v&&0<y.length&&(F["data-image-size"]=y);var U=Object(c.useBlockProps)(F);return!a||T?React.createElement(ee,{attributes:t}):void 0!==R||l.hasOwnProperty("query")?React.createElement(o.Fragment,null,React.createElement(z,{attributes:t,setAttributes:n,context:l,rootClientId:M}),React.createElement("article",U,React.createElement(W,{img:f,size:y,slot:v,chartArt:E,postId:R,setAttributes:n}),React.createElement(K,{enabled:_&&"disabled"!==P,date:h,label:g,setAttributes:n,termOptions:H}),React.createElement(Q,{enabled:k,title:i,size:O,altHeaderWeight:L,setAttributes:n}),React.createElement(Y,{enabled:j,content:s,sansSerif:!k,setAttributes:n}),React.createElement(J,{enabled:A,content:d,breakingNews:S,setAttributes:n,isSelected:a}))):React.createElement(x,{attributes:t,setAttributes:n,blockProps:U})},re=function(e){var t=e.attributes,n=t.excerpt,a=t.extra;return React.createElement(o.Fragment,null,n&&React.createElement(c.RichText.Content,{className:"description",tagName:"div",value:n}),a&&React.createElement(c.RichText.Content,{className:"extra",tagName:"ul",value:a}))},le=[{name:"story-item-default",isDefault:!0,title:Object(g.__)("Story Item"),excerpt:Object(g.__)("Default story item layout: top aligned A1 image."),attributes:{imageSlot:"top",imageSize:"A1"}},{name:"story-item-pub-listing",title:Object(g.__)("Pub Listing Story Item"),excerpt:Object(g.__)("Left algined A3 image (right aligned A3 on mobile)."),attributes:{imageSlot:"left",imageSize:"A3"}},{name:"story-item-slim",title:Object(g.__)("Story Item Slim"),excerpt:Object(g.__)("No excerpt, no image."),attributes:{imageSlot:"disabled",enableExcerpt:!1}}];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=s.name,se={example:{attributes:{title:"Ultricies Ipsum Nibh Egestas Purus",excerpt:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>",label:"Report",date:r().format("MM-DD-YYYY"),image:"https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg",imageSlot:"top",imageSize:"A2",isPreview:!0}},deprecated:i,variations:le,supports:{color:{text:!0,background:!1},typograhpy:{fontSize:!0}},edit:ae,save:re};Object(l.registerBlockType)(ie,oe(oe({},s),se))}},[[964,0,1,77]]]);
//# sourceMappingURL=story-item-51f7ae28.js.map