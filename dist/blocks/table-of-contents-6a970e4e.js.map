{"version":3,"sources":["webpack:///external [\"wp\",\"data\"]","webpack:///./src/table-of-contents/edit.js","webpack:///./src/table-of-contents/save.js","webpack:///./src/table-of-contents/index.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["module","exports","window","edit","attributes","setAttributes","className","clientId","showCurrentChapter","blockProps","useBlockProps","useSelect","select","found","getBlocks","filter","block","name","isChapter","chapters","length","content","label","__","checked","onChange","value","help","map","chapter","index","save","metadata","settings","registerBlockType","registerBlockVariation","title","description","responsiveThreshold","innerBlocks","level","backgroundColor","textColor","isSticky","align","path","replace","concat","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable"],"mappings":";;;;;;;;;;;;;;;;;uHAAcA,EAAOC,QAAUC,OAAW,GAAQ,M,wGCkEnCC,EApDF,SAAC,GAAwD,IAAtDC,EAAqD,EAArDA,WAAuBC,GAA8B,EAAzCC,UAAyC,EAA9BD,eAAeE,EAAe,EAAfA,SAC7CC,EAAuBJ,EAAvBI,mBACCC,EAAaC,0BAEtB,EAAwBC,qBAAU,SAACC,GAClC,IAkBMC,EAlBSD,EAAO,qBAAqBE,YAkBtBC,QAAO,SAAAC,GAAK,MAAmB,iBAAfA,EAAMC,MAA2BD,EAAMZ,WAAWc,aACvF,MAAO,CACNC,SAAU,IAAMN,EAAMO,OAnBR,CACd,CACChB,WAAY,CACXiB,QAAS,iBAGX,CACCjB,WAAY,CACXiB,QAAS,iBAGX,CACCjB,WAAY,CACXiB,QAAS,kBAM6BR,KAEvC,CAACN,IAvBGY,gBAAP,MAAkB,GAAlB,EAyBG,OACF,oBAAC,WAAD,KACC,oBAAC,4BAAD,KACC,oBAAC,gBAAD,CACCG,MAAOC,aAAG,6BACVC,QAAShB,EACTiB,SAAU,SAACC,GACVrB,EAAc,CAACG,oBAAqBA,KAErCmB,KAAMJ,aAAG,yEAA0E,wBAGrF,0BAASd,EACR,8BACE,IAAMU,EAASC,QAAUD,EAASS,KAAI,SAACC,EAASC,GAChD,OAAO,8BAAKD,EAAQzB,WAAWiB,gBCjDtBU,EAJF,WACT,OAAO,oBAAC,WAAD,O,ykBCQX,IAAQd,EAASe,EAATf,KAEFgB,EAAW,CACb9B,OACA4B,QAGJG,4BAAkBjB,EAAD,OAAYe,GAAaC,IAG1CE,iCAAuB,aAAc,CACjClB,KAAM,MACNmB,MAAOb,aAAG,4BACVc,YAAad,aAAG,yGAChBnB,WAAY,CACRE,UAAW,oBACjBgC,oBAAqB,KAEnBC,YAAa,CACT,CACI,eACA,CACIjC,UAAW,sBACXkC,MAAO,EACPnB,QAAS,oBACrBoB,gBAAiB,QACjBC,UAAW,UAGb,CACU,8BACA,CACRlC,oBAAoB,OAMxB2B,iCAAuB,aAAc,CACjClB,KAAM,aACNmB,MAAOb,aAAG,oCACVc,YAAad,aAAG,iJAChBnB,WAAY,CACRE,UAAW,oBACjBqC,UAAU,EACVL,oBAAqB,IACrBM,MAAO,QAELL,YAAa,CACT,CACI,eACA,CACIjC,UAAW,sBACXkC,MAAO,EACPnB,QAAS,oBACrBoB,gBAAiB,QACjBC,UAAW,UAGb,CACU,8BACA,CACRlC,oBAAoB,Q,mBCnER,IAAIqC,EAAK,uBAA6CC,QAAQ,kBAAkB,IAChG,IAAwB5C,OAAO,YAAY6C,OAAOF,K,gBCVpC7C,EAAOC,QAAUC,OAAW,GAAQ,M,gBCApCF,EAAOC,QAAUC,OAAW,GAAc,Y,gBCA1CF,EAAOC,QAAUC,OAAW,GAAW,S,wkBCAvCF,EAAOC,QAAUC,OAAW,GAAe,a,gBCA3CF,EAAOC,QAAUC,OAAW,GAAU,Q,+BCArC,SAAS8C,EAAgBC,EAAKC,EAAKxB,GAYhD,OAXIwB,KAAOD,EACTE,OAAOC,eAAeH,EAAKC,EAAK,CAC9BxB,MAAOA,EACP2B,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZN,EAAIC,GAAOxB,EAGNuB,EAZT,mC","file":"blocks/table-of-contents-6a970e4e.js","sourcesContent":["(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * External Dependencies\n */\n\n\n/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Fragment, useEffect, useMemo } from '@wordpress/element';\nimport { useBlockProps, InspectorAdvancedControls } from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\nimport { ToggleControl } from '@wordpress/components';\n\nconst edit = ({ attributes, className, setAttributes, clientId }) => {\n\tconst { showCurrentChapter } = attributes;\n    const blockProps = useBlockProps();\n\n\tconst {chapters = []} = useSelect((select) => {\n\t\tconst blocks = select('core/block-editor').getBlocks();\n\t\tconst chptrs = [\n\t\t\t{\n\t\t\t\tattributes: {\n\t\t\t\t\tcontent: 'Chapter 1...',\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tattributes: {\n\t\t\t\t\tcontent: 'Chapter 2...',\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tattributes: {\n\t\t\t\t\tcontent: 'Chapter 3...',\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tconst found = blocks.filter(block => block.name === 'core/heading' && block.attributes.isChapter);\n\t\treturn {\n\t\t\tchapters: 0 === found.length ? chptrs : found,\n\t\t}\n\t}, [clientId]);\n\n    return (\n\t\t<Fragment>\n\t\t\t<InspectorAdvancedControls>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={__('Highlight Current Chapter')}\n\t\t\t\t\tchecked={showCurrentChapter}\n\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\tsetAttributes({showCurrentChapter: !showCurrentChapter});\n\t\t\t\t\t}}\n\t\t\t\t\thelp={__('Highlight the current chapter in the table of contents when scrolling.', 'prc-block-library')}\n\t\t\t\t/>\n\t\t\t</InspectorAdvancedControls>\n\t\t\t<div {...blockProps}>\n\t\t\t\t<ul>\n\t\t\t\t\t{0 !== chapters.length && chapters.map((chapter, index) => {\n\t\t\t\t\t\treturn(<li>{chapter.attributes.content}</li>);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\nconst save = () => {\n    return <Fragment />;\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { registerBlockType, registerBlockVariation } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n    edit,\n    save,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n\n// Register block variations for complete TOC sidebar widgets.\nregisterBlockVariation('core/group', {\n    name: 'toc',\n    title: __('Table of Contents Widget'),\n    description: __('A Group block in the \"alt-card\" format with a table of contents list set to show the current chapter.'),\n    attributes: {\n        className: 'is-style-card-alt',\n\t\tresponsiveThreshold: 640,\n    },\n    innerBlocks: [\n        [\n            'core/heading',\n            {\n                className: 'is-style-sub-header',\n                level: 3,\n                content: 'Table of Contents',\n\t\t\t\tbackgroundColor: 'slate',\n\t\t\t\ttextColor: 'white'\n            },\n        ],\n\t\t[\n            'prc-block/table-of-contents',\n            {\n\t\t\t\tshowCurrentChapter: true,\n\t\t\t},\n        ],\n    ],\n});\n\nregisterBlockVariation('core/group', {\n    name: 'toc-sticky',\n    title: __('Table of Contents Sticky Sidebar'),\n    description: __('A Group block in the \"alt-card\" format with a table of contents list that is sticky, watches for the current chapter, and collapses at 480px.'),\n    attributes: {\n        className: 'is-style-card-alt',\n\t\tisSticky: true,\n\t\tresponsiveThreshold: 480,\n\t\talign: 'left'\n    },\n    innerBlocks: [\n        [\n            'core/heading',\n            {\n                className: 'is-style-sub-header',\n                level: 3,\n                content: 'Table of Contents',\n\t\t\t\tbackgroundColor: 'slate',\n\t\t\t\ttextColor: 'white'\n            },\n        ],\n\t\t[\n            'prc-block/table-of-contents',\n            {\n\t\t\t\tshowCurrentChapter: true,\n\t\t\t},\n        ],\n    ],\n});\n","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}