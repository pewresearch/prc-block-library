{"version":3,"sources":["webpack:///external \"React\"","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"coreData\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external \"lodash\"","webpack:///external [\"wp\",\"date\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-debounce.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-fetch.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-search/search-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/list-store/reducer.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/link-toolbar-button/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/caret-heading-link/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/block-inserter-button/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/heading-level-toolbar/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/media-dropzone/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/url-search-field/index.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/functions/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/mailchimp/index.js","webpack:///external \"regeneratorRuntime\"","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"keycodes\"]","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"data\"]","webpack:///./src/story-item/helpers.js","webpack:///./src/story-item/edit/controls/inspector.jsx","webpack:///./src/story-item/edit/controls/placeholder.jsx","webpack:///./src/story-item/edit/controls/icons.jsx","webpack:///./src/story-item/edit/controls/toolbar.jsx","webpack:///./src/story-item/edit/controls/index.js","webpack:///./src/story-item/edit/image.jsx","webpack:///./src/story-item/edit/excerpt.jsx","webpack:///./src/story-item/edit/extra.jsx","webpack:///./src/story-item/edit/header.jsx","webpack:///./src/story-item/edit/meta.jsx","webpack:///./src/story-item/edit/preview.jsx","webpack:///./src/story-item/edit/context-preview.jsx","webpack:///./src/story-item/edit/index.js","webpack:///./src/story-item/save.js","webpack:///./src/story-item/transforms.js","webpack:///./src/story-item/variations.js","webpack:///./src/story-item/index.js"],"names":["module","exports","window","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","styled","Button","DragHandle","sortableHandle","style","marginRight","cursor","flexShrink","width","height","xmlns","viewBox","role","aria-hidden","focusable","d","Wrapper","PickedItem","item","isOrderable","handleItemDelete","mode","type","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","id","result","console","log","newItem","title","rendered","name","url","link","uuid","border","paddingTop","paddingBottom","paddingLeft","className","decodeEntities","filterURLForDisplay","safeDecodeURI","onClick","aria-label","__","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","map","index","itemKey","length","key","sortIndex","totalItems","LinkToolbarButton","onChange","query","subtype","isLinkOpen","setIsLinkOpen","aria-expanded","aria-haspopup","label","icon","showTooltip","position","onClose","showInitialSuggestions","suggestionsQuery","p","settings","CaretHeadingLink","heading","headingSize","disableIcon","setAttributes","tagName","h","placeholder","formattingControls","keepPlaceholderOnFocus","size","marginLeft","BlockInserterButton","blockName","clientId","attributes","tooltipPosition","currentBlock","getBlock","innerBlocks","nextIndex","newBlock","createBlock","dispatch","insertBlock","HeadingLevelIcon","level","isPressed","levelToPath","1","2","3","4","5","6","hasOwnProperty","HeadingLevelToolbar","selectedLevel","levels","Icon","MemoizedHeadingLevelIcon","useCallback","controls","targetLevel","isActive","sprintf","MediaDropZone","SearchRecords","searchRecords","onSelect","imageSize","disableImage","Image","art","rawUrl","caption","src","alt","SearchItem","post_title","date","post_date","canonicalUrl","canonical_url","postAttrs","opts","post","isRefresh","formatDate","storyItem","excerpt","postId","ID","extra","image","isChartArt","chartArt","getAttributesFromPost","display","maxWidth","paddingRight","fontSize","color","fontStyle","lineHeight","URLSearchField","onKeyEnter","onKeyESC","onUpdateURL","useEntityProp","postType","isLoading","toggleLoading","searchInput","setSearchInput","searchString","searchStringIsUrl","useMemo","undefined","match","foundObject","setFoundObject","hasSearchString","useEntityRecords","per_page","post_parent","search","context","records","isResolving","hasSearchRecords","hasFoundObject","hasNothingFound","newUrl","Promise","resolve","reject","apiFetch","path","method","data","then","Error","catch","err","error","onNavigate","elm","shortcuts","esc","tabIndex","keyword","autoComplete","justifyContent","alignItems","textAlign","padding","variant","flexDirection","URLSearchToolbar","isModalOpen","setIsModalOpen","onRequestClose","shouldCloseOnClickOutside","shouldCloseOnEsc","minWidth","margin","getTerms","taxonomy","perPage","terms","slug","replace","toLowerCase","parent","getTermsAsOptions","termValue","sortByLabel","labelOptions","Object","keys","forEach","termObj","push","sort","a","b","getTermsAsTree","treeData","convertedData","i","filter","e","c","f","children","cT","mailChimpInterests","regeneratorRuntime","useStoryItemBlockProps","imageSlot","enableEmphasis","enableExcerptBelow","logicalClasses","bordered","aligned","blockPropsArgs","classNames","useBlockProps","stubEnabledSiteIds","Array","from","Inspector","isUsingContext","queryId","Number","isInteger","siteId","isRefreshing","refresh","enableHeader","enableExcerpt","enableExtra","enableBreakingNews","disableMobileStyles","enableMeta","metaTaxonomy","includes","help","checked","prcBreakingNews","alert","options","newMetaTaxonomy","isSecondary","isBusy","attrs","refreshPostAttributes","marginBottom","text","isDestructive","Placeholder","blockProps","isColumnLayout","instructions","isLink","marginTop","svgPath","ImageSlotIcon","selected","arrowRight","arrowLeft","arrowUp","arrowDown","close","more","ImageSizeIcon","currentlyActive","A1","A2","A3","A4","XL","Toolbar","headerSize","columnWidth","handleImageSizeChange","newSize","setArtBySize","MemoizedImageSlotIcon","MemoizedImageSizeIcon","isDisabled","Controls","ALLOWED_MEDIA_TYPES","default","small","hidpi","smallHidpi","ImageDisplay","img","getImgURL","args","resize","addQueryArgs","getImgSrcSet","threshold","srcSet","media","sources","Img","isXL","isA1","isA2","isA3","isA4","allowedTypes","render","open","withIllustration","Excerpt","Math","floor","random","classes","multiline","Extra","href","Header","large","medium","light","t","allowedFormats","Meta","datePickerVisible","setDatePickerVisible","hide_empty","entityTerms","hasRecords","cleanedLabel","cleanForSlug","term","l","currentDate","IMAGE_SIZES","Preview","headerClasses","imageClasses","excerptClasses","displayImage","Content","ContextPreview","useEntityRecord","record","palceholderTitle","palceholderExcerpt","opacity","raw","edit","isSelected","isPreview","save","siteDomain","transforms","isMatch","node","maybeUrl","nodeName","textContent","trim","isURL","startsWith","transform","priority","variations","isDefault","metadata","example","supports","background","typography","__experimentalLabel","registerBlockType"],"mappings":"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","file":"blocks/story-item-b7380454.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"coreData\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"lodash\"]; }());","(function() { module.exports = window[\"wp\"][\"date\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","/**\n * WordPress Dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Watches an inputValue and returns a debounced version of it after set delay.\n * Usage: const debouncedValue = useDebounce('a string being typed by a user...', 500);\n * @param {*} inputValue\n * @param {*} delay\n * @returns value after delay\n */\nconst useDebounce = (value, delay) => {\n\t// State and setters for debounced value\n\tconst [debouncedValue, setDebouncedValue] = useState(value);\n\tuseEffect(\n\t\t() => {\n\t\t\t// Update debounced value after delay\n\t\t\tconst handler = setTimeout(() => {\n\t\t\t\tsetDebouncedValue(value);\n\t\t\t}, delay);\n\t\t\t// Cancel the timeout if value changes (also on delay change or unmount)\n\t\t\t// This is how we prevent debounced value from updating if value is changed ...\n\t\t\t// .. within the delay period. Timeout gets cleared and restarted.\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(handler);\n\t\t\t};\n\t\t},\n\t\t[value, delay], // Only re-call effect if value or delay changes\n\t);\n\treturn debouncedValue;\n}\n\nexport default useDebounce;\n","import { useEffect, useRef, useReducer } from '@wordpress/element';\n\n/**\n * A react hook to fetch data from a url and store status, errors, and date in state.\n * Usage: const { status, data, error } = useFetch(url);\n * Adapted from https://www.smashingmagazine.com/2020/07/custom-react-hook-fetch-cache-data/\n * Example application: https://codesandbox.io/s/usefetch-demo-clt9o\n * @param {*} url\n * @returns {object} status, data, and error\n */\nconst useFetch = (url) => {\n\tconst cache = useRef({});\n\n\t// initial state, no preloaded data\n\tconst initialState = {\n\t\tstatus: 'idle',\n\t\terror: null,\n\t\tdata: [],\n\t};\n\n\t// reducer function to update state depending on current status of fetch\n\tconst reducer = (state, action) => {\n\t\tswitch (action.type) {\n\t\t\tcase 'FETCHING':\n\t\t\t\treturn { ...initialState, status: 'fetching' };\n\t\t\tcase 'FETCHED':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'fetched',\n\t\t\t\t\tdata: action.payload,\n\t\t\t\t};\n\t\t\tcase 'FETCH_ERROR':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\terror: action.payload,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t};\n\t// useReducer instead of useState to set multiple values simultaneously and prevent unnecessary rerenders.\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\tuseEffect(() => {\n\t\tlet cancelRequest = false;\n\t\tif (!url) return undefined;\n\n\t\tconst fetchData = async () => {\n\t\t\tdispatch({ type: 'FETCHING' });\n\t\t\tif (cache.current[url]) {\n\t\t\t\tconst data = cache.current[url];\n\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url);\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tcache.current[url] = data;\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: 'FETCH_ERROR',\n\t\t\t\t\t\t\tpayload: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\t// cleanup switch to prevent data leak on unmount\n\t\treturn function cleanup() {\n\t\t\tcancelRequest = true;\n\t\t};\n\t}, [url]);\n\n\treturn state;\n};\n\nexport default useFetch;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nfunction SearchItem({\n\tsuggestion,\n\tonClick,\n\tsearchTerm,\n\tisSelected,\n\tid,\n\tcontentTypes,\n}) {\n\tconst showType = suggestion.type && 1 < contentTypes.length;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight\n\t\t\t\t\t\t\ttext={decodeEntities(suggestion.title)}\n\t\t\t\t\t\t\thighlight={searchTerm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{'post_tag' === suggestion.type ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n}\n\nexport default SearchItem;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(\n\t({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\t\tconst ItemComponent =\n\t\t\tfalse !== ChildComponent\n\t\t\t\t? isOrderable\n\t\t\t\t\t? SortableElement(ChildComponent)\n\t\t\t\t\t: ChildComponent\n\t\t\t\t: isOrderable\n\t\t\t\t? SortableElement(PickedItem)\n\t\t\t\t: PickedItem;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{items.map((item, index) => {\n\t\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ItemComponent\n\t\t\t\t\t\t\tisOrderable={\n\t\t\t\t\t\t\t\tisOrderable && 1 < items.length ? isOrderable : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\t\t\tsortIndex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nexport default SortableList;\n","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","const DEFAULT_STATE = [];\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n\t// Cloned is used in reorder, setItem, and setItemProp:\n\tconst cloned = [...state];\n\t// eslint-disable-next-line default-case\n\tswitch (action.type) {\n\t\tcase 'SEED':\n\t\t\treturn [...action.items];\n\t\tcase 'APPEND':\n\t\t\treturn [...state, ...action.items];\n\t\tcase 'PREPEND':\n\t\t\treturn [...action.items, ...state];\n\t\tcase 'INSERT':\n\t\t\treturn [\n\t\t\t\t...state.slice(0, action.index),\n\t\t\t\t...action.items,\n\t\t\t\t...state.slice(action.index),\n\t\t\t];\n\t\tcase 'APPLY':\n\t\t\treturn state.map((item, index) => action.fn(item, index));\n\t\tcase 'REMOVE':\n\t\t\treturn state.filter((_, index) => !action.indexes.includes(index));\n\t\tcase 'REORDER':\n\t\t\t// eslint-disable-next-line no-case-declarations\n\t\t\tconst item = state[action.from];\n\n\t\t\tcloned.splice(action.from, 1);\n\t\t\tcloned.splice(action.to, 0, item);\n\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM':\n\t\t\tcloned[action.index] = action.item;\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM_PROP':\n\t\t\tcloned[action.index] = {\n\t\t\t\t...cloned[action.index],\n\t\t\t\t[action.prop]: action.value,\n\t\t\t};\n\t\t\treturn cloned;\n\t}\n\n\treturn state;\n};\n\nexport default reducer;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\nimport { Fragment, useState } from '@wordpress/element';\nimport { ToolbarButton, Popover } from '@wordpress/components';\n\n/**\n * Link control in a toolbar button that defaults to searching for topic terms\n */\nfunction LinkToolbarButton({\n\turl,\n\tonChange,\n\tquery = { type: 'term', subtype: 'topic' },\n}) {\n\tconst [isLinkOpen, setIsLinkOpen] = useState(false);\n\treturn (\n\t\t<Fragment>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isLinkOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__('Set Link')}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsLinkOpen(!isLinkOpen)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isLinkOpen && (\n\t\t\t\t<Popover position=\"bottom center\" onClose={() => setIsLinkOpen(false)}>\n\t\t\t\t\t<LinkControl\n\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\n\t\t\t\t\t\tvalue={{ url }}\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t\tsuggestionsQuery={query}\n\t\t\t\t\t\tonChange={(p) => onChange(p)}\n\t\t\t\t\t\tsettings={[]}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default LinkToolbarButton;\n","/**\n * External Dependencies\n */\nimport { Icon } from 'semantic-ui-react';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { Flex, FlexItem, FlexBlock, ToolbarGroup } from '@wordpress/components';\nimport { BlockControls, RichText } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport LinkToolbarButton from '../link-toolbar-button';\n\nconst CaretHeadingLink = ({\n\turl,\n\theading,\n\theadingSize = 'h2',\n\tdisableIcon = false,\n\tsetAttributes,\n}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<LinkToolbarButton\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tonChange={p => {\n\t\t\t\t\t\t\tsetAttributes({ url: p.url });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Flex style={{ paddingBottom: '1em' }}>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName={headingSize}\n\t\t\t\t\t\tvalue={heading}\n\t\t\t\t\t\tonChange={h => setAttributes({ heading: h })}\n\t\t\t\t\t\tplaceholder=\"Heading...\"\n\t\t\t\t\t\tformattingControls={[]}\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\tclassName=\"sans-serif\"\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t{true !== disableIcon && (\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"chevron right\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{ marginLeft: '0.5em' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</Fragment>\n\t);\n};\n\nexport default CaretHeadingLink;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { select, dispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\n\nfunction BlockInserterButton({\n\tlabel = '',\n\tblockName,\n\tclientId,\n\tclassName,\n\tattributes = {},\n}) {\n\tconst handleClick = () => {\n\t\tconst currentBlock = select('core/block-editor').getBlock(clientId);\n\t\tconsole.log('debug info...', currentBlock.innerBlocks.length);\n\t\tconst nextIndex =\n\t\t\t0 === currentBlock.innerBlocks.length\n\t\t\t\t? 0\n\t\t\t\t: currentBlock.innerBlocks.length + 1;\n\t\tconst newBlock = createBlock(blockName, attributes);\n\t\tdispatch('core/block-editor').insertBlock(newBlock, nextIndex, clientId);\n\t};\n\treturn (\n\t\t<Button\n\t\t\tlabel={__(label)}\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName=\"block-editor-button-block-appender\"\n\t\t>\n\t\t\t{__(label)}\n\t\t</Button>\n\t);\n}\n\nexport default BlockInserterButton;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport {\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n\tPath,\n\tSVG,\n} from '@wordpress/components';\nimport { DOWN } from '@wordpress/keycodes';\n\nfunction HeadingLevelIcon({ level, isPressed = false }) {\n\tconst levelToPath = {\n\t\t1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n\t\t2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n\t\t3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n\t\t4: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z',\n\t\t5: 'M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z',\n\t\t6: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z',\n\t};\n\tif (!levelToPath.hasOwnProperty(level)) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SVG\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tisPressed={isPressed}\n\t\t>\n\t\t\t<Path d={levelToPath[level]} />\n\t\t</SVG>\n\t);\n}\n\nfunction HeadingLevelToolbar({\n\tselectedLevel,\n\tlevels = [2, 3],\n\tonChange,\n\tIcon = HeadingLevelIcon,\n}) {\n\tconsole.log('HeadingLevelToolbar', selectedLevel);\n\n\tconst MemoizedHeadingLevelIcon = useCallback(\n\t\t() => <Icon level={selectedLevel} isPressed />,\n\t\t[selectedLevel],\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarDropdownMenu\n\t\t\t\ticon={MemoizedHeadingLevelIcon}\n\t\t\t\tlabel=\"Select Heading Size\"\n\t\t\t\tcontrols={levels.map((targetLevel) => {\n\t\t\t\t\tconst isActive = targetLevel === selectedLevel;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t\t// translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n\t\t\t\t\t\t\t__('Heading %d'),\n\t\t\t\t\t\t\ttargetLevel,\n\t\t\t\t\t\t),\n\t\t\t\t\t\ticon: <Icon level={targetLevel} isPressed={isActive} />,\n\t\t\t\t\t\tisActive,\n\t\t\t\t\t\tonClick: () => onChange(targetLevel),\n\t\t\t\t\t};\n\t\t\t\t})}\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default HeadingLevelToolbar;\n","/**\n * WordPress Dependencies\n */\nimport { has } from 'underscore';\nimport { __ } from '@wordpress/i18n';\nimport { Button, DropZone } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst DEFAULT_IMAGE_SIZE = 'full';\n\nfunction MediaDropZone({\n\tattachmentId = false,\n\tonUpdate = (attachment) => {\n\t\tconsole.warn(\n\t\t\t'Media DropZone Attachment, use onUpdate prop when using <MediaDropZone/>: ',\n\t\t\tattachment,\n\t\t);\n\t},\n\tonClear = false,\n\tmediaType = ['image'],\n\tmediaSize = DEFAULT_IMAGE_SIZE,\n\tlabel = __('Set Image'),\n}) {\n\tconst [id, setId] = useState(attachmentId);\n\tconst [isUploading, setIsUploading] = useState(false);\n\n\t/**\n\t * When id (attachmentId) changes update the media and get its src, dimensions, and type.\n\t */\n\tconst { media, src, width, height, type } = useSelect(\n\t\t(select) => {\n\t\t\tconst m = id ? select('core').getMedia(id) : false;\n\t\t\tconsole.log('m...', id, m);\n\t\t\tif (undefined === m || false === m) {\n\t\t\t\treturn {\n\t\t\t\t\tmedia: false,\n\t\t\t\t\tsrc: false,\n\t\t\t\t\twidth: false,\n\t\t\t\t\theight: false,\n\t\t\t\t\ttype: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet mediaSourceUrl = false;\n\t\t\tlet mediaWidth = false;\n\t\t\tlet mediaHeight = false;\n\n\t\t\tif (has(m, ['media_details', 'sizes', mediaSize])) {\n\t\t\t\t// use mediaSize when available\n\t\t\t\tmediaWidth = m.media_details.sizes[mediaSize].width;\n\t\t\t\tmediaHeight = m.media_details.sizes[mediaSize].height;\n\t\t\t\tmediaSourceUrl = m.media_details.sizes[mediaSize].source_url;\n\t\t\t} else {\n\t\t\t\t// get fallbackMediaSize if mediaSize is not available\n\t\t\t\tconst fallbackMediaSize = DEFAULT_IMAGE_SIZE;\n\t\t\t\tif (has(m, ['media_details', 'sizes', fallbackMediaSize])) {\n\t\t\t\t\t// use fallbackMediaSize when mediaSize is not available\n\t\t\t\t\tmediaWidth = m.media_details.sizes[fallbackMediaSize].width;\n\t\t\t\t\tmediaHeight = m.media_details.sizes[fallbackMediaSize].height;\n\t\t\t\t\tmediaSourceUrl = m.media_details.sizes[fallbackMediaSize].source_url;\n\t\t\t\t} else {\n\t\t\t\t\t// use full image size when mediaFallbackSize and mediaSize are not available\n\t\t\t\t\tmediaWidth = m.media_details.width;\n\t\t\t\t\tmediaHeight = m.media_details.height;\n\t\t\t\t\tmediaSourceUrl = m.source_url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmedia: m,\n\t\t\t\tsrc: mediaSourceUrl,\n\t\t\t\twidth: mediaWidth,\n\t\t\t\theight: mediaHeight,\n\t\t\t\ttype: false !== m ? m.type : false,\n\t\t\t};\n\t\t},\n\t\t[id],\n\t);\n\n\tconst onMediaUpdate = (media) => {\n\t\tconsole.log('onMediaUpdate', id, media.id);\n\t\tif (media.id !== id) {\n\t\t\tsetId(media.id);\n\t\t\tonUpdate(media);\n\t\t}\n\t\tsetIsUploading(false);\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList);\n\t\tuploadMedia({\n\t\t\tallowedTypes: mediaType,\n\t\t\tfilesList,\n\t\t\tonFileChange([image]) {\n\t\t\t\tconsole.log('onFileChange', image);\n\t\t\t\tif (!image.id) {\n\t\t\t\t\tconsole.log('waiting');\n\t\t\t\t\tsetIsUploading(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('found!', image);\n\t\t\t\t\timage.sizes = image.media_details.sizes;\n\t\t\t\t\tonMediaUpdate(image);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t});\n\t};\n\n\tconst displayImage =\n\t\tfalse !== id && false !== media && false !== src && false === isUploading;\n\n\treturn (\n\t\t<MediaUploadCheck fallback={__(`Fallback Instructions Should Go Here`)}>\n\t\t\t<MediaUpload\n\t\t\t\ttitle={__(`Media Upload`)}\n\t\t\t\tonSelect={onMediaUpdate}\n\t\t\t\tallowedTypes={mediaType}\n\t\t\t\tvalue={id}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{displayImage && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\t\tbackground: 'none',\n\t\t\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt=\"Drop an asset here, or click to replace.\"\n\t\t\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t\t\twidth={`${width}px`}\n\t\t\t\t\t\t\t\t\theight={`${height}px`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false !== onClear && displayImage && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tonClear();\n\t\t\t\t\t\t\t\t\tsetId(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tClear Image\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{((false !== id && false === media) || isUploading) && (\n\t\t\t\t\t\t\t<Button variant=\"secondary\" isBusy onClick={open}>\n\t\t\t\t\t\t\t\t{__(` Loading...`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false === id && (\n\t\t\t\t\t\t\t<Button variant=\"secondary\" onClick={open}>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<DropZone onFilesDrop={onDropImage} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default MediaDropZone;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState, useMemo, useEffect } from '@wordpress/element';\nimport {\n\tButton,\n\tCard,\n\tCardBody,\n\tCardMedia,\n\tSearchControl,\n\tSpinner,\n\tTabbableContainer,\n\tKeyboardShortcuts,\n\tModal,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { date as formatDate } from '@wordpress/date';\nimport { useEntityRecords, useEntityProp } from '@wordpress/core-data';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Internal Dependencies\n */\nimport { useDebounce } from '../../hooks';\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n\tconst { post, imageSize = false, isRefresh = false } = opts;\n\tconsole.log('getAttributesFromPost', post);\n\n\tif (null === post) {\n\t\treturn {};\n\t}\n\n\tconst date = formatDate('M j, Y', post.date);\n\n\tconst storyItem = {\n\t\ttitle:\n\t\t\tpost.hasOwnProperty('title') && post.title.hasOwnProperty('rendered')\n\t\t\t\t? post.title.rendered\n\t\t\t\t: '',\n\t\texcerpt:\n\t\t\tpost.hasOwnProperty('excerpt') && post.excerpt.hasOwnProperty('rendered')\n\t\t\t\t? post.excerpt.rendered\n\t\t\t\t: '',\n\t\turl: post.canonical_url, // @TODO where is this `link` coming from, why is it not url or permalink.\n\t\tlabel: post.hasOwnProperty('label') ? post.label : 'report',\n\t\tdate,\n\t\tpostId: post.id || post.ID,\n\t};\n\n\tif (true !== isRefresh) {\n\t\tstoryItem.extra = '';\n\t}\n\n\tif (false !== imageSize && post.art) {\n\t\tconst { art } = post;\n\t\tstoryItem.image = art[imageSize].rawUrl;\n\t\tstoryItem.isChartArt = art[imageSize].chartArt;\n\t}\n\n\treturn storyItem;\n};\n\nfunction SearchRecords({\n\tsearchRecords,\n\tonSelect,\n\timageSize = 'A3',\n\tdisableImage = false,\n}) {\n\treturn searchRecords.map((item) => (\n\t\t<SearchItem {...{ item, onSelect, imageSize, disableImage }} />\n\t));\n}\n\nfunction Image({ item, imageSize }) {\n\tconst { art } = item;\n\t// Check if art has imageSize as a valid key. If so get the rawUrl, height and width. Then return an img tag accordingly.\n\tif (art && art[imageSize]) {\n\t\tconst { rawUrl, height, width, caption } = art[imageSize];\n\t\treturn (\n\t\t\t<CardMedia>\n\t\t\t\t<img src={rawUrl} height={height} width={width} alt={caption} />\n\t\t\t</CardMedia>\n\t\t);\n\t}\n\treturn null;\n}\n\nfunction SearchItem({\n\titem,\n\tonSelect,\n\timageSize = 'A3',\n\tdisableImage = false,\n}) {\n\tif (!item) {\n\t\treturn null;\n\t}\n\t// if item has post_title then use that otherwise use title.rendered\n\tconst title = item.post_title ? item.post_title : item.title.rendered;\n\t// if item has post_date then use that otherwise use date\n\tconst date = item.post_date ? item.post_date : item.date;\n\n\tconst { label } = item;\n\tconst canonicalUrl = item.canonical_url;\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events\n\t\t<Card\n\t\t\tonClick={() => {\n\t\t\t\tconst postAttrs = getAttributesFromPost({\n\t\t\t\t\tpost: item,\n\t\t\t\t\timageSize,\n\t\t\t\t\tisRefresh: false,\n\t\t\t\t});\n\t\t\t\tonSelect(postAttrs);\n\t\t\t}}\n\t\t\tsize=\"small\"\n\t\t\tstyle={{\n\t\t\t\tcursor: 'pointer',\n\t\t\t\t':hover': {\n\t\t\t\t\t'background-color': '#f3f4f5',\n\t\t\t\t},\n\t\t\t}}\n\t\t>\n\t\t\t<CardBody\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{!disableImage && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '35%',\n\t\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\t\tpaddingRight: '1em',\n\t\t\t\t\t\t\tpaddingTop: '0.5em',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Image {...{ item, imageSize }} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${label} | ${formatDate('M j, Y', date)}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<strong>{title}</strong>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\t\tfontStyle: 'italic',\n\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\tlineHeight: '1.5em',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{canonicalUrl}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardBody>\n\t\t</Card>\n\t);\n}\n\nexport function URLSearchField({\n\tattributes,\n\tsetAttributes,\n\tdisableImage = false,\n\tonSelect = () => {},\n\tonKeyEnter = () => {},\n\tonKeyESC = () => {},\n\tonUpdateURL = () => {},\n}) {\n\tconst { imageSize, url, postId } = attributes;\n\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst [isLoading, toggleLoading] = useState(!!url);\n\n\tconst [searchInput, setSearchInput] = useState(url);\n\tconst searchString = useDebounce(searchInput, 500);\n\tconst searchStringIsUrl = useMemo(() => {\n\t\tif (\n\t\t\tundefined !== searchString &&\n\t\t\tsearchString.match(/^(http|https):\\/\\//)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [searchString]);\n\tconst [foundObject, setFoundObject] = useState(null);\n\n\tconst hasSearchString = !!searchString.length;\n\n\tconst { records: searchRecords, isResolving } = useEntityRecords(\n\t\t'postType',\n\t\tpostType,\n\t\t{\n\t\t\tper_page: 10,\n\t\t\tpost_parent: 0, // exclude child posts\n\t\t\tsearch: hasSearchString && !searchStringIsUrl ? searchString : '',\n\t\t\tcontext: 'view',\n\t\t},\n\t);\n\tconst hasSearchRecords =\n\t\t!isLoading && !searchStringIsUrl && searchRecords\n\t\t\t? 0 < searchRecords.length\n\t\t\t: false;\n\tconst hasFoundObject =\n\t\t!isLoading && searchStringIsUrl && null !== foundObject;\n\tconst hasNothingFound = !isLoading && !hasSearchRecords && !hasFoundObject;\n\n\tconst getPostByUrl = (newUrl) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/stub/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url: newUrl },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif ('object' !== typeof post) {\n\t\t\t\t\t\treject(new Error('post is not an object'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => reject(err));\n\t\t});\n\n\tuseEffect(() => {\n\t\tif (searchStringIsUrl) {\n\t\t\ttoggleLoading(true);\n\t\t\tgetPostByUrl(searchString)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tsetFoundObject(post);\n\t\t\t\t\ttoggleLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error('getPostByUrl error', err);\n\t\t\t\t\tsetFoundObject(null);\n\t\t\t\t\ttoggleLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [searchString, searchStringIsUrl]);\n\n\tuseEffect(() => {\n\t\ttoggleLoading(isResolving);\n\t}, [isResolving]);\n\n\treturn (\n\t\t<TabbableContainer\n\t\t\tonNavigate={(index, elm) => console.log('onNavigate:', elm)}\n\t\t>\n\t\t\t<KeyboardShortcuts\n\t\t\t\tshortcuts={{\n\t\t\t\t\tesc: () => {\n\t\t\t\t\t\tif ('function' === typeof onKeyESC) {\n\t\t\t\t\t\t\tonKeyESC();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t// enter: () => {\n\t\t\t\t\t// \tif (searchStringIsUrl && hasNothingFound) {\n\t\t\t\t\t// \t\tsetAttributes({\n\t\t\t\t\t// \t\t\turl: searchString,\n\t\t\t\t\t// \t\t});\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \tif (searchStringIsUrl && hasFoundObject) {\n\t\t\t\t\t// \t\tconst postAttrs = getAttributesFromPost({\n\t\t\t\t\t// \t\t\tpost: foundObject,\n\t\t\t\t\t// \t\t\timageSize,\n\t\t\t\t\t// \t\t\tisRefresh: false,\n\t\t\t\t\t// \t\t});\n\t\t\t\t\t// \t\tonSelect(postAttrs);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \tif ('function' === typeof onKeyEnter) {\n\t\t\t\t\t// \t\tonKeyEnter();\n\t\t\t\t\t// \t}\n\t\t\t\t\t// },\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<SearchControl\n\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\tplaceholder=\"Climate Change...\"\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t/>\n\t\t\t</KeyboardShortcuts>\n\t\t\t{hasSearchString && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>Loading... </span>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasNothingFound && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t\tpaddingTop: '1em',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tpadding: '1em 0',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>{__('Nothing found.', 'prc-block-library')}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{searchStringIsUrl && (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tonUpdateURL();\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\turl: searchString,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{__('Change the URL', 'prc-block-library')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasFoundObject && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t{...{ item: foundObject, onSelect, imageSize, disableImage }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t\t\tpaddingTop: '1em',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t`Click the item to replace this block's content`,\n\t\t\t\t\t\t\t\t\t\t'prc-block-library',\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{undefined !== postId && (\n\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '1em 0',\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span>{__('~ or ~', 'prc-block-library')}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{searchStringIsUrl && (\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonUpdateURL();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: searchString,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__('Change the URL', 'prc-block-library')}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasSearchRecords && !searchStringIsUrl && (\n\t\t\t\t\t\t<SearchRecords\n\t\t\t\t\t\t\t{...{ searchRecords, onSelect, imageSize, disableImage }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t</TabbableContainer>\n\t);\n}\n\nexport function URLSearchToolbar({\n\tattributes,\n\tsetAttributes,\n\tonSelect = () => {},\n}) {\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isModalOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__(\n\t\t\t\t\t`Search for a ${postType} or paste url here`,\n\t\t\t\t\t'prc-block-library',\n\t\t\t\t)}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsModalOpen(true)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isModalOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__(\n\t\t\t\t\t\t`Search for a ${postType} or paste url here`,\n\t\t\t\t\t\t'prc-block-library',\n\t\t\t\t\t)}\n\t\t\t\t\tonRequestClose={() => setIsModalOpen(false)}\n\t\t\t\t\tshouldCloseOnClickOutside={false}\n\t\t\t\t\tshouldCloseOnEsc={false}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tminWidth: '340px',\n\t\t\t\t\t\t\tmaxWidth: '640px',\n\t\t\t\t\t\t\tmargin: '0 auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<URLSearchField\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\tonSelect: (postAttrs) => {\n\t\t\t\t\t\t\t\t\tonSelect(postAttrs);\n\t\t\t\t\t\t\t\t\tsetIsModalOpen(false);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyEnter: () => setIsModalOpen(false),\n\t\t\t\t\t\t\t\tonKeyESC: () => setIsModalOpen(false),\n\t\t\t\t\t\t\t\tonUpdateURL: () => {\n\t\t\t\t\t\t\t\t\tsetIsModalOpen(false);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</ToolbarGroup>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nfunction ifMatchSetAttribute(\n\tneedle,\n\thaystack,\n\tattrKey,\n\tattrValue,\n\tsetAttributes,\n) {\n\tif (needle === haystack) {\n\t\tsetAttributes({ [attrKey]: attrValue });\n\t}\n}\n\nfunction randomId() {\n\t// Math.random should be unique because of its seeding algorithm.\n\t// Convert it to base 36 (numbers + letters), and grab the first 9 characters\n\t// after the decimal.\n\treturn `_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction getTermsByLetter(taxonomy, letter) {\n\treturn new Promise((resolve) => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then((terms) => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n}\n\nfunction getTerms(taxonomy, perPage = 25) {\n\treturn new Promise((resolve) => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then((terms) => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n}\n\nfunction getTermsAsOptions(\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy, perPage).then((data) => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tconst value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n}\n\nfunction getTermsAsTree(taxonomy) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy).then((data) => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map((i) => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter((e) => 0 === e.parent);\n\t\t\tparentTerms.forEach((e) => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter((f) => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach((cT) => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n}\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n\t{\n\t\tlabel: 'Weekly roundup of all new publications',\n\t\tvalue: '7c1390ba46',\n\t},\n\t{\n\t\tlabel: 'Quarterly update from the president',\n\t\tvalue: 'a33430a835',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Global attitudes & trends (twice a month)',\n\t\tvalue: '9203343b04',\n\t},\n\t{\n\t\tlabel: 'Internet, science & tech (monthly)',\n\t\tvalue: 'ea87b26abe',\n\t},\n\t{\n\t\tlabel: 'Daily briefing of media news',\n\t\tvalue: '1d2638430b',\n\t},\n\t{\n\t\tlabel: 'Race & ethnicity (monthly)',\n\t\tvalue: '0e7495c7b2',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Weekly newsletter',\n\t\tvalue: 'a7d4f3268f',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Daily religion headlines',\n\t\tvalue: '1a647764b2',\n\t},\n\t{\n\t\tlabel: 'Social & demographic trends (monthly)',\n\t\tvalue: '3836f62305',\n\t},\n\t{\n\t\tlabel: 'Methodological research (quarterly)',\n\t\tvalue: '6d1e80bbaf',\n\t},\n\t{\n\t\tlabel: 'U.S. politics & policy (monthly)',\n\t\tvalue: 'fa5fdbc701',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'SELECT ALL',\n\t\tvalue: 'select-all',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Immigration',\n\t\tvalue: 'xxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Census',\n\t\tvalue: 'xxxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - Muslims and Islam',\n\t\tvalue: 'xxxxx',\n\t},\n];\n\nexport { mailChimpInterests };\n","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { date as formatDate } from '@wordpress/date';\nimport { useBlockProps } from '@wordpress/block-editor';\n\nconst setArtBySize = (imageSize, postId, setAttributes) => {\n\tif (0 !== postId && false !== setAttributes) {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/get-art/?postId=${postId}`,\n\t\t}).then((data) => {\n\t\t\tif (false !== data) {\n\t\t\t\tif (undefined !== data[imageSize] && false !== setAttributes) {\n\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\timage: data[imageSize].rawUrl,\n\t\t\t\t\t\tisChartArt: data[imageSize].chartArt,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n\tconst { post, imageSize, isRefresh = false } = opts;\n\tconsole.log('getAttributesFromPost', post);\n\n\tif (null === post) {\n\t\treturn {};\n\t}\n\n\tconst date = formatDate('M j, Y', post.date);\n\n\tconst storyItem = {\n\t\ttitle:\n\t\t\tpost.hasOwnProperty('title') && post.title.hasOwnProperty('rendered')\n\t\t\t\t? post.title.rendered\n\t\t\t\t: '',\n\t\texcerpt:\n\t\t\tpost.hasOwnProperty('excerpt') && post.excerpt.hasOwnProperty('rendered')\n\t\t\t\t? post.excerpt.rendered\n\t\t\t\t: '',\n\t\turl: post.canonical_url, // @TODO where is this `link` coming from, why is it not url or permalink.\n\t\tlabel: post.hasOwnProperty('label') ? post.label : 'report',\n\t\tdate,\n\t\tpostId: post.id || post.ID,\n\t};\n\n\tif (true !== isRefresh) {\n\t\tstoryItem.extra = '';\n\t}\n\n\tif (post.art) {\n\t\tconst { art } = post;\n\t\tstoryItem.image = art[imageSize].rawUrl;\n\t\tstoryItem.isChartArt = art[imageSize].chartArt;\n\t}\n\n\treturn storyItem;\n};\n\n/**\n * Set attributes for a story item from a stub by post id OR by url.\n *\n * @param {*} postId\n * @param {*} imageSize\n * @param {*} isRefresh\n * @param {*} setAttributes\n * @returns\n */\nconst refreshPostAttributes = (options) => {\n\tconst {\n\t\tsetAttributes,\n\t\tpostId = false,\n\t\timageSize = 'A1',\n\t\tisRefresh = false,\n\t} = options;\n\n\tif (false === postId || undefined === setAttributes) {\n\t\treturn;\n\t}\n\n\tapiFetch({\n\t\tpath: `/wp/v2/stub/${postId}`,\n\t\tmethod: 'GET',\n\t})\n\t\t.then((post) => {\n\t\t\tif (false !== post) {\n\t\t\t\tconst attrs = getAttributesFromPost({\n\t\t\t\t\tpost,\n\t\t\t\t\timageSize,\n\t\t\t\t\tisRefresh,\n\t\t\t\t});\n\t\t\t\tsetAttributes(attrs);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error(err));\n};\n\nconst getStoryItemByURL = (newUrl) =>\n\tnew Promise((resolve, reject) => {\n\t\tapiFetch({\n\t\t\tpath: '/prc-api/v2/stub/get-post-by-url',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { url: newUrl },\n\t\t})\n\t\t\t.then((post) => {\n\t\t\t\tif ('object' !== typeof post) {\n\t\t\t\t\treject(new Error('post is not an object'));\n\t\t\t\t}\n\t\t\t\tconst newAttributes = getAttributesFromPost({\n\t\t\t\t\tpost,\n\t\t\t\t\timageSize: 'A1',\n\t\t\t\t});\n\t\t\t\tresolve(newAttributes);\n\t\t\t})\n\t\t\t.catch((err) => reject(err));\n\t});\n\nconst useStoryItemBlockProps = (attributes) => {\n\tconst {\n\t\timageSlot,\n\t\timageSize,\n\t\tenableEmphasis,\n\t\tenableExcerptBelow,\n\t\tclassName,\n\t} = attributes;\n\n\tconst logicalClasses = {\n\t\tbordered: enableEmphasis,\n\t\t'alt-excerpt': enableExcerptBelow,\n\t};\n\tif ('disabled' !== imageSlot) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif ('disabled' !== imageSlot && '' !== imageSize) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\n\treturn useBlockProps(blockPropsArgs);\n};\n\n// Everything except site's 19 and 17.\n// @TODO: I wish there was a more systemic way to approach this but it'll work for now\nconst stubEnabledSiteIds = Array.from(Array(19).keys()).filter(\n\t(id) => 17 !== id && 0 !== id,\n);\n\nexport {\n\tsetArtBySize,\n\tgetStoryItemByURL,\n\tgetAttributesFromPost,\n\trefreshPostAttributes,\n\tuseStoryItemBlockProps,\n\tstubEnabledSiteIds,\n};\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isInteger } from 'lodash';\nimport {\n\tInspectorControls,\n\tInspectorAdvancedControls,\n} from '@wordpress/block-editor';\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tButton,\n\tCardDivider,\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n} from '@wordpress/components';\nimport { useEntityProp } from '@wordpress/core-data';\n\n/**\n * Internal Dependencies\n */\nimport { refreshPostAttributes, stubEnabledSiteIds } from '../../helpers';\n\nfunction Inspector({ attributes, setAttributes, context }) {\n\tconst isUsingContext =\n\t\tundefined !== context.queryId &&\n\t\tundefined !== context.postId &&\n\t\tundefined !== context.postType &&\n\t\t0 !== context.postId &&\n\t\tNumber.isInteger(context.postId);\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst [isRefreshing, refresh] = useState(false);\n\tconst {\n\t\tpostId,\n\t\timageSize,\n\t\timageSlot,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableEmphasis,\n\t\tdisableMobileStyles,\n\t\tenableMeta,\n\t\tmetaTaxonomy,\n\t} = attributes;\n\n\tconst label = __('Story Item Options');\n\n\tuseEffect(() => {\n\t\t// If this is not a stub enabled site then automatically switch the metaTaxonomy to category.\n\t\tif (!stubEnabledSiteIds.includes(siteId) && 'formats' === metaTaxonomy) {\n\t\t\tconsole.log('Doing this', siteId, metaTaxonomy);\n\t\t\tsetAttributes({ metaTaxonomy: 'category' });\n\t\t}\n\t}, [siteId]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={label}>\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t'Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).',\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableMeta ? 'Meta Enabled' : 'Meta Disabled'}\n\t\t\t\t\t\t\tchecked={enableMeta}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableMeta: !enableMeta });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t'disabled' !== imageSlot ? 'Image Enabled' : 'Image Disabled'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchecked={'disabled' !== imageSlot}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\timageSlot: 'disabled' === imageSlot ? 'top' : 'disabled',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableHeader ? 'Header Enabled' : 'Header Disabled'}\n\t\t\t\t\t\t\tchecked={enableHeader}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableHeader: !enableHeader });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled'}\n\t\t\t\t\t\t\tchecked={enableExcerpt}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableExcerpt: !enableExcerpt });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{!isUsingContext && (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\tlabel={enableExtra ? 'Extras Enabled' : 'Extras Disabled'}\n\t\t\t\t\t\t\t\t\tchecked={enableExtra}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tsetAttributes({ enableExtra: !enableExtra });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\tenableBreakingNews\n\t\t\t\t\t\t\t\t\t\t\t? 'Breaking News Enabled'\n\t\t\t\t\t\t\t\t\t\t\t: 'Breaking News Disabled'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tchecked={enableBreakingNews}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tif (false !== window.prcBreakingNews) {\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\tenableBreakingNews: !enableBreakingNews,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t'There are no currently active authorized breaking news events. The breaking news toggle will be set back to false.',\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\tenableBreakingNews: false,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\tenableEmphasis ? 'Emphasis Enabled' : 'Emphasis Disabled'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tchecked={enableEmphasis}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tsetAttributes({ enableEmphasis: !enableEmphasis });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BaseControl>\n\n\t\t\t\t\t<CardDivider />\n\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Select Taxonomy To Display\"\n\t\t\t\t\t\tvalue={metaTaxonomy}\n\t\t\t\t\t\toptions={\n\t\t\t\t\t\t\tstubEnabledSiteIds.includes(siteId)\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t{ label: 'Formats', value: 'formats' },\n\t\t\t\t\t\t\t\t\t{ label: 'Research Teams', value: 'research-teams' },\n\t\t\t\t\t\t\t\t\t{ label: 'Disabled', value: 'disabled' },\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t{ label: 'Category', value: 'category' },\n\t\t\t\t\t\t\t\t\t{ label: 'Disabled', value: 'disabled' },\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(newMetaTaxonomy) => {\n\t\t\t\t\t\t\tsetAttributes({ metaTaxonomy: newMetaTaxonomy });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorAdvancedControls>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={\n\t\t\t\t\t\t!disableMobileStyles\n\t\t\t\t\t\t\t? 'Mobile Styling Enabled'\n\t\t\t\t\t\t\t: 'Mobile Styling Disabled'\n\t\t\t\t\t}\n\t\t\t\t\thelp={__(\n\t\t\t\t\t\t'If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile.',\n\t\t\t\t\t)}\n\t\t\t\t\tchecked={disableMobileStyles}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tsetAttributes({ disableMobileStyles: !disableMobileStyles });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{true === enableExcerpt &&\n\t\t\t\t\t('right' === imageSlot || 'left' === imageSlot) && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\tenableExcerptBelow\n\t\t\t\t\t\t\t\t\t\t? 'Excerpt Will Appear Below Image'\n\t\t\t\t\t\t\t\t\t\t: 'Excerpt Will Appear Normally'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t\t\t'If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image.',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tchecked={enableExcerptBelow}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\tenableExcerptBelow: !enableExcerptBelow,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\n\t\t\t\t{isInteger(postId) && 0 !== postId && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tisBusy={isRefreshing}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\trefresh(true);\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\trefreshPostAttributes({\n\t\t\t\t\t\t\t\t\t\tpostId,\n\t\t\t\t\t\t\t\t\t\timageSize,\n\t\t\t\t\t\t\t\t\t\tisRefresh: true,\n\t\t\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\trefresh(false);\n\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ marginBottom: '1em' }}\n\t\t\t\t\t\t\ttext={__('Refresh Post Data')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tisBusy={isRefreshing}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\trefresh(true);\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\texcerpt: '',\n\t\t\t\t\t\t\t\t\textra: '',\n\t\t\t\t\t\t\t\t\turl: '',\n\t\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\t\tdate: '',\n\t\t\t\t\t\t\t\t\timage: '',\n\t\t\t\t\t\t\t\t\tpostId: 0,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\trefresh(false);\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ marginBottom: '1em' }}\n\t\t\t\t\t\ttext={__('Reset Story Item Block')}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</InspectorAdvancedControls>\n\t\t</Fragment>\n\t);\n}\n\nexport default Inspector;\n","/**\n * External Dependencies\n */\nimport { URLSearchField } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { Button, Placeholder as WPComPlaceholder } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps } from '@wordpress/block-editor';\nimport { useEntityProp } from '@wordpress/core-data';\n\n/**\n * Interanl Dependencies\n */\n\nexport default function Placeholder({ attributes, setAttributes }) {\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst blockProps = useBlockProps();\n\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t<WPComPlaceholder\n\t\t\t\ticon=\"admin-post\"\n\t\t\t\tlabel={__(' Story Item', 'prc-block-library')}\n\t\t\t\tisColumnLayout\n\t\t\t\tinstructions={__(\n\t\t\t\t\t`Search for a ${postType} or paste url here`,\n\t\t\t\t\t'prc-block-library',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<URLSearchField\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\tonSelect: (postAttrs) => setAttributes(postAttrs),\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tisLink\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetAttributes({ postId: 0 });\n\t\t\t\t\t}}\n\t\t\t\t\ttext={__('Skip')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpaddingLeft: '9px',\n\t\t\t\t\t\tmarginTop: '10px',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</WPComPlaceholder>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\nimport {\n\tclose,\n\tmore,\n\tarrowLeft,\n\tarrowRight,\n\tarrowUp,\n\tarrowDown,\n} from '@wordpress/icons';\n\nfunction Icon({ svgPath = false, isPressed = false }) {\n\tif (false === svgPath) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<SVG\n\t\t\twidth={24}\n\t\t\theight={24}\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tisPressed={isPressed}\n\t\t>\n\t\t\t<Path d={svgPath} />\n\t\t</SVG>\n\t);\n}\n\nfunction ImageSlotIcon({ selected }) {\n\tif ('right' === selected) {\n\t\treturn arrowRight;\n\t}\n\tif ('left' === selected) {\n\t\treturn arrowLeft;\n\t}\n\tif ('top' === selected) {\n\t\treturn arrowUp;\n\t}\n\tif ('bottom' === selected) {\n\t\treturn arrowDown;\n\t}\n\tif ('disabled' === selected) {\n\t\treturn close;\n\t}\n\treturn more;\n}\n\nfunction ImageSizeIcon({ selected, currentlyActive }) {\n\tconst iconPaths = {\n\t\tA1: 'M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z',\n\t\tA2: 'M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z',\n\t\tA3: 'M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z',\n\t\tA4: 'M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z',\n\t\tXL: 'M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z',\n\t};\n\treturn (\n\t\t<Icon\n\t\t\tsvgPath={iconPaths[selected]}\n\t\t\tisPressed={selected === currentlyActive}\n\t\t/>\n\t);\n}\n\nfunction HeadingLevelIcon({ selected, currentlyActive }) {\n\tconst iconPaths = {\n\t\t1: 'M15.81,15.63V18H8.19V6H11v9.63Z', // Large\n\t\t2: 'M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z', // Medium\n\t\t3: 'M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z', // Small\n\t};\n\treturn (\n\t\t<Icon\n\t\t\tsvgPath={iconPaths[selected]}\n\t\t\tisPressed={selected === currentlyActive}\n\t\t/>\n\t);\n}\n\nexport { ImageSizeIcon, ImageSlotIcon, HeadingLevelIcon };\n","/**\n * External Dependencies\n */\nimport { HeadingLevelToolbar, URLSearchToolbar } from '@prc-app/shared';\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { BlockControls } from '@wordpress/block-editor';\nimport { Fragment, useCallback, useState } from '@wordpress/element';\nimport { useEntityProp } from '@wordpress/core-data';\nimport {\n\tBaseControl,\n\tModal,\n\tToolbarButton,\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { HeadingLevelIcon, ImageSizeIcon, ImageSlotIcon } from './icons';\nimport { setArtBySize } from '../../helpers';\n\nconst COLUMN_LIMIT = 6;\n\nfunction Icon({ level, isPressed }) {\n\treturn <HeadingLevelIcon selected={level} currentlyActive={isPressed} />;\n}\n\nfunction Toolbar({ attributes, setAttributes, context }) {\n\tconst { postId, imageSize, imageSlot, headerSize, isChartArt } = attributes;\n\n\tconst columnWidth =\n\t\tundefined !== context['core/column/gridSpan']\n\t\t\t? context['core/column/gridSpan']\n\t\t\t: false;\n\n\tconst isUsingContext =\n\t\tundefined !== context.queryId &&\n\t\tundefined !== context.postId &&\n\t\tundefined !== context.postType &&\n\t\t0 !== context.postId &&\n\t\tNumber.isInteger(context.postId);\n\n\tconst handleImageSizeChange = (newSize) => {\n\t\tsetAttributes({ imageSize: newSize });\n\t\tsetArtBySize(newSize, postId, setAttributes); // @TODO LOOK INTO\n\t};\n\n\tconst MemoizedImageSlotIcon = useCallback(\n\t\t() => <ImageSlotIcon selected={imageSlot} />,\n\t\t[imageSlot],\n\t);\n\n\tconst MemoizedImageSizeIcon = useCallback(\n\t\t() => <ImageSizeIcon selected={imageSize} currentlyActive={imageSize} />,\n\t\t[imageSize],\n\t);\n\n\treturn (\n\t\t<BlockControls>\n\t\t\t{!isUsingContext && (\n\t\t\t\t<URLSearchToolbar\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\tonSelect: (postAttrs) => {\n\t\t\t\t\t\t\tsetAttributes(postAttrs);\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<HeadingLevelToolbar\n\t\t\t\tselectedLevel={headerSize}\n\t\t\t\tlevels={[1, 2, 3]}\n\t\t\t\tonChange={(newSize) => setAttributes({ headerSize: newSize })}\n\t\t\t\tIcon={Icon}\n\t\t\t/>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\ticon={MemoizedImageSlotIcon}\n\t\t\t\t\tlabel=\"Select Image Slot\"\n\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Top',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"top\" />,\n\t\t\t\t\t\t\tisActive: 'top' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'top';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Bottom',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"bottom\" />,\n\t\t\t\t\t\t\tisActive: 'bottom' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'bottom';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Left',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"left\" />,\n\t\t\t\t\t\t\tisActive: 'left' === imageSlot,\n\t\t\t\t\t\t\tisDisabled: false !== columnWidth && columnWidth < COLUMN_LIMIT,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'left';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Right',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"right\" />,\n\t\t\t\t\t\t\tisActive: 'right' === imageSlot,\n\t\t\t\t\t\t\tisDisabled: false !== columnWidth && columnWidth < COLUMN_LIMIT,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'right';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Disabled',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"disabled\" />,\n\t\t\t\t\t\t\tisActive: 'disabled' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'disabled';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t\t{'disabled' !== imageSlot && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\t\t\ticon={MemoizedImageSizeIcon}\n\t\t\t\t\t\t\tlabel=\"Select Image Size\"\n\t\t\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A1',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A1\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A1' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A1'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A2',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A2\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A2' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A2'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A3',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A3\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A3' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A3'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A4',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A4\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A4' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A4'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'XL',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"XL\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'XL' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('XL'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon=\"chart-pie\"\n\t\t\t\t\t\t\tisPressed={isChartArt}\n\t\t\t\t\t\t\tlabel={__('Enable Chart Art')}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\tisChartArt: !isChartArt,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n}\n\nexport default Toolbar;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport Inspector from './inspector';\nimport Placeholder from './placeholder';\nimport Toolbar from './toolbar';\n\nfunction Controls({ attributes, setAttributes, context }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Toolbar {...{ attributes, setAttributes, context }} />\n\t\t\t<Inspector\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\nexport { Controls, Placeholder };\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { Picture } from 'react-responsive-picture';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { addQueryArgs } from '@wordpress/url';\nimport { Placeholder } from '@wordpress/components';\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n\nconst A1 = {\n\tdefault: '564,317',\n\tsmall: '690,388',\n\thidpi: '1128,634',\n\tsmallHidpi: '1380,776',\n};\n\nconst A2 = {\n\tdefault: '268,151',\n\tsmall: '690,388',\n\thidpi: '536,301',\n\tsmallHidpi: '1380,776',\n};\n\nconst A3 = {\n\tdefault: '194,110',\n\tsmall: '148,84',\n\thidpi: '388,220',\n\tsmallHidpi: '296,168',\n};\n\nconst A4 = {\n\tdefault: '268,151',\n\tsmall: '690,388',\n\thidpi: '536,302',\n\tsmallHidpi: '1380,776',\n};\n\nconst XL = {\n\tdefault: '720,405',\n\tsmall: '690,388',\n\thidpi: '1440,810',\n\tsmallHidpi: '1380,776',\n};\n\nfunction ImageDisplay({ img, size, onClick = false }) {\n\t// eslint-disable-next-line no-shadow\n\tconst getImgURL = (variant) => {\n\t\tif ('' === img || false === img) {\n\t\t\treturn img;\n\t\t}\n\n\t\t// Default to A1\n\t\tlet args = { resize: A1[variant] };\n\t\tif ('A2' === size) {\n\t\t\targs = { resize: A2[variant] };\n\t\t} else if ('A3' === size) {\n\t\t\targs = { resize: A3[variant] };\n\t\t} else if ('A4' === size) {\n\t\t\targs = { resize: A4[variant] };\n\t\t} else if ('XL' === size) {\n\t\t\targs = { resize: XL[variant] };\n\t\t}\n\n\t\treturn addQueryArgs(img, args);\n\t};\n\n\t// eslint-disable-next-line no-shadow\n\tconst getImgSrcSet = (threshold = 767) => [\n\t\t{\n\t\t\tsrcSet: `${getImgURL('default')} 1x, ${getImgURL('hidpi')} 2x`,\n\t\t\tmedia: `(min-width: ${threshold}px)`,\n\t\t},\n\t\t{\n\t\t\tsrcSet: `${getImgURL('small')} 1x, ${getImgURL('smallHidpi')} 2x`,\n\t\t\tmedia: `(max-width: ${threshold}px)`,\n\t\t},\n\t];\n\n\tif (false !== onClick) {\n\t\treturn (\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={onClick}\n\t\t\t\tstyle={{ padding: 0, border: 'none', cursor: 'pointer' }}\n\t\t\t>\n\t\t\t\t<Picture sources={getImgSrcSet()} alt=\"Click to edit\" />\n\t\t\t</button>\n\t\t);\n\t}\n\n\treturn <Picture sources={getImgSrcSet()} />;\n}\n\nexport default function Img({ attributes, setAttributes }) {\n\tconst { image, imageSlot, imageSize, isChartArt } = attributes;\n\n\tif ('disabled' === imageSlot) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = () => {\n\t\tlet isXL = false;\n\t\tlet isA1 = false;\n\t\tlet isA2 = false;\n\t\tlet isA3 = false;\n\t\tlet isA4 = false;\n\t\tif (false !== imageSlot) {\n\t\t\tif ('XL' === imageSize) {\n\t\t\t\tisXL = true;\n\t\t\t} else if ('A1' === imageSize) {\n\t\t\t\tisA1 = true;\n\t\t\t} else if ('A2' === imageSize) {\n\t\t\t\tisA2 = true;\n\t\t\t} else if ('A3' === imageSize) {\n\t\t\t\tisA3 = true;\n\t\t\t} else if ('A4' === imageSize) {\n\t\t\t\tisA4 = true;\n\t\t\t}\n\t\t}\n\n\t\treturn classNames({\n\t\t\timage: true,\n\t\t\tXL: isXL,\n\t\t\tA1: isA1,\n\t\t\tA2: isA2,\n\t\t\tA3: isA3,\n\t\t\tA4: isA4,\n\t\t\tbordered: isChartArt,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className={classes()}>\n\t\t\t<MediaUploadCheck>\n\t\t\t\t<MediaUpload\n\t\t\t\t\tonSelect={(media) => setAttributes({ image: media.url })}\n\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{(undefined === image || 0 === image.length) && (\n\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-media-placeholder\"\n\t\t\t\t\t\t\t\t\twithIllustration\n\t\t\t\t\t\t\t\t\tlabel={__('Image')}\n\t\t\t\t\t\t\t\t\tinstructions={__(\n\t\t\t\t\t\t\t\t\t\t'Upload an image file, pick one from the media library, or add one with a URL.',\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{undefined !== image && 0 < image.length && (\n\t\t\t\t\t\t\t\t<ImageDisplay img={image} size={imageSize} onClick={open} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</MediaUploadCheck>\n\t\t</div>\n\t);\n}\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useMemo } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst randomExcerptPlaceholder = () => {\n\tconst opts = [\n\t\t'In recent years, several new options have emerged in the social media universe, many of which explicitly present themselves as alternatives to more established social media platforms. Free speech ideals and heated political themes prevail on these sites, which draw praise from their users and skepticism from other Americans.',\n\t\t'Elections in Italy and Sweden have underscored the growing electoral strength that populist parties have displayed in Europe in recent years.',\n\t\t'In less than a decade, the share of Americans who go cashless in a typical week has increased by double digits.',\n\t\t'72% of U.S. adults say that, on the issues that matter to them, their side in politics has been losing more often than winning.',\n\t\t'56% of U.S. adults say that oil executives should be tried for crimes against humanity for their role in climate change.',\n\t];\n\treturn opts[Math.floor(Math.random() * opts.length)];\n};\n\nfunction Excerpt({ attributes, setAttributes }) {\n\tconst { excerpt, enableHeader, enableExcerpt } = attributes;\n\n\tif (!enableExcerpt) {\n\t\treturn <Fragment />;\n\t}\n\n\tconst placeholder = useMemo(() => randomExcerptPlaceholder(), []);\n\n\tconst classes = classNames('description', { 'sans-serif': !enableHeader });\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName=\"div\"\n\t\t\tvalue={excerpt}\n\t\t\tonChange={(value) => setAttributes({ excerpt: value })}\n\t\t\tplaceholder={placeholder}\n\t\t\tmultiline=\"p\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Excerpt;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Extra({ attributes, setAttributes }) {\n\tconst { extra, enableExtra, enableBreakingNews } = attributes;\n\treturn (\n\t\t<Fragment>\n\t\t\t{true === enableExtra && (\n\t\t\t\t<RichText\n\t\t\t\t\ttagName=\"ul\"\n\t\t\t\t\tvalue={extra}\n\t\t\t\t\tonChange={(value) => setAttributes({ extra: value })}\n\t\t\t\t\tplaceholder={extra}\n\t\t\t\t\tmultiline=\"li\"\n\t\t\t\t\tclassName=\"extra\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{true === enableBreakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default Extra;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useMemo } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst randomTitlePlaceholder = () => {\n\tconst opts = [\n\t\t'The Role of Alternative Social Media in the News and Information Environment',\n\t\t'How Global Public Opinion of China Has Shifted in the Xi Era',\n\t\t'Most Latinos Say Democrats Care About Them and Work Hard for Their Vote, Far Fewer Say So of GOP',\n\t\t'More Americans are joining the cashless economy',\n\t\t'Americans Anxious about Climate Change',\n\t];\n\treturn opts[Math.floor(Math.random() * opts.length)];\n};\n\nfunction Header({ attributes, setAttributes }) {\n\tconst { title, headerSize, enableExcerpt, enableHeader } = attributes;\n\n\tif (!enableHeader) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst placeholder = useMemo(() => randomTitlePlaceholder(), []);\n\n\tconst classes = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: !enableExcerpt,\n\t});\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName={`h${headerSize}`}\n\t\t\tvalue={title}\n\t\t\tonChange={(t) => setAttributes({ title: t })}\n\t\t\tallowedFormats={['core/italic', 'core/bold']}\n\t\t\tplaceholder={placeholder}\n\t\t\tmultiline=\"br\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Header;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment, useState } from '@wordpress/element';\nimport {\n\tSelectControl,\n\tSpinner,\n\tDatePicker,\n\tButton,\n\tPopover,\n} from '@wordpress/components';\nimport { cleanForSlug } from '@wordpress/url';\nimport { useEntityRecords } from '@wordpress/core-data';\nimport { date as formatDate } from '@wordpress/date';\n\n/**\n * Internal Dependencies\n */\n\nfunction Meta({ attributes, setAttributes }) {\n\tconst { date, label, enableMeta, metaTaxonomy } = attributes;\n\tconst [datePickerVisible, setDatePickerVisible] = useState(false);\n\n\tif (!enableMeta) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst { records: entityTerms, isResolving } = useEntityRecords(\n\t\t'taxonomy',\n\t\tmetaTaxonomy,\n\t\t{ per_page: -1, hide_empty: false, context: 'view' },\n\t);\n\tconst hasRecords = entityTerms ? 0 < entityTerms.length : false;\n\n\tconst cleanedLabel =\n\t\tundefined !== label ? cleanForSlug(label.toLowerCase()) : 'report';\n\n\tconst value = 'short-read' === cleanedLabel ? 'fact-tank' : cleanedLabel;\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"meta\"\n\t\t\tstyle={{\n\t\t\t\tdisplay: 'flex',\n\t\t\t\talignItems: 'center',\n\t\t\t}}\n\t\t>\n\t\t\t{'disabled' !== metaTaxonomy && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{isResolving && <Spinner />}\n\t\t\t\t\t\t{!isResolving && hasRecords && (\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\toptions={entityTerms.map((term) => ({\n\t\t\t\t\t\t\t\t\tlabel: term.name,\n\t\t\t\t\t\t\t\t\tvalue: term.slug,\n\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\tonChange={(l) => {\n\t\t\t\t\t\t\t\t\tsetAttributes({ label: l });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tstyle={{ marginBottom: '0px' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>&nbsp;|&nbsp;</div>\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetDatePickerVisible(!datePickerVisible);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ padding: '0px' }}\n\t\t\t\t>\n\t\t\t\t\t{formatDate('M j, Y', date)}\n\t\t\t\t</Button>\n\t\t\t\t{datePickerVisible && (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\tonClose={() => setDatePickerVisible(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tpadding: '1em',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\tcurrentDate={date}\n\t\t\t\t\t\t\t\tonChange={(d) =>\n\t\t\t\t\t\t\t\t\tsetAttributes({ date: formatDate('M j, Y', d) })\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Popover>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Meta;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { date as formatDate } from '@wordpress/date';\nimport { Placeholder } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { useStoryItemBlockProps } from '../helpers';\n\nconst IMAGE_SIZES = {\n\tA1: [1128, 634],\n\tA2: [526, 301],\n\tA3: [388, 220],\n\tA4: [536, 302],\n\tXL: [1440, 810],\n};\n\nfunction Preview({ attributes }) {\n\tconst {\n\t\ttitle,\n\t\texcerpt,\n\t\textra,\n\t\tlabel,\n\t\tdate,\n\t\timage,\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\theaderSize,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t} = attributes;\n\n\tconst blockProps = useStoryItemBlockProps(attributes);\n\n\tconst headerClasses = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: false,\n\t});\n\n\tconst imageClasses = classNames('image', {\n\t\tbordered: isChartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n\tconst excerptClasses = classNames('description');\n\n\tconst displayImage =\n\t\tundefined !== imageSlot &&\n\t\t'disabled' !== imageSlot &&\n\t\tundefined !== imageSize &&\n\t\t'' !== imageSize;\n\n\treturn (\n\t\t<article {...blockProps}>\n\t\t\t{enableMeta && (\n\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t<span className=\"label\">{label}</span> |{' '}\n\t\t\t\t\t<span className=\"date\">{formatDate('M j, Y', date)}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{displayImage && (\n\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t{(undefined === image || 0 === image.length) && (\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\tclassName=\"block-editor-media-placeholder\"\n\t\t\t\t\t\t\twithIllustration\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{undefined !== image && 0 < image.length && (\n\t\t\t\t\t\t<picture>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrcSet={image}\n\t\t\t\t\t\t\t\twidth={IMAGE_SIZES[imageSize][0]}\n\t\t\t\t\t\t\t\theight={IMAGE_SIZES[imageSize][1]}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{enableHeader && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName={`h${headerSize}`}\n\t\t\t\t\tvalue={title}\n\t\t\t\t\tclassName={headerClasses}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{enableExcerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{enableExtra && (\n\t\t\t\t<RichText.Content tagName=\"ul\" value={extra} className=\"extra\" />\n\t\t\t)}\n\n\t\t\t{true === enableBreakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</article>\n\t);\n}\n\nexport default Preview;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\nimport { useEntityRecord } from '@wordpress/core-data';\nimport { useEffect, useMemo } from '@wordpress/element';\nimport { date as formatDate } from '@wordpress/date';\nimport { Placeholder } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\n\nconst randomTitlePlaceholder = () => {\n\tconst opts = [\n\t\t'The Role of Alternative Social Media in the News and Information Environment',\n\t\t'How Global Public Opinion of China Has Shifted in the Xi Era',\n\t\t'Most Latinos Say Democrats Care About Them and Work Hard for Their Vote, Far Fewer Say So of GOP',\n\t\t'More Americans are joining the cashless economy',\n\t\t'Americans Anxious about Climate Change',\n\t];\n\treturn opts[Math.floor(Math.random() * opts.length)];\n};\n\nconst randomExcerptPlaceholder = () => {\n\tconst opts = [\n\t\t'In recent years, several new options have emerged in the social media universe, many of which explicitly present themselves as alternatives to more established social media platforms. Free speech ideals and heated political themes prevail on these sites, which draw praise from their users and skepticism from other Americans.',\n\t\t'Elections in Italy and Sweden have underscored the growing electoral strength that populist parties have displayed in Europe in recent years.',\n\t\t'In less than a decade, the share of Americans who go cashless in a typical week has increased by double digits.',\n\t\t'72% of U.S. adults say that, on the issues that matter to them, their side in politics has been losing more often than winning.',\n\t\t'56% of U.S. adults say that oil executives should be tried for crimes against humanity for their role in climate change.',\n\t];\n\treturn `<p>${opts[Math.floor(Math.random() * opts.length)]}</p>`;\n};\n\nconst IMAGE_SIZES = {\n\tA1: [1128, 634],\n\tA2: [526, 301],\n\tA3: [388, 220],\n\tA4: [536, 302],\n\tXL: [1440, 810],\n};\n\nexport default function ContextPreview({ attributes, clientId, context }) {\n\tconst { postId, postType } = context;\n\tconst { record, isResolving } = useEntityRecord('postType', postType, postId);\n\tconsole.log('record', postType, postId, record);\n\n\tconst { title, excerpt, label, date, art } = record;\n\n\tconst {\n\t\timageSlot,\n\t\timageSize,\n\t\theaderSize,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableMeta,\n\t\tclassName,\n\t} = attributes;\n\n\tconst palceholderTitle = useMemo(() => randomTitlePlaceholder(), []);\n\tconst palceholderExcerpt = useMemo(() => randomExcerptPlaceholder(), []);\n\n\tconst headerClasses = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: false,\n\t});\n\n\tconst imageClasses = classNames('image', {\n\t\tbordered: art && art[imageSize] && art[imageSize].chartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n\tconst excerptClasses = classNames('description');\n\n\tconsole.log('ContextPreview', {\n\t\tattributes,\n\t\tclientId,\n\t\tcontext,\n\t\trecord,\n\t\tisResolving,\n\t});\n\n\tconst displayImage =\n\t\tart &&\n\t\tart[imageSize] &&\n\t\tart[imageSize].url &&\n\t\tundefined !== imageSlot &&\n\t\t'disabled' !== imageSlot &&\n\t\tundefined !== imageSize &&\n\t\t'' !== imageSize;\n\n\tconst logicalClasses = {};\n\tif (displayImage) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\n\tif (displayImage) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\n\tconst blockProps = useBlockProps(blockPropsArgs);\n\n\tuseEffect(() => {\n\t\tif (record) {\n\t\t\tconsole.log('record', record);\n\t\t}\n\t}, [record]);\n\n\tif (isResolving) {\n\t\treturn (\n\t\t\t<article\n\t\t\t\t{...{\n\t\t\t\t\t...blockProps,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\topacity: 0.8,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{enableMeta && (\n\t\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t\t<span className=\"label\">Report</span> |{' '}\n\t\t\t\t\t\t<span className=\"date\">{formatDate('M j, Y')}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{displayImage && (\n\t\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\tclassName=\"block-editor-media-placeholder\"\n\t\t\t\t\t\t\twithIllustration\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{enableHeader && (\n\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\ttagName={`h${headerSize}`}\n\t\t\t\t\t\tvalue={palceholderTitle}\n\t\t\t\t\t\tclassName={headerClasses}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{enableExcerpt && (\n\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\t\tvalue={palceholderExcerpt}\n\t\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</article>\n\t\t);\n\t}\n\n\treturn (\n\t\t<article {...blockProps}>\n\t\t\t{enableMeta && (\n\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t<span className=\"label\">{label}</span> |{' '}\n\t\t\t\t\t<span className=\"date\">{date ? formatDate('M j, Y', date) : ''}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{displayImage && (\n\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t{(undefined === art || false === art) && (\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\tclassName=\"block-editor-media-placeholder\"\n\t\t\t\t\t\t\twithIllustration\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{undefined !== art && false !== art && (\n\t\t\t\t\t\t<picture>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrcSet={art[imageSize].url}\n\t\t\t\t\t\t\t\twidth={IMAGE_SIZES[imageSize][0]}\n\t\t\t\t\t\t\t\theight={IMAGE_SIZES[imageSize][1]}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{enableHeader && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName={`h${headerSize}`}\n\t\t\t\t\tvalue={title.raw && !title.rendered ? title.raw : title.rendered}\n\t\t\t\t\tclassName={headerClasses}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{enableExcerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt.rendered}\n\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</article>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { Controls, Placeholder } from './controls';\nimport Image from './image';\nimport Excerpt from './excerpt';\nimport Extra from './extra';\nimport Header from './header';\nimport Meta from './meta';\nimport Preview from './preview';\nimport ContextPreview from './context-preview';\nimport { useStoryItemBlockProps } from '../helpers';\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId, context }) => {\n\t// If this block is being rendered in the scope of query context\n\t// then render the ContextPreview component early.\n\tif (\n\t\tundefined !== context.queryId &&\n\t\tundefined !== context.postId &&\n\t\tundefined !== context.postType &&\n\t\t0 !== context.postId &&\n\t\tNumber.isInteger(context.postId)\n\t) {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Controls\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<ContextPreview {...{ attributes, context }} />\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tconst { postId, isPreview } = attributes;\n\n\tif (undefined === postId) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tattributes={attributes}\n\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\tclientId={clientId}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// If not active or is explicitly a preview, return the preview early.\n\tif (!isSelected || isPreview) {\n\t\treturn <Preview {...{ attributes, context }} />;\n\t}\n\n\tconst blockProps = useStoryItemBlockProps(attributes);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<article {...blockProps}>\n\t\t\t\t<Image\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Meta\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Header\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Excerpt\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Extra\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</article>\n\t\t\t<Controls\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Fragment>\n\t);\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\n/** Returns a server side block callback */\nconst save = ({ attributes }) => {\n\tconst { excerpt, extra } = attributes;\n\treturn (\n\t\t<Fragment>\n\t\t\t{excerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\tclassName=\"description\"\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{extra && (\n\t\t\t\t<RichText.Content className=\"extra\" tagName=\"ul\" value={extra} />\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { isURL } from '@wordpress/url';\n\nconst { siteDomain } = window;\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tisMatch: (node) => {\n\t\t\t\tconst maybeUrl =\n\t\t\t\t\t'P' === node.nodeName ? node.textContent.trim() : false;\n\t\t\t\treturn (\n\t\t\t\t\tfalse !== maybeUrl &&\n\t\t\t\t\tisURL(maybeUrl) &&\n\t\t\t\t\tmaybeUrl.startsWith(siteDomain)\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform: (node) => {\n\t\t\t\tconst url = node.textContent.trim();\n\t\t\t\treturn createBlock('prc-block/story-item', {\n\t\t\t\t\turl,\n\t\t\t\t});\n\t\t\t},\n\t\t\tpriority: 0, // Do this before any other match.\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nconst variations = [\n\t{\n\t\tname: 'story-item-default',\n\t\tisDefault: true,\n\t\ttitle: __('Story Item'),\n\t\texcerpt: __('Default story item layout: top aligned A1 image.'),\n\t\tattributes: {\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A1',\n\t\t},\n\t},\n\t{\n\t\tname: 'story-item-pub-listing',\n\t\ttitle: __('Pub Listing Story Item'),\n\t\texcerpt: __('Left algined A3 image (right aligned A3 on mobile).'),\n\t\tattributes: {\n\t\t\timageSlot: 'left',\n\t\t\timageSize: 'A3',\n\t\t},\n\t},\n\t{\n\t\tname: 'story-item-slim',\n\t\ttitle: __('Story Item Slim'),\n\t\texcerpt: __('No excerpt, no image.'),\n\t\tattributes: {\n\t\t\timageSlot: 'disabled',\n\t\t\tenableExcerpt: false,\n\t\t},\n\t},\n];\n\nexport default variations;\n","/**\n * WordPress Dependencies\n */\nimport { registerBlockType } from '@wordpress/blocks';\nimport { date as formatDate } from '@wordpress/date';\n\n/**\n * Internal Dependencies\n */\n// import deprecated from './deprecated';\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport transforms from './transforms';\nimport variations from './variations';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n\texample: {\n\t\tattributes: {\n\t\t\ttitle: 'Ultricies Ipsum Nibh Egestas Purus',\n\t\t\texcerpt:\n\t\t\t\t'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>',\n\t\t\tlabel: 'Report',\n\t\t\tdate: formatDate('M j, Y'), // Set the current date.\n\t\t\timage:\n\t\t\t\t'https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg',\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A2',\n\t\t\tisPreview: true,\n\t\t\tpostId: 0,\n\t\t},\n\t},\n\t// deprecated,\n\tvariations,\n\tsupports: {\n\t\tcolor: {\n\t\t\ttext: true,\n\t\t\tbackground: false,\n\t\t},\n\t\ttypography: {\n\t\t\tfontSize: true,\n\t\t},\n\t},\n\ttransforms,\n\t__experimentalLabel: ({ title }) => title || 'Story Item', // Will change the label to match the title, #experimental.\n\tedit,\n\tsave,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n"],"sourceRoot":""}