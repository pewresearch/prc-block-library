/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 2.0.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[25],{1:function(e,t){e.exports=window.React},15:function(e,t){e.exports=window.wp.data},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(28);var r=n(26),l=n(29);function c(e,t){return Object(a.a)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){o=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||Object(r.a)(e,t)||Object(l.a)()}},2:function(e,t){e.exports=window.wp.i18n},20:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,"a",(function(){return a}))},22:function(e,t){e.exports=window.wp.primitives},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(20);function r(e,t){if(e){if("string"==typeof e)return Object(a.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a.a)(e,t):void 0}}},28:function(e,t,n){"use strict";function a(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return a}))},286:function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/story-item","category":"layout","attributes":{"title":{"type":"string"},"description":{"type":"string","source":"html","multiline":"p","selector":".description"},"extra":{"type":"string","source":"html","multiline":"li","selector":".extra"},"link":{"type":"string"},"label":{"type":"string","default":"Report"},"date":{"type":"string"},"image":{"type":"string"},"imageSlot":{"type":"string","default":"default"},"imageSize":{"type":"string","default":"A1"},"isChartArt":{"type":"boolean","default":false},"postId":{"type":"integer"},"headerSize":{"type":"integer","default":2},"enableAltHeaderWeight":{"type":"boolean","default":false},"enableEmphasis":{"type":"boolean","default":false},"enableHeader":{"type":"boolean","default":true},"enableExcerpt":{"type":"boolean","default":true},"enableExcerptBelow":{"type":"boolean","default":false},"enableExtra":{"type":"boolean","default":false},"enableBreakingNews":{"type":"boolean","default":false},"enableAltTaxonomy":{"type":"boolean","default":false},"enableMeta":{"type":"boolean","default":true},"inLoop":{"type":"boolean","default":false},"isPreview":{"type":"boolean","default":false},"isTransformed":{"type":"boolean","default":false},"postID":{"type":"integer"},"excerpt":{"type":"string","multiline":"p"}},"usesContext":["prc-block/wp-query"],"supports":{"html":false}}')},29:function(e,t,n){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return a}))},3:function(e,t){e.exports=window.wp.components},35:function(e,t){e.exports=window.wp.apiFetch},38:function(e,t){e.exports=window.lodash},4:function(e,t){e.exports=window.wp.element},52:function(e,t){e.exports=moment},53:function(e,t){e.exports=window.wp.url},598:function(e,t,n){n(23),e.exports=n(649)},6:function(e,t){e.exports=window.wp.blockEditor},61:function(e,t){e.exports=window.wp.keycodes},62:function(e,t){e.exports=window.ReactDOM},649:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n(52),l=n(2),c=n(9),o=n(286),i=n(68),s=n.n(i),u=n(711),m=n(33),d=n(4),b=n(15),p=n(6),f=n(19),g=n(38),h=n(3),w=n(22),E=Object(d.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(d.createElement)(w.Path,{d:"M14.3 6.7l-1.1 1.1 4 4H4v1.5h13.3l-4.1 4.4 1.1 1.1 5.8-6.3z"})),v=Object(d.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(d.createElement)(w.Path,{d:"M20 10.8H6.7l4.1-4.5-1.1-1.1-5.8 6.3 5.8 5.8 1.1-1.1-4-3.9H20z"})),y=Object(d.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(d.createElement)(w.Path,{d:"M12.5 3.9L6.7 9.7l1.1 1.1 4-4V20h1.4V6.7l4.5 4.1 1.1-1.1z"})),R=Object(d.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(d.createElement)(w.Path,{d:"M16.2 13.2l-4 4V4h-1.5v13.3l-4.5-4.1-1 1.1 6.2 5.8 5.8-5.8-1-1.1z"})),A=Object(d.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(d.createElement)(w.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),O=Object(d.createElement)(w.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(d.createElement)(w.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"})),x=n(35),k=n.n(x),S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={title:e.title.hasOwnProperty("rendered")?e.title.rendered:e.title,description:e.excerpt.hasOwnProperty("rendered")?e.excerpt.rendered:e.excerpt,link:e.link,label:e.hasOwnProperty("label")?e.label:"Report",date:e.date,postId:e.id};if(!0!==n&&(a.extra=""),e.art){var r=e.art;a.image=r[t].rawUrl,a.isChartArt=r[t].chartArt}return console.log("getAttributesFromPost",e,a),a},C=function(e,t,n,a){void 0!==e&&void 0!==a&&k()({path:"/wp/v2/stub/".concat(e),method:"GET"}).then((function(r){if(console.log("setPostByStubID",e,r),!1!==r){var l=S(r,t,n);a(l)}})).catch((function(e){return console.error(e)}))},j=function(e){var t=e.title,n=e.type,a=e.id,r=e.url,c=e.imageSize,o=void 0===c?"A1":c,i=e.setAttributes,s=Object(d.useState)(!1),u=Object(f.a)(s,2),b=u[0],p=u[1];return React.createElement(d.Fragment,null,React.createElement(h.ToolbarButton,{"aria-expanded":b,"aria-haspopup":"true",label:Object(l.__)("Set Link"),icon:"admin-links",onClick:function(){return p(!b)},showTooltip:!0}),!0===b&&React.createElement(h.Popover,{position:"bottom center",onClose:function(){return p(!1)}},React.createElement("div",{style:{padding:"12px"}},React.createElement(m.f,{value:{url:r,title:t,type:n,id:a},type:"post",subType:"stub",onChange:function(e){e.hasOwnProperty("id")&&C(e.id,o,!1,i),!e.hasOwnProperty("id")&&e.hasOwnProperty("url")&&i({link:e.url})}}))))},P=function(e){var t=e.attributes,n=e.setAttributes,a=t.link,r=t.imageSize,c=t.imageSlot,o=t.headerSize,i=t.isChartArt,s=t.postID,u=t.title,m=s,b=function(e){var t=e.svgPath,n=void 0!==t&&t,a=e.isPressed,r=void 0!==a&&a;return!1===n?null:React.createElement(h.SVG,{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",isPressed:r},React.createElement(h.Path,{d:n}))},f=function(e){var t=e.selected;return"right"===t?E:"left"===t?v:"top"===t?y:"bottom"===t?R:"disabled"===t?A:O},g=function(e){var t=e.selected,n=e.currentlyActive;return React.createElement(b,{svgPath:{A1:"M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z",A2:"M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z",A3:"M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z",A4:"M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z",XL:"M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z"}[t],isPressed:t===n})},w=function(e){var t=e.selected,n=e.currentlyActive;return React.createElement(b,{svgPath:{1:"M15.81,15.63V18H8.19V6H11v9.63Z",2:"M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z",3:"M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z"}[t],isPressed:t===n})},x=function(e){n({imageSize:e}),function(e,t,n){0!==t&&!1!==n&&k()({path:"/prc-api/v2/get-art/?postId=".concat(t)}).then((function(t){!1!==t&&void 0!==t[e]&&!1!==n&&n({image:t[e].rawUrl,isChartArt:t[e].chartArt})}))}(e,m,n)};return React.createElement(p.BlockControls,null,React.createElement(h.ToolbarGroup,null,React.createElement(j,{title:u,id:m,url:a,type:"stub",setAttributes:n})),React.createElement(h.ToolbarGroup,null,React.createElement(h.ToolbarDropdownMenu,{icon:function(){return React.createElement(w,{selected:o,currentlyActive:o})},label:"Select Heading Size",controls:[{title:"Large",icon:React.createElement(w,{selected:1,currentlyActive:o}),isActive:1===o,onClick:function(){return n({headerSize:1})}},{title:"Medium",icon:React.createElement(w,{selected:2,currentlyActive:o}),isActive:2===o,onClick:function(){return n({headerSize:2})}},{title:"Small",icon:React.createElement(w,{selected:3,currentlyActive:o}),isActive:3===o,onClick:function(){return n({headerSize:3})}}]})),React.createElement(h.ToolbarGroup,null,React.createElement(h.ToolbarDropdownMenu,{icon:function(){return React.createElement(f,{selected:c})},label:"Select Image Slot",controls:[{title:"Default",icon:React.createElement(f,{selected:"default"}),isActive:"default"===c,onClick:function(){n({imageSlot:"default"})}},{title:"Right",icon:React.createElement(f,{selected:"right"}),isActive:"right"===c,onClick:function(){n({imageSlot:"right"})}},{title:"Left",icon:React.createElement(f,{selected:"left"}),isActive:"left"===c,onClick:function(){n({imageSlot:"left"})}},{title:"Top",icon:React.createElement(f,{selected:"top"}),isActive:"top"===c,onClick:function(){n({imageSlot:"top"})}},{title:"Bottom",icon:React.createElement(f,{selected:"bottom"}),isActive:"bottom"===c,onClick:function(){n({imageSlot:"bottom"})}},{title:"Disabled",icon:React.createElement(f,{selected:"disabled"}),isActive:"disabled"===c,onClick:function(){n({imageSlot:"disabled"})}}]}),"disabled"!==c&&React.createElement(d.Fragment,null,React.createElement(h.ToolbarDropdownMenu,{icon:function(){return React.createElement(g,{selected:r,currentlyActive:r})},label:"Select Image Size",controls:[{title:"A1",icon:React.createElement(g,{selected:"A1",currentlyActive:r}),isActive:"A1"===r,onClick:function(){return x("A1")}},{title:"A2",icon:React.createElement(g,{selected:"A2",currentlyActive:r}),isActive:"A2"===r,onClick:function(){return x("A2")}},{title:"A3",icon:React.createElement(g,{selected:"A3",currentlyActive:r}),isActive:"A3"===r,onClick:function(){return x("A3")}},{title:"A4",icon:React.createElement(g,{selected:"A4",currentlyActive:r}),isActive:"A4"===r,onClick:function(){return x("A4")}},{title:"XL",icon:React.createElement(g,{selected:"XL",currentlyActive:r}),isActive:"XL"===r,onClick:function(){return x("XL")}}]}),React.createElement(h.ToolbarButton,{icon:"chart-pie",isPressed:i,label:Object(l.__)("Enable Chart Art"),onClick:function(){n({isChartArt:!i})}}))))},T=function(e){var t=e.attributes,n=e.setAttributes,a=(e.context,e.rootClientId,Object(d.useState)(!1)),r=Object(f.a)(a,2),c=r[0],o=r[1],i=t.postID,s=(t.link,t.imageSize),u=t.imageSlot,m=t.enableHeader,b=t.enableExcerpt,w=t.enableExcerptBelow,E=t.enableExtra,v=t.enableBreakingNews,y=t.enableEmphasis,R=t.enableAltTaxonomy,A=t.enableMeta,O=t.inLoop,x=i,k=Object(l.__)("Story Item Options");return React.createElement(d.Fragment,null,React.createElement(P,{attributes:t,setAttributes:n}),React.createElement(p.InspectorControls,null,React.createElement(h.PanelBody,{title:k},React.createElement(h.SelectControl,{label:"Image Slot",value:u,options:[{label:"Default",value:"default"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Top",value:"top"},{label:"Bottom",value:"bottom"},{label:"Disabled",value:"disabled"}],onChange:function(e){n({imageSlot:e})}}),React.createElement(h.ToggleControl,{label:A?"Meta Enabled":"Meta Disabled",checked:A,onChange:function(){n({enableMeta:!A})}}),React.createElement(h.ToggleControl,{label:m?"Header Enabled":"Header Disabled",checked:m,onChange:function(){n({enableHeader:!m})}}),React.createElement(h.ToggleControl,{label:b?"Excerpt Enabled":"Excerpt Disabled",checked:b,onChange:function(){n({enableExcerpt:!b})}}),!0===b&&("right"===u||"left"===u)&&React.createElement(h.ToggleControl,{label:w?"Excerpt Will Appear Below":"Excerpt Will Appear Normally",checked:w,onChange:function(){n({enableExcerptBelow:!w})}}),React.createElement(h.ToggleControl,{label:E?"Extras Enabled":"Extras Disabled",checked:E,onChange:function(){n({enableExtra:!E})}}),React.createElement(h.ToggleControl,{label:v?"Breaking News Enabled":"Breaking News Disabled",checked:v,onChange:function(){!1!==window.prcBreakingNews?n({enableBreakingNews:!v}):(alert("There are no currently active, authorized, breaking news events. The breaking news toggle will be set back to false."),n({enableBreakingNews:!1}))}}),React.createElement(h.ToggleControl,{label:R?"Research Areas":"Formats",checked:R,onChange:function(){n({enableAltTaxonomy:!R})}}),React.createElement(h.ToggleControl,{label:y?"Emphasis Enabled":"Emphasis Disabled",checked:y,onChange:function(){n({enableEmphasis:!y})}}),React.createElement(h.ToggleControl,{label:O?"Pub Listing Style On Mobile":"Normal Styling On Mobile",checked:O,onChange:function(){n({inLoop:!O})}}))),React.createElement(p.InspectorAdvancedControls,null,Object(g.isInteger)(x)&&0!==x&&React.createElement(h.Button,{isSecondary:!0,isBusy:c,onClick:function(){o(!0),setTimeout((function(){C(x,s,!0,n),o(!1)}),500)},style:{marginBottom:"1em"}},"Refresh Post"),React.createElement(h.Button,{isDestructive:!0,isBusy:c,onClick:function(){return n({title:"",excerpt:"",extra:"",link:"",label:"",date:"",image:"",postID:0})},style:{marginBottom:"1em"}},"Reset Story Item Block")))},B=function(e){var t=e.attributes,n=e.setAttributes,a=t.imageSize;return React.createElement(h.Placeholder,{icon:"format-aside",label:Object(l.__)(" Search for a Story Item"),isColumnLayout:!0},React.createElement(m.f,{type:"post",subType:"stub",onChange:function(e){e.hasOwnProperty("id")&&C(e.id,a,!1,n)},showInitialSuggestions:!0}),React.createElement(h.Button,{isLink:!0,onClick:function(){n({postId:0})}},"Skip"))},H=["image"],M=function(e){var t=e.img,n=e.size,a=(e.postId,e.setAttributes);return React.createElement(p.MediaUploadCheck,null,React.createElement(p.MediaUpload,{onSelect:function(e){return a({image:e.url})},allowedTypes:H,render:function(e){var a=e.open;return React.createElement(d.Fragment,null,void 0!==t&&0!==t.length&&React.createElement(m.d,{img:t,size:n,link:"",onClick:a}),(void 0===t||0===t.length)&&React.createElement(m.d,{img:t,size:n,link:"",onClick:a,placeholder:!0}))}}))},I=function(e){var t=e.img,n=e.size,a=e.slot,r=e.chartArt,l=e.postId,c=e.setAttributes;console.log("<Img>",t);var o,i,u,m,d;return React.createElement("div",{className:(o=!1,i=!1,u=!1,m=!1,d=!1,!1!==a&&("XL"===n?o=!0:"A1"===n?i=!0:"A2"===n?u=!0:"A3"===n?m=!0:"A4"===n&&(d=!0)),s()({ui:!0,XL:o,A1:i,A2:u,A3:m,A4:d,image:!0,bordered:r}))},React.createElement(M,{img:t,size:n,postId:l,setAttributes:c}))},N=function(e){var t=e.content,n=e.sansSerif,a=e.enabled,r=e.setAttributes;if(!0!==a)return React.createElement(d.Fragment,null);var l=s()("description",{"sans-serif":n});return React.createElement(p.RichText,{tagName:"div",value:t,onChange:function(e){return r({description:e})},placeholder:"Story item description...",multiline:"p",className:l})},z=function(e){var t=e.content,n=e.breakingNews,a=e.enabled,r=e.setAttributes;return React.createElement(d.Fragment,null,!1!==r&&!0===a&&React.createElement(p.RichText,{tagName:"ul",value:t,onChange:function(e){return r({extra:e})},placeholder:t,multiline:"li",className:"extra"}),!1===r&&!0===a&&React.createElement(p.RichText.Content,{tagName:"ul",value:t,className:"extra"}),!0===n&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))},D=function(e){var t=e.label,n=e.date,a=e.taxonomy,r=e.setAttributes,l=Object(d.useState)([]),c=Object(f.a)(l,2),o=c[0],i=c[1];return Object(d.useEffect)((function(){Object(m.g)(a).then((function(e){i(e)}))}),[a]),React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("div",null,React.createElement(h.SelectControl,{value:t,options:o,onChange:function(e){r({label:e})},style:{marginBottom:"0px"},className:"story-label-select"})),React.createElement("div",null," | "),React.createElement("div",null,React.createElement(h.TextControl,{value:n,onChange:function(e){r({date:e})},style:{marginBottom:"0px"},className:"story-label-select"})))},L=function(e){var t=e.title,n=e.label,a=e.date,r=e.size,l=e.enabled,c=e.taxonomy,o=e.setAttributes,i=e.altHeaderWeight,m=l.enableHeader,b=l.enableMeta;if(!0!==m)return React.createElement(d.Fragment,null);var f=s()({large:1===r,medium:2===r,small:3===r,light:i,"sans-serif":!0!==b});return React.createElement(d.Fragment,null,!0===b&&React.createElement(u.a.Meta,null,React.createElement(D,{date:a,label:n,taxonomy:c,setAttributes:o})),React.createElement(u.a.Header,{className:f},React.createElement(p.RichText,{tagName:"div",value:t,onChange:function(e){return o({title:e})},allowedFormats:["italic"],placeholder:"Title",multiline:"br"})))};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){var t=e.attributes,n=e.setAttributes,a=e.isSelected,r=e.clientId,l=e.context,c=t.title,o=t.description,i=t.extra,f=t.link,g=t.label,h=t.date,w=t.image,E=t.imageSlot,v=t.imageSize,y=t.isChartArt,R=t.postId,A=t.headerSize,O=t.enableEmphasis,x=t.enableHeader,C=t.enableExcerpt,j=t.enableExcerptBelow,P=t.enableExtra,H=t.enableBreakingNews,M=t.enableAltTaxonomy,D=t.enableMeta,V=t.isTransformed,Z=t.className;Object(d.useEffect)((function(){!0===V&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A1";return new Promise((function(n,a){k()({path:"/prc-api/v2/blocks/helpers/get-post-by-url",method:"POST",data:{url:e}}).then((function(e){if(console.log("setPostbyURL",e),!1!==e){var r=S(e,t,!1);n(r)}else a(e)})).catch((function(e){console.error(e),a(e)}))}))}(f).then((function(e){n(_({isTransformed:!1},e))}))}),[V]),Object(d.useEffect)((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};!e.postId&&e.postID&&(n.postId=e.postID),!e.description&&e.excerpt&&0!==e.excerpt.length&&(n.description=e.excerpt),0!==Object.keys(n).length&&!1!==t&&(console.log("handleExcerptAndPostIdUpdate",e,n),t(_({},n)))}(t,n)}),[]);var F=Object(b.useSelect)((function(e){return{rootClientId:e("core/block-editor").getBlockRootClientId(r)}}),[r]).rootClientId,G=!C,U=M?"research-teams":"Formats",X=Object(p.useBlockProps)(),W=function(){return React.createElement(I,{img:w,size:v,link:f,slot:E,chartArt:y,postId:R,setAttributes:n})},J=function(){return"top"!==E&&"left"!==E?React.createElement(d.Fragment,null):React.createElement(W,null)},Y=function(){return"default"!==E?React.createElement(d.Fragment,null):React.createElement(W,null)},q=function(){return"bottom"!==E&&"right"!==E?React.createElement(d.Fragment,null):React.createElement(W,null)};return void 0===R?React.createElement(B,{attributes:t,setAttributes:n}):!0!==a?React.createElement("div",X,React.createElement(m.e,t)):React.createElement("div",X,React.createElement(T,{attributes:t,setAttributes:n,context:!!l.hasOwnProperty("prc-block/wp-query")&&JSON.parse(l["prc-block/wp-query"]),rootClientId:F}),React.createElement("article",{className:s()(Z,"item","story","is-style-".concat(E),{stacked:"top"===E||"bottom"===E,bordered:O,"alt-description":j})},React.createElement(J,null),React.createElement(u.a.Content,null,React.createElement(L,{enabled:{enableHeader:x,enableMeta:D},title:c,date:h,label:g,link:f,size:A,taxonomy:U,setAttributes:n,altHeaderWeight:G}),React.createElement(Y,null),!0!==j&&React.createElement(N,{enabled:C,content:o,sansSerif:!D||!x,setAttributes:n}),React.createElement(z,{enabled:P,content:i,breakingNews:H,setAttributes:n})),React.createElement(q,null),!0===j&&React.createElement(N,{enabled:C,content:o,sansSerif:!x,setAttributes:n})))},F=function(e){var t=e.attributes,n=t.description,a=t.extra;return React.createElement(d.Fragment,null,n&&React.createElement(p.RichText.Content,{className:"description",tagName:"div",value:n}),a&&React.createElement(p.RichText.Content,{className:"extra",tagName:"ul",value:a}))},G=new RegExp(/^https?:\/\/(www\.)?${window.location.host}\/((?!staff).)*$/i),U={from:[{type:"raw",isMatch:function(e){return"P"===e.nodeName&&G.test(e.textContent)},transform:function(e){var t=e.textContent.trim();if(console.log("you pasted a url, here is the node we matched...",t),!Object(g.isEmpty)(t))return Object(c.createBlock)("prc-block/story-item",{className:"is-style-default",imageSize:"A1",imageSlot:"default",link:t,isTransformed:!0})}}]};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=o.name,Y={title:Object(l.__)("Story Item"),icon:"format-aside",description:Object(l.__)("A story item is a visual display of a post, usually referencing a stub post."),keywords:[Object(l.__)("prc"),Object(l.__)("story"),Object(l.__)("post"),Object(l.__)("story item")],example:{attributes:{title:"Ultricies Ipsum Nibh Egestas Purus",excerpt:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>",extra:"<li></li>",link:"#",label:"Report",date:r().format("MM-DD-YYYY"),image:"https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg",imageSlot:"top",imageSize:"A2",isPreview:!0}},variations:[{name:"story-item-default",isDefault:!0,title:Object(l.__)("Story Item"),description:Object(l.__)("The default story item"),attributes:{imageSlot:"default",imageSize:"A1"}},{name:"story-item-pub-listing",title:Object(l.__)("Pub Listing Story Item"),attributes:{className:"is-style-left",imageSlot:"left",imageSize:"A3"}}],transforms:U,edit:Z,save:F};Object(c.registerBlockType)(J,W(W({},o),Y))},9:function(e,t){e.exports=window.wp.blocks}},[[598,0,1,2]]]);
//# sourceMappingURL=story-item-5b92d36a.js.map