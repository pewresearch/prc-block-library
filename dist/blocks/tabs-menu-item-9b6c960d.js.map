{"version":3,"sources":["webpack:///./src/tabs/menu-item/edit.js","webpack:///./src/tabs/menu-item/save.js","webpack:///./src/tabs/menu-item/index.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///external [\"wp\",\"data\"]"],"names":["Edit","attributes","setAttributes","clientId","isSelected","context","title","uuid","currentlyActive","useDispatch","insertBlock","updateBlockAttributes","updateBlock","moveBlockToPosition","useSelect","select","undefined","getBlock","getBlockRootClientId","getAdjacentBlockClientId","getBlockIndex","menuBlockClientId","controllerBlockClientId","panesBlockClientId","panesBlock","paneClientId","hasOwnProperty","innerBlocks","length","filter","e","targetClientId","targetIndex","currentPaneIndex","toClientId","currentIndex","paneIndex","console","log","controllerClientId","panesClientId","currentPositionIndex","panePositionIndex","matchingPaneClientId","useEffect","newUuid","newPaneBlock","createBlock","onBlockInit","active","blockProps","useBlockProps","tagName","value","allowedFormats","onChange","newTitle","slug","cleanForSlug","placeholder","__","save","name","metadata","settings","__experimentalLabel","edit","registerBlockType","path","replace","window","concat","module","exports","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable"],"mappings":"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","file":"blocks/tabs-menu-item-9b6c960d.js","sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useBlockProps, RichText } from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { cleanForSlug } from '@wordpress/url';\n\nfunction Edit({ attributes, setAttributes, clientId, isSelected, context }) {\n\tconst { title, uuid } = attributes;\n\tconst currentlyActive = context['prc-block/tabs/active'];\n\n\tconst {\n\t\tinsertBlock,\n\t\tupdateBlockAttributes,\n\t\tupdateBlock,\n\t\tmoveBlockToPosition,\n\t} = useDispatch('core/block-editor');\n\n\tconst movePane = (\n\t\ttargetClientId,\n\t\ttargetIndex,\n\t\tcurrentPaneIndex,\n\t\ttoClientId,\n\t) => {\n\t\tif (targetIndex === currentPaneIndex || -1 === currentPaneIndex) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\n\t\t\t'movePane',\n\t\t\ttargetClientId,\n\t\t\ttargetIndex,\n\t\t\tcurrentPaneIndex,\n\t\t\ttoClientId,\n\t\t);\n\n\t\tmoveBlockToPosition(targetClientId, toClientId, toClientId, targetIndex);\n\t};\n\n\tconst {\n\t\tcontrollerClientId,\n\t\tpanesClientId,\n\t\tcurrentPositionIndex,\n\t\tmatchingPaneClientId,\n\t} = useSelect(\n\t\t(select) => {\n\t\t\tif (undefined === clientId) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tgetBlock,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetAdjacentBlockClientId,\n\t\t\t\tgetBlockIndex,\n\t\t\t} = select('core/block-editor');\n\n\t\t\tconst menuBlockClientId = getBlockRootClientId(clientId);\n\t\t\tconst controllerBlockClientId = getBlockRootClientId(menuBlockClientId);\n\t\t\tconst panesBlockClientId = getAdjacentBlockClientId(menuBlockClientId);\n\t\t\tconst panesBlock = getBlock(panesBlockClientId);\n\n\t\t\tlet paneClientId = false;\n\t\t\tif (\n\t\t\t\tpanesBlock.hasOwnProperty('innerBlocks') &&\n\t\t\t\t1 <= panesBlock.innerBlocks.length &&\n\t\t\t\tnull !== uuid\n\t\t\t) {\n\t\t\t\t// console.log('panesBlock as seen from MenuItem', panesBlock);\n\t\t\t\tconst matchedPane = panesBlock.innerBlocks.filter(\n\t\t\t\t\t(e) => e.attributes.uuid === uuid,\n\t\t\t\t);\n\t\t\t\tpaneClientId = matchedPane[0].clientId;\n\t\t\t}\n\n\t\t\tconst currentIndex = getBlockIndex(clientId, menuBlockClientId);\n\t\t\tconst paneIndex = getBlockIndex(paneClientId, panesBlockClientId);\n\n\t\t\tmovePane(paneClientId, currentIndex, paneIndex, panesBlockClientId);\n\n\t\t\t// eslint-disable-next-line consistent-return\n\t\t\treturn {\n\t\t\t\tcontrollerClientId: controllerBlockClientId,\n\t\t\t\tpanesClientId: panesBlockClientId,\n\t\t\t\tcurrentPositionIndex: currentIndex,\n\t\t\t\tpanePositionIndex: paneIndex,\n\t\t\t\tmatchingPaneClientId: paneClientId,\n\t\t\t};\n\t\t},\n\t\t[clientId],\n\t);\n\n\tconst onBlockInit = () => {\n\t\t// If no uuid is set then run init sequence, create a matching tab pane block.\n\t\tif (null === uuid) {\n\t\t\t// We will use the first client id assigned as a uuid.\n\t\t\tconsole.log('onBlockInit', uuid, currentPositionIndex);\n\t\t\tconst newUuid = clientId;\n\t\t\tsetAttributes({ uuid: newUuid });\n\t\t\tconst newPaneBlock = createBlock('prc-block/tabs-pane', {\n\t\t\t\tuuid: newUuid,\n\t\t\t});\n\t\t\tinsertBlock(newPaneBlock, currentPositionIndex, panesClientId, false);\n\t\t}\n\t};\n\n\tconst onBlockSelection = () => {\n\t\tif (null !== uuid && undefined !== controllerClientId) {\n\t\t\tupdateBlockAttributes(controllerClientId, { active: uuid });\n\t\t}\n\t\tif (matchingPaneClientId) {\n\t\t\t// Blind update of the block to trigger a re-render.\n\t\t\tupdateBlock(matchingPaneClientId, {});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tonBlockInit();\n\t}, [panesClientId, currentPositionIndex]);\n\n\tuseEffect(() => {\n\t\tonBlockSelection();\n\t}, [clientId, isSelected]);\n\n\tconst blockProps = useBlockProps({\n\t\t'aria-selected': uuid === currentlyActive,\n\t});\n\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t{isSelected && (\n\t\t\t\t<RichText\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={title}\n\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\tonChange={(newTitle) =>\n\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\ttitle: newTitle,\n\t\t\t\t\t\t\tslug: cleanForSlug(newTitle),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tplaceholder={__('Tab Title', 'prc-block-library')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{!isSelected && <div>{title || `Tab Title`}</div>}\n\t\t</div>\n\t);\n}\n\nexport default Edit;\n","/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\nconst save = () => <Fragment />;\n\nexport default save;\n","/**\n * WordPress dependencies\n */\nimport { registerBlockType } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\n// import './style.scss';\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\n\nconst { name } = metadata;\n\nconst settings = {\n\t__experimentalLabel: ({ title }) => title || 'Menu Item', // Will change the label to match the title, #experimental.\n\tedit,\n\tsave,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","(function() { module.exports = window[\"wp\"][\"data\"]; }());"],"sourceRoot":""}