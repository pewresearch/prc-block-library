{"version":3,"sources":["webpack:///external [\"wp\",\"data\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/classnames/index.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///external [\"wp\",\"i18n\"]","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"regeneratorRuntime\"","webpack:///external [\"wp\",\"blocks\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/quote-sorter/data/dataFormatter.ts","webpack:///./src/quote-sorter/edit/Dropzone.js","webpack:///./src/quote-sorter/edit/Controls.js","webpack:///./src/quote-sorter/edit/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack:///./src/quote-sorter/save.js","webpack:///./src/quote-sorter/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["module","exports","window","_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","_typeof","obj","Symbol","iterator","constructor","prototype","__esModule","hasOwn","hasOwnProperty","classNames","classes","arguments","arg","argType","push","Array","isArray","inner","apply","toString","call","join","default","__webpack_amd_options__","path","replace","concat","regeneratorRuntime","asyncGeneratorStep","gen","resolve","reject","_next","_throw","info","value","error","done","Promise","then","arrayToJson","arr","stripDowncase","string","toLowerCase","categories","slice","categoriesFormatted","map","category","data","quotes","typologies","references","attributionPosition","includes","splice","row","quote","attribution","console","log","returnAttribution","props","index","j","name","k","Dropzone","attributes","setAttributes","uploadStatus","sorterId","submitQuotes","fn","str","a","setTimeout","apiFetch","method","quoteData","hash","res","JSON","stringify","catch","e","self","this","args","err","undefined","onDropCSV","filesList","reader","FileReader","onload","dataJson","rows","split","csvToArray","result","dataJsonString","forEach","file","readAsText","label","__","isColumnLayout","align","justify","style","display","flexDirection","alignItems","justifyContent","icon","disabled","onFilesDrop","c","onDrop","Controls","title","CustomBlockAppender","rootClientId","buttonText","className","buttonProps","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","isAppender","renderToggle","onToggle","textAlign","onClick","ALLOWED_BLOCKS","TEMPLATE","placeholder","from","edit","clientId","isSelected","hasSelectedInnerBlock","useSelect","select","useHasSelectedInnerBlock","blockProps","useBlockProps","classnames","innerBlocksProps","useInnerBlocksProps","allowedBlocks","orientation","template","renderAppender","isSecondary","showTooltip","save","Content","metadata","settings","registerBlockType","_defineProperty","defineProperty","enumerable","configurable","writable"],"mappings":"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","file":"blocks/quote-sorter-1f2a7be2.js","sourcesContent":["(function() { module.exports = window[\"wp\"][\"data\"]; }());","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof=require(\"@babel/runtime/helpers/typeof\");/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/ /* global define */(function(){'use strict';var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=_typeof(arg);if(argType==='string'||argType==='number'){classes.push(arg);}else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner);}}}else if(argType==='object'){if(arg.toString===Object.prototype.toString){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key);}}}else{classes.push(arg.toString());}}}return classes.join(' ');}if(typeof module!=='undefined'&&module.exports){classNames.default=classNames;module.exports=classNames;}else if(typeof define==='function'&&_typeof(define.amd)==='object'&&define.amd){// register as 'classnames', consistent with npm package name\ndefine('classnames',[],function(){return classNames;});}else{window.classNames=classNames;}})();","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export function arrayToJson(arr: string | any[]) {\n\tconst stripDowncase = (string: string) =>\n\t\tstring.replace(/\\W/g, '').replace(/\\s/g, '').toLowerCase();\n\tconst categories = arr[0].slice(1);\n\tconst categoriesFormatted = categories.map((category) =>\n\t\tstripDowncase(category),\n\t);\n\tfunction returnAttribution(row: any[]) {\n\t\tif (attributionPosition) {\n\t\t\tconsole.log({ row });\n\t\t\tconst attribution = row[attributionPosition + 1];\n\t\t\trow.splice(attributionPosition + 1, 1);\n\t\t\treturn attribution;\n\t\t}\n\t\treturn null;\n\t}\n\tconst data = arr.slice(1);\n\tconst quotes = {};\n\tconst typologies = {};\n\tconst references = {};\n\tconst attributionPosition = categoriesFormatted.includes('attribution')\n\t\t? categoriesFormatted.indexOf('attribution')\n\t\t: null;\n\tcategoriesFormatted.splice(attributionPosition, 1);\n\t// loop through data\n\tfor (let i = 0; i < data.length; i += 1) {\n\t\tconst row = data[i];\n\t\tconst quote = row[0];\n\t\tconst attribution = returnAttribution(row);\n\t\tconst props = row.slice(1);\n\t\tconsole.log({ quote, attribution, props });\n\t\t// create quotes object\n\t\tquotes[i] = {\n\t\t\tquote,\n\t\t\tattribution,\n\t\t\tprops: categoriesFormatted.map(\n\t\t\t\t(category: string, index: string | number) =>\n\t\t\t\t\t`${category}_${stripDowncase(props[index])}`,\n\t\t\t),\n\t\t};\n\n\t\t// generate typologies\n\t\tfor (let j = 0; j < props.length; j += 1) {\n\t\t\tconst key = `${categoriesFormatted[j]}_${stripDowncase(props[j])}`;\n\t\t\tif (!typologies[key]) {\n\t\t\t\ttypologies[key] = {\n\t\t\t\t\tname: props[j],\n\t\t\t\t\tcategory: categories[j],\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// map quote ids to typologies\n\t\tfor (let k = 0; k < categoriesFormatted.length; k += 1) {\n\t\t\tconst key = `${categoriesFormatted[k]}_${stripDowncase(props[k])}`;\n\t\t\tif (!references[key]) {\n\t\t\t\treferences[key] = [i];\n\t\t\t} else {\n\t\t\t\treferences[key].push(i);\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tquotes,\n\t\ttypologies,\n\t\treferences,\n\t};\n}\n","import { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tButton,\n\tPlaceholder as WPComPlaceholder,\n\tSpinner,\n\tDropZoneProvider,\n\tDropZone,\n\tIcon,\n\tFlex,\n\tFlexItem,\n} from '@wordpress/components';\n\nimport apiFetch from '@wordpress/api-fetch';\n\nimport { arrayToJson } from '../data/dataFormatter.ts';\n\nexport default function Dropzone({ attributes, setAttributes }) {\n\tconst { uploadStatus, sorterId } = attributes;\n\tconst csvToArray = (str) => {\n\t\tconsole.log({ str });\n\t\tconst arr = [];\n\t\tconst rows = str.split('\\n');\n\t\tfor (let i = 0; i < rows.length; i++) {\n\t\t\tconst row = rows[i].split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n\t\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\t\trow[j] = row[j]\n\t\t\t\t\t.replace(/\"/g, '')\n\t\t\t\t\t.replace('\\r', '')\n\t\t\t\t\t.replace(/^\\s+|\\s+$/gm, '');\n\t\t\t}\n\t\t\tarr.push(row);\n\t\t}\n\t\tconsole.log({ arr });\n\t\treturn arr;\n\t};\n\n\tconst submitQuotes = async (str) => {\n\t\t// add hash to data\n\t\tsetTimeout(() => {\n\t\t\tapiFetch({\n\t\t\t\tpath: `/prc-api/v2/block/quote-sorter/submit/`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { quoteData: str, hash: sorterId || '' },\n\t\t\t})\n\t\t\t\t.then((res) => {\n\t\t\t\t\tconsole.log({ res });\n\t\t\t\t\tconst { typologies } = res.data;\n\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\tuploadStatus: 'processed',\n\t\t\t\t\t\tsorterId: res.hash,\n\t\t\t\t\t\ttypologies: JSON.stringify(typologies),\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tconsole.log('Error!');\n\t\t\t\t\tconsole.log({ e });\n\t\t\t\t});\n\t\t}, 2000);\n\t};\n\tconst onDropCSV = (filesList) => {\n\t\tsetAttributes({\n\t\t\tuploadStatus: 'processing',\n\t\t});\n\t\tconst reader = new FileReader();\n\t\t// Define how data is parsed and handled.\n\t\treader.onload = () => {\n\t\t\tconst dataArr = csvToArray(reader.result);\n\t\t\tconst dataJson = arrayToJson(dataArr);\n\t\t\tconst dataJsonString = JSON.stringify(dataJson);\n\t\t\tsubmitQuotes(dataJsonString);\n\t\t};\n\n\t\tfilesList.forEach((file) => reader.readAsText(file));\n\t};\n\treturn (\n\t\t<WPComPlaceholder\n\t\t\tlabel={__(\n\t\t\t\t'Drop a CSV of quotes in the space below. This may take a while if your file is very large. Make sure your CSV has Quote and Attribtution columns.',\n\t\t\t)}\n\t\t\tisColumnLayout\n\t\t>\n\t\t\t<DropZoneProvider>\n\t\t\t\t<Flex align=\"center\" justify=\"center\">\n\t\t\t\t\t{'processed' === uploadStatus && (\n\t\t\t\t\t\t<FlexItem\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t\t<Icon icon=\"database-view\" />\n\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t\tData has been uploaded to database. Reference ID:{' '}\n\t\t\t\t\t\t\t\t<strong>{sorterId}</strong>\n\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t)}\n\t\t\t\t\t{'unprocessed' === uploadStatus && <Icon icon=\"database-add\" />}\n\t\t\t\t\t{'processing' === uploadStatus && <Spinner />}\n\t\t\t\t</Flex>\n\t\t\t\t<DropZone\n\t\t\t\t\tdisabled={'processed' !== uploadStatus}\n\t\t\t\t\tonFilesDrop={(c) => {\n\t\t\t\t\t\tconsole.log('onFilesDrop', c);\n\t\t\t\t\t\tonDropCSV(c);\n\t\t\t\t\t}}\n\t\t\t\t\tonDrop={(c) => {\n\t\t\t\t\t\tconsole.log('onDrop', c);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</DropZoneProvider>\n\t\t</WPComPlaceholder>\n\t);\n}\n","/**\n * External Dependencies\n */\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState } from '@wordpress/element';\nimport {\n\tInspectorControls,\n\tInspectorAdvancedControls,\n} from '@wordpress/block-editor';\nimport { PanelBody } from '@wordpress/components';\n\nimport Dropzone from './Dropzone';\n\nfunction Controls({ attributes, setAttributes }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('Upload Data')}>\n\t\t\t\t\t<Dropzone attributes={attributes} setAttributes={setAttributes} />\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorAdvancedControls />\n\t\t</Fragment>\n\t);\n}\n\nexport default Controls;\n","/**\n * External Dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport {\n\tInserter,\n\tuseInnerBlocksProps,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport Controls from './Controls';\n\n/**\n * useHasSelectedInnerBlock\n * Determine whether one of the inner blocks currently is selected\n *\n * @param {Object} props\n * @param props.clientId\n * @return {boolean} wether the block is the ancestor of selected blocks\n */\nconst useHasSelectedInnerBlock = ({ clientId }) =>\n\tuseSelect((select) =>\n\t\tselect('core/block-editor').hasSelectedInnerBlock(clientId, true),\n\t);\n\n/**\n * CustomBlockAppender.\n *\n * Provide a Button component to trigger the inserter.\n * Any undocumented props are spread onto the Button component.\n *\n * @param {Object} props              All props sent to this component.\n * @param {string} props.rootClientId Client ID of the block where this is being used.\n * @param {string} [props.buttonText] Text to display in the Button.\n * @param {string} [props.icon]       The icon to use.\n * @return {Function} The component.\n */\nfunction CustomBlockAppender({\n\trootClientId,\n\tbuttonText,\n\ticon,\n\tclassName = 'custom-block-appender',\n\t...buttonProps\n}) {\n\treturn (\n\t\t<Inserter\n\t\t\tisAppender\n\t\t\trootClientId={rootClientId}\n\t\t\trenderToggle={({ onToggle, disabled }) => (\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={`${className}`}\n\t\t\t\t\t\tonClick={onToggle}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\ticon={icon}\n\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t>\n\t\t\t\t\t\t{buttonText}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nconst ALLOWED_BLOCKS = [\n\t'prc-block/quote-sorter-dropdown',\n\t'prc-block/quote-sorter-search-bar',\n\t'prc-block/quote-sorter-quote',\n\t'prc-block/quote-sorter-quotes',\n\t'prc-block/quote-sorter-quote-text',\n\t'prc-block/quote-sorter-quote-attribution',\n\t'prc-block/quote-sorter-dynamic-text',\n\t'prc-block/grid',\n\t'core/group',\n];\nconst TEMPLATE = [\n\t[\n\t\t'prc-block/quote-sorter-search-bar',\n\t\t{\n\t\t\tplaceholder: __('Search for a quote ...'),\n\t\t},\n\t],\n\t[\n\t\t'prc-block/quote-sorter-quotes',\n\t\t{},\n\t\tArray.from({ length: 5 }, () => ['prc-block/quote-sorter-quote']),\n\t],\n];\n\nconst edit = ({\n\tattributes,\n\tclassName,\n\tsetAttributes,\n\tclientId,\n\tisSelected,\n}) => {\n\tconst hasSelectedInnerBlock = useHasSelectedInnerBlock({ clientId });\n\tconsole.log(\n\t\t'hasSelectedInnerBlock',\n\t\thasSelectedInnerBlock,\n\t\t!hasSelectedInnerBlock,\n\t\tisSelected,\n\t);\n\n\tconst blockProps = useBlockProps({\n\t\tclassName: classnames(className),\n\t});\n\n\tconsole.log({ blockProps });\n\n\tconst innerBlocksProps = useInnerBlocksProps(blockProps, {\n\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t\torientation: 'vertical',\n\t\ttemplate: TEMPLATE,\n\t\trenderAppender:\n\t\t\thasSelectedInnerBlock || isSelected\n\t\t\t\t? () => (\n\t\t\t\t\t\t<CustomBlockAppender\n\t\t\t\t\t\t\trootClientId={clientId}\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\t\ticon=\"plus\"\n\t\t\t\t\t\t\tlabel={__('Insert Quote Sorter Blocks', 'prc-block-library')}\n\t\t\t\t\t\t\tbuttonText={__('Insert Quote Sorter Blocks', 'prc-block-library')}\n\t\t\t\t\t\t/>\n\t\t\t\t  )\n\t\t\t\t: false,\n\t});\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<Controls attributes={attributes} setAttributes={setAttributes} />\n\t\t\t<div {...innerBlocksProps} />\n\t\t</Fragment>\n\t);\n};\n\nexport default edit;\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/**\n * WordPress Dependencies\n */\nimport { InnerBlocks } from '@wordpress/block-editor';\n\nconst save = () => <InnerBlocks.Content />;\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\n\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n\tedit,\n\tsave,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}