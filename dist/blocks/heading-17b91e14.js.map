{"version":3,"sources":["webpack:///external \"React\"","webpack:///./src/heading/index.js","webpack:///external [\"wp\",\"compose\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"ReactDOM\"","webpack:///external \"regeneratorRuntime\"","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"keycodes\"]","webpack:///external [\"wp\",\"hooks\"]"],"names":["module","exports","window","HeadingBlockFilter","createHigherOrderComponent","BlockEdit","props","name","attributes","setAttributes","isChapter","icon","altTocText","content","anchor","label","isActive","onClick","attrs","replace","__","value","placeholder","onChange","attachmentId","mediaType","mediaSize","onUpdate","image","console","log","id","addFilter","settings","level","default","type","registerBlockStyle","registerBlockVariation","title","description","className","regeneratorRuntime"],"mappings":";;;;;;;;;;;;;;;;;sHAAcA,EAAOC,QAAUC,OAAc,O,gVC+B7C,IAAMC,EAAqBC,sCAA2B,SAACC,GACnD,OAAO,SAACC,GACJ,IAAQC,EAAoCD,EAApCC,KAAMC,EAA8BF,EAA9BE,WAAYC,EAAkBH,EAAlBG,cAC1B,GAAI,iBAAmBF,EACnB,OAAO,oBAACF,EAAcC,GAEhC,IAAQI,EAAiDF,EAAjDE,UAAWC,EAAsCH,EAAtCG,KAAMC,EAAgCJ,EAAhCI,WAAYC,EAAoBL,EAApBK,QAASC,EAAWN,EAAXM,OACxC,OACI,oBAAC,WAAD,KACR,oBAAC,gBAAD,KACC,oBAAC,eAAD,KACC,oBAAC,gBAAD,CACCH,KAAO,YACPI,MAAM,cACNC,SAAUN,EACVO,QAAS,WACR,IAAMC,EAAQ,CACbJ,QAAQ,IAAUJ,EAAV,kBAAiCI,GAAWA,EAAOK,QAAQ,WAAY,IAC/ET,WAAYA,GAEbD,E,yWAAc,CAAD,GAAKS,SAKtB,oBAAC,4BAAD,KACER,GACA,oBAAC,WAAD,KACC,oBAAC,cAAD,CACCK,MAAOK,aAAG,qBAAsB,qBAChCC,MAAOT,EACPU,YAAaT,EACbU,SAAU,SAACF,GAAD,OAAWZ,EAAc,CAACG,WAAYS,OAEjD,oBAAC,IAAD,CACCG,aAAcb,EACdc,UAAW,CAAC,SACZC,UAAW,8BACXC,SAAU,SAACC,GACVC,QAAQC,IAAI,QAASF,GACrBnB,EAAc,CACbE,KAAMiB,EAAMG,UAON,oBAAC1B,EAAcC,OAI5B,uBACH0B,oBAAU,mBAAoB,oBAAqB7B,EAAoB,IAqBvE6B,oBACI,2BACA,6BAdJ,SAAgCC,EAAU1B,GACtC,MAAK,iBAAmBA,IAGxB0B,EAASzB,WAAW0B,MAAMC,QAAU,EACpCF,EAASzB,WAAWE,UAAY,CAC5B0B,KAAM,UACND,SAAS,IALFF,KAgBfI,6BAAmB,eAAgB,CAC/B,CACI9B,KAAM,iBACNQ,MAAO,kBAEX,CACIR,KAAM,aACNQ,MAAO,gBAIfuB,iCAAuB,eAAgB,CACnC/B,KAAM,iBACNgC,MAAOnB,aAAG,kBACVoB,YAAapB,aAAG,4CAChBZ,WAAY,CACRiC,UAAW,0BACXP,MAAO,KAIfI,iCAAuB,eAAgB,CACnC/B,KAAM,UACNgC,MAAOnB,aAAG,WACVoB,YAAapB,aAAG,sBACnBT,KAAM,YACHH,WAAY,CACRE,WAAW,M,kBC1ILV,EAAOC,QAAUC,OAAW,GAAW,S,iBCAvCF,EAAOC,QAAUC,OAAW,GAAU,Q,iBCAtCF,EAAOC,QAAUC,OAAW,GAAQ,M,gBCApCF,EAAOC,QAAUC,OAAW,GAAQ,M,iBCApCF,EAAOC,QAAUC,OAAW,GAAc,Y,iBCA1CF,EAAOC,QAAUC,OAAW,GAAY,U,gBCAxCF,EAAOC,QAAUC,OAAW,GAAc,Y,iBCA1CF,EAAOC,QAAUC,OAAW,GAAO,K,iBCAnCF,EAAOC,QAAUC,OAAW,GAAgB,c,gBCA5CF,EAAOC,QAAUC,OAAW,GAAW,S,gBCAvCF,EAAOC,QAAUC,OAAW,GAAe,a,iBCA3CF,EAAOC,QAAUC,OAAiB,U,iBCAhDF,EAAOC,QAAUyC,oB,iBCAH1C,EAAOC,QAAUC,OAAW,GAAc,Y,iBCA1CF,EAAOC,QAAUC,OAAW,GAAY,U,8DCAxCF,EAAOC,QAAUC,OAAW,GAAS,Q","file":"blocks/heading-17b91e14.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","/**\n * External Dependencies\n */\n\nimport { MediaDropZone } from '@prc-app/shared';\n/**\n * WordPress Dependencies\n */\n import { __ } from '@wordpress/i18n';\n import { createHigherOrderComponent } from '@wordpress/compose';\n import { Fragment } from '@wordpress/element';\n import {\n    registerBlockStyle,\n    registerBlockVariation\n} from '@wordpress/blocks';\nimport { BlockControls, InspectorAdvancedControls } from '@wordpress/block-editor';\nimport {\n    KeyboardShortcuts,\n\tTextControl,\n    Toolbar,\n    ToolbarGroup,\n\tToolbarButton\n} from '@wordpress/components';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\n\n// Add toolbar to core/heading block with toggle for isChapter attribute.\nconst HeadingBlockFilter = createHigherOrderComponent((BlockEdit) => {\n    return (props) => {\n        const { name, attributes, setAttributes } = props;\n        if ('core/heading' !== name) {\n            return <BlockEdit {...props} />;\n        }\n\t\tconst { isChapter, icon, altTocText, content, anchor } = attributes;\n        return (\n            <Fragment>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon={ 'editor-ol' }\n\t\t\t\t\t\t\tlabel=\"Is Chapter?\"\n\t\t\t\t\t\t\tisActive={isChapter}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\t\t\tanchor: true === !isChapter ? `CHAPTER-${anchor}` : anchor.replace(/CHAPTER-/, ''),\n\t\t\t\t\t\t\t\t\tisChapter: !isChapter\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetAttributes({...attrs});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t</BlockControls>\n\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t{isChapter && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={__('Alternate TOC Text', 'prc-block-library')}\n\t\t\t\t\t\t\t\tvalue={altTocText}\n\t\t\t\t\t\t\t\tplaceholder={content}\n\t\t\t\t\t\t\t\tonChange={(value) => setAttributes({altTocText: value})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MediaDropZone\n\t\t\t\t\t\t\t\tattachmentId={icon}\n\t\t\t\t\t\t\t\tmediaType={['image']}\n\t\t\t\t\t\t\t\tmediaSize={'heading-block--chapter-icon'}\n\t\t\t\t\t\t\t\tonUpdate={(image) => {\n\t\t\t\t\t\t\t\t\tconsole.log(\"IMAGE\", image);\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\ticon: image.id,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\t\t\t\t</InspectorAdvancedControls>\n                <BlockEdit {...props} />\n            </Fragment>\n        );\n    };\n}, 'withChapterControls');\naddFilter('editor.BlockEdit', 'prc-block/heading', HeadingBlockFilter, 21);\n\n/**\n * Modify default settings on core/heading block. Change the default heading level to 4 and add isChapter attribute to replace prc-block/chapter at a later date.\n *\n * @param {*} settings\n * @param {*} name\n * @returns\n */\nfunction modifyDefaultSettings( settings, name ) {\n    if ( 'core/heading' !== name ) {\n        return settings;\n    }\n    settings.attributes.level.default = 4;\n    settings.attributes.isChapter = {\n        type: 'boolean',\n        default: false,\n    };\n\treturn settings;\n}\n\naddFilter(\n    'blocks.registerBlockType',\n    'prc-block-library/heading',\n    modifyDefaultSettings,\n);\n\nregisterBlockStyle('core/heading', [\n    {\n        name: 'section-header',\n        label: 'Section Header',\n    },\n    {\n        name: 'sub-header',\n        label: 'Sub Header',\n    },\n]);\n\nregisterBlockVariation('core/heading', {\n    name: 'section-header',\n    title: __('Section Header'),\n    description: __('A heading styled for \"section headings\".'),\n    attributes: {\n        className: 'is-style-section-header',\n        level: 3,\n    },\n});\n\nregisterBlockVariation('core/heading', {\n    name: 'chapter',\n    title: __('Chapter'),\n    description: __('A chapter heading.'),\n\ticon: 'editor-ol',\n    attributes: {\n        isChapter: true,\n    },\n});\n\n//@TODO: Register a block transform to convert prc-block/chapter to heading. from prc-block/chapter to this.\n","(function() { module.exports = window[\"wp\"][\"compose\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","(function() { module.exports = window[\"wp\"][\"hooks\"]; }());"],"sourceRoot":""}