{"version":3,"sources":["webpack:///external \"React\"","webpack:///external [\"wp\",\"coreData\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external \"moment\"","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-debounce.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-fetch.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-search/search-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-search/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-placeholder/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/list-store/reducer.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/link-toolbar-button/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/caret-heading-link/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/block-inserter-button/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/heading-level-toolbar/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/functions/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/mailchimp/index.js","webpack:///external \"lodash\"","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"regeneratorRuntime\"","webpack:///external [\"wp\",\"keycodes\"]","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///./src/story-item/helpers.js","webpack:///external [\"wp\",\"date\"]","webpack:///external [\"wp\",\"data\"]","webpack:///./src/story-item/deprecated.js","webpack:///./src/story-item/edit/controls/inspector.jsx","webpack:///./src/story-item/edit/controls/url-search-field.jsx","webpack:///./src/story-item/edit/controls/placeholder.jsx","webpack:///./src/story-item/edit/controls/icons.jsx","webpack:///./src/story-item/edit/controls/toolbar.jsx","webpack:///./src/story-item/edit/controls/index.js","webpack:///./src/story-item/edit/image.jsx","webpack:///./src/story-item/edit/excerpt.jsx","webpack:///./src/story-item/edit/extra.jsx","webpack:///./src/story-item/edit/header.jsx","webpack:///./src/story-item/edit/meta.jsx","webpack:///./src/story-item/edit/preview.jsx","webpack:///./src/story-item/edit/context-preview.jsx","webpack:///./src/story-item/edit/index.js","webpack:///./src/story-item/save.js","webpack:///./src/story-item/variations.js","webpack:///./src/story-item/index.js"],"names":["module","exports","window","moment","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","ButtonStyled","styled","Button","SearchItem","suggestion","onClick","searchTerm","isSelected","id","contentTypes","showType","type","length","text","decodeEntities","title","className","style","borderRadius","boxSizing","paddingRight","highlight","aria-hidden","filterURLForDisplay","safeDecodeURI","url","NAMESPACE","searchCache","ContentSearch","onSelectItem","placeholder","label","mode","excludeItems","perPage","searchInput","setSearchInput","searchString","searchStringIsUrl","useMemo","match","searchResults","setSearchResults","isLoading","setIsLoading","selectedItem","setSelectedItem","abortControllerRef","useRef","mounted","handleSearchResults","results","searchQuery","current","toSet","filter","result","keep","every","item","getPostByUrl","undefined","Error","Promise","resolve","reject","apiFetch","path","method","data","then","post","console","log","catch","err","hasSearchString","hasSearchResults","keyword","isUrl","abort","trim","AbortController","join","ID","post_title","post_type","permalink","subtype","error","code","signal","handleSearchStringChange","listCSS","css","onNavigate","orientation","display","flexGrow","onChange","autoComplete","position","right","marginTop","marginBottom","marginLeft","paddingLeft","listStyle","color","cursor","__","map","index","key","handleItemSelection","DragHandle","sortableHandle","marginRight","flexShrink","width","height","xmlns","viewBox","role","focusable","d","Wrapper","PickedItem","isOrderable","handleItemDelete","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","newItem","rendered","name","link","uuid","border","paddingTop","paddingBottom","aria-label","SortableList","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","itemKey","sortIndex","totalItems","StyleWrapper","ContentPicker","onPickChange","ids","maxContentItems","singlePickedLabel","multiPickedLabel","uniqueContentItems","excludeCurrentPost","PickedItemChild","searchStyle","content","setContent","currentPostId","getCurrentPostId","push","previousContent","uuidv4","Boolean","useDragHandle","deletedItem","onSortEnd","oldIndex","newIndex","newContent","arrayMove","ContentPlaceholder","blockProps","onSkip","loadingComponent","children","isColumnLayout","textAlign","pickedContent","isLink","LinkToolbarButton","query","isLinkOpen","setIsLinkOpen","aria-expanded","aria-haspopup","icon","showTooltip","onClose","showInitialSuggestions","suggestionsQuery","p","settings","CaretHeadingLink","heading","headingSize","disableIcon","setAttributes","tagName","h","formattingControls","keepPlaceholderOnFocus","size","BlockInserterButton","blockName","clientId","attributes","tooltipPosition","currentBlock","getBlock","innerBlocks","nextIndex","newBlock","createBlock","dispatch","insertBlock","HeadingLevelIcon","level","isPressed","levelToPath","1","2","3","4","5","6","hasOwnProperty","HeadingLevelToolbar","selectedLevel","levels","Icon","MemoizedHeadingLevelIcon","useCallback","controls","targetLevel","isActive","sprintf","ifMatchSetAttribute","needle","haystack","attrKey","attrValue","getTerms","taxonomy","terms","slug","replace","toLowerCase","parent","getTermsAsOptions","termValue","sortByLabel","labelOptions","Object","keys","forEach","termObj","sort","a","b","getTermsAsTree","treeData","convertedData","i","e","c","f","cT","mailChimpInterests","regeneratorRuntime","setArtBySize","imageSize","postId","image","rawUrl","isChartArt","chartArt","getAttributesFromPost","opts","isRefresh","date","formatDate","post_date","storyItem","excerpt","post_excerpt","canonical_url","extra","art","setPostAttributes","options","attrs","useStoryItemBlockProps","imageSlot","enableEmphasis","headerSize","enableExcerptBelow","enableHeader","enableExcerpt","enableExtra","enableBreakingNews","enableMeta","metaTaxonomy","inLoop","isPreview","logicalClasses","bordered","aligned","blockPropsArgs","classNames","useBlockProps","stubEnabledSiteIds","Array","from","deprecated","postID","multiline","default","enableAltTaxonomy","migrate","save","props","Content","Inspector","context","isUsingContext","queryId","postType","Number","isInteger","useEntityProp","siteId","isRefreshing","refresh","disableMobileStyles","includes","help","checked","prcBreakingNews","alert","newMetaTaxonomy","isSecondary","isBusy","isDestructive","SearchRecords","searchRecords","onSelect","tabIndex","elm","focus","Image","caption","src","alt","canonicalUrl","maxWidth","fontSize","fontStyle","lineHeight","URLSearchField","onSelection","foundObject","setFoundObject","useEntityRecords","per_page","search","records","isResolving","hasSearchRecords","hasFoundObject","hasNothingFound","newPost","postAttrs","newUrl","justifyContent","alignItems","Placeholder","instructions","svgPath","ImageSlotIcon","selected","arrowRight","arrowLeft","arrowUp","arrowDown","close","more","ImageSizeIcon","currentlyActive","A1","A2","A3","A4","XL","Toolbar","isModalOpen","setIsModalOpen","columnWidth","handleImageSizeChange","newSize","MemoizedImageSlotIcon","MemoizedImageSizeIcon","onRequestClose","shouldCloseOnClickOutside","shouldCloseOnEsc","margin","isDisabled","Controls","ALLOWED_MEDIA_TYPES","small","hidpi","smallHidpi","ImageDisplay","img","getImgURL","variant","args","resize","addQueryArgs","getImgSrcSet","threshold","srcSet","media","padding","sources","href","Edit","allowedTypes","render","open","Img","isXL","isA1","isA2","isA3","isA4","ui","Excerpt","classes","Math","floor","random","Extra","Header","large","medium","light","t","allowedFormats","Meta","datePickerVisible","setDatePickerVisible","hide_empty","entityTerms","hasRecords","cleanedLabel","cleanForSlug","term","l","currentDate","IMAGE_SIZES","Preview","headerClasses","imageClasses","excerptClasses","displayImage","ContextPreview","useEntityRecord","record","edit","variations","isDefault","metadata","example","format","supports","background","typography","__experimentalLabel","registerBlockType"],"mappings":"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","file":"blocks/story-item-e7ada266.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"wp\"][\"coreData\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","module.exports = moment;","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","/**\n * WordPress Dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Watches an inputValue and returns a debounced version of it after set delay.\n * Usage: const debouncedValue = useDebounce('a string being typed by a user...', 500);\n * @param {*} inputValue\n * @param {*} delay\n * @returns value after delay\n */\nconst useDebounce = (value, delay) => {\n\t// State and setters for debounced value\n\tconst [debouncedValue, setDebouncedValue] = useState(value);\n\tuseEffect(\n\t\t() => {\n\t\t\t// Update debounced value after delay\n\t\t\tconst handler = setTimeout(() => {\n\t\t\t\tsetDebouncedValue(value);\n\t\t\t}, delay);\n\t\t\t// Cancel the timeout if value changes (also on delay change or unmount)\n\t\t\t// This is how we prevent debounced value from updating if value is changed ...\n\t\t\t// .. within the delay period. Timeout gets cleared and restarted.\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(handler);\n\t\t\t};\n\t\t},\n\t\t[value, delay], // Only re-call effect if value or delay changes\n\t);\n\treturn debouncedValue;\n}\n\nexport default useDebounce;\n","import { useEffect, useRef, useReducer } from '@wordpress/element';\n\n/**\n * A react hook to fetch data from a url and store status, errors, and date in state.\n * Usage: const { status, data, error } = useFetch(url);\n * Adapted from https://www.smashingmagazine.com/2020/07/custom-react-hook-fetch-cache-data/\n * Example application: https://codesandbox.io/s/usefetch-demo-clt9o\n * @param {*} url\n * @returns {object} status, data, and error\n */\nconst useFetch = (url) => {\n\tconst cache = useRef({});\n\n\t// initial state, no preloaded data\n\tconst initialState = {\n\t\tstatus: 'idle',\n\t\terror: null,\n\t\tdata: [],\n\t};\n\n\t// reducer function to update state depending on current status of fetch\n\tconst reducer = (state, action) => {\n\t\tswitch (action.type) {\n\t\t\tcase 'FETCHING':\n\t\t\t\treturn { ...initialState, status: 'fetching' };\n\t\t\tcase 'FETCHED':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'fetched',\n\t\t\t\t\tdata: action.payload,\n\t\t\t\t};\n\t\t\tcase 'FETCH_ERROR':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\terror: action.payload,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t};\n\t// useReducer instead of useState to set multiple values simultaneously and prevent unnecessary rerenders.\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\tuseEffect(() => {\n\t\tlet cancelRequest = false;\n\t\tif (!url) return undefined;\n\n\t\tconst fetchData = async () => {\n\t\t\tdispatch({ type: 'FETCHING' });\n\t\t\tif (cache.current[url]) {\n\t\t\t\tconst data = cache.current[url];\n\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url);\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tcache.current[url] = data;\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: 'FETCH_ERROR',\n\t\t\t\t\t\t\tpayload: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\t// cleanup switch to prevent data leak on unmount\n\t\treturn function cleanup() {\n\t\t\tcancelRequest = true;\n\t\t};\n\t}, [url]);\n\n\treturn state;\n};\n\nexport default useFetch;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nfunction SearchItem({\n\tsuggestion,\n\tonClick,\n\tsearchTerm,\n\tisSelected,\n\tid,\n\tcontentTypes,\n}) {\n\tconst showType = suggestion.type && 1 < contentTypes.length;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight\n\t\t\t\t\t\t\ttext={decodeEntities(suggestion.title)}\n\t\t\t\t\t\t\thighlight={searchTerm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{'post_tag' === suggestion.type ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n}\n\nexport default SearchItem;\n","/**\n * External Dependencies\n */\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/react';\n\n/**\n * WordPress Dependencies\n */\nimport {\n\tSearchControl,\n\tTextControl,\n\tSpinner,\n\tNavigableMenu,\n\tKeyboardShortcuts,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment, useState, useRef, useMemo, useEffect } from '@wordpress/element'; // eslint-disable-line\nimport { __ } from '@wordpress/i18n';\nimport { useDebounce } from '../../hooks';\nimport { cleanForSlug } from '@wordpress/url';\n\n/**\n * Internal Dependencies\n */\nimport SearchItem from './search-item';\n\nconst NAMESPACE = 'prc-content-search';\n\n// Establish a cache for search results by search query.\nconst searchCache = {};\n\nfunction ContentSearch({\n\tonSelectItem,\n\tplaceholder,\n\tlabel,\n\tstyle = 'search',\n\tcontentTypes,\n\tmode,\n\texcludeItems,\n\tperPage,\n}) {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst searchString = useDebounce(searchInput, 500);\n\tconst searchStringIsUrl = useMemo(() => {\n\t\tif (searchString.match(/^(http|https):\\/\\//)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [searchString]);\n\n\tconst [searchResults, setSearchResults] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [selectedItem, setSelectedItem] = useState(null);\n\n\tconst abortControllerRef = useRef();\n\tconst mounted = useRef(true);\n\n\tconst handleSearchResults = (results, searchQuery = false) => {\n\t\tabortControllerRef.current = null;\n\n\t\tif (false !== searchQuery) {\n\t\t\tsearchCache[searchQuery] = results;\n\t\t}\n\n\t\tconst toSet = results.filter((result) => {\n\t\t\tlet keep = true;\n\n\t\t\tif (excludeItems.length) {\n\t\t\t\tkeep = excludeItems.every((item) => item.id !== result.id);\n\t\t\t}\n\n\t\t\treturn keep;\n\t\t});\n\n\t\tsetSearchResults(toSet);\n\n\t\tsetIsLoading(false);\n\t};\n\n\t/**\n\t * handleSelection\n\t *\n\t * update the selected item in state to either the selected item or null if the\n\t * selected item does not have a valid id\n\t *\n\t * @param {*} item\n\t */\n\tconst handleOnNavigate = (item) => {\n\t\tif (0 === item) {\n\t\t\tsetSelectedItem(null);\n\t\t}\n\n\t\tsetSelectedItem(item);\n\t};\n\n\tconst getPostByUrl = (url) => {\n\t\tif (undefined === url) {\n\t\t\treturn new Error('url is undefined');\n\t\t}\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/utils/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('getPostByUrl', url, post);\n\t\t\t\t\tif ('object' !== typeof post) {\n\t\t\t\t\t\treject(new Error('post is not an object'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => reject(err));\n\t\t});\n\t};\n\n\t/**\n\t * handleItemSelection\n\t *\n\t * reset the search input & item container\n\t * trigger the onSelectItem callback passed in via props\n\t *\n\t * @param {*} item\n\t */\n\tconst handleItemSelection = (item) => {\n\t\tsetSearchResults([]);\n\t\tsetSearchInput('');\n\t\tonSelectItem(item);\n\t};\n\n\tconst hasSearchString = !!searchString.length;\n\tconst hasSearchResults = !!searchResults.length;\n\n\t/**\n\t * handleSearchStringChange\n\t *\n\t * Using the keyword and the list of tags that are linked to the parent block\n\t * search for posts/terms that match and return them to the autocomplete component.\n\t *\n\t * @param {string} keyword search query string\n\t */\n\tconst handleSearchStringChange = (keyword, isUrl = false) => {\n\t\tif (abortControllerRef.current) {\n\t\t\tabortControllerRef.current.abort();\n\t\t}\n\n\t\t// If the keyword is empty, reset the search results and return.\n\t\tif ('' === keyword.trim()) {\n\t\t\tconsole.log('Resetting search string...');\n\t\t\thandleSearchResults([]);\n\t\t\treturn;\n\t\t}\n\n\t\tabortControllerRef.current = new AbortController();\n\n\t\tsetIsLoading(true);\n\n\t\tconst searchQuery = `wp/v2/search/?search=${keyword}&subtype=${contentTypes.join(\n\t\t\t',',\n\t\t)}&type=${mode}&_embed&per_page=${perPage}`;\n\n\t\t// Check search cache for the searchQuery and if present then return the cached results.\n\t\tif (searchCache[searchQuery]) {\n\t\t\thandleSearchResults(searchCache[searchQuery], searchQuery);\n\t\t} else if (isUrl) {\n\t\t\tconsole.log('isUrl', keyword);\n\t\t\tgetPostByUrl(keyword)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif (mounted.current) {\n\t\t\t\t\t\tconsole.log('parse getPostByUrl', post);\n\n\t\t\t\t\t\tconst { ID, post_title, post_type, permalink, label } = post;\n\n\t\t\t\t\t\thandleSearchResults(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: ID,\n\t\t\t\t\t\t\t\t\tsubtype: post_type,\n\t\t\t\t\t\t\t\t\ttitle: post_title,\n\t\t\t\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\t\t\t\turl: permalink,\n\t\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error, code) => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Hey this is a url error, we didnt find a matching post... now what?',\n\t\t\t\t\t\tkeyword,\n\t\t\t\t\t);\n\t\t\t\t\tconsole.error(error, code);\n\t\t\t\t\t// Stop spinning.\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t} else {\n\t\t\tapiFetch({\n\t\t\t\tpath: searchQuery,\n\t\t\t\tsignal: abortControllerRef.current.signal,\n\t\t\t})\n\t\t\t\t.then((results) => {\n\t\t\t\t\tif (false === mounted.current) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Not a url, searching.... here are the results:',\n\t\t\t\t\t\tresults,\n\t\t\t\t\t);\n\n\t\t\t\t\thandleSearchResults(results, searchQuery);\n\t\t\t\t})\n\t\t\t\t.catch((error, code) => {\n\t\t\t\t\t// fetch_error means the request was aborted\n\t\t\t\t\tif ('fetch_error' !== error.code) {\n\t\t\t\t\t\thandleSearchResults([]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\tmounted.current = false;\n\t\t},\n\t\t[],\n\t);\n\n\tuseEffect(() => {\n\t\tif ('' !== searchString) {\n\t\t\thandleSearchStringChange(searchString, searchStringIsUrl);\n\t\t}\n\t}, [searchString, searchStringIsUrl]);\n\n\tconst listCSS = css`\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t`;\n\n\treturn (\n\t\t<NavigableMenu onNavigate={handleOnNavigate} orientation=\"vertical\">\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{'minimal' === style && (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{'search' === style && (\n\t\t\t\t\t\t<SearchControl\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tright: 'minimal' === style ? '8px' : '50px',\n\t\t\t\t\t\t\tmarginTop: 'minimal' === style ? '27px' : '10px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{hasSearchString ? (\n\t\t\t\t<ul\n\t\t\t\t\tclassName={`${NAMESPACE}-list`}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: '0',\n\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\tmarginLeft: '0',\n\t\t\t\t\t\tpaddingLeft: '0',\n\t\t\t\t\t\tlistStyle: 'none',\n\t\t\t\t\t}}\n\t\t\t\t\tcss={listCSS}\n\t\t\t\t>\n\t\t\t\t\t{!isLoading && !hasSearchResults && false === searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\tpaddingLeft: '3px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Nothing found.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading && !hasSearchResults && searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\tpaddingLeft: '3px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Press enter to change url.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\tsearchResults.map((item, index) => {\n\t\t\t\t\t\t\tconsole.log('searchResults map...', item);\n\t\t\t\t\t\t\tif (undefined === item.title) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemSelection(item)}\n\t\t\t\t\t\t\t\t\t\tsearchTerm={searchString}\n\t\t\t\t\t\t\t\t\t\tsuggestion={item}\n\t\t\t\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\t\t\t\tisSelected={selectedItem === index + 1}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : null}\n\t\t</NavigableMenu>\n\t);\n}\n\n// eslint-disable-next-line import/prefer-default-export\nexport { ContentSearch };\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(\n\t({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\t\tconst ItemComponent =\n\t\t\tfalse !== ChildComponent\n\t\t\t\t? isOrderable\n\t\t\t\t\t? SortableElement(ChildComponent)\n\t\t\t\t\t: ChildComponent\n\t\t\t\t: isOrderable\n\t\t\t\t? SortableElement(PickedItem)\n\t\t\t\t: PickedItem;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{items.map((item, index) => {\n\t\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ItemComponent\n\t\t\t\t\t\t\tisOrderable={\n\t\t\t\t\t\t\t\tisOrderable && 1 < items.length ? isOrderable : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\t\t\tsortIndex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nexport default SortableList;\n","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tPlaceholder as WPComPlaceholder,\n\tSpinner,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { ContentPicker } from '../content-picker';\n\nfunction ContentPlaceholder({\n\tblockProps,\n\tonChange,\n\tonSkip,\n\tmode = 'post',\n\tcontentTypes = ['stub'],\n\tlabel = __('Search for a post', 'prc-block-components'),\n\tplaceholder = __(\n\t\t'Search for a post or paste in a url...',\n\t\t'prc-block-components',\n\t),\n\tvalue = [],\n\tloadingComponent = false,\n\tchildren,\n}) {\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t<WPComPlaceholder label={`${label}:`} isColumnLayout>\n\t\t\t\t{false !== loadingComponent && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t<p className=\"sans-serif\">Loading object...</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{false === loadingComponent && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t\t<ContentPicker\n\t\t\t\t\t\t\tonPickChange={(pickedContent) => {\n\t\t\t\t\t\t\t\tconsole.log('Step1:', pickedContent);\n\t\t\t\t\t\t\t\tonChange(pickedContent);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\tlabel={`${label} or enter a url:`}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLink\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tonSkip();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttext={__('Skip')}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tpaddingLeft: '9px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t</WPComPlaceholder>\n\t\t</div>\n\t);\n}\n\n// eslint-disable-next-line import/prefer-default-export\nexport { ContentPlaceholder };\n","const DEFAULT_STATE = [];\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n\t// Cloned is used in reorder, setItem, and setItemProp:\n\tconst cloned = [...state];\n\t// eslint-disable-next-line default-case\n\tswitch (action.type) {\n\t\tcase 'SEED':\n\t\t\treturn [...action.items];\n\t\tcase 'APPEND':\n\t\t\treturn [...state, ...action.items];\n\t\tcase 'PREPEND':\n\t\t\treturn [...action.items, ...state];\n\t\tcase 'INSERT':\n\t\t\treturn [\n\t\t\t\t...state.slice(0, action.index),\n\t\t\t\t...action.items,\n\t\t\t\t...state.slice(action.index),\n\t\t\t];\n\t\tcase 'APPLY':\n\t\t\treturn state.map((item, index) => action.fn(item, index));\n\t\tcase 'REMOVE':\n\t\t\treturn state.filter((_, index) => !action.indexes.includes(index));\n\t\tcase 'REORDER':\n\t\t\t// eslint-disable-next-line no-case-declarations\n\t\t\tconst item = state[action.from];\n\n\t\t\tcloned.splice(action.from, 1);\n\t\t\tcloned.splice(action.to, 0, item);\n\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM':\n\t\t\tcloned[action.index] = action.item;\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM_PROP':\n\t\t\tcloned[action.index] = {\n\t\t\t\t...cloned[action.index],\n\t\t\t\t[action.prop]: action.value,\n\t\t\t};\n\t\t\treturn cloned;\n\t}\n\n\treturn state;\n};\n\nexport default reducer;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\nimport { Fragment, useState } from '@wordpress/element';\nimport { ToolbarButton, Popover } from '@wordpress/components';\n\n/**\n * Link control in a toolbar button that defaults to searching for topic terms\n */\nfunction LinkToolbarButton({\n\turl,\n\tonChange,\n\tquery = { type: 'term', subtype: 'topic' },\n}) {\n\tconst [isLinkOpen, setIsLinkOpen] = useState(false);\n\treturn (\n\t\t<Fragment>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isLinkOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__('Set Link')}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsLinkOpen(!isLinkOpen)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isLinkOpen && (\n\t\t\t\t<Popover position=\"bottom center\" onClose={() => setIsLinkOpen(false)}>\n\t\t\t\t\t<LinkControl\n\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\n\t\t\t\t\t\tvalue={{ url }}\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t\tsuggestionsQuery={query}\n\t\t\t\t\t\tonChange={(p) => onChange(p)}\n\t\t\t\t\t\tsettings={[]}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default LinkToolbarButton;\n","/**\n * External Dependencies\n */\nimport { Icon } from 'semantic-ui-react';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { Flex, FlexItem, FlexBlock, ToolbarGroup } from '@wordpress/components';\nimport { BlockControls, RichText } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport LinkToolbarButton from '../link-toolbar-button';\n\nconst CaretHeadingLink = ({\n\turl,\n\theading,\n\theadingSize = 'h2',\n\tdisableIcon = false,\n\tsetAttributes,\n}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<LinkToolbarButton\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tonChange={p => {\n\t\t\t\t\t\t\tsetAttributes({ url: p.url });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Flex style={{ paddingBottom: '1em' }}>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName={headingSize}\n\t\t\t\t\t\tvalue={heading}\n\t\t\t\t\t\tonChange={h => setAttributes({ heading: h })}\n\t\t\t\t\t\tplaceholder=\"Heading...\"\n\t\t\t\t\t\tformattingControls={[]}\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\tclassName=\"sans-serif\"\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t{true !== disableIcon && (\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"chevron right\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{ marginLeft: '0.5em' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</Fragment>\n\t);\n};\n\nexport default CaretHeadingLink;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { select, dispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\n\nfunction BlockInserterButton({\n\tlabel = '',\n\tblockName,\n\tclientId,\n\tclassName,\n\tattributes = {},\n}) {\n\tconst handleClick = () => {\n\t\tconst currentBlock = select('core/block-editor').getBlock(clientId);\n\t\tconsole.log('debug info...', currentBlock.innerBlocks.length);\n\t\tconst nextIndex =\n\t\t\t0 === currentBlock.innerBlocks.length\n\t\t\t\t? 0\n\t\t\t\t: currentBlock.innerBlocks.length + 1;\n\t\tconst newBlock = createBlock(blockName, attributes);\n\t\tdispatch('core/block-editor').insertBlock(newBlock, nextIndex, clientId);\n\t};\n\treturn (\n\t\t<Button\n\t\t\tlabel={__(label)}\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName=\"block-editor-button-block-appender\"\n\t\t>\n\t\t\t{__(label)}\n\t\t</Button>\n\t);\n}\n\nexport default BlockInserterButton;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport {\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n\tPath,\n\tSVG,\n} from '@wordpress/components';\nimport { DOWN } from '@wordpress/keycodes';\n\nfunction HeadingLevelIcon({ level, isPressed = false }) {\n\tconst levelToPath = {\n\t\t1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n\t\t2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n\t\t3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n\t\t4: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z',\n\t\t5: 'M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z',\n\t\t6: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z',\n\t};\n\tif (!levelToPath.hasOwnProperty(level)) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SVG\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tisPressed={isPressed}\n\t\t>\n\t\t\t<Path d={levelToPath[level]} />\n\t\t</SVG>\n\t);\n}\n\nfunction HeadingLevelToolbar({\n\tselectedLevel,\n\tlevels = [2, 3],\n\tonChange,\n\tIcon = HeadingLevelIcon,\n}) {\n\tconsole.log('HeadingLevelToolbar', selectedLevel);\n\n\tconst MemoizedHeadingLevelIcon = useCallback(\n\t\t() => <Icon level={selectedLevel} isPressed />,\n\t\t[selectedLevel],\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarDropdownMenu\n\t\t\t\ticon={MemoizedHeadingLevelIcon}\n\t\t\t\tlabel=\"Select Heading Size\"\n\t\t\t\tcontrols={levels.map((targetLevel) => {\n\t\t\t\t\tconst isActive = targetLevel === selectedLevel;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t\t// translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n\t\t\t\t\t\t\t__('Heading %d'),\n\t\t\t\t\t\t\ttargetLevel,\n\t\t\t\t\t\t),\n\t\t\t\t\t\ticon: <Icon level={targetLevel} isPressed={isActive} />,\n\t\t\t\t\t\tisActive,\n\t\t\t\t\t\tonClick: () => onChange(targetLevel),\n\t\t\t\t\t};\n\t\t\t\t})}\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default HeadingLevelToolbar;\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nfunction ifMatchSetAttribute(\n\tneedle,\n\thaystack,\n\tattrKey,\n\tattrValue,\n\tsetAttributes,\n) {\n\tif (needle === haystack) {\n\t\tsetAttributes({ [attrKey]: attrValue });\n\t}\n}\n\nfunction randomId() {\n\t// Math.random should be unique because of its seeding algorithm.\n\t// Convert it to base 36 (numbers + letters), and grab the first 9 characters\n\t// after the decimal.\n\treturn `_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction getTermsByLetter(taxonomy, letter) {\n\treturn new Promise((resolve) => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then((terms) => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n}\n\nfunction getTerms(taxonomy, perPage = 25) {\n\treturn new Promise((resolve) => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then((terms) => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n}\n\nfunction getTermsAsOptions(\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy, perPage).then((data) => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tconst value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n}\n\nfunction getTermsAsTree(taxonomy) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy).then((data) => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map((i) => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter((e) => 0 === e.parent);\n\t\t\tparentTerms.forEach((e) => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter((f) => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach((cT) => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n}\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n\t{\n\t\tlabel: 'Weekly roundup of all new publications',\n\t\tvalue: '7c1390ba46',\n\t},\n\t{\n\t\tlabel: 'Quarterly update from the president',\n\t\tvalue: 'a33430a835',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Global attitudes & trends (twice a month)',\n\t\tvalue: '9203343b04',\n\t},\n\t{\n\t\tlabel: 'Internet, science & tech (monthly)',\n\t\tvalue: 'ea87b26abe',\n\t},\n\t{\n\t\tlabel: 'Daily briefing of media news',\n\t\tvalue: '1d2638430b',\n\t},\n\t{\n\t\tlabel: 'Race & ethnicity (monthly)',\n\t\tvalue: '0e7495c7b2',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Weekly newsletter',\n\t\tvalue: 'a7d4f3268f',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Daily religion headlines',\n\t\tvalue: '1a647764b2',\n\t},\n\t{\n\t\tlabel: 'Social & demographic trends (monthly)',\n\t\tvalue: '3836f62305',\n\t},\n\t{\n\t\tlabel: 'Methodological research (quarterly)',\n\t\tvalue: '6d1e80bbaf',\n\t},\n\t{\n\t\tlabel: 'U.S. politics & policy (monthly)',\n\t\tvalue: 'fa5fdbc701',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Immigration',\n\t\tvalue: 'xxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Census',\n\t\tvalue: 'xxxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - Muslims and Islam',\n\t\tvalue: 'xxxxx',\n\t},\n];\n\nexport { mailChimpInterests };\n","(function() { module.exports = window[\"lodash\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { date as formatDate } from '@wordpress/date';\nimport { useBlockProps } from '@wordpress/block-editor';\n\nconst setArtBySize = (imageSize, postId, setAttributes) => {\n\tif (0 !== postId && false !== setAttributes) {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/get-art/?postId=${postId}`,\n\t\t}).then((data) => {\n\t\t\tif (false !== data) {\n\t\t\t\tif (undefined !== data[imageSize] && false !== setAttributes) {\n\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\timage: data[imageSize].rawUrl,\n\t\t\t\t\t\tisChartArt: data[imageSize].chartArt,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n\tconst { post, imageSize, isRefresh = false } = opts;\n\tconsole.log('getAttributesFromPost', post);\n\n\tif (null === post) {\n\t\treturn {};\n\t}\n\n\tconst date = formatDate('M j, Y', post.date || post.post_date);\n\n\tconst storyItem = {\n\t\ttitle:\n\t\t\tpost.hasOwnProperty('title') && post.title.hasOwnProperty('rendered')\n\t\t\t\t? post.title.rendered\n\t\t\t\t: post.post_title,\n\t\texcerpt:\n\t\t\tpost.hasOwnProperty('excerpt') && post.excerpt.hasOwnProperty('rendered')\n\t\t\t\t? post.excerpt.rendered\n\t\t\t\t: post.post_excerpt,\n\t\turl: post.canonical_url, // @TODO where is this `link` coming from, why is it not url or permalink.\n\t\tlabel: post.hasOwnProperty('label') ? post.label : 'report',\n\t\tdate,\n\t\tpostId: post.id || post.ID,\n\t};\n\n\tif (true !== isRefresh) {\n\t\tstoryItem.extra = '';\n\t}\n\n\tif (post.art) {\n\t\tconst { art } = post;\n\t\tstoryItem.image = art[imageSize].rawUrl;\n\t\tstoryItem.isChartArt = art[imageSize].chartArt;\n\t}\n\n\treturn storyItem;\n};\n\n/**\n * Set attributes for a story item from a stub by post id OR by url.\n *\n * @param {*} postId\n * @param {*} imageSize\n * @param {*} isRefresh\n * @param {*} setAttributes\n * @returns\n */\nconst setPostAttributes = (options) => {\n\tconst {\n\t\tsetAttributes,\n\t\tpostId = false,\n\t\timageSize = 'A1',\n\t\tisRefresh = false,\n\t} = options;\n\n\tif (false === postId || undefined === setAttributes) {\n\t\treturn;\n\t}\n\n\tapiFetch({\n\t\tpath: `/wp/v2/stub/${postId}`,\n\t\tmethod: 'GET',\n\t})\n\t\t.then((post) => {\n\t\t\tconsole.log('setPostAttributes -> by id:', postId, post);\n\t\t\tif (false !== post) {\n\t\t\t\tconst attrs = getAttributesFromPost({\n\t\t\t\t\tpost,\n\t\t\t\t\timageSize,\n\t\t\t\t\tisRefresh,\n\t\t\t\t});\n\t\t\t\tsetAttributes(attrs);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error(err));\n};\n\nconst useStoryItemBlockProps = (attributes) => {\n\tconst {\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\tpostId,\n\t\theaderSize,\n\t\tenableEmphasis,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t\tmetaTaxonomy,\n\t\tinLoop,\n\t\tisPreview,\n\t\tclassName,\n\t} = attributes;\n\n\tconst logicalClasses = {\n\t\tbordered: enableEmphasis,\n\t\t'alt-excerpt': enableExcerptBelow,\n\t};\n\tif ('disabled' !== imageSlot) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif ('disabled' !== imageSlot && '' !== imageSize) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\n\treturn useBlockProps(blockPropsArgs);\n};\n\n// Everything except site's 19 and 17.\n// @TODO: I wish there was a more systemic way to approach this but it'll work for now\nconst stubEnabledSiteIds = Array.from(Array(19).keys()).filter(\n\t(id) => 17 !== id && 0 !== id,\n);\n\nexport {\n\tsetArtBySize,\n\tgetAttributesFromPost,\n\tsetPostAttributes,\n\tuseStoryItemBlockProps,\n\tstubEnabledSiteIds,\n};\n","(function() { module.exports = window[\"wp\"][\"date\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\nconst deprecated = [\n\t{\n\t\tattributes: {\n\t\t\tpostID: {\n\t\t\t\ttype: 'integer',\n\t\t\t},\n\t\t\tlink: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t\texcerpt: {\n\t\t\t\ttype: 'string',\n\t\t\t\tmultiline: 'p',\n\t\t\t},\n\t\t\tenableExcerpt: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true,\n\t\t\t},\n\t\t\tenableExcerptBelow: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false,\n\t\t\t},\n\t\t\tenableAltTaxonomy: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false,\n\t\t\t},\n\t\t},\n\n\t\tmigrate({\n\t\t\tpostID,\n\t\t\tlink,\n\t\t\texcerpt,\n\t\t\tenableExcerpt,\n\t\t\tenableExcerptBelow,\n\t\t\tenableAltTaxonomy,\n\t\t\tenableMeta,\n\t\t}) {\n\t\t\tconsole.log('Migrating...', {\n\t\t\t\tpostID,\n\t\t\t\tlink,\n\t\t\t\texcerpt,\n\t\t\t\tenableExcerpt,\n\t\t\t\tenableExcerptBelow,\n\t\t\t\tenableAltTaxonomy,\n\t\t\t\tenableMeta,\n\t\t\t});\n\t\t\tconst newMetaTaxonomy = enableMeta\n\t\t\t\t? enableAltTaxonomy\n\t\t\t\t\t? 'research-teams'\n\t\t\t\t\t: 'formats'\n\t\t\t\t: 'disabled';\n\t\t\treturn {\n\t\t\t\tpostId: postID,\n\t\t\t\turl: link,\n\t\t\t\texcerpt,\n\t\t\t\tenableExcerpt,\n\t\t\t\tenableExcerptBelow,\n\t\t\t\tmetaTaxonomy: newMetaTaxonomy,\n\t\t\t};\n\t\t},\n\n\t\tsave(props) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{0 !== props.excerpt.length && (\n\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\tclassName=\"excerpt\"\n\t\t\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\t\t\tvalue={props.excerpt}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t},\n\t},\n];\n\nexport default deprecated;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isInteger } from 'lodash';\nimport {\n\tInspectorControls,\n\tInspectorAdvancedControls,\n} from '@wordpress/block-editor';\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tButton,\n\tCardDivider,\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n} from '@wordpress/components';\nimport { useEntityProp } from '@wordpress/core-data';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes, stubEnabledSiteIds } from '../../helpers';\n\nfunction Inspector({ attributes, setAttributes, context }) {\n\tconst isUsingContext =\n\t\tundefined !== context.queryId &&\n\t\tundefined !== context.postId &&\n\t\tundefined !== context.postType &&\n\t\t0 !== context.postId &&\n\t\tNumber.isInteger(context.postId);\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst [isRefreshing, refresh] = useState(false);\n\tconst {\n\t\tpostId,\n\t\timageSize,\n\t\timageSlot,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableEmphasis,\n\t\tdisableMobileStyles,\n\t\tenableMeta,\n\t\tmetaTaxonomy,\n\t} = attributes;\n\n\tconst label = __('Story Item Options');\n\n\tuseEffect(() => {\n\t\t// If this is not a stub enabled site then automatically switch the metaTaxonomy to category.\n\t\tif (!stubEnabledSiteIds.includes(siteId) && 'formats' === metaTaxonomy) {\n\t\t\tconsole.log(\"Doing this\", siteId, metaTaxonomy);\n\t\t\tsetAttributes({ metaTaxonomy: 'category' });\n\t\t}\n\t}, [siteId]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={label}>\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t'Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).',\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableMeta ? 'Meta Enabled' : 'Meta Disabled'}\n\t\t\t\t\t\t\tchecked={enableMeta}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableMeta: !enableMeta });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableHeader ? 'Header Enabled' : 'Header Disabled'}\n\t\t\t\t\t\t\tchecked={enableHeader}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableHeader: !enableHeader });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled'}\n\t\t\t\t\t\t\tchecked={enableExcerpt}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableExcerpt: !enableExcerpt });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{!isUsingContext && (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\tlabel={enableExtra ? 'Extras Enabled' : 'Extras Disabled'}\n\t\t\t\t\t\t\t\t\tchecked={enableExtra}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tsetAttributes({ enableExtra: !enableExtra });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\tenableBreakingNews\n\t\t\t\t\t\t\t\t\t\t\t? 'Breaking News Enabled'\n\t\t\t\t\t\t\t\t\t\t\t: 'Breaking News Disabled'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tchecked={enableBreakingNews}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tif (false !== window.prcBreakingNews) {\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\tenableBreakingNews: !enableBreakingNews,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t'There are no currently active authorized breaking news events. The breaking news toggle will be set back to false.',\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\tenableBreakingNews: false,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\tenableEmphasis ? 'Emphasis Enabled' : 'Emphasis Disabled'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tchecked={enableEmphasis}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tsetAttributes({ enableEmphasis: !enableEmphasis });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BaseControl>\n\n\t\t\t\t\t<CardDivider />\n\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Select Taxonomy To Display\"\n\t\t\t\t\t\tvalue={metaTaxonomy}\n\t\t\t\t\t\toptions={\n\t\t\t\t\t\t\tstubEnabledSiteIds.includes(siteId)\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t{ label: 'Formats', value: 'formats' },\n\t\t\t\t\t\t\t\t\t{ label: 'Research Teams', value: 'research-teams' },\n\t\t\t\t\t\t\t\t\t{ label: 'Disabled', value: 'disabled' },\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t{ label: 'Category', value: 'category' },\n\t\t\t\t\t\t\t\t\t{ label: 'Disabled', value: 'disabled' },\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(newMetaTaxonomy) => {\n\t\t\t\t\t\t\tsetAttributes({ metaTaxonomy: newMetaTaxonomy });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorAdvancedControls>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={\n\t\t\t\t\t\t!disableMobileStyles\n\t\t\t\t\t\t\t? 'Mobile Styling Enabled'\n\t\t\t\t\t\t\t: 'Mobile Styling Disabled'\n\t\t\t\t\t}\n\t\t\t\t\thelp={__(\n\t\t\t\t\t\t'If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile.',\n\t\t\t\t\t)}\n\t\t\t\t\tchecked={disableMobileStyles}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tsetAttributes({ disableMobileStyles: !disableMobileStyles });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{true === enableExcerpt &&\n\t\t\t\t\t('right' === imageSlot || 'left' === imageSlot) && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\tenableExcerptBelow\n\t\t\t\t\t\t\t\t\t\t? 'Excerpt Will Appear Below Image'\n\t\t\t\t\t\t\t\t\t\t: 'Excerpt Will Appear Normally'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t\t\t'If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image.',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tchecked={enableExcerptBelow}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\tenableExcerptBelow: !enableExcerptBelow,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\n\t\t\t\t{isInteger(postId) && 0 !== postId && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tisBusy={isRefreshing}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\trefresh(true);\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tsetPostAttributes({\n\t\t\t\t\t\t\t\t\t\tpostId,\n\t\t\t\t\t\t\t\t\t\timageSize,\n\t\t\t\t\t\t\t\t\t\tisRefresh: true,\n\t\t\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\trefresh(false);\n\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ marginBottom: '1em' }}\n\t\t\t\t\t\t\ttext={__('Refresh Post Data')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tisBusy={isRefreshing}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\trefresh(true);\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\texcerpt: '',\n\t\t\t\t\t\t\t\t\textra: '',\n\t\t\t\t\t\t\t\t\turl: '',\n\t\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\t\tdate: '',\n\t\t\t\t\t\t\t\t\timage: '',\n\t\t\t\t\t\t\t\t\tpostId: 0,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\trefresh(false);\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ marginBottom: '1em' }}\n\t\t\t\t\t\ttext={__('Reset Story Item Block')}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</InspectorAdvancedControls>\n\t\t</Fragment>\n\t);\n}\n\nexport default Inspector;\n","/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState, useMemo, useEffect } from '@wordpress/element';\nimport {\n\tButton,\n\tCard,\n\tCardBody,\n\tCardMedia,\n\tSearchControl,\n\tSpinner,\n\tNavigableMenu,\n\tTabbableContainer,\n\tKeyboardShortcuts,\n} from '@wordpress/components';\nimport { date as formatDate } from '@wordpress/date';\nimport { useEntityRecords, useEntityProp } from '@wordpress/core-data';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Internal Dependencies\n */\nimport { getAttributesFromPost } from '../../helpers';\n\nfunction SearchRecords({ searchRecords, onSelect, imageSize = 'A3' }) {\n\treturn (\n\t\t<NavigableMenu\n\t\t\ttabIndex=\"0\"\n\t\t\torientation=\"vertical\"\n\t\t\tonNavigate={(index, elm) => {\n\t\t\t\telm.focus();\n\t\t\t\tconsole.log('onNavigate', index, elm);\n\t\t\t}}\n\t\t>\n\t\t\t{searchRecords.map((item) => (\n\t\t\t\t<SearchItem {...{ item, onSelect, imageSize }} />\n\t\t\t))}\n\t\t</NavigableMenu>\n\t);\n}\n\nfunction Image({ item, imageSize }) {\n\tconst { art } = item;\n\t// Check if art has imageSize as a valid key. If so get the rawUrl, height and width. Then return an img tag accordingly.\n\tif (art && art[imageSize]) {\n\t\tconst { rawUrl, height, width, caption } = art[imageSize];\n\t\treturn (\n\t\t\t<CardMedia>\n\t\t\t\t<img src={rawUrl} height={height} width={width} alt={caption} />\n\t\t\t</CardMedia>\n\t\t);\n\t}\n\treturn null;\n}\n\nfunction SearchItem({ item, onSelect, imageSize = 'A3' }) {\n\tif (!item) {\n\t\treturn null;\n\t}\n\tconsole.log('<SearchItem />', item);\n\t// if item has post_title then use that otherwise use title.rendered\n\tconst title = item.post_title ? item.post_title : item.title.rendered;\n\tconsole.log('title', title);\n\t// if item has post_date then use that otherwise use date\n\tconst date = item.post_date ? item.post_date : item.date;\n\tconsole.log('date', date);\n\n\tconst { label } = item;\n\tconsole.log('label', label);\n\tconst canonicalUrl = item.canonical_url;\n\tconsole.log('canonicalUrl', canonicalUrl);\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events\n\t\t<Card\n\t\t\tonClick={() => onSelect(item)}\n\t\t\tsize=\"small\"\n\t\t\tstyle={{\n\t\t\t\tcursor: 'pointer',\n\t\t\t\t':hover': {\n\t\t\t\t\t'background-color': '#f3f4f5',\n\t\t\t\t},\n\t\t\t}}\n\t\t>\n\t\t\t<CardBody\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: '35%',\n\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\tpaddingRight: '1em',\n\t\t\t\t\t\tpaddingTop: '0.5em',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Image {...{ item, imageSize }} />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${label} | ${formatDate('M j, Y', date)}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<strong>{title}</strong>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\t\tfontStyle: 'italic',\n\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\tlineHeight: '1.5em',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{canonicalUrl}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardBody>\n\t\t</Card>\n\t);\n}\n\nexport default function URLSearchField({\n\tattributes,\n\tsetAttributes,\n\tonSelection,\n}) {\n\tconst { imageSize, url } = attributes;\n\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst searchString = useDebounce(searchInput, 500);\n\tconst searchStringIsUrl = useMemo(() => {\n\t\tif (searchString.match(/^(http|https):\\/\\//)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [searchString]);\n\n\tconst [foundObject, setFoundObject] = useState(null);\n\n\tconst hasSearchString = !!searchString.length;\n\n\tconst { records: searchRecords, isResolving } = useEntityRecords(\n\t\t'postType',\n\t\tpostType,\n\t\t{\n\t\t\tper_page: 10,\n\t\t\tsearch: hasSearchString && !searchStringIsUrl ? searchString : '',\n\t\t\tcontext: 'view',\n\t\t},\n\t);\n\tconst hasSearchRecords =\n\t\t!isResolving && !searchStringIsUrl && searchRecords\n\t\t\t? 0 < searchRecords.length\n\t\t\t: false;\n\tconst hasFoundObject =\n\t\t!isResolving && searchStringIsUrl && null !== foundObject;\n\tconst hasNothingFound = !isResolving && !hasSearchRecords && !hasFoundObject;\n\n\tconst getPostByUrl = (newUrl) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/stub/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url: newUrl },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('getPostByUrl', newUrl, post);\n\t\t\t\t\tif ('object' !== typeof post) {\n\t\t\t\t\t\treject(new Error('post is not an object'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => reject(err));\n\t\t});\n\n\tconst onSelect = (newPost) => {\n\t\tconst postAttrs = getAttributesFromPost({\n\t\t\tpost: newPost,\n\t\t\timageSize,\n\t\t\tisRefresh: false,\n\t\t});\n\t\tconsole.log('onSelect postAttrs', postAttrs);\n\t\tsetAttributes(postAttrs);\n\t\tif ('function' === typeof onSelection) {\n\t\t\tonSelection();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tconsole.log('searchRecords isResolving', isResolving, searchRecords);\n\t}, [searchRecords, isResolving]);\n\n\tuseEffect(() => {\n\t\tif (searchStringIsUrl) {\n\t\t\tgetPostByUrl(searchString)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('post...', post);\n\t\t\t\t\tsetFoundObject(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log('getPostByUrl error', err);\n\t\t\t\t\tsetFoundObject(null);\n\t\t\t\t});\n\t\t}\n\t\tconsole.log('searchStringIsUrl changed', searchStringIsUrl, searchString);\n\t}, [searchString, searchStringIsUrl]);\n\n\treturn (\n\t\t<TabbableContainer>\n\t\t\t<SearchControl\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\tvalue={searchInput}\n\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\tplaceholder=\"Joe Biden climate change...\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t/>\n\t\t\t{hasSearchString && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{isResolving && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>Loading... </span>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasNothingFound && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t\tpaddingTop: '1em',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{__('Nothing found.', 'prc-block-library')}</span>\n\t\t\t\t\t\t\t{searchStringIsUrl && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{__('Press enter to change the URL.', 'prc-block-library')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasFoundObject && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SearchItem {...{ item: foundObject, onSelect, imageSize }} />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t\t\tpaddingTop: '1em',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{__('Press enter to insert post.', 'prc-block-library')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasSearchRecords && !searchStringIsUrl && (\n\t\t\t\t\t\t<SearchRecords {...{ searchRecords, onSelect, imageSize }} />\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t</TabbableContainer>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { Button, Placeholder as WPComPlaceholder } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps } from '@wordpress/block-editor';\nimport { useEntityProp } from '@wordpress/core-data';\n\n/**\n * Interanl Dependencies\n */\nimport URLSearchField from './url-search-field';\n\nexport default function Placeholder({ attributes, setAttributes }) {\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst blockProps = useBlockProps({\n\t\tclassName: 'wp-block-prc-block-story-item__placeholder',\n\t});\n\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t<WPComPlaceholder\n\t\t\t\ticon=\"admin-post\"\n\t\t\t\tlabel={__(' Story Item', 'prc-block-library')}\n\t\t\t\tisColumnLayout\n\t\t\t\tinstructions={__(\n\t\t\t\t\t`Search for a ${postType} or paste url here`,\n\t\t\t\t\t'prc-block-library',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<URLSearchField\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tisLink\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetAttributes({ postId: 0 });\n\t\t\t\t\t}}\n\t\t\t\t\ttext={__('Skip')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpaddingLeft: '9px',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</WPComPlaceholder>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\nimport {\n\tclose,\n\tmore,\n\tarrowLeft,\n\tarrowRight,\n\tarrowUp,\n\tarrowDown,\n} from '@wordpress/icons';\n\nfunction Icon({ svgPath = false, isPressed = false }) {\n\tif (false === svgPath) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<SVG\n\t\t\twidth={24}\n\t\t\theight={24}\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tisPressed={isPressed}\n\t\t>\n\t\t\t<Path d={svgPath} />\n\t\t</SVG>\n\t);\n}\n\nfunction ImageSlotIcon({ selected }) {\n\tif ('right' === selected) {\n\t\treturn arrowRight;\n\t}\n\tif ('left' === selected) {\n\t\treturn arrowLeft;\n\t}\n\tif ('top' === selected) {\n\t\treturn arrowUp;\n\t}\n\tif ('bottom' === selected) {\n\t\treturn arrowDown;\n\t}\n\tif ('disabled' === selected) {\n\t\treturn close;\n\t}\n\treturn more;\n}\n\nfunction ImageSizeIcon({ selected, currentlyActive }) {\n\tconst iconPaths = {\n\t\tA1: 'M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z',\n\t\tA2: 'M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z',\n\t\tA3: 'M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z',\n\t\tA4: 'M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z',\n\t\tXL: 'M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z',\n\t};\n\treturn (\n\t\t<Icon\n\t\t\tsvgPath={iconPaths[selected]}\n\t\t\tisPressed={selected === currentlyActive}\n\t\t/>\n\t);\n}\n\nfunction HeadingLevelIcon({ selected, currentlyActive }) {\n\tconst iconPaths = {\n\t\t1: 'M15.81,15.63V18H8.19V6H11v9.63Z', // Large\n\t\t2: 'M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z', // Medium\n\t\t3: 'M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z', // Small\n\t};\n\treturn (\n\t\t<Icon\n\t\t\tsvgPath={iconPaths[selected]}\n\t\t\tisPressed={selected === currentlyActive}\n\t\t/>\n\t);\n}\n\nexport { ImageSizeIcon, ImageSlotIcon, HeadingLevelIcon };\n","/**\n * External Dependencies\n */\nimport { HeadingLevelToolbar } from '@prc-app/shared';\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { BlockControls } from '@wordpress/block-editor';\nimport { Fragment, useCallback, useState } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tModal,\n\tToolbarButton,\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { HeadingLevelIcon, ImageSizeIcon, ImageSlotIcon } from './icons';\nimport { setArtBySize } from '../../helpers';\nimport URLSearchField from './url-search-field';\n\nconst COLUMN_LIMIT = 6;\n\nfunction Icon({ level, isPressed }) {\n\treturn <HeadingLevelIcon selected={level} currentlyActive={isPressed} />;\n}\n\nfunction Toolbar({ attributes, setAttributes, context }) {\n\tconst { postId, imageSize, imageSlot, headerSize, isChartArt } = attributes;\n\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\n\tconst columnWidth =\n\t\tundefined !== context['core/column/gridSpan']\n\t\t\t? context['core/column/gridSpan']\n\t\t\t: false;\n\n\tconst isUsingContext =\n\t\tundefined !== context.queryId &&\n\t\tundefined !== context.postId &&\n\t\tundefined !== context.postType &&\n\t\t0 !== context.postId &&\n\t\tNumber.isInteger(context.postId);\n\n\tconst handleImageSizeChange = (newSize) => {\n\t\tsetAttributes({ imageSize: newSize });\n\t\tsetArtBySize(newSize, postId, setAttributes); // @TODO LOOK INTO\n\t\tconsole.log('new image size, check column context', context);\n\t};\n\n\tconst MemoizedImageSlotIcon = useCallback(\n\t\t() => <ImageSlotIcon selected={imageSlot} />,\n\t\t[imageSlot],\n\t);\n\n\tconst MemoizedImageSizeIcon = useCallback(\n\t\t() => <ImageSizeIcon selected={imageSize} currentlyActive={imageSize} />,\n\t\t[imageSize],\n\t);\n\n\treturn (\n\t\t<BlockControls>\n\t\t\t{!isUsingContext && (\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\taria-expanded={isModalOpen}\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\tlabel={__('Search for a Stub or replace url', 'prc-block-library')}\n\t\t\t\t\t\ticon=\"admin-links\"\n\t\t\t\t\t\tonClick={() => setIsModalOpen(true)}\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t/>\n\t\t\t\t\t{true === isModalOpen && (\n\t\t\t\t\t\t<Modal\n\t\t\t\t\t\t\ttitle={__('Search for Stub', 'prc-block-library')}\n\t\t\t\t\t\t\tonRequestClose={() => setIsModalOpen(false)}\n\t\t\t\t\t\t\tshouldCloseOnClickOutside={false}\n\t\t\t\t\t\t\tshouldCloseOnEsc={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\tmaxWidth: '640px',\n\t\t\t\t\t\t\t\t\tmargin: '0 auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<URLSearchField\n\t\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\t\t\tonSelection: () => setIsModalOpen(false),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Modal>\n\t\t\t\t\t)}\n\t\t\t\t</ToolbarGroup>\n\t\t\t)}\n\t\t\t<HeadingLevelToolbar\n\t\t\t\tselectedLevel={headerSize}\n\t\t\t\tlevels={[1, 2, 3]}\n\t\t\t\tonChange={(newSize) => setAttributes({ headerSize: newSize })}\n\t\t\t\tIcon={Icon}\n\t\t\t/>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\ticon={MemoizedImageSlotIcon}\n\t\t\t\t\tlabel=\"Select Image Slot\"\n\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Top',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"top\" />,\n\t\t\t\t\t\t\tisActive: 'top' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'top';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Bottom',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"bottom\" />,\n\t\t\t\t\t\t\tisActive: 'bottom' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'bottom';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Left',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"left\" />,\n\t\t\t\t\t\t\tisActive: 'left' === imageSlot,\n\t\t\t\t\t\t\tisDisabled: false !== columnWidth && columnWidth < COLUMN_LIMIT,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'left';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Right',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"right\" />,\n\t\t\t\t\t\t\tisActive: 'right' === imageSlot,\n\t\t\t\t\t\t\tisDisabled: false !== columnWidth && columnWidth < COLUMN_LIMIT,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'right';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Disabled',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"disabled\" />,\n\t\t\t\t\t\t\tisActive: 'disabled' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'disabled';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t\t{'disabled' !== imageSlot && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\t\t\ticon={MemoizedImageSizeIcon}\n\t\t\t\t\t\t\tlabel=\"Select Image Size\"\n\t\t\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A1',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A1\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A1' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A1'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A2',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A2\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A2' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A2'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A3',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A3\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A3' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A3'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A4',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A4\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A4' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A4'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'XL',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"XL\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'XL' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('XL'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon=\"chart-pie\"\n\t\t\t\t\t\t\tisPressed={isChartArt}\n\t\t\t\t\t\t\tlabel={__('Enable Chart Art')}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\tisChartArt: !isChartArt,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n}\n\nexport default Toolbar;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport Inspector from './inspector';\nimport Placeholder from './placeholder';\nimport Toolbar from './toolbar';\n\nfunction Controls({ attributes, setAttributes, context }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Toolbar {...{ attributes, setAttributes, context }} />\n\t\t\t<Inspector\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\nexport { Controls, Placeholder };\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { Picture } from 'react-responsive-picture';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { addQueryArgs } from '@wordpress/url';\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n\nconst A1 = {\n\tdefault: '564,317',\n\tsmall: '690,388',\n\thidpi: '1128,634',\n\tsmallHidpi: '1380,776',\n};\n\nconst A2 = {\n\tdefault: '268,151',\n\tsmall: '690,388',\n\thidpi: '536,301',\n\tsmallHidpi: '1380,776',\n};\n\nconst A3 = {\n\tdefault: '194,110',\n\tsmall: '148,84',\n\thidpi: '388,220',\n\tsmallHidpi: '296,168',\n};\n\nconst A4 = {\n\tdefault: '268,151',\n\tsmall: '690,388',\n\thidpi: '536,302',\n\tsmallHidpi: '1380,776',\n};\n\nconst XL = {\n\tdefault: '720,405',\n\tsmall: '690,388',\n\thidpi: '1440,810',\n\tsmallHidpi: '1380,776',\n};\n\nfunction ImageDisplay({\n\timg,\n\tsize,\n\tlink,\n\tonClick = false,\n\tplaceholder = false,\n}) {\n\t// eslint-disable-next-line no-shadow\n\tconst getImgURL = (variant) => {\n\t\tif (true === placeholder) {\n\t\t\tlet dimensions = '';\n\t\t\tif ('A2' === size) {\n\t\t\t\tdimensions = '536x301';\n\t\t\t} else if ('A3' === size) {\n\t\t\t\tdimensions = '388x220';\n\t\t\t} else if ('A4' === size) {\n\t\t\t\tdimensions = '536x302';\n\t\t\t} else if ('XL' === size) {\n\t\t\t\tdimensions = '1440x810';\n\t\t\t} else {\n\t\t\t\t// Default to A1\n\t\t\t\tdimensions = '1128x634';\n\t\t\t}\n\t\t\treturn `https://via.placeholder.com/${dimensions}.png?text=${size}`;\n\t\t}\n\n\t\tif ('' === img || false === img) {\n\t\t\treturn img;\n\t\t}\n\n\t\t// Default to A1\n\t\tlet args = { resize: A1[variant] };\n\t\tif ('A2' === size) {\n\t\t\targs = { resize: A2[variant] };\n\t\t} else if ('A3' === size) {\n\t\t\targs = { resize: A3[variant] };\n\t\t} else if ('A4' === size) {\n\t\t\targs = { resize: A4[variant] };\n\t\t} else if ('XL' === size) {\n\t\t\targs = { resize: XL[variant] };\n\t\t}\n\n\t\treturn addQueryArgs(img, args);\n\t};\n\n\t// eslint-disable-next-line no-shadow\n\tconst getImgSrcSet = (threshold = 767) => [\n\t\t{\n\t\t\tsrcSet: `${getImgURL('default')} 1x, ${getImgURL('hidpi')} 2x`,\n\t\t\tmedia: `(min-width: ${threshold}px)`,\n\t\t},\n\t\t{\n\t\t\tsrcSet: `${getImgURL('small')} 1x, ${getImgURL('smallHidpi')} 2x`,\n\t\t\tmedia: `(max-width: ${threshold}px)`,\n\t\t},\n\t];\n\n\tif (false !== onClick) {\n\t\treturn (\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={onClick}\n\t\t\t\tstyle={{ padding: 0, border: 'none', cursor: 'pointer' }}\n\t\t\t>\n\t\t\t\t{true === placeholder && (\n\t\t\t\t\t<img src={getImgURL()} alt=\"Click to insert\" />\n\t\t\t\t)}\n\t\t\t\t{true !== placeholder && (\n\t\t\t\t\t<Picture sources={getImgSrcSet()} alt=\"Click to edit\" />\n\t\t\t\t)}\n\t\t\t</button>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{'' === link && <Picture sources={getImgSrcSet()} />}\n\t\t\t{'' !== link && (\n\t\t\t\t<a href={link}>\n\t\t\t\t\t<Picture sources={getImgSrcSet()} />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nfunction Edit({ img, size, setAttributes }) {\n\treturn (\n\t\t<MediaUploadCheck>\n\t\t\t<MediaUpload\n\t\t\t\tonSelect={(media) => setAttributes({ image: media.url })}\n\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// If we have an actual image here then display it otherwise give us the placeholder\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{undefined !== img && 0 !== img.length && (\n\t\t\t\t\t\t\t<ImageDisplay img={img} size={size} link=\"\" onClick={open} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{(undefined === img || 0 === img.length) && (\n\t\t\t\t\t\t\t<ImageDisplay\n\t\t\t\t\t\t\t\timg={img}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tlink=\"\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tplaceholder\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default function Img({ attributes, setAttributes }) {\n\tconst { image, imageSlot, imageSize, isChartArt } = attributes;\n\n\tif ('disabled' === imageSlot) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = () => {\n\t\tlet isXL = false;\n\t\tlet isA1 = false;\n\t\tlet isA2 = false;\n\t\tlet isA3 = false;\n\t\tlet isA4 = false;\n\t\tif (false !== imageSlot) {\n\t\t\tif ('XL' === imageSize) {\n\t\t\t\tisXL = true;\n\t\t\t} else if ('A1' === imageSize) {\n\t\t\t\tisA1 = true;\n\t\t\t} else if ('A2' === imageSize) {\n\t\t\t\tisA2 = true;\n\t\t\t} else if ('A3' === imageSize) {\n\t\t\t\tisA3 = true;\n\t\t\t} else if ('A4' === imageSize) {\n\t\t\t\tisA4 = true;\n\t\t\t}\n\t\t}\n\n\t\treturn classNames({\n\t\t\tui: true, // @TODO is this necessary?\n\t\t\tXL: isXL,\n\t\t\tA1: isA1,\n\t\t\tA2: isA2,\n\t\t\tA3: isA3,\n\t\t\tA4: isA4,\n\t\t\timage: true,\n\t\t\tbordered: isChartArt,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className={classes()}>\n\t\t\t<Edit img={image} size={imageSize} setAttributes={setAttributes} />\n\t\t</div>\n\t);\n}\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst randomPlaceholder = () => {\n\tconst opts = [\n\t\t'Defense industry stocks fall on news of executive order recalling all U.S. military personnel as focus shifts to fighting climate change.',\n\t\t'U.S. President honors 10th anniversary of the loss of Miami to rising sea levels.',\n\t\t'Congress passes bill to offer relocation assistance to all Americans living in coastal areas.',\n\t\t'U.S. President signs executive order to end all fossil fuel extraction and use by 2030.',\n\t\t'Exxon executives indicted for fraud and conspiracy to commit fraud. Company to be liquidated.',\n\t\t'Shell oil executives to face United Nations war crimes tribunal.',\n\t];\n\treturn opts[Math.floor(Math.random() * opts.length)];\n};\n\nfunction Excerpt({ attributes, setAttributes }) {\n\tconst { excerpt, enableHeader, enableExcerpt } = attributes;\n\n\tif (!enableExcerpt) {\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = classNames('description', { 'sans-serif': !enableHeader });\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName=\"div\"\n\t\t\tvalue={excerpt}\n\t\t\tonChange={(value) => setAttributes({ excerpt: value })}\n\t\t\tplaceholder={randomPlaceholder()}\n\t\t\tmultiline=\"p\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Excerpt;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Extra({ attributes, setAttributes }) {\n\tconst { extra, enableExtra, enableBreakingNews } = attributes;\n\treturn (\n\t\t<Fragment>\n\t\t\t{true === enableExtra && (\n\t\t\t\t<RichText\n\t\t\t\t\ttagName=\"ul\"\n\t\t\t\t\tvalue={extra}\n\t\t\t\t\tonChange={(value) => setAttributes({ extra: value })}\n\t\t\t\t\tplaceholder={extra}\n\t\t\t\t\tmultiline=\"li\"\n\t\t\t\t\tclassName=\"extra\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{true === enableBreakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default Extra;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Header({ attributes, setAttributes }) {\n\tconst { title, headerSize, enableExcerpt, enableHeader } = attributes;\n\n\tif (!enableHeader) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: !enableExcerpt,\n\t});\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName={`h${headerSize}`}\n\t\t\tvalue={title}\n\t\t\tonChange={(t) => setAttributes({ title: t })}\n\t\t\tallowedFormats={['core/italic']}\n\t\t\tplaceholder=\"Title\"\n\t\t\tmultiline=\"br\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Header;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment, useState } from '@wordpress/element';\nimport {\n\tSelectControl,\n\tSpinner,\n\tDatePicker,\n\tButton,\n\tPopover,\n} from '@wordpress/components';\nimport { cleanForSlug } from '@wordpress/url';\nimport { useEntityRecords } from '@wordpress/core-data';\nimport { date as formatDate } from '@wordpress/date';\n\n/**\n * Internal Dependencies\n */\n\nfunction Meta({ attributes, setAttributes }) {\n\tconst { date, label, enableMeta, metaTaxonomy } = attributes;\n\tconst [datePickerVisible, setDatePickerVisible] = useState(false);\n\n\tif (!enableMeta) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst { records: entityTerms, isResolving } = useEntityRecords(\n\t\t'taxonomy',\n\t\tmetaTaxonomy,\n\t\t{ per_page: -1, hide_empty: false, context: 'view' },\n\t);\n\tconst hasRecords = entityTerms ? 0 < entityTerms.length : false;\n\n\tconst cleanedLabel =\n\t\tundefined !== label ? cleanForSlug(label.toLowerCase()) : 'report';\n\n\tconst value = 'short-read' === cleanedLabel ? 'fact-tank' : cleanedLabel;\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"meta\"\n\t\t\tstyle={{\n\t\t\t\tdisplay: 'flex',\n\t\t\t\talignItems: 'center',\n\t\t\t}}\n\t\t>\n\t\t\t{'disabled' !== metaTaxonomy && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{isResolving && <Spinner />}\n\t\t\t\t\t\t{!isResolving && hasRecords && (\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\toptions={entityTerms.map((term) => ({\n\t\t\t\t\t\t\t\t\tlabel: term.name,\n\t\t\t\t\t\t\t\t\tvalue: term.slug,\n\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\tonChange={(l) => {\n\t\t\t\t\t\t\t\t\tsetAttributes({ label: l });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tstyle={{ marginBottom: '0px' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>&nbsp;|&nbsp;</div>\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetDatePickerVisible(!datePickerVisible);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{formatDate('M j, Y', date)}\n\t\t\t\t</Button>\n\t\t\t\t{datePickerVisible && (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\tonClose={() => setDatePickerVisible(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tpadding: '1em',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\tcurrentDate={date}\n\t\t\t\t\t\t\t\tonChange={(d) =>\n\t\t\t\t\t\t\t\t\tsetAttributes({ date: formatDate('M j, Y', d) })\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Popover>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Meta;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { date as formatDate } from '@wordpress/date';\nimport { RawHTML } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { useStoryItemBlockProps } from '../helpers';\n\nconst IMAGE_SIZES = {\n\tA1: [1128, 634],\n\tA2: [526, 301],\n\tA3: [388, 220],\n\tA4: [536, 302],\n\tXL: [1440, 810],\n};\n\nfunction Preview({ attributes }) {\n\tconst {\n\t\ttitle,\n\t\texcerpt,\n\t\textra,\n\t\tlabel,\n\t\tdate,\n\t\timage,\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\theaderSize,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t} = attributes;\n\n\tconst blockProps = useStoryItemBlockProps(attributes);\n\n\tconst headerClasses = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: false,\n\t});\n\n\tconst imageClasses = classNames('image', {\n\t\tbordered: isChartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n\tconst excerptClasses = classNames('description');\n\n\tconst displayImage =\n\t\tundefined !== imageSlot &&\n\t\t'disabled' !== imageSlot &&\n\t\tundefined !== imageSize &&\n\t\t'' !== imageSize;\n\n\treturn (\n\t\t<article {...blockProps}>\n\t\t\t{enableMeta && (\n\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t<span className=\"label\">{label}</span> |{' '}\n\t\t\t\t\t<span className=\"date\">{formatDate('M j, Y', date)}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{displayImage && (\n\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t<picture>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrcSet={image}\n\t\t\t\t\t\t\twidth={IMAGE_SIZES[imageSize][0]}\n\t\t\t\t\t\t\theight={IMAGE_SIZES[imageSize][1]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</picture>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{enableHeader && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName={`h${headerSize}`}\n\t\t\t\t\tvalue={title}\n\t\t\t\t\tclassName={headerClasses}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{enableExcerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{enableExtra && (\n\t\t\t\t<RichText.Content tagName=\"ul\" value={extra} className=\"extra\" />\n\t\t\t)}\n\n\t\t\t{true === enableBreakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</article>\n\t);\n}\n\nexport default Preview;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\nimport { useEntityRecord } from '@wordpress/core-data';\nimport { useEffect, RawHTML } from '@wordpress/element';\nimport { date as formatDate } from '@wordpress/date';\n\n/**\n * Internal Dependencies\n */\n\nconst IMAGE_SIZES = {\n\tA1: [1128, 634],\n\tA2: [526, 301],\n\tA3: [388, 220],\n\tA4: [536, 302],\n\tXL: [1440, 810],\n};\n\nexport default function ContextPreview({ attributes, clientId, context }) {\n\tconst { postId, postType, queryId } = context;\n\tconst { record, isResolving } = useEntityRecord('postType', postType, postId);\n\n\tconst { title, excerpt, label, date, art } = record;\n\n\tconst {\n\t\timageSlot,\n\t\timageSize,\n\t\theaderSize,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableMeta,\n\t\tclassName,\n\t} = attributes;\n\n\tconst headerClasses = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: false,\n\t});\n\n\tconst imageClasses = classNames('image', {\n\t\tbordered: art && art[imageSize] && art[imageSize].chartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n\tconst excerptClasses = classNames('description');\n\n\tconst displayImage =\n\t\tart &&\n\t\tart[imageSize] &&\n\t\tart[imageSize].url &&\n\t\tundefined !== imageSlot &&\n\t\t'disabled' !== imageSlot &&\n\t\tundefined !== imageSize &&\n\t\t'' !== imageSize;\n\n\tconst logicalClasses = {};\n\tif (displayImage) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif (displayImage) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\n\tconst blockProps = useBlockProps(blockPropsArgs);\n\n\tuseEffect(() => {\n\t\tif (record) {\n\t\t\tconsole.log('record', record);\n\t\t}\n\t}, [record]);\n\n\tif (isResolving) {\n\t\treturn 'Loading...';\n\t}\n\n\treturn (\n\t\t<article {...blockProps}>\n\t\t\t{enableMeta && (\n\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t<span className=\"label\">{label}</span> |{' '}\n\t\t\t\t\t<span className=\"date\">{date ? formatDate('M j, Y', date) : ''}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{displayImage && (\n\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t<picture>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrcSet={art[imageSize].url}\n\t\t\t\t\t\t\twidth={IMAGE_SIZES[imageSize][0]}\n\t\t\t\t\t\t\theight={IMAGE_SIZES[imageSize][1]}\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</picture>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{enableHeader && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName={`h${headerSize}`}\n\t\t\t\t\tvalue={title}\n\t\t\t\t\tclassName={headerClasses}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{enableExcerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt.rendered}\n\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</article>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { Controls, Placeholder } from './controls';\nimport Image from './image';\nimport Excerpt from './excerpt';\nimport Extra from './extra';\nimport Header from './header';\nimport Meta from './meta';\nimport Preview from './preview';\nimport ContextPreview from './context-preview';\nimport { useStoryItemBlockProps } from '../helpers';\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId, context }) => {\n\t// If this block is being rendered in the scope of query context\n\t// then render the ContextPreview component early.\n\tif (\n\t\tundefined !== context.queryId &&\n\t\tundefined !== context.postId &&\n\t\tundefined !== context.postType &&\n\t\t0 !== context.postId &&\n\t\tNumber.isInteger(context.postId)\n\t) {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Controls\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<ContextPreview {...{ attributes, context }} />\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tconst { postId, isPreview } = attributes;\n\n\tif (undefined === postId) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tattributes={attributes}\n\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\tclientId={clientId}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// If not active or is explicitly a preview, return the preview early.\n\tif (!isSelected || isPreview) {\n\t\treturn <Preview {...{ attributes, context }} />;\n\t}\n\n\tconst blockProps = useStoryItemBlockProps(attributes);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<article {...blockProps}>\n\t\t\t\t<Image\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Meta\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Header\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Excerpt\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<Extra\n\t\t\t\t\t{...{\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</article>\n\t\t\t<Controls\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Fragment>\n\t);\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\n/** Returns a server side block callback */\nconst save = ({ attributes }) => {\n\tconst { excerpt, extra } = attributes;\n\treturn (\n\t\t<Fragment>\n\t\t\t{excerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\tclassName=\"description\"\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{extra && (\n\t\t\t\t<RichText.Content className=\"extra\" tagName=\"ul\" value={extra} />\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nconst variations = [\n\t{\n\t\tname: 'story-item-default',\n\t\tisDefault: true,\n\t\ttitle: __('Story Item'),\n\t\texcerpt: __('Default story item layout: top aligned A1 image.'),\n\t\tattributes: {\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A1',\n\t\t},\n\t},\n\t{\n\t\tname: 'story-item-pub-listing',\n\t\ttitle: __('Pub Listing Story Item'),\n\t\texcerpt: __('Left algined A3 image (right aligned A3 on mobile).'),\n\t\tattributes: {\n\t\t\timageSlot: 'left',\n\t\t\timageSize: 'A3',\n\t\t},\n\t},\n\t{\n\t\tname: 'story-item-slim',\n\t\ttitle: __('Story Item Slim'),\n\t\texcerpt: __('No excerpt, no image.'),\n\t\tattributes: {\n\t\t\timageSlot: 'disabled',\n\t\t\tenableExcerpt: false,\n\t\t},\n\t},\n];\n\nexport default variations;\n","/**\n * WordPress Dependencies\n */\nimport * as moment from 'moment';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport deprecated from './deprecated';\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport variations from './variations';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n\texample: {\n\t\tattributes: {\n\t\t\ttitle: 'Ultricies Ipsum Nibh Egestas Purus',\n\t\t\texcerpt:\n\t\t\t\t'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>',\n\t\t\tlabel: 'Report',\n\t\t\tdate: moment().format('MM-DD-YYYY'), // Set the current date.\n\t\t\timage:\n\t\t\t\t'https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg',\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A2',\n\t\t\tisPreview: true,\n\t\t},\n\t},\n\tdeprecated,\n\tvariations,\n\tsupports: {\n\t\tcolor: {\n\t\t\ttext: true,\n\t\t\tbackground: false,\n\t\t},\n\t\ttypography: {\n\t\t\tfontSize: true,\n\t\t},\n\t},\n\t__experimentalLabel: ({ title }) => title || 'Story Item',\n\tedit,\n\tsave,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n"],"sourceRoot":""}