/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[5],{1:function(e,t){e.exports=wp.element},115:function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/menu-link","category":"layout","attributes":{"label":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"rel":{"type":"string"},"id":{"type":"number"},"opensInNewTab":{"type":"boolean","default":false},"url":{"type":"string"},"title":{"type":"string"},"subMenuEnabled":{"type":"boolean","default":false}},"usesContext":["prc-block/menu","prc-block/tree-list"],"supports":{"reusable":false,"html":false}}')},12:function(e,t){e.exports=lodash},173:function(e,t,n){n(17),e.exports=n(230)},2:function(e,t){e.exports=wp.i18n},230:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(2),c=n(260),i=n(6),a=n(115),l=n(18),s=n(11),u=n.n(s),p=n(12),b=n(34),d=n(7),m=n(4),f=n(129),k=n(3),g=n(42),O=n(1),j=n(263),_=n(254),y=n(255);function h(e){switch(e){case"post":case"page":return{type:"post",subtype:e};case"topic":return{type:"term",subtype:"topic"};case"formats":return{type:"term",subtype:"formats"};case"programs":return{type:"term",subtype:"programs"};default:return{}}}var v=Object(b.compose)([Object(d.withSelect)((function(e,t){var n,r=e("core/block-editor"),o=(r.getBlockAttributes,r.getClientIdsOfDescendants),c=r.hasSelectedInnerBlock,i=(r.getBlockParentsByBlockName,r.getSelectedBlockClientId),a=(r.getSettings,t.clientId),l=!!o([a]).length;return{isImmediateParentOfSelectedBlock:c(a,!1),hasDescendants:l,selectedBlockHasDescendants:!!(null===(n=o([i()]))||void 0===n?void 0:n.length)}})),Object(d.withDispatch)((function(e,t,n){return{insertLinkBlock:function(){var r=t.clientId,o=e("core/block-editor").insertBlock,c=(0,n.select("core/block-editor").getClientIdsOfDescendants)([r]),a=c.length?c.length:0;o(Object(i.createBlock)("prc-block/menu-link"),a,r)}}}))])((function(e){var t=e.attributes,n=e.context,c=e.isSelected,a=(e.isImmediateParentOfSelectedBlock,e.setAttributes),s=(e.insertLinkBlock,e.insertBlocksAfter),b=e.mergeBlocks,v=e.onReplace,w=t.label,E=t.type,R=t.opensInNewTab,B=t.url,L=t.description,C=t.rel,x=t.title,P=t.subMenuEnabled,S={url:B,opensInNewTab:R},I=Object(O.useState)(!1),T=Object(l.a)(I,2),D=T[0],A=T[1],N=Object(O.useRef)(null),M=function(e){var t=Object(O.useState)(!1),n=Object(l.a)(t,2),r=n[0],o=n[1];return Object(O.useEffect)((function(){var t=e.current.ownerDocument;function n(e){c(e)}function r(){o(!1)}function c(t){e.current.contains(t.target)?o(!0):o(!1)}return t.addEventListener("dragstart",n),t.addEventListener("dragend",r),t.addEventListener("dragenter",c),function(){t.removeEventListener("dragstart",n),t.removeEventListener("dragend",r),t.removeEventListener("dragenter",c)}}),[]),r}(N),F=Object(o.__)("Add linkâ€¦"),U=Object(O.useRef)(),J=Object(d.useSelect)((function(e){return e("core/block-editor").isDraggingBlocks()}),[]);Object(O.useEffect)((function(){B||A(!0)}),[]),Object(O.useEffect)((function(){c||A(!1)}),[c]),Object(O.useEffect)((function(){D&&B&&(Object(g.isURL)(Object(g.prependHTTP)(w))&&/^.+\.[a-z]+/.test(w)?function(){U.current.focus();var e=U.current.ownerDocument,t=e.defaultView.getSelection(),n=e.createRange();n.selectNodeContents(U.current),t.removeAllRanges(),t.addRange(n)}():Object(j.a)(U.current,!0))}),[B]);var G=Object(k.useBlockProps)({ref:N,className:u()("item",{"is-editing":c&&!J,"is-selected":c&&!J,"is-dragging-within":M,"has-link":!!B})}),H=Object(k.__experimentalUseInnerBlocksProps)({className:u()("ui link list")},{allowedBlocks:["prc-block/menu-link"],orientation:"vertical",__experimentalCaptureToolbars:!0,templateLock:!1});return React.createElement(O.Fragment,null,React.createElement(k.BlockControls,null,React.createElement(m.ToolbarGroup,null,React.createElement(m.KeyboardShortcuts,{bindGlobal:!0,shortcuts:Object(r.a)({},f.b.primary("k"),(function(){return A(!0)}))}),React.createElement(m.ToolbarButton,{name:"link",icon:_.a,title:Object(o.__)("Link"),shortcut:f.a.primary("k"),onClick:function(){return A(!0)}}),React.createElement(m.ToolbarButton,{name:"link",icon:y.a,title:Object(o.__)("Sub Menu"),onClick:function(){return a({subMenuEnabled:!P})}}))),React.createElement(k.InspectorControls,null,React.createElement(m.PanelBody,{title:Object(o.__)("Link settings")},React.createElement(m.TextareaControl,{value:L||"",onChange:function(e){a({description:e})},label:Object(o.__)("Description"),help:Object(o.__)("The description will be displayed in the menu if the current theme supports it.")}),React.createElement(m.TextControl,{value:x||"",onChange:function(e){a({title:e})},label:Object(o.__)("Link title"),autoComplete:"off"}),React.createElement(m.TextControl,{value:C||"",onChange:function(e){a({rel:e})},label:Object(o.__)("Link rel"),autoComplete:"off"}),React.createElement(m.ToggleControl,{checked:P,onChange:function(){a({subMenuEnabled:!P})},label:Object(o.__)("Enable Sub Menu")}))),React.createElement("div",G,React.createElement(k.RichText,{ref:U,identifier:"label",className:"is-style-text"===n["prc-block/menu"]?"ui basic button":"",value:w,onChange:function(e){return a({label:e})},onMerge:b,onReplace:v,__unstableOnSplitAtEnd:function(){return s(Object(i.createBlock)("prc-block/menu-link"))},"aria-label":Object(o.__)("Navigation link text"),placeholder:F,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),D&&React.createElement(m.Popover,{position:"bottom center",onClose:function(){return A(!1)}},React.createElement(k.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:S,showInitialSuggestions:!0,noDirectEntry:!!E,noURLSuggestion:!!E,suggestionsQuery:h(E),onChange:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.title,o=void 0===r?"":r,c=n.url,i=void 0===c?"":c,l=n.opensInNewTab,s=n.id;return a({url:encodeURI(i),label:(e=o.replace(/http(s?):\/\//gi,""),t=i.replace(/http(s?):\/\//gi,""),""!==o&&e!==t&&w!==o?Object(p.escape)(o):w||Object(p.escape)(t)),opensInNewTab:l,id:s})}})),!0===P&&React.createElement("div",H)))})),w=function(){return React.createElement(k.InnerBlocks.Content,null)},E=n(256),R=n(257),B=n(258),L=n(259),C=[{name:"link",isDefault:!0,title:Object(o.__)("Link"),description:Object(o.__)("A link to a URL."),attributes:{}},{name:"post",icon:E.a,title:Object(o.__)("Post Link"),description:Object(o.__)("A link to a post."),attributes:{type:"post"}},{name:"page",icon:R.a,title:Object(o.__)("Page Link"),description:Object(o.__)("A link to a page."),attributes:{type:"page"}},{name:"topic",icon:B.a,title:Object(o.__)("Topic Page Link"),description:Object(o.__)("A link to a topic."),attributes:{type:"topic"}},{name:"formats",icon:L.a,title:Object(o.__)("Format Link"),description:Object(o.__)("A link to a format."),attributes:{type:"formats"}},{name:"programs",icon:L.a,title:Object(o.__)("Program Link"),description:Object(o.__)("A link to a program."),attributes:{type:"programs"}}];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=a.name,I={title:Object(o.__)("Link"),icon:c.a,description:Object(o.__)("Add a page, link, or another item to your navigation."),variations:C,__experimentalLabel:function(e){return e.label},edit:v,save:w};Object(i.registerBlockType)(S,P(P({},a),I))},3:function(e,t){e.exports=wp.blockEditor},34:function(e,t){e.exports=wp.compose},4:function(e,t){e.exports=wp.components},42:function(e,t){e.exports=wp.url},6:function(e,t){e.exports=wp.blocks},7:function(e,t){e.exports=wp.data}},[[173,0,17]]]);
//# sourceMappingURL=menu-link-a394d1a6.js.map