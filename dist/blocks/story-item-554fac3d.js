/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 2.1.17
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2022 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[59,2],{1:function(e,t){e.exports=window.React},19:function(e,t){e.exports=window.wp.primitives},2:function(e,t){e.exports=window.wp.i18n},254:function(e,t){e.exports=moment},3:function(e,t){e.exports=window.wp.components},30:function(e,t){e.exports=window.wp.apiFetch},31:function(e,t){e.exports=window.wp.url},387:function(e){e.exports=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"prc-block/story-item","title":"Story Item","category":"content-curation","icon":"admin-post","description":"A story item is a visual display of a post, usually referencing a stub post.","keywords":["prc","story","item","story item","stub"],"usesContext":["queryId","postId","postType","core/column/gridSpan","core/column/tabletGridSpan","core/column/mobileGridSpan"],"attributes":{"title":{"type":"string"},"excerpt":{"type":"string","source":"html","multiline":"p","selector":".description"},"extra":{"type":"string","source":"html","multiline":"li","selector":".extra"},"url":{"type":"string","default":""},"label":{"type":"string"},"date":{"type":"string"},"image":{"type":"string"},"imageSlot":{"type":"string","default":"top"},"imageSize":{"type":"string","default":"A1"},"isChartArt":{"type":"boolean"},"postId":{"type":"integer"},"headerSize":{"type":"integer","default":2},"enableAltHeaderWeight":{"type":"boolean","default":false},"enableEmphasis":{"type":"boolean","default":false},"enableHeader":{"type":"boolean","default":true},"enableExcerpt":{"type":"boolean","default":true},"enableExcerptBelow":{"type":"boolean","default":false},"enableExtra":{"type":"boolean","default":false},"enableBreakingNews":{"type":"boolean","default":false},"disableMobileStyles":{"type":"boolean","default":false},"enableMeta":{"type":"boolean","default":true},"metaTaxonomy":{"type":"string","default":"formats"},"inLoop":{"type":"boolean","default":false},"isPreview":{"type":"boolean","default":false}},"supports":{"html":false}}')},4:function(e,t){e.exports=window.wp.element},42:function(e,t){e.exports=window.wp.htmlEntities},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return z})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return W})),n.d(t,"d",(function(){return X})),n.d(t,"g",(function(){return G})),n.d(t,"h",(function(){return J})),n.d(t,"i",(function(){return f}));var a=n(34),r=n(22),l=n(52),c=n(1102),o=n(173),i=n(66),s=n(9),u=n(4),d=n(2),m=n(3),b=n(28),p=n(38),h=n(30),g=n.n(h),f=function(e,t){var n=Object(u.useState)(e),a=Object(r.a)(n,2),l=a[0],c=a[1];return Object(u.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),l},v=(n(174),n(32));n(50);var E,y=n(31),R=n(42),x=Object(i.a)(m.Button)(E||(E=Object(l.a)(["\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n"])));var w,O=function(e){var t=e.suggestion,n=e.onClick,a=e.searchTerm,r=e.isSelected,l=e.id,c=e.contentTypes,o=t.type&&1<c.length;return React.createElement(m.Tooltip,{text:Object(R.decodeEntities)(t.title)},React.createElement(x,{id:l,onClick:n,className:"block-editor-link-control__search-item is-entity ".concat(r&&"is-selected"),style:{borderRadius:"0",boxSizing:"border-box"}},React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title",style:{paddingRight:o?null:0}},React.createElement(m.TextHighlight,{text:Object(R.decodeEntities)(t.title),highlight:a})),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info",style:{paddingRight:o?null:0}},Object(y.filterURLForDisplay)(Object(y.safeDecodeURI)(t.url))||"")),o&&React.createElement("span",{className:"block-editor-link-control__search-item-type"},"post_tag"===t.type?"tag":t.type)))},k="prc-content-search",j={};function S(e){var t=e.onSelectItem,n=e.placeholder,a=e.label,c=e.style,o=void 0===c?"search":c,i=e.contentTypes,s=e.mode,h=e.excludeItems,v=e.perPage,E=Object(u.useState)(""),y=Object(r.a)(E,2),R=y[0],x=y[1],S=f(R,500),A=Object(u.useMemo)((function(){return!!S.match(/^(http|https):\/\//)}),[S]),C=Object(u.useState)([]),_=Object(r.a)(C,2),I=_[0],N=_[1],T=Object(u.useState)(!1),P=Object(r.a)(T,2),H=P[0],M=P[1],z=Object(u.useState)(null),B=Object(r.a)(z,2),L=B[0],D=B[1],V=Object(u.useRef)(),F=Object(u.useRef)(!0),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];V.current=null,!1!==t&&(j[t]=e);var n=e.filter((function(e){var t=!0;return h.length&&(t=h.every((function(t){return t.id!==e.id}))),t}));N(n),M(!1)},Z=function(e){return void 0===e?new Error("url is undefined"):new Promise((function(t,n){g()({path:"/prc-api/v2/utils/get-post-by-url",method:"POST",data:{url:e}}).then((function(a){console.log("getPostByUrl",e,a),"object"!==Object(b.a)(a)&&n(new Error("post is not an object")),t(a)})).catch((function(e){return n(e)}))}))},X=!!S.length,G=!!I.length;Object(u.useEffect)((function(){return function(){F.current=!1}}),[]),Object(u.useEffect)((function(){""!==S&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(V.current&&V.current.abort(),""===e.trim())return console.log("Resetting search string..."),void U([]);V.current=new AbortController,M(!0);var n="wp/v2/search/?search=".concat(e,"&subtype=").concat(i.join(","),"&type=").concat(s,"&_embed&per_page=").concat(v);j[n]?U(j[n],n):t?(console.log("isUrl",e),Z(e).then((function(e){if(F.current){console.log("parse getPostByUrl",e);var t=e.ID,a=e.post_title,r=e.post_type,l=e.permalink,c=e.label;U([{id:t,subtype:r,title:a,type:"post",url:l,label:c}],n)}})).catch((function(t,n){console.log("Hey this is a url error, we didnt find a matching post... now what?",e),console.error(t,n),M(!1)}))):g()({path:n,signal:V.current.signal}).then((function(e){!1!==F.current&&(console.log("Not a url, searching.... here are the results:",e),U(e,n))})).catch((function(e,t){"fetch_error"!==e.code&&U([])}))}(S,A)}),[S,A]);var Y=Object(p.a)(w||(w=Object(l.a)(["\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t"])));return Object(p.b)(m.NavigableMenu,{onNavigate:function(e){0===e&&D(null),D(e)},orientation:"vertical"},Object(p.b)("div",{style:{display:"flex"}},Object(p.b)("div",{style:{flexGrow:"1"}},"minimal"===o&&Object(p.b)(m.TextControl,{label:a,value:R,onChange:function(e){return x(e)},placeholder:n,autoComplete:"off"}),"search"===o&&Object(p.b)(m.SearchControl,{value:R,onChange:function(e){return x(e)},placeholder:n})),H&&Object(p.b)("div",{style:{position:"absolute",right:"minimal"===o?"8px":"50px",marginTop:"minimal"===o?"27px":"10px"}},Object(p.b)(m.Spinner,null))),X?Object(p.b)("ul",{className:"".concat(k,"-list"),style:{marginTop:"0",marginBottom:"0",marginLeft:"0",paddingLeft:"0",listStyle:"none"},css:Y},!H&&!G&&!1===A&&Object(p.b)("li",{className:"".concat(k,"-list-item components-button"),style:{color:"inherit",cursor:"default",paddingLeft:"3px"}},Object(d.__)("Nothing found.","prc-block-components")),!H&&!G&&A&&Object(p.b)("li",{className:"".concat(k,"-list-item components-button"),style:{color:"inherit",cursor:"default",paddingLeft:"3px"}},Object(d.__)("Press enter to change url.","prc-block-components")),!H&&I.map((function(e,n){return console.log("searchResults map...",e),void 0===e.title?null:Object(p.b)("li",{key:e.id,className:"".concat(k,"-list-item"),style:{marginBottom:"0"}},Object(p.b)(O,{onClick:function(){return function(e){N([]),x(""),t(e)}(e)},searchTerm:S,suggestion:e,contentTypes:i,isSelected:L===n+1}))}))):null)}var A,C,_=n(68),I=Object(_.c)((function(){return React.createElement("svg",{style:{marginRight:"5px",cursor:"grab",flexShrink:0},width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z"}))})),N=Object(i.a)("div")(A||(A=Object(l.a)(["\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n"]))),T=function(e){var t=e.item,n=e.isOrderable,a=void 0!==n&&n,r=e.handleItemDelete,l=e.mode,c="post"===l?"postType":"taxonomy",o=Object(s.useSelect)((function(e){var n=e("core"),a=n.getEntityRecord,r=n.hasFinishedResolution,o=[c,t.type,t.id],i=a.apply(void 0,o);if(i){console.log("Has Item",i);var s={title:"post"===l?i.title.rendered:i.name,url:i.link,id:i.id};return t.uuid&&(s.uuid=t.uuid),s}if(r("getEntityRecord",o))return null}),[t.id,c]);return Object(u.useEffect)((function(){null===o&&r(t)}),[t,r,o]),o?React.createElement(N,{style:{border:"2px dashed #ddd",paddingTop:"10px",paddingBottom:"10px",paddingLeft:a?"3px":"8px"},className:"block-editor-link-control__search-item is-entity"},a?React.createElement(I,null):"",React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title"},Object(R.decodeEntities)(o.title)),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info"},Object(y.filterURLForDisplay)(Object(y.safeDecodeURI)(o.url))||"")),React.createElement("button",{type:"button",onClick:function(){r(o)},"aria-label":Object(d.__)("Delete item","10up-block-components")},"×")):React.createElement("div",null)},P=Object(_.a)((function(e){var t=e.items,n=e.isOrderable,a=e.handleItemDelete,r=e.mode,l=e.ChildComponent,c=void 0!==l&&l,o=!1!==c?n?Object(_.b)(c):c:n?Object(_.b)(T):T;return React.createElement("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif'}},t.map((function(e,l){var c=e.uuid?e.uuid:e.id;return React.createElement(o,{isOrderable:!!(n&&1<t.length)&&n,key:"item-".concat(c),index:l,handleItemDelete:a,sortIndex:l,item:e,mode:r,totalItems:t.length})})))})),H=Object(i.a)("div")(C||(C=Object(l.a)(["\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n"]))),M=function(e){var t,n=e.label,l=e.placeholder,i=e.mode,m=void 0===i?"post":i,b=e.contentTypes,p=void 0===b?["post","page"]:b,h=e.onPickChange,g=void 0===h?function(e){console.log("Content picker list change",e)}:h,f=e.maxContentItems,v=void 0===f?1:f,E=e.isOrderable,y=void 0!==E&&E,R=e.singlePickedLabel,x=void 0===R?Object(d.__)("You have selected the following item:","prc-block-components"):R,w=e.multiPickedLabel,O=void 0===w?Object(d.__)("You have selected the following items:","prc-block-components"):w,k=e.value,j=void 0===k?[]:k,A=e.uniqueContentItems,C=void 0===A||A,_=e.excludeCurrentPost,I=void 0===_||_,N=e.perPage,T=void 0===N?50:N,M=e.PickedItemChild,z=void 0!==M&&M,B=e.searchStyle,L=void 0===B?"search":B,D=Object(u.useState)(j),V=Object(r.a)(D,2),F=V[0],U=V[1],Z=null===(t=Object(s.select)("core/editor"))||void 0===t?void 0:t.getCurrentPostId();Object(u.useEffect)((function(){console.log("Init content state",j)}),[]),Object(u.useEffect)((function(){F!==j&&0!==F.length&&(console.log("useEffect onPickChange->",F),g(F))}),[F]);var X=Object(u.useMemo)((function(){var e=C?Object(a.a)(F):[];return I&&Z&&e.push({id:Z}),e}),[F,Z,I,C]);return React.createElement("div",{className:"".concat("prc-content-picker")},(!F.length||F.length&&F.length<v)&&React.createElement(S,{placeholder:l,label:n,excludeItems:X,onSelectItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("handleSelect->",e,t),U(!0===t?function(t){return[{uuid:Object(c.a)(),type:"subtype"in e?e.subtype:e.type,url:e.url}].concat(Object(a.a)(t))}:function(t){return[{id:e.id,uuid:Object(c.a)(),type:"subtype"in e?e.subtype:e.type,url:e.url}].concat(Object(a.a)(t))})},contentTypes:p,mode:m,perPage:T,style:L}),Boolean(null==F?void 0:F.length)>0&&React.createElement(H,null,React.createElement("span",{style:{marginTop:"15px",marginBottom:"2px",display:"block"}},F.length>1?O:x),React.createElement(P,{items:F,useDragHandle:!0,handleItemDelete:function(e){U((function(t){return t.filter((function(t){var n=t.id,a=t.uuid;return e.uuid?a!==e.uuid:n!==e.id}))}))},isOrderable:y,mode:m,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex,r=Object(a.a)(Object(o.default)(F,t,n));console.log("newContent?",r),U(r)},ChildComponent:z})))};function z(e){var t=e.blockProps,n=e.onChange,a=e.onSkip,r=e.mode,l=void 0===r?"post":r,c=e.contentTypes,o=void 0===c?["stub"]:c,i=e.label,s=void 0===i?Object(d.__)("Search for a post","prc-block-components"):i,b=e.placeholder,p=void 0===b?Object(d.__)("Search for a post or paste in a url...","prc-block-components"):b,h=e.value,g=void 0===h?[]:h,f=e.loadingComponent,v=void 0!==f&&f,E=e.children;return React.createElement("div",t,React.createElement(m.Placeholder,{label:"".concat(s,":"),isColumnLayout:!0},!1!==v&&React.createElement("div",{style:{textAlign:"center"}},React.createElement(m.Spinner,null),React.createElement("p",{className:"sans-serif"},"Loading object...")),!1===v&&React.createElement(u.Fragment,null,E,React.createElement(M,{onPickChange:function(e){console.log("Step1:",e),n(e)},mode:l,label:"".concat(s," or enter a url:"),placeholder:p,contentTypes:o,value:g}),React.createElement(m.Button,{isLink:!0,onClick:function(){a()},text:Object(d.__)("Skip"),style:{paddingLeft:"9px"}}))))}n(1091);var B=n(5);var L=function(e){var t=e.url,n=e.onChange,a=e.query,l=void 0===a?{type:"term",subtype:"topic"}:a,c=Object(u.useState)(!1),o=Object(r.a)(c,2),i=o[0],s=o[1];return React.createElement(u.Fragment,null,React.createElement(m.ToolbarButton,{"aria-expanded":i,"aria-haspopup":"true",label:Object(d.__)("Set Link"),icon:"admin-links",onClick:function(){return s(!i)},showTooltip:!0}),!0===i&&React.createElement(m.Popover,{position:"bottom center",onClose:function(){return s(!1)}},React.createElement(B.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:{url:t},showInitialSuggestions:!0,suggestionsQuery:l,onChange:function(e){return n(e)},settings:[]})))},D=n(1099),V=function(e){var t=e.url,n=e.heading,a=e.headingSize,r=void 0===a?"h2":a,l=e.disableIcon,c=void 0!==l&&l,o=e.setAttributes;return React.createElement(u.Fragment,null,React.createElement(B.BlockControls,null,React.createElement(m.ToolbarGroup,null,React.createElement(L,{url:t,onChange:function(e){o({url:e.url})}}))),React.createElement(m.Flex,{style:{paddingBottom:"1em"}},React.createElement(m.FlexItem,null,React.createElement(B.RichText,{tagName:r,value:n,onChange:function(e){return o({heading:e})},placeholder:"Heading...",formattingControls:[],keepPlaceholderOnFocus:!0,className:"sans-serif"})),!0!==c&&React.createElement(m.FlexBlock,null,React.createElement(D.a,{name:"chevron right",size:"small",style:{marginLeft:"0.5em"}}))))},F=n(7);var U=function(e){var t=e.label,n=void 0===t?"":t,a=e.blockName,r=e.clientId,l=(e.className,e.attributes),c=void 0===l?{}:l;return React.createElement(m.Button,{label:Object(d.__)(n),tooltipPosition:"bottom",onClick:function(){var e=Object(s.select)("core/block-editor").getBlock(r);console.log("debug info...",e.innerBlocks.length);var t=0===e.innerBlocks.length?0:e.innerBlocks.length+1,n=Object(F.createBlock)(a,c);Object(s.dispatch)("core/block-editor").insertBlock(n,t,r)},className:"block-editor-button-block-appender"},Object(d.__)(n))};n(54);function Z(e){var t=e.level,n=e.isPressed,a=void 0!==n&&n,r={1:"M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z",2:"M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z",3:"M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z",4:"M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z",5:"M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z",6:"M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z"};return r.hasOwnProperty(t)?React.createElement(m.SVG,{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",isPressed:a},React.createElement(m.Path,{d:r[t]})):null}var X=function(e){var t=e.selectedLevel,n=e.levels,a=void 0===n?[2,3]:n,r=e.onChange,l=e.Icon,c=void 0===l?Z:l;console.log("HeadingLevelToolbar",t);var o=Object(u.useCallback)((function(){return React.createElement(c,{level:t,isPressed:!0})}),[t]);return React.createElement(m.ToolbarGroup,null,React.createElement(m.ToolbarDropdownMenu,{icon:o,label:"Select Heading Size",controls:a.map((function(e){var n=e===t;return{title:Object(d.sprintf)(Object(d.__)("Heading %d"),e),icon:React.createElement(c,{level:e,isPressed:n}),isActive:n,onClick:function(){return r(e)}}}))}))};n(119),n(55);function G(e,t,n,a,r){e===t&&r(Object(v.a)({},n,a))}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return new Promise((function(n){var a={};g()({path:"/wp/v2/".concat(e,"?per_page=").concat(t)}).then((function(t){for(var r=0;r<t.length;r++){var l=t[r].slug.replace("".concat(e.toLowerCase(),"_"),"");a[t[r].id]={id:t[r].id,name:t[r].name,parent:t[r].parent,slug:l}}n(a)}))}))}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slug",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(r){Y(e,t).then((function(e){var t=[];Object.keys(e).forEach((function(a){var r=e[a],l=r[n],c=r.name;void 0!==r.parent&&0!==r.parent&&(c=" -- ".concat(c)),t.push({value:l,label:c})})),!1!==a&&t.sort((function(e,t){return e.label>t.label?1:-1})),r(t)}))}))}function W(e){return new Promise((function(t){Y(e).then((function(e){var n=[],a=Object.keys(e).map((function(t){return e[t]}));a.filter((function(e){return 0===e.parent})).forEach((function(e){var t=a.filter((function(t){return t.parent===e.id})),r=[];t.forEach((function(e){r.push({name:e.name,id:e.id})})),n.push({name:e.name,id:e.id,children:r})})),t(n)}))}))}var J=[{label:"Weekly roundup of all new publications",value:"7c1390ba46"},{label:"Quarterly update from the president",value:"a33430a835"},{label:"--",value:!1},{label:"Global attitudes & trends (twice a month)",value:"9203343b04"},{label:"Internet, science & tech (monthly)",value:"ea87b26abe"},{label:"Daily briefing of media news",value:"1d2638430b"},{label:"Race & ethnicity (monthly)",value:"0e7495c7b2"},{label:"Religion & public life - Weekly newsletter",value:"a7d4f3268f"},{label:"Religion & public life - Daily religion headlines",value:"1a647764b2"},{label:"Social & demographic trends (monthly)",value:"3836f62305"},{label:"Methodological research (quarterly)",value:"6d1e80bbaf"},{label:"U.S. politics & policy (monthly)",value:"fa5fdbc701"},{label:"--",value:!1},{label:"Mini-course - U.S. Immigration",value:"xxx"},{label:"Mini-course - U.S. Census",value:"xxxx"},{label:"Mini-course - Muslims and Islam",value:"xxxxx"}]},46:function(e,t){e.exports=window.lodash},49:function(e,t){e.exports=window.ReactDOM},5:function(e,t){e.exports=window.wp.blockEditor},50:function(e,t){e.exports=regeneratorRuntime},54:function(e,t){e.exports=window.wp.keycodes},55:function(e,t){e.exports=window.wp.mediaUtils},7:function(e,t){e.exports=window.wp.blocks},77:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return b}));var a=n(58),r=n.n(a),l=n(30),c=n.n(l),o=n(80),i=n(5),s=function(e,t,n){0!==t&&!1!==n&&c()({path:"/prc-api/v2/get-art/?postId=".concat(t)}).then((function(t){!1!==t&&void 0!==t[e]&&!1!==n&&n({image:t[e].rawUrl,isChartArt:t[e].chartArt})}))},u=function(e){var t=e.post,n=e.imageSize,a=e.isRefresh,r=void 0!==a&&a;if(console.log("getAttributesFromPost",t),null===t)return{};var l=Object(o.date)("M j, Y",t.date),c={title:t.hasOwnProperty("title")&&t.title.hasOwnProperty("rendered")?t.title.rendered:"",excerpt:t.hasOwnProperty("excerpt")&&t.excerpt.hasOwnProperty("rendered")?t.excerpt.rendered:"",url:t.canonical_url,label:t.hasOwnProperty("label")?t.label:"report",date:l,postId:t.id||t.ID};if(!0!==r&&(c.extra=""),t.art){var i=t.art;c.image=i[n].rawUrl,c.isChartArt=i[n].chartArt}return c},d=function(e){var t=e.setAttributes,n=e.postId,a=void 0!==n&&n,r=e.imageSize,l=void 0===r?"A1":r,o=e.isRefresh,i=void 0!==o&&o;!1!==a&&void 0!==t&&c()({path:"/wp/v2/stub/".concat(a),method:"GET"}).then((function(e){if(!1!==e){var n=u({post:e,imageSize:l,isRefresh:i});t(n)}})).catch((function(e){return console.error(e)}))},m=function(e){var t=e.imageSlot,n=e.imageSize,a=e.enableEmphasis,l=e.enableExcerptBelow,c=e.className,o={bordered:a,"alt-excerpt":l};"disabled"!==t&&(o[t]=!0,o.aligned=!0);var s={className:r()("story item",c,o)};return"disabled"!==t&&""!==n&&(s["data-image-size"]=n),Object(i.useBlockProps)(s)},b=Array.from(Array(19).keys()).filter((function(e){return 17!==e&&0!==e}))},80:function(e,t){e.exports=window.wp.date},89:function(e,t){e.exports=window.wp.coreData},9:function(e,t){e.exports=window.wp.data},958:function(e,t,n){n(17),e.exports=n(993)},993:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(254),l=n(7),c=n(387),o=n(4),i=n(18),s=n(2),u=n(46),d=n(5),m=n(3),b=n(89),p=n(77);var h=function(e){var t=e.attributes,n=e.setAttributes,a=e.context,r=void 0!==a.queryId&&void 0!==a.postId&&void 0!==a.postType&&0!==a.postId&&Number.isInteger(a.postId),l=Object(b.useEntityProp)("root","site","siteId"),c=Object(i.a)(l,1)[0],h=Object(o.useState)(!1),g=Object(i.a)(h,2),f=g[0],v=g[1],E=t.postId,y=t.imageSize,R=t.imageSlot,x=t.enableHeader,w=t.enableExcerpt,O=t.enableExcerptBelow,k=t.enableExtra,j=t.enableBreakingNews,S=t.enableEmphasis,A=t.disableMobileStyles,C=t.enableMeta,_=t.metaTaxonomy,I=Object(s.__)("Story Item Options");return Object(o.useEffect)((function(){p.e.includes(c)||"formats"!==_||(console.log("Doing this",c,_),n({metaTaxonomy:"category"}))}),[c]),React.createElement(o.Fragment,null,React.createElement(d.InspectorControls,null,React.createElement(m.PanelBody,{title:I},React.createElement(m.BaseControl,{help:Object(s.__)("Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).")},React.createElement(m.ToggleControl,{label:C?"Meta Enabled":"Meta Disabled",checked:C,onChange:function(){n({enableMeta:!C})}}),React.createElement(m.ToggleControl,{label:"disabled"!==R?"Image Enabled":"Image Disabled",checked:"disabled"!==R,onChange:function(){n({imageSlot:"disabled"===R?"top":"disabled"})}}),React.createElement(m.ToggleControl,{label:x?"Header Enabled":"Header Disabled",checked:x,onChange:function(){n({enableHeader:!x})}}),React.createElement(m.ToggleControl,{label:w?"Excerpt Enabled":"Excerpt Disabled",checked:w,onChange:function(){n({enableExcerpt:!w})}}),!r&&React.createElement(o.Fragment,null,React.createElement(m.ToggleControl,{label:k?"Extras Enabled":"Extras Disabled",checked:k,onChange:function(){n({enableExtra:!k})}}),React.createElement(m.ToggleControl,{label:j?"Breaking News Enabled":"Breaking News Disabled",checked:j,onChange:function(){!1!==window.prcBreakingNews?n({enableBreakingNews:!j}):(alert("There are no currently active authorized breaking news events. The breaking news toggle will be set back to false."),n({enableBreakingNews:!1}))}}),React.createElement(m.ToggleControl,{label:S?"Emphasis Enabled":"Emphasis Disabled",checked:S,onChange:function(){n({enableEmphasis:!S})}}))),React.createElement(m.CardDivider,null),React.createElement(m.SelectControl,{label:"Select Taxonomy To Display",value:_,options:p.e.includes(c)?[{label:"Formats",value:"formats"},{label:"Research Teams",value:"research-teams"},{label:"Disabled",value:"disabled"}]:[{label:"Category",value:"category"},{label:"Disabled",value:"disabled"}],onChange:function(e){n({metaTaxonomy:e})}}))),React.createElement(d.InspectorAdvancedControls,null,React.createElement(m.ToggleControl,{label:A?"Mobile Styling Disabled":"Mobile Styling Enabled",help:Object(s.__)("If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile."),checked:A,onChange:function(){n({disableMobileStyles:!A})}}),!0===w&&("right"===R||"left"===R)&&React.createElement(o.Fragment,null,React.createElement(m.ToggleControl,{label:O?"Excerpt Will Appear Below Image":"Excerpt Will Appear Normally",help:Object(s.__)("If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image."),checked:O,onChange:function(){n({enableExcerptBelow:!O})}}),React.createElement(m.CardDivider,null)),Object(u.isInteger)(E)&&0!==E&&React.createElement("div",null,React.createElement(m.Button,{isSecondary:!0,isBusy:f,onClick:function(){v(!0),setTimeout((function(){Object(p.b)({postId:E,imageSize:y,isRefresh:!0,setAttributes:n}),v(!1)}),500)},style:{marginBottom:"1em"},text:Object(s.__)("Refresh Post Data")})),React.createElement("div",null,React.createElement(m.Button,{isDestructive:!0,isBusy:f,onClick:function(){v(!0),setTimeout((function(){n({title:"",excerpt:"",extra:"",url:"",label:"",date:"",image:"",postId:0}),v(!1)}),500)},style:{marginBottom:"1em"},text:Object(s.__)("Reset Story Item Block")}))))},g=n(16),f=n(44),v=n(80),E=n(30),y=n.n(E);function R(e){var t=e.searchRecords,n=e.onSelect,a=e.imageSize,r=void 0===a?"A3":a;return t.map((function(e){return React.createElement(w,{item:e,onSelect:n,imageSize:r})}))}function x(e){var t=e.item,n=e.imageSize,a=t.art;if(a&&a[n]){var r=a[n],l=r.rawUrl,c=r.height,o=r.width,i=r.caption;return React.createElement(m.CardMedia,null,React.createElement("img",{src:l,height:c,width:o,alt:i}))}return null}function w(e){var t=e.item,n=e.onSelect,a=e.imageSize,r=void 0===a?"A3":a;if(!t)return null;var l=t.post_title?t.post_title:t.title.rendered,c=t.post_date?t.post_date:t.date,o=t.label,i=t.canonical_url;return React.createElement(m.Card,{onClick:function(){return n(t)},size:"small",style:{cursor:"pointer",":hover":{"background-color":"#f3f4f5"}}},React.createElement(m.CardBody,{style:{display:"flex"}},React.createElement("div",{style:{width:"35%",maxWidth:"200px",paddingRight:"1em",paddingTop:"0.5em"}},React.createElement(x,{item:t,imageSize:r})),React.createElement("div",null,React.createElement("div",{style:{fontSize:"0.8em",color:"#666"}},"".concat(o," | ").concat(Object(v.date)("M j, Y",c))),React.createElement("strong",null,l),React.createElement("div",{style:{fontSize:"0.8em",fontStyle:"italic",color:"#666",lineHeight:"1.5em"}},i))))}function O(e){var t=e.attributes,n=e.setAttributes,a=e.onSelection,r=t.imageSize,l=t.url,c=Object(b.useEntityProp)("root","site","siteId"),u=1===Object(i.a)(c,1)[0]?"stub":"post",d=Object(o.useState)(!!l),h=Object(i.a)(d,2),v=h[0],E=h[1],x=Object(o.useState)(l),O=Object(i.a)(x,2),k=O[0],j=O[1],S=Object(f.i)(k,500),A=Object(o.useMemo)((function(){return!(!l.match(/^(http|https):\/\//)&&!S.match(/^(http|https):\/\//))}),[S,l]),C=Object(o.useState)(null),_=Object(i.a)(C,2),I=_[0],N=_[1],T=!!S.length,P=Object(b.useEntityRecords)("postType",u,{per_page:10,search:T&&!A?S:"",context:"view"}),H=P.records,M=P.isResolving,z=!(v||A||!H)&&0<H.length,B=!v&&A&&null!==I,L=!v&&!z&&!B,D=function(e){var t=Object(p.a)({post:e,imageSize:r,isRefresh:!1});n(t),"function"==typeof a&&a()};return Object(o.useEffect)((function(){var e;A&&(E(!0),(e=S,new Promise((function(t,n){y()({path:"/prc-api/v2/stub/get-post-by-url",method:"POST",data:{url:e}}).then((function(e){"object"!==Object(g.a)(e)&&n(new Error("post is not an object")),t(e)})).catch((function(e){return n(e)}))}))).then((function(e){N(e),E(!1)})).catch((function(e){console.error("getPostByUrl error",e),N(null),E(!1)})))}),[S,A]),Object(o.useEffect)((function(){E(M)}),[M]),React.createElement(m.TabbableContainer,{onNavigate:function(e,t){return console.log("onNavigate:",t)}},React.createElement(m.KeyboardShortcuts,{shortcuts:{enter:function(){A&&(n({url:S}),"function"==typeof a&&a())}}},React.createElement(m.SearchControl,{tabIndex:"0",value:k,onChange:function(e){return j(e)},placeholder:"Climate Change...",autoComplete:"off"})),T&&React.createElement(o.Fragment,null,v&&React.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",color:"#666"}},React.createElement("span",null,"Loading... "),React.createElement(m.Spinner,null)),L&&React.createElement("div",{style:{textAlign:"center",color:"#666",paddingTop:"1em"}},React.createElement("span",null,Object(s.__)("Nothing found.","prc-block-library")),A&&React.createElement("div",null,React.createElement("span",null,Object(s.__)("Press enter to change the URL.","prc-block-library")))),B&&React.createElement("div",null,React.createElement(w,{item:I,onSelect:D,imageSize:r}),React.createElement("div",{style:{textAlign:"center",color:"#666",paddingTop:"1em"}},React.createElement("span",null,Object(s.__)("Press enter to insert post.","prc-block-library")))),z&&!A&&React.createElement(R,{searchRecords:H,onSelect:D,imageSize:r})))}function k(e){var t=e.attributes,n=e.setAttributes,a=Object(b.useEntityProp)("root","site","siteId"),r=1===Object(i.a)(a,1)[0]?"stub":"post",l=Object(d.useBlockProps)();return React.createElement("div",l,React.createElement(m.Placeholder,{icon:"admin-post",label:Object(s.__)(" Story Item","prc-block-library"),isColumnLayout:!0,instructions:Object(s.__)("Search for a ".concat(r," or paste url here"),"prc-block-library")},React.createElement(O,{attributes:t,setAttributes:n}),React.createElement(m.Button,{isLink:!0,onClick:function(){n({postId:0})},text:Object(s.__)("Skip"),style:{paddingLeft:"9px",marginTop:"10px"}})))}var j=n(1093),S=n(1094),A=n(1095),C=n(1096),_=n(1097),I=n(1098);function N(e){var t=e.svgPath,n=void 0!==t&&t,a=e.isPressed,r=void 0!==a&&a;return!1===n?null:React.createElement(m.SVG,{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",isPressed:r},React.createElement(m.Path,{d:n}))}function T(e){var t=e.selected;return"right"===t?j.a:"left"===t?S.a:"top"===t?A.a:"bottom"===t?C.a:"disabled"===t?_.a:I.a}function P(e){var t=e.selected,n=e.currentlyActive;return React.createElement(N,{svgPath:{A1:"M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z",A2:"M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z",A3:"M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z",A4:"M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z",XL:"M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z"}[t],isPressed:t===n})}function H(e){var t=e.selected,n=e.currentlyActive;return React.createElement(N,{svgPath:{1:"M15.81,15.63V18H8.19V6H11v9.63Z",2:"M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z",3:"M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z"}[t],isPressed:t===n})}function M(e){var t=e.level,n=e.isPressed;return React.createElement(H,{selected:t,currentlyActive:n})}var z=function(e){var t=e.attributes,n=e.setAttributes,a=e.context,r=t.postId,l=t.imageSize,c=t.imageSlot,u=t.headerSize,h=t.isChartArt,g=Object(b.useEntityProp)("root","site","siteId"),v=1===Object(i.a)(g,1)[0]?"stub":"post",E=Object(o.useState)(!1),y=Object(i.a)(E,2),R=y[0],x=y[1],w=void 0!==a["core/column/gridSpan"]&&a["core/column/gridSpan"],k=void 0!==a.queryId&&void 0!==a.postId&&void 0!==a.postType&&0!==a.postId&&Number.isInteger(a.postId),j=function(e){n({imageSize:e}),Object(p.c)(e,r,n)},S=Object(o.useCallback)((function(){return React.createElement(T,{selected:c})}),[c]),A=Object(o.useCallback)((function(){return React.createElement(P,{selected:l,currentlyActive:l})}),[l]);return React.createElement(d.BlockControls,null,!k&&React.createElement(m.ToolbarGroup,null,React.createElement(m.ToolbarButton,{"aria-expanded":R,"aria-haspopup":"true",label:Object(s.__)("Search for a ".concat(v," or paste url here"),"prc-block-library"),icon:"admin-links",onClick:function(){return x(!0)},showTooltip:!0}),!0===R&&React.createElement(m.Modal,{title:Object(s.__)("Search for a ".concat(v," or paste url here"),"prc-block-library"),onRequestClose:function(){return x(!1)},shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},React.createElement("div",{style:{width:"100%",minWidth:"340px",maxWidth:"640px",margin:"0 auto"}},React.createElement(O,{attributes:t,setAttributes:n,onSelection:function(){return x(!1)}})))),React.createElement(f.d,{selectedLevel:u,levels:[1,2,3],onChange:function(e){return n({headerSize:e})},Icon:M}),React.createElement(m.ToolbarGroup,null,React.createElement(m.ToolbarDropdownMenu,{icon:S,label:"Select Image Slot",controls:[{title:"Top",icon:React.createElement(T,{selected:"top"}),isActive:"top"===c,onClick:function(){n({imageSlot:"top"})}},{title:"Bottom",icon:React.createElement(T,{selected:"bottom"}),isActive:"bottom"===c,onClick:function(){n({imageSlot:"bottom"})}},{title:"Left",icon:React.createElement(T,{selected:"left"}),isActive:"left"===c,isDisabled:!1!==w&&w<6,onClick:function(){n({imageSlot:"left"})}},{title:"Right",icon:React.createElement(T,{selected:"right"}),isActive:"right"===c,isDisabled:!1!==w&&w<6,onClick:function(){n({imageSlot:"right"})}},{title:"Disabled",icon:React.createElement(T,{selected:"disabled"}),isActive:"disabled"===c,onClick:function(){n({imageSlot:"disabled"})}}]}),"disabled"!==c&&React.createElement(o.Fragment,null,React.createElement(m.ToolbarDropdownMenu,{icon:A,label:"Select Image Size",controls:[{title:"A1",icon:React.createElement(P,{selected:"A1",currentlyActive:l}),isActive:"A1"===l,onClick:function(){return j("A1")}},{title:"A2",icon:React.createElement(P,{selected:"A2",currentlyActive:l}),isActive:"A2"===l,onClick:function(){return j("A2")}},{title:"A3",icon:React.createElement(P,{selected:"A3",currentlyActive:l}),isActive:"A3"===l,onClick:function(){return j("A3")}},{title:"A4",icon:React.createElement(P,{selected:"A4",currentlyActive:l}),isActive:"A4"===l,onClick:function(){return j("A4")}},{title:"XL",icon:React.createElement(P,{selected:"XL",currentlyActive:l}),isActive:"XL"===l,onClick:function(){return j("XL")}}]}),React.createElement(m.ToolbarButton,{icon:"chart-pie",isPressed:h,label:Object(s.__)("Enable Chart Art"),onClick:function(){n({isChartArt:!h})}}))))};function B(e){var t=e.attributes,n=e.setAttributes,a=e.context;return React.createElement(o.Fragment,null,React.createElement(z,{attributes:t,setAttributes:n,context:a}),React.createElement(h,{attributes:t,setAttributes:n,context:a}))}var L=n(58),D=n.n(L),V=n(418),F=n(31),U=["image"],Z={default:"564,317",small:"690,388",hidpi:"1128,634",smallHidpi:"1380,776"},X={default:"268,151",small:"690,388",hidpi:"536,301",smallHidpi:"1380,776"},G={default:"194,110",small:"148,84",hidpi:"388,220",smallHidpi:"296,168"},Y={default:"268,151",small:"690,388",hidpi:"536,302",smallHidpi:"1380,776"},q={default:"720,405",small:"690,388",hidpi:"1440,810",smallHidpi:"1380,776"};function W(e){var t=e.img,n=e.size,a=e.onClick,r=void 0!==a&&a,l=function(e){if(""===t||!1===t)return t;var a={resize:Z[e]};return"A2"===n?a={resize:X[e]}:"A3"===n?a={resize:G[e]}:"A4"===n?a={resize:Y[e]}:"XL"===n&&(a={resize:q[e]}),Object(F.addQueryArgs)(t,a)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:767;return[{srcSet:"".concat(l("default")," 1x, ").concat(l("hidpi")," 2x"),media:"(min-width: ".concat(e,"px)")},{srcSet:"".concat(l("small")," 1x, ").concat(l("smallHidpi")," 2x"),media:"(max-width: ".concat(e,"px)")}]};return!1!==r?React.createElement("button",{type:"button",onClick:r,style:{padding:0,border:"none",cursor:"pointer"}},React.createElement(V.a,{sources:c(),alt:"Click to edit"})):React.createElement(V.a,{sources:c()})}function J(e){var t=e.attributes,n=e.setAttributes,a=t.image,r=t.imageSlot,l=t.imageSize,c=t.isChartArt;if("disabled"===r)return React.createElement(o.Fragment,null);var i,u,b,p,h;return React.createElement("div",{className:(i=!1,u=!1,b=!1,p=!1,h=!1,!1!==r&&("XL"===l?i=!0:"A1"===l?u=!0:"A2"===l?b=!0:"A3"===l?p=!0:"A4"===l&&(h=!0)),D()({image:!0,XL:i,A1:u,A2:b,A3:p,A4:h,bordered:c}))},React.createElement(d.MediaUploadCheck,null,React.createElement(d.MediaUpload,{onSelect:function(e){return n({image:e.url})},allowedTypes:U,render:function(e){var t=e.open;return React.createElement(o.Fragment,null,(void 0===a||0===a.length)&&React.createElement(m.Placeholder,{className:"block-editor-media-placeholder",withIllustration:!0,label:Object(s.__)("Image"),instructions:Object(s.__)("Upload an image file, pick one from the media library, or add one with a URL."),onClick:t}),void 0!==a&&0<a.length&&React.createElement(W,{img:a,size:l,onClick:t}))}})))}var Q=function(e){var t=e.attributes,n=e.setAttributes,a=t.excerpt,r=t.enableHeader;if(!t.enableExcerpt)return React.createElement(o.Fragment,null);var l=Object(o.useMemo)((function(){return(e=["In recent years, several new options have emerged in the social media universe, many of which explicitly present themselves as alternatives to more established social media platforms. Free speech ideals and heated political themes prevail on these sites, which draw praise from their users and skepticism from other Americans.","Elections in Italy and Sweden have underscored the growing electoral strength that populist parties have displayed in Europe in recent years.","In less than a decade, the share of Americans who go “cashless” in a typical week has increased by double digits.","72% of U.S. adults say that, on the issues that matter to them, their side in politics has been losing more often than winning.","56% of U.S. adults say that oil executives should be tried for crimes against humanity for their role in climate change."])[Math.floor(Math.random()*e.length)];var e}),[]),c=D()("description",{"sans-serif":!r});return React.createElement(d.RichText,{tagName:"div",value:a,onChange:function(e){return n({excerpt:e})},placeholder:l,multiline:"p",className:c})};var K=function(e){var t=e.attributes,n=e.setAttributes,a=t.extra,r=t.enableExtra,l=t.enableBreakingNews;return React.createElement(o.Fragment,null,!0===r&&React.createElement(d.RichText,{tagName:"ul",value:a,onChange:function(e){return n({extra:e})},placeholder:a,multiline:"li",className:"extra"}),!0===l&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))};var $=function(e){var t=e.attributes,n=e.setAttributes,a=t.title,r=t.headerSize,l=t.enableExcerpt;if(!t.enableHeader)return React.createElement(o.Fragment,null);var c=Object(o.useMemo)((function(){return(e=["The Role of Alternative Social Media in the News and Information Environment","How Global Public Opinion of China Has Shifted in the Xi Era","Most Latinos Say Democrats Care About Them and Work Hard for Their Vote, Far Fewer Say So of GOP","More Americans are joining the ‘cashless’ economy","Americans Anxious about Climate Change"])[Math.floor(Math.random()*e.length)];var e}),[]),i=D()("header",{large:1===r,medium:2===r,small:3===r,light:!l});return React.createElement(d.RichText,{tagName:"h".concat(r),value:a,onChange:function(e){return n({title:e})},allowedFormats:["core/italic"],placeholder:c,multiline:"br",className:i})};var ee=function(e){var t=e.attributes,n=e.setAttributes,a=t.date,r=t.label,l=t.enableMeta,c=t.metaTaxonomy,s=Object(o.useState)(!1),u=Object(i.a)(s,2),d=u[0],p=u[1];if(!l)return React.createElement(o.Fragment,null);var h=Object(b.useEntityRecords)("taxonomy",c,{per_page:-1,hide_empty:!1,context:"view"}),g=h.records,f=h.isResolving,E=!!g&&0<g.length,y=void 0!==r?Object(F.cleanForSlug)(r.toLowerCase()):"report",R="short-read"===y?"fact-tank":y;return React.createElement("div",{className:"meta",style:{display:"flex",alignItems:"center"}},"disabled"!==c&&React.createElement(o.Fragment,null,React.createElement("div",null,f&&React.createElement(m.Spinner,null),!f&&E&&React.createElement(m.SelectControl,{value:R,options:g.map((function(e){return{label:e.name,value:e.slug}})),onChange:function(e){n({label:e})},style:{marginBottom:"0px"}})),React.createElement("div",null," | ")),React.createElement("div",null,React.createElement(m.Button,{variant:"link",onClick:function(){p(!d)},style:{padding:"0px"}},Object(v.date)("M j, Y",a)),d&&React.createElement(m.Popover,{position:"bottom center",onClose:function(){return p(!1)}},React.createElement("div",{style:{padding:"1em"}},React.createElement(m.DatePicker,{currentDate:a,onChange:function(e){return n({date:Object(v.date)("M j, Y",e)})}})))))},te={A1:[1128,634],A2:[526,301],A3:[388,220],A4:[536,302],XL:[1440,810]};var ne=function(e){var t=e.attributes,n=t.title,a=t.excerpt,r=t.extra,l=t.label,c=t.date,o=t.image,i=t.imageSlot,s=t.imageSize,u=t.isChartArt,b=t.headerSize,h=t.enableHeader,g=t.enableExcerpt,f=t.enableExtra,E=t.enableBreakingNews,y=t.enableMeta,R=Object(p.f)(t),x=D()("header",{large:1===b,medium:2===b,small:3===b,light:!1}),w=D()("image",{bordered:u,XL:"XL"===s,A4:"A4"===s,A3:"A3"===s,A2:"A2"===s,A1:"A1"===s}),O=D()("description"),k=void 0!==i&&"disabled"!==i&&void 0!==s&&""!==s;return React.createElement("article",R,y&&React.createElement("div",{className:"meta"},React.createElement("span",{className:"label"},l)," |"," ",React.createElement("span",{className:"date"},Object(v.date)("M j, Y",c))),k&&React.createElement("div",{className:"".concat(w)},(void 0===o||0===o.length)&&React.createElement(m.Placeholder,{className:"block-editor-media-placeholder",withIllustration:!0}),void 0!==o&&0<o.length&&React.createElement("picture",null,React.createElement("img",{srcSet:o,width:te[s][0],height:te[s][1]}))),h&&React.createElement(d.RichText.Content,{tagName:"h".concat(b),value:n,className:x}),g&&React.createElement(d.RichText.Content,{tagName:"div",value:a,multiline:"p",className:O}),f&&React.createElement(d.RichText.Content,{tagName:"ul",value:r,className:"extra"}),!0===E&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))},ae={A1:[1128,634],A2:[526,301],A3:[388,220],A4:[536,302],XL:[1440,810]};function re(e){var t=e.attributes,n=e.clientId,a=e.context,r=a.postId,l=a.postType,c=(a.queryId,Object(b.useEntityRecord)("postType",l,r)),i=c.record,s=c.isResolving,u=i.title,p=i.excerpt,h=i.label,g=i.date,f=i.art,E=t.imageSlot,y=t.imageSize,R=t.headerSize,x=t.enableHeader,w=t.enableExcerpt,O=t.enableMeta,k=t.className,j=D()("header",{large:1===R,medium:2===R,small:3===R,light:!1}),S=D()("image",{bordered:f&&f[y]&&f[y].chartArt,XL:"XL"===y,A4:"A4"===y,A3:"A3"===y,A2:"A2"===y,A1:"A1"===y}),A=D()("description");console.log("ContextPreview",{attributes:t,clientId:n,context:a,record:i,isResolving:s});var C=f&&f[y]&&f[y].url&&void 0!==E&&"disabled"!==E&&void 0!==y&&""!==y,_={};C&&(_[E]=!0,_.aligned=!0);var I={className:D()("story item",k,_)};console.log("blockPropsArgs",I),C&&(I["data-image-size"]=y);var N=Object(d.useBlockProps)(I);return console.log("blockProps",N),Object(o.useEffect)((function(){i&&console.log("record",i)}),[i]),s?React.createElement("div",N,React.createElement("span",null,"Loading... ")," ",React.createElement(m.Spinner,null)):React.createElement("article",N,O&&React.createElement("div",{className:"meta"},React.createElement("span",{className:"label"},h)," |"," ",React.createElement("span",{className:"date"},g?Object(v.date)("M j, Y",g):"")),C&&React.createElement("div",{className:"".concat(S)},(void 0===f||!1===f)&&React.createElement(m.Placeholder,{className:"block-editor-media-placeholder",withIllustration:!0}),void 0!==f&&!1!==f&&React.createElement("picture",null,React.createElement("img",{srcSet:f[y].url,width:ae[y][0],height:ae[y][1],alt:""}))),x&&React.createElement(d.RichText.Content,{tagName:"h".concat(R),value:u.rendered,className:j}),w&&React.createElement(d.RichText.Content,{tagName:"div",value:p.rendered,multiline:"p",className:A}))}var le=function(e){var t=e.attributes,n=e.setAttributes,a=e.isSelected,r=e.clientId,l=e.context;if(void 0!==l.queryId&&void 0!==l.postId&&void 0!==l.postType&&0!==l.postId&&Number.isInteger(l.postId))return React.createElement(o.Fragment,null,React.createElement(B,{attributes:t,setAttributes:n,context:l}),React.createElement(re,{attributes:t,context:l}));var c=t.postId,i=t.isPreview;if(void 0===c)return React.createElement(k,{attributes:t,setAttributes:n,clientId:r});if(!a||i)return React.createElement(ne,{attributes:t,context:l});var s=Object(p.f)(t);return React.createElement(o.Fragment,null,React.createElement("article",s,React.createElement(J,{attributes:t,setAttributes:n}),React.createElement(ee,{attributes:t,setAttributes:n}),React.createElement($,{attributes:t,setAttributes:n}),React.createElement(Q,{attributes:t,setAttributes:n}),React.createElement(K,{attributes:t,setAttributes:n})),React.createElement(B,{attributes:t,setAttributes:n,context:l}))},ce=function(e){var t=e.attributes,n=t.excerpt,a=t.extra;return React.createElement(o.Fragment,null,n&&React.createElement(d.RichText.Content,{className:"description",tagName:"div",value:n}),a&&React.createElement(d.RichText.Content,{className:"extra",tagName:"ul",value:a}))},oe=[{name:"story-item-default",isDefault:!0,title:Object(s.__)("Story Item"),excerpt:Object(s.__)("Default story item layout: top aligned A1 image."),attributes:{imageSlot:"top",imageSize:"A1"}},{name:"story-item-pub-listing",title:Object(s.__)("Pub Listing Story Item"),excerpt:Object(s.__)("Left algined A3 image (right aligned A3 on mobile)."),attributes:{imageSlot:"left",imageSize:"A3"}},{name:"story-item-slim",title:Object(s.__)("Story Item Slim"),excerpt:Object(s.__)("No excerpt, no image."),attributes:{imageSlot:"disabled",enableExcerpt:!1}}];function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=c.name,de={example:{attributes:{title:"Ultricies Ipsum Nibh Egestas Purus",excerpt:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>",label:"Report",date:r().format("MM-DD-YYYY"),image:"https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg",imageSlot:"top",imageSize:"A2",isPreview:!0}},variations:oe,supports:{color:{text:!0,background:!1},typography:{fontSize:!0}},__experimentalLabel:function(e){return e.title||"Story Item"},edit:le,save:ce};Object(l.registerBlockType)(ue,se(se({},c),de))}},[[958,0,1,78]]]);
//# sourceMappingURL=story-item-554fac3d.js.map