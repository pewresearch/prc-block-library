{"version":3,"sources":["webpack:///external \"React\"","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external \"moment\"","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"keycodes\"]","webpack:///./src/popular-listing/edit.js","webpack:///./src/popular-listing/save.js","webpack:///./src/popular-listing/index.js","webpack:///external [\"wp\",\"blocks\"]"],"names":["module","exports","window","moment","edit","attributes","setAttributes","isSelected","clientId","title","link","postId","blockProps","blockIndexAttr","enableNumber","useBlockProps","useSelect","select","blockIndexID","parentBlockId","getBlockRootClientId","length","blockIndex","numberEnabled","getBlock","name","getBlockIndex","useEffect","class","className","href","style","padding","type","subType","onChange","obj","hasOwnProperty","url","id","border","tagName","value","t","placeholder","keepPlaceholderOnFocus","fontFamily","fontWeight","fontSize","color","lineHeight","save","metadata","settings","__","description","registerBlockType"],"mappings":";;;;;;;;;;;;;;;;;sHAAcA,EAAOC,QAAUC,OAAc,O,iBCA/BF,EAAOC,QAAUC,OAAW,GAAQ,M,gBCApCF,EAAOC,QAAUC,OAAW,GAAQ,M,+TCApCF,EAAOC,QAAUC,OAAW,GAAc,Y,iBCA1CF,EAAOC,QAAUC,OAAW,GAAY,U,gBCAxCF,EAAOC,QAAUC,OAAW,GAAW,S,iBCAvCF,EAAOC,QAAUC,OAAW,GAAO,K,iBCAjDF,EAAOC,QAAUE,Q,gBCAHH,EAAOC,QAAUC,OAAW,GAAe,a,iBCA3CF,EAAOC,QAAUC,OAAiB,U,iBCAlCF,EAAOC,QAAUC,OAAW,GAAY,U,6JCyIvCE,G,KAjHF,SAAC,GAAyD,IAAvDC,EAAsD,EAAtDA,WAAYC,EAA0C,EAA1CA,cAAeC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,SAE3CC,EAAsDJ,EAAtDI,MAAOC,EAA+CL,EAA/CK,KAAMC,EAAyCN,EAAzCM,OACfC,GADwDP,EAAjCQ,eAAiCR,EAAjBS,aAC1BC,2BAEnB,EAAsCC,qBAClC,SAAAC,GACI,IAWIC,EAXEC,EAAgBF,EAAO,qBAAqBG,qBAC9CZ,GAGJ,OAAI,MAAQW,GAA0C,iBAAlBA,GAA8B,IAAMA,EAAcE,OAC3E,CACHC,WAAY,KACZC,eAAe,IASE,eAHLN,EAAO,qBAAqBO,SAASL,GAGzCM,OAEZP,EAAeD,EAAO,qBAAqBS,cAAclB,EAAUW,IAIhE,CACHG,WAAYJ,EACZK,eAAe,MAGvB,CAACf,IA7BGc,EAAR,EAAQA,WAAYC,EAApB,EAAoBA,cA2CpB,OAXAI,qBAAU,WACNrB,EAAc,CAAEO,eAAgBS,IAG5BhB,EADiB,GAAjBiB,EACc,CAAET,cAAc,GAEhB,CAAEA,cAAc,MAGnC,CAACQ,KAEA,IAASf,GAAce,GAAc,EAGjC,0BAASV,EACL,2BAAKgB,MAAM,QACNL,GACG,4BAAMM,UAAU,cACXP,EAAa,GAGtB,0BAAIO,UAAU,YACV,yBAAGC,KAAMpB,GAAT,IAAiBD,OAQjC,IAASF,EACF,2CAASK,EAAT,CAAqBmB,MAAO,CAAEC,QAAS,SAAUvB,GAKxD,0BAASG,EACL,oBAAC,IAAD,CACIqB,KAAK,OACLC,QAAQ,OACRC,SAAU,SAAAC,GACFA,EAAIC,eAAe,OACnB/B,EAAc,CAAEG,MAAO2B,EAAI3B,MAAOC,KAAM0B,EAAIE,IAAK3B,OAAQyB,EAAIG,QAKxE5B,GACG,+BAASkB,UAAU,qBAAqBE,MAAO,CAAES,OAAQ,mBACrD,2BAAKX,UAAU,WACX,2BAAKA,UAAU,sBACX,yBAAGC,KAAMpB,GACL,oBAAC,WAAD,CACI+B,QAAQ,IACRC,MAAOjC,EACP0B,SAAU,SAAAQ,GAAC,OAAIrC,EAAc,CAAEG,MAAOkC,KACtCC,YAAY,kBACZC,wBAAsB,EACtBd,MAAO,CACHe,WAAY,QACZC,WAAY,MACZC,SAAU,OACVC,MAAO,UACPC,WAAY,iBC7GrCC,EATF,SAAC,GAAoB,IAAlB9C,EAAiB,EAAjBA,WACsBA,EAA1BI,MAA0BJ,EAAnBQ,eACf,OACI,oBAAC,WAAD,O,ykBCMR,IAAQY,EAAS2B,EAAT3B,KAEF4B,EAAW,CACb5C,MAAO6C,aAAG,uBACVC,YAAa,wCACbnD,OACA+C,QAGJK,4BAAkB/B,EAAD,OAAY2B,GAAaC,K,gBCxB5BrD,EAAOC,QAAUC,OAAW,GAAU,S","file":"blocks/popular-listing-bbb641c2.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","module.exports = moment;","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","/**\n * External Dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress Dependencies\n */\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n    useInnerBlocksProps,\n    useBlockProps,\n} from '@wordpress/block-editor';\nimport { WPObjectSearchField } from '@pewresearch/app-components';\nimport { Fragment, useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { RichText } from '@wordpress/block-editor';\nimport {\n    Flex,\n    FlexBlock,\n    FlexItem,\n} from '@wordpress/components';\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId }) => {\n\n    const { title, link, postId, blockIndexAttr, enableNumber } = attributes;\n    const blockProps = useBlockProps();\n\n    const { blockIndex, numberEnabled } = useSelect(\n        select => {\n            const parentBlockId = select('core/block-editor').getBlockRootClientId(\n                clientId,\n            );\n\n            if (null == parentBlockId || typeof parentBlockId === 'string' && 0 === parentBlockId.length) {\n                return {\n                    blockIndex: null,\n                    numberEnabled: false\n                };\n            }\n\n            let blockIndexID;\n\n            const parentBlock = select('core/block-editor').getBlock(parentBlockId);\n\n\n            if (parentBlock.name === 'core/group') {\n                //get the block index for this block\n                blockIndexID = select('core/block-editor').getBlockIndex(clientId, parentBlockId)\n            }\n\n            // Set your attribute with the index number here.\n            return {\n                blockIndex: blockIndexID,\n                numberEnabled: true\n            };\n        },\n        [clientId],\n    );\n\n    useEffect(() => {\n        setAttributes({ blockIndexAttr: blockIndex })\n\n        if (numberEnabled == true) {\n            setAttributes({ enableNumber: true })\n        } else {\n            setAttributes({ enableNumber: false })\n        }\n\n    }, [blockIndex])\n\n    if (true !== isSelected && blockIndex >= 0) {\n        return (\n\n            <div {...blockProps}>\n                <div class=\"main\">\n                    {numberEnabled && (\n                        <span className=\"big-number\">\n                            {blockIndex + 1}\n                        </span >\n                    )}\n                    <h2 className=\"my-class\">\n                        <a href={link}> {title}</a>\n                    </h2>\n                </div>\n            </div>\n        )\n    }\n\n\n    if (true !== isSelected) {\n        return <div {...blockProps} style={{ padding: '5px' }}>{title}</div>\n    }\n\n\n    return (\n        <div {...blockProps} >\n            <WPObjectSearchField\n                type='post'\n                subType='stub'\n                onChange={obj => {\n                    if (obj.hasOwnProperty('id')) {\n                        setAttributes({ title: obj.title, link: obj.url, postId: obj.id })\n                    }\n                }}\n            />\n\n            {postId && (\n                <article className=\"item story stacked\" style={{ border: \"2px solid gray\" }}>\n                    <div className=\"content\">\n                        <div className=\"header small light\">\n                            <a href={link}>\n                                <RichText\n                                    tagName=\"p\"\n                                    value={title}\n                                    onChange={t => setAttributes({ title: t })}\n                                    placeholder=\"How we did this\"\n                                    keepPlaceholderOnFocus\n                                    style={{\n                                        fontFamily: 'Abril',\n                                        fontWeight: '400',\n                                        fontSize: '18px',\n                                        color: '#2a2a2a',\n                                        lineHeight: '128%',\n                                    }}\n                                />\n                            </a>\n                        </div>\n                    </div>\n                </article>\n            )}\n\n        </div >\n    );\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment, useEffect } from '@wordpress/element';\n\nconst save = ({ attributes }) => {\n    const { title, blockIndexAttr } = attributes;\n    return (\n        <Fragment>\n            {/* {blockIndexAttr} {title && (<RichText.Content tagName=\"p\" value={title} />)} */}\n        </Fragment>\n    )\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n    title: __('PRC Popular Listing'),\n    description: 'Displays the \"Most Popular\" Listing .',\n    edit,\n    save,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());"],"sourceRoot":""}