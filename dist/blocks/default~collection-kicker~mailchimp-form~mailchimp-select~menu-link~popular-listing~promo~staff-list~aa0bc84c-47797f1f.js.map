{"version":3,"sources":["webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-debounce.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/hooks/use-fetch.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-search/search-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/content-picker/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/list-store/reducer.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/link-toolbar-button/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/caret-heading-link/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/block-inserter-button/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/heading-level-toolbar/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/media-dropzone/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/components/url-search-field/index.jsx","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/functions/index.js","webpack:////Users/srubenstein/dev/pewresearch-org/private/_shared/mailchimp/index.js"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","styled","Button","DragHandle","sortableHandle","style","marginRight","cursor","flexShrink","width","height","xmlns","viewBox","role","aria-hidden","focusable","d","Wrapper","PickedItem","item","isOrderable","handleItemDelete","mode","type","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","id","result","console","log","newItem","title","rendered","name","url","link","uuid","border","paddingTop","paddingBottom","paddingLeft","className","decodeEntities","filterURLForDisplay","safeDecodeURI","onClick","aria-label","__","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","map","index","itemKey","length","key","sortIndex","totalItems","LinkToolbarButton","onChange","query","subtype","isLinkOpen","setIsLinkOpen","aria-expanded","aria-haspopup","label","icon","showTooltip","position","onClose","showInitialSuggestions","suggestionsQuery","p","settings","CaretHeadingLink","heading","headingSize","disableIcon","setAttributes","tagName","h","placeholder","formattingControls","keepPlaceholderOnFocus","size","marginLeft","BlockInserterButton","blockName","clientId","attributes","tooltipPosition","currentBlock","getBlock","innerBlocks","nextIndex","newBlock","createBlock","dispatch","insertBlock","HeadingLevelIcon","level","isPressed","levelToPath","1","2","3","4","5","6","hasOwnProperty","HeadingLevelToolbar","selectedLevel","levels","Icon","MemoizedHeadingLevelIcon","useCallback","controls","targetLevel","isActive","sprintf","MediaDropZone","SearchRecords","searchRecords","onSelect","imageSize","disableImage","Image","art","rawUrl","caption","src","alt","SearchItem","post_title","date","post_date","canonicalUrl","canonical_url","postAttrs","opts","post","isRefresh","formatDate","storyItem","excerpt","postId","ID","extra","image","isChartArt","chartArt","getAttributesFromPost","display","maxWidth","paddingRight","fontSize","color","fontStyle","lineHeight","URLSearchField","onKeyEnter","useEntityProp","postType","isLoading","toggleLoading","searchInput","setSearchInput","searchString","searchStringIsUrl","useMemo","undefined","match","foundObject","setFoundObject","hasSearchString","useEntityRecords","per_page","post_parent","search","context","records","isResolving","hasSearchRecords","hasFoundObject","hasNothingFound","newUrl","Promise","resolve","reject","apiFetch","path","method","data","then","Error","catch","err","error","onNavigate","elm","shortcuts","enter","tabIndex","keyword","autoComplete","justifyContent","alignItems","textAlign","URLSearchToolbar","isModalOpen","setIsModalOpen","onRequestClose","shouldCloseOnClickOutside","shouldCloseOnEsc","minWidth","margin","ifMatchSetAttribute","needle","haystack","attrKey","attrValue","getTerms","taxonomy","perPage","terms","slug","replace","toLowerCase","parent","getTermsAsOptions","termValue","sortByLabel","labelOptions","Object","keys","forEach","termObj","push","sort","a","b","getTermsAsTree","treeData","convertedData","i","filter","e","c","f","children","cT","mailChimpInterests"],"mappings":"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","file":"blocks/default~collection-kicker~mailchimp-form~mailchimp-select~menu-link~popular-listing~promo~staff-list~aa0bc84c-47797f1f.js","sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Watches an inputValue and returns a debounced version of it after set delay.\n * Usage: const debouncedValue = useDebounce('a string being typed by a user...', 500);\n * @param {*} inputValue\n * @param {*} delay\n * @returns value after delay\n */\nconst useDebounce = (value, delay) => {\n\t// State and setters for debounced value\n\tconst [debouncedValue, setDebouncedValue] = useState(value);\n\tuseEffect(\n\t\t() => {\n\t\t\t// Update debounced value after delay\n\t\t\tconst handler = setTimeout(() => {\n\t\t\t\tsetDebouncedValue(value);\n\t\t\t}, delay);\n\t\t\t// Cancel the timeout if value changes (also on delay change or unmount)\n\t\t\t// This is how we prevent debounced value from updating if value is changed ...\n\t\t\t// .. within the delay period. Timeout gets cleared and restarted.\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(handler);\n\t\t\t};\n\t\t},\n\t\t[value, delay], // Only re-call effect if value or delay changes\n\t);\n\treturn debouncedValue;\n}\n\nexport default useDebounce;\n","import { useEffect, useRef, useReducer } from '@wordpress/element';\n\n/**\n * A react hook to fetch data from a url and store status, errors, and date in state.\n * Usage: const { status, data, error } = useFetch(url);\n * Adapted from https://www.smashingmagazine.com/2020/07/custom-react-hook-fetch-cache-data/\n * Example application: https://codesandbox.io/s/usefetch-demo-clt9o\n * @param {*} url\n * @returns {object} status, data, and error\n */\nconst useFetch = (url) => {\n\tconst cache = useRef({});\n\n\t// initial state, no preloaded data\n\tconst initialState = {\n\t\tstatus: 'idle',\n\t\terror: null,\n\t\tdata: [],\n\t};\n\n\t// reducer function to update state depending on current status of fetch\n\tconst reducer = (state, action) => {\n\t\tswitch (action.type) {\n\t\t\tcase 'FETCHING':\n\t\t\t\treturn { ...initialState, status: 'fetching' };\n\t\t\tcase 'FETCHED':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'fetched',\n\t\t\t\t\tdata: action.payload,\n\t\t\t\t};\n\t\t\tcase 'FETCH_ERROR':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\terror: action.payload,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t};\n\t// useReducer instead of useState to set multiple values simultaneously and prevent unnecessary rerenders.\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\tuseEffect(() => {\n\t\tlet cancelRequest = false;\n\t\tif (!url) return undefined;\n\n\t\tconst fetchData = async () => {\n\t\t\tdispatch({ type: 'FETCHING' });\n\t\t\tif (cache.current[url]) {\n\t\t\t\tconst data = cache.current[url];\n\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url);\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tcache.current[url] = data;\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: 'FETCH_ERROR',\n\t\t\t\t\t\t\tpayload: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\t// cleanup switch to prevent data leak on unmount\n\t\treturn function cleanup() {\n\t\t\tcancelRequest = true;\n\t\t};\n\t}, [url]);\n\n\treturn state;\n};\n\nexport default useFetch;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nfunction SearchItem({\n\tsuggestion,\n\tonClick,\n\tsearchTerm,\n\tisSelected,\n\tid,\n\tcontentTypes,\n}) {\n\tconst showType = suggestion.type && 1 < contentTypes.length;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight\n\t\t\t\t\t\t\ttext={decodeEntities(suggestion.title)}\n\t\t\t\t\t\t\thighlight={searchTerm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{'post_tag' === suggestion.type ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n}\n\nexport default SearchItem;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(\n\t({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\t\tconst ItemComponent =\n\t\t\tfalse !== ChildComponent\n\t\t\t\t? isOrderable\n\t\t\t\t\t? SortableElement(ChildComponent)\n\t\t\t\t\t: ChildComponent\n\t\t\t\t: isOrderable\n\t\t\t\t? SortableElement(PickedItem)\n\t\t\t\t: PickedItem;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{items.map((item, index) => {\n\t\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ItemComponent\n\t\t\t\t\t\t\tisOrderable={\n\t\t\t\t\t\t\t\tisOrderable && 1 < items.length ? isOrderable : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\t\t\tsortIndex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nexport default SortableList;\n","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","const DEFAULT_STATE = [];\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n\t// Cloned is used in reorder, setItem, and setItemProp:\n\tconst cloned = [...state];\n\t// eslint-disable-next-line default-case\n\tswitch (action.type) {\n\t\tcase 'SEED':\n\t\t\treturn [...action.items];\n\t\tcase 'APPEND':\n\t\t\treturn [...state, ...action.items];\n\t\tcase 'PREPEND':\n\t\t\treturn [...action.items, ...state];\n\t\tcase 'INSERT':\n\t\t\treturn [\n\t\t\t\t...state.slice(0, action.index),\n\t\t\t\t...action.items,\n\t\t\t\t...state.slice(action.index),\n\t\t\t];\n\t\tcase 'APPLY':\n\t\t\treturn state.map((item, index) => action.fn(item, index));\n\t\tcase 'REMOVE':\n\t\t\treturn state.filter((_, index) => !action.indexes.includes(index));\n\t\tcase 'REORDER':\n\t\t\t// eslint-disable-next-line no-case-declarations\n\t\t\tconst item = state[action.from];\n\n\t\t\tcloned.splice(action.from, 1);\n\t\t\tcloned.splice(action.to, 0, item);\n\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM':\n\t\t\tcloned[action.index] = action.item;\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM_PROP':\n\t\t\tcloned[action.index] = {\n\t\t\t\t...cloned[action.index],\n\t\t\t\t[action.prop]: action.value,\n\t\t\t};\n\t\t\treturn cloned;\n\t}\n\n\treturn state;\n};\n\nexport default reducer;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\nimport { Fragment, useState } from '@wordpress/element';\nimport { ToolbarButton, Popover } from '@wordpress/components';\n\n/**\n * Link control in a toolbar button that defaults to searching for topic terms\n */\nfunction LinkToolbarButton({\n\turl,\n\tonChange,\n\tquery = { type: 'term', subtype: 'topic' },\n}) {\n\tconst [isLinkOpen, setIsLinkOpen] = useState(false);\n\treturn (\n\t\t<Fragment>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isLinkOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__('Set Link')}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsLinkOpen(!isLinkOpen)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isLinkOpen && (\n\t\t\t\t<Popover position=\"bottom center\" onClose={() => setIsLinkOpen(false)}>\n\t\t\t\t\t<LinkControl\n\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\n\t\t\t\t\t\tvalue={{ url }}\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t\tsuggestionsQuery={query}\n\t\t\t\t\t\tonChange={(p) => onChange(p)}\n\t\t\t\t\t\tsettings={[]}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default LinkToolbarButton;\n","/**\n * External Dependencies\n */\nimport { Icon } from 'semantic-ui-react';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { Flex, FlexItem, FlexBlock, ToolbarGroup } from '@wordpress/components';\nimport { BlockControls, RichText } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport LinkToolbarButton from '../link-toolbar-button';\n\nconst CaretHeadingLink = ({\n\turl,\n\theading,\n\theadingSize = 'h2',\n\tdisableIcon = false,\n\tsetAttributes,\n}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<LinkToolbarButton\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tonChange={p => {\n\t\t\t\t\t\t\tsetAttributes({ url: p.url });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Flex style={{ paddingBottom: '1em' }}>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName={headingSize}\n\t\t\t\t\t\tvalue={heading}\n\t\t\t\t\t\tonChange={h => setAttributes({ heading: h })}\n\t\t\t\t\t\tplaceholder=\"Heading...\"\n\t\t\t\t\t\tformattingControls={[]}\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\tclassName=\"sans-serif\"\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t{true !== disableIcon && (\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"chevron right\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{ marginLeft: '0.5em' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</Fragment>\n\t);\n};\n\nexport default CaretHeadingLink;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { select, dispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\n\nfunction BlockInserterButton({\n\tlabel = '',\n\tblockName,\n\tclientId,\n\tclassName,\n\tattributes = {},\n}) {\n\tconst handleClick = () => {\n\t\tconst currentBlock = select('core/block-editor').getBlock(clientId);\n\t\tconsole.log('debug info...', currentBlock.innerBlocks.length);\n\t\tconst nextIndex =\n\t\t\t0 === currentBlock.innerBlocks.length\n\t\t\t\t? 0\n\t\t\t\t: currentBlock.innerBlocks.length + 1;\n\t\tconst newBlock = createBlock(blockName, attributes);\n\t\tdispatch('core/block-editor').insertBlock(newBlock, nextIndex, clientId);\n\t};\n\treturn (\n\t\t<Button\n\t\t\tlabel={__(label)}\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName=\"block-editor-button-block-appender\"\n\t\t>\n\t\t\t{__(label)}\n\t\t</Button>\n\t);\n}\n\nexport default BlockInserterButton;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport {\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n\tPath,\n\tSVG,\n} from '@wordpress/components';\nimport { DOWN } from '@wordpress/keycodes';\n\nfunction HeadingLevelIcon({ level, isPressed = false }) {\n\tconst levelToPath = {\n\t\t1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n\t\t2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n\t\t3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n\t\t4: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z',\n\t\t5: 'M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z',\n\t\t6: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z',\n\t};\n\tif (!levelToPath.hasOwnProperty(level)) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SVG\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tisPressed={isPressed}\n\t\t>\n\t\t\t<Path d={levelToPath[level]} />\n\t\t</SVG>\n\t);\n}\n\nfunction HeadingLevelToolbar({\n\tselectedLevel,\n\tlevels = [2, 3],\n\tonChange,\n\tIcon = HeadingLevelIcon,\n}) {\n\tconsole.log('HeadingLevelToolbar', selectedLevel);\n\n\tconst MemoizedHeadingLevelIcon = useCallback(\n\t\t() => <Icon level={selectedLevel} isPressed />,\n\t\t[selectedLevel],\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarDropdownMenu\n\t\t\t\ticon={MemoizedHeadingLevelIcon}\n\t\t\t\tlabel=\"Select Heading Size\"\n\t\t\t\tcontrols={levels.map((targetLevel) => {\n\t\t\t\t\tconst isActive = targetLevel === selectedLevel;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t\t// translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n\t\t\t\t\t\t\t__('Heading %d'),\n\t\t\t\t\t\t\ttargetLevel,\n\t\t\t\t\t\t),\n\t\t\t\t\t\ticon: <Icon level={targetLevel} isPressed={isActive} />,\n\t\t\t\t\t\tisActive,\n\t\t\t\t\t\tonClick: () => onChange(targetLevel),\n\t\t\t\t\t};\n\t\t\t\t})}\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default HeadingLevelToolbar;\n","/**\n * WordPress Dependencies\n */\nimport { has } from 'underscore';\nimport { __ } from '@wordpress/i18n';\nimport { Button, DropZone } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst DEFAULT_IMAGE_SIZE = 'full';\n\nfunction MediaDropZone({\n\tattachmentId = false,\n\tonUpdate = (attachment) => {\n\t\tconsole.warn(\n\t\t\t'Media DropZone Attachment, use onUpdate prop when using <MediaDropZone/>: ',\n\t\t\tattachment,\n\t\t);\n\t},\n\tonClear = false,\n\tmediaType = ['image'],\n\tmediaSize = DEFAULT_IMAGE_SIZE,\n\tlabel = __('Set Image'),\n}) {\n\tconst [id, setId] = useState(attachmentId);\n\tconst [isUploading, setIsUploading] = useState(false);\n\n\t/**\n\t * When id (attachmentId) changes update the media and get its src, dimensions, and type.\n\t */\n\tconst { media, src, width, height, type } = useSelect(\n\t\t(select) => {\n\t\t\tconst m = id ? select('core').getMedia(id) : false;\n\t\t\tconsole.log('m...', id, m);\n\t\t\tif (undefined === m || false === m) {\n\t\t\t\treturn {\n\t\t\t\t\tmedia: false,\n\t\t\t\t\tsrc: false,\n\t\t\t\t\twidth: false,\n\t\t\t\t\theight: false,\n\t\t\t\t\ttype: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet mediaSourceUrl = false;\n\t\t\tlet mediaWidth = false;\n\t\t\tlet mediaHeight = false;\n\n\t\t\tif (has(m, ['media_details', 'sizes', mediaSize])) {\n\t\t\t\t// use mediaSize when available\n\t\t\t\tmediaWidth = m.media_details.sizes[mediaSize].width;\n\t\t\t\tmediaHeight = m.media_details.sizes[mediaSize].height;\n\t\t\t\tmediaSourceUrl = m.media_details.sizes[mediaSize].source_url;\n\t\t\t} else {\n\t\t\t\t// get fallbackMediaSize if mediaSize is not available\n\t\t\t\tconst fallbackMediaSize = DEFAULT_IMAGE_SIZE;\n\t\t\t\tif (has(m, ['media_details', 'sizes', fallbackMediaSize])) {\n\t\t\t\t\t// use fallbackMediaSize when mediaSize is not available\n\t\t\t\t\tmediaWidth = m.media_details.sizes[fallbackMediaSize].width;\n\t\t\t\t\tmediaHeight = m.media_details.sizes[fallbackMediaSize].height;\n\t\t\t\t\tmediaSourceUrl = m.media_details.sizes[fallbackMediaSize].source_url;\n\t\t\t\t} else {\n\t\t\t\t\t// use full image size when mediaFallbackSize and mediaSize are not available\n\t\t\t\t\tmediaWidth = m.media_details.width;\n\t\t\t\t\tmediaHeight = m.media_details.height;\n\t\t\t\t\tmediaSourceUrl = m.source_url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmedia: m,\n\t\t\t\tsrc: mediaSourceUrl,\n\t\t\t\twidth: mediaWidth,\n\t\t\t\theight: mediaHeight,\n\t\t\t\ttype: false !== m ? m.type : false,\n\t\t\t};\n\t\t},\n\t\t[id],\n\t);\n\n\tconst onMediaUpdate = (media) => {\n\t\tconsole.log('onMediaUpdate', id, media.id);\n\t\tif (media.id !== id) {\n\t\t\tsetId(media.id);\n\t\t\tonUpdate(media);\n\t\t}\n\t\tsetIsUploading(false);\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList);\n\t\tuploadMedia({\n\t\t\tallowedTypes: mediaType,\n\t\t\tfilesList,\n\t\t\tonFileChange([image]) {\n\t\t\t\tconsole.log('onFileChange', image);\n\t\t\t\tif (!image.id) {\n\t\t\t\t\tconsole.log('waiting');\n\t\t\t\t\tsetIsUploading(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('found!', image);\n\t\t\t\t\timage.sizes = image.media_details.sizes;\n\t\t\t\t\tonMediaUpdate(image);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t});\n\t};\n\n\tconst displayImage =\n\t\tfalse !== id && false !== media && false !== src && false === isUploading;\n\n\treturn (\n\t\t<MediaUploadCheck fallback={__(`Fallback Instructions Should Go Here`)}>\n\t\t\t<MediaUpload\n\t\t\t\ttitle={__(`Media Upload`)}\n\t\t\t\tonSelect={onMediaUpdate}\n\t\t\t\tallowedTypes={mediaType}\n\t\t\t\tvalue={id}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{displayImage && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\t\tbackground: 'none',\n\t\t\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt=\"Drop an asset here, or click to replace.\"\n\t\t\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t\t\twidth={`${width}px`}\n\t\t\t\t\t\t\t\t\theight={`${height}px`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false !== onClear && displayImage && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tonClear();\n\t\t\t\t\t\t\t\t\tsetId(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tClear Image\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{((false !== id && false === media) || isUploading) && (\n\t\t\t\t\t\t\t<Button variant=\"secondary\" isBusy onClick={open}>\n\t\t\t\t\t\t\t\t{__(` Loading...`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false === id && (\n\t\t\t\t\t\t\t<Button variant=\"secondary\" onClick={open}>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<DropZone onFilesDrop={onDropImage} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default MediaDropZone;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState, useMemo, useEffect } from '@wordpress/element';\nimport {\n\tCard,\n\tCardBody,\n\tCardMedia,\n\tSearchControl,\n\tSpinner,\n\tTabbableContainer,\n\tKeyboardShortcuts,\n\tModal,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { date as formatDate } from '@wordpress/date';\nimport { useEntityRecords, useEntityProp } from '@wordpress/core-data';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Internal Dependencies\n */\nimport { useDebounce } from '../../hooks';\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n\tconst { post, imageSize = false, isRefresh = false } = opts;\n\tconsole.log('getAttributesFromPost', post);\n\n\tif (null === post) {\n\t\treturn {};\n\t}\n\n\tconst date = formatDate('M j, Y', post.date);\n\n\tconst storyItem = {\n\t\ttitle:\n\t\t\tpost.hasOwnProperty('title') && post.title.hasOwnProperty('rendered')\n\t\t\t\t? post.title.rendered\n\t\t\t\t: '',\n\t\texcerpt:\n\t\t\tpost.hasOwnProperty('excerpt') && post.excerpt.hasOwnProperty('rendered')\n\t\t\t\t? post.excerpt.rendered\n\t\t\t\t: '',\n\t\turl: post.canonical_url, // @TODO where is this `link` coming from, why is it not url or permalink.\n\t\tlabel: post.hasOwnProperty('label') ? post.label : 'report',\n\t\tdate,\n\t\tpostId: post.id || post.ID,\n\t};\n\n\tif (true !== isRefresh) {\n\t\tstoryItem.extra = '';\n\t}\n\n\tif (false !== imageSize && post.art) {\n\t\tconst { art } = post;\n\t\tstoryItem.image = art[imageSize].rawUrl;\n\t\tstoryItem.isChartArt = art[imageSize].chartArt;\n\t}\n\n\treturn storyItem;\n};\n\nfunction SearchRecords({\n\tsearchRecords,\n\tonSelect,\n\timageSize = 'A3',\n\tdisableImage = false,\n}) {\n\treturn searchRecords.map((item) => (\n\t\t<SearchItem {...{ item, onSelect, imageSize, disableImage }} />\n\t));\n}\n\nfunction Image({ item, imageSize }) {\n\tconst { art } = item;\n\t// Check if art has imageSize as a valid key. If so get the rawUrl, height and width. Then return an img tag accordingly.\n\tif (art && art[imageSize]) {\n\t\tconst { rawUrl, height, width, caption } = art[imageSize];\n\t\treturn (\n\t\t\t<CardMedia>\n\t\t\t\t<img src={rawUrl} height={height} width={width} alt={caption} />\n\t\t\t</CardMedia>\n\t\t);\n\t}\n\treturn null;\n}\n\nfunction SearchItem({\n\titem,\n\tonSelect,\n\timageSize = 'A3',\n\tdisableImage = false,\n}) {\n\tif (!item) {\n\t\treturn null;\n\t}\n\t// if item has post_title then use that otherwise use title.rendered\n\tconst title = item.post_title ? item.post_title : item.title.rendered;\n\t// if item has post_date then use that otherwise use date\n\tconst date = item.post_date ? item.post_date : item.date;\n\n\tconst { label } = item;\n\tconst canonicalUrl = item.canonical_url;\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events\n\t\t<Card\n\t\t\tonClick={() => {\n\t\t\t\tconst postAttrs = getAttributesFromPost({\n\t\t\t\t\tpost: item,\n\t\t\t\t\timageSize,\n\t\t\t\t\tisRefresh: false,\n\t\t\t\t});\n\t\t\t\tonSelect(postAttrs);\n\t\t\t}}\n\t\t\tsize=\"small\"\n\t\t\tstyle={{\n\t\t\t\tcursor: 'pointer',\n\t\t\t\t':hover': {\n\t\t\t\t\t'background-color': '#f3f4f5',\n\t\t\t\t},\n\t\t\t}}\n\t\t>\n\t\t\t<CardBody\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{!disableImage && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '35%',\n\t\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\t\tpaddingRight: '1em',\n\t\t\t\t\t\t\tpaddingTop: '0.5em',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Image {...{ item, imageSize }} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${label} | ${formatDate('M j, Y', date)}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<strong>{title}</strong>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\t\tfontStyle: 'italic',\n\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\tlineHeight: '1.5em',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{canonicalUrl}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardBody>\n\t\t</Card>\n\t);\n}\n\nexport function URLSearchField({\n\tattributes,\n\tsetAttributes,\n\tdisableImage = false,\n\tonSelect = () => {},\n\tonKeyEnter = () => {},\n}) {\n\tconst { imageSize, url } = attributes;\n\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst [isLoading, toggleLoading] = useState(!!url);\n\n\tconst [searchInput, setSearchInput] = useState(url);\n\tconst searchString = useDebounce(searchInput, 500);\n\tconst searchStringIsUrl = useMemo(() => {\n\t\tif (\n\t\t\tundefined !== searchString &&\n\t\t\tsearchString.match(/^(http|https):\\/\\//)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [searchString]);\n\tconst [foundObject, setFoundObject] = useState(null);\n\n\tconst hasSearchString = !!searchString.length;\n\n\tconst { records: searchRecords, isResolving } = useEntityRecords(\n\t\t'postType',\n\t\tpostType,\n\t\t{\n\t\t\tper_page: 10,\n\t\t\tpost_parent: 0, // exclude child posts\n\t\t\tsearch: hasSearchString && !searchStringIsUrl ? searchString : '',\n\t\t\tcontext: 'view',\n\t\t},\n\t);\n\tconst hasSearchRecords =\n\t\t!isLoading && !searchStringIsUrl && searchRecords\n\t\t\t? 0 < searchRecords.length\n\t\t\t: false;\n\tconst hasFoundObject =\n\t\t!isLoading && searchStringIsUrl && null !== foundObject;\n\tconst hasNothingFound = !isLoading && !hasSearchRecords && !hasFoundObject;\n\n\tconst getPostByUrl = (newUrl) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/stub/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url: newUrl },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif ('object' !== typeof post) {\n\t\t\t\t\t\treject(new Error('post is not an object'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => reject(err));\n\t\t});\n\n\tuseEffect(() => {\n\t\tif (searchStringIsUrl) {\n\t\t\ttoggleLoading(true);\n\t\t\tgetPostByUrl(searchString)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tsetFoundObject(post);\n\t\t\t\t\ttoggleLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error('getPostByUrl error', err);\n\t\t\t\t\tsetFoundObject(null);\n\t\t\t\t\ttoggleLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [searchString, searchStringIsUrl]);\n\n\tuseEffect(() => {\n\t\ttoggleLoading(isResolving);\n\t}, [isResolving]);\n\n\treturn (\n\t\t<TabbableContainer\n\t\t\tonNavigate={(index, elm) => console.log('onNavigate:', elm)}\n\t\t>\n\t\t\t<KeyboardShortcuts\n\t\t\t\tshortcuts={{\n\t\t\t\t\tenter: () => {\n\t\t\t\t\t\tif (searchStringIsUrl) {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\turl: searchString,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif ('function' === typeof onKeyEnter) {\n\t\t\t\t\t\t\t\tonKeyEnter();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<SearchControl\n\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\tplaceholder=\"Climate Change...\"\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t/>\n\t\t\t</KeyboardShortcuts>\n\t\t\t{hasSearchString && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>Loading... </span>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasNothingFound && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t\tpaddingTop: '1em',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{__('Nothing found.', 'prc-block-library')}</span>\n\t\t\t\t\t\t\t{searchStringIsUrl && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{__('Press enter to change the URL.', 'prc-block-library')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasFoundObject && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t{...{ item: foundObject, onSelect, imageSize, disableImage }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\tcolor: '#666',\n\t\t\t\t\t\t\t\t\tpaddingTop: '1em',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{__('Press enter to insert post.', 'prc-block-library')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{hasSearchRecords && !searchStringIsUrl && (\n\t\t\t\t\t\t<SearchRecords\n\t\t\t\t\t\t\t{...{ searchRecords, onSelect, imageSize, disableImage }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t</TabbableContainer>\n\t);\n}\n\nexport function URLSearchToolbar({\n\tattributes,\n\tsetAttributes,\n\tonSelect = () => {},\n}) {\n\tconst [siteId] = useEntityProp('root', 'site', 'siteId');\n\tconst postType = 1 === siteId ? 'stub' : 'post';\n\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isModalOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__(\n\t\t\t\t\t`Search for a ${postType} or paste url here`,\n\t\t\t\t\t'prc-block-library',\n\t\t\t\t)}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsModalOpen(true)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isModalOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__(\n\t\t\t\t\t\t`Search for a ${postType} or paste url here`,\n\t\t\t\t\t\t'prc-block-library',\n\t\t\t\t\t)}\n\t\t\t\t\tonRequestClose={() => setIsModalOpen(false)}\n\t\t\t\t\tshouldCloseOnClickOutside={false}\n\t\t\t\t\tshouldCloseOnEsc={false}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tminWidth: '340px',\n\t\t\t\t\t\t\tmaxWidth: '640px',\n\t\t\t\t\t\t\tmargin: '0 auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<URLSearchField\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\tonSelect: (postAttrs) => {\n\t\t\t\t\t\t\t\t\tonSelect(postAttrs);\n\t\t\t\t\t\t\t\t\tsetIsModalOpen(false);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyEnter: () => setIsModalOpen(false),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</ToolbarGroup>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nfunction ifMatchSetAttribute(\n\tneedle,\n\thaystack,\n\tattrKey,\n\tattrValue,\n\tsetAttributes,\n) {\n\tif (needle === haystack) {\n\t\tsetAttributes({ [attrKey]: attrValue });\n\t}\n}\n\nfunction randomId() {\n\t// Math.random should be unique because of its seeding algorithm.\n\t// Convert it to base 36 (numbers + letters), and grab the first 9 characters\n\t// after the decimal.\n\treturn `_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction getTermsByLetter(taxonomy, letter) {\n\treturn new Promise((resolve) => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then((terms) => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n}\n\nfunction getTerms(taxonomy, perPage = 25) {\n\treturn new Promise((resolve) => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then((terms) => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n}\n\nfunction getTermsAsOptions(\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy, perPage).then((data) => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tconst value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n}\n\nfunction getTermsAsTree(taxonomy) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy).then((data) => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map((i) => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter((e) => 0 === e.parent);\n\t\t\tparentTerms.forEach((e) => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter((f) => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach((cT) => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n}\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n\t{\n\t\tlabel: 'Weekly roundup of all new publications',\n\t\tvalue: '7c1390ba46',\n\t},\n\t{\n\t\tlabel: 'Quarterly update from the president',\n\t\tvalue: 'a33430a835',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Global attitudes & trends (twice a month)',\n\t\tvalue: '9203343b04',\n\t},\n\t{\n\t\tlabel: 'Internet, science & tech (monthly)',\n\t\tvalue: 'ea87b26abe',\n\t},\n\t{\n\t\tlabel: 'Daily briefing of media news',\n\t\tvalue: '1d2638430b',\n\t},\n\t{\n\t\tlabel: 'Race & ethnicity (monthly)',\n\t\tvalue: '0e7495c7b2',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Weekly newsletter',\n\t\tvalue: 'a7d4f3268f',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Daily religion headlines',\n\t\tvalue: '1a647764b2',\n\t},\n\t{\n\t\tlabel: 'Social & demographic trends (monthly)',\n\t\tvalue: '3836f62305',\n\t},\n\t{\n\t\tlabel: 'Methodological research (quarterly)',\n\t\tvalue: '6d1e80bbaf',\n\t},\n\t{\n\t\tlabel: 'U.S. politics & policy (monthly)',\n\t\tvalue: 'fa5fdbc701',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'SELECT ALL',\n\t\tvalue: 'select-all',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Immigration',\n\t\tvalue: 'xxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Census',\n\t\tvalue: 'xxxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - Muslims and Islam',\n\t\tvalue: 'xxxxx',\n\t},\n];\n\nexport { mailChimpInterests };\n"],"sourceRoot":""}