{"version":3,"sources":["webpack:///external \"React\"","webpack:///./src/story-item/deprecated.js","webpack:///./src/story-item/edit/controls/inspector.jsx","webpack:///./src/story-item/edit/controls/placeholder.jsx","webpack:///./src/story-item/edit/controls/toolbar.jsx","webpack:///./src/story-item/edit/controls/index.js","webpack:///./src/story-item/edit/image.jsx","webpack:///./src/story-item/edit/excerpt.jsx","webpack:///./src/story-item/edit/extra.jsx","webpack:///./src/story-item/edit/header.jsx","webpack:///./src/story-item/edit/meta.jsx","webpack:///./src/story-item/edit/preview.jsx","webpack:///./src/story-item/edit/index.js","webpack:///./src/story-item/save.js","webpack:///./src/story-item/variations.js","webpack:///./src/story-item/index.js","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"data\"]","webpack:///./src/story-item/helpers.js","webpack:///external \"moment\"","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"coreData\"]","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/hooks/use-debounce.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/hooks/use-window-size.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-search/search-item.jsx","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-search/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-picker/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-placeholder/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/list-store/reducer.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/link-toolbar-button/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/caret-heading-link/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/block-inserter-button/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/heading-level-toolbar/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/media-dropzone/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/functions/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/mailchimp/index.js","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"regeneratorRuntime\"","webpack:///external \"lodash\"","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"keycodes\"]"],"names":["module","exports","window","deprecated","attributes","postID","type","link","excerpt","multiline","enableExcerpt","default","enableExcerptBelow","enableAltTaxonomy","migrate","enableMeta","console","log","postId","url","metaTaxonomy","save","props","length","Content","className","tagName","value","Inspector","setAttributes","context","rootClientId","useState","isRefreshing","refresh","imageSize","imageSlot","enableHeader","enableExtra","enableBreakingNews","enableEmphasis","disableMobileStyles","label","__","title","help","checked","onChange","prcBreakingNews","alert","options","newMetaTaxonomy","isInteger","isSecondary","isBusy","onClick","setTimeout","setPostAttributes","isRefresh","style","marginBottom","text","isDestructive","extra","date","image","Placeholder","blockProps","loadingStub","setLoadingStub","pickedContent","undefined","id","onSkip","loadingComponent","URLControl","isLoading","setIsLoading","isLinkOpen","setIsLinkOpen","isModalOpen","setIsModalOpen","inputValue","setInputValue","post","setPost","useDebounce","useEffect","apiFetch","path","method","data","then","ID","catch","err","onModalClose","aria-expanded","aria-haspopup","icon","showTooltip","onRequestClose","post_title","newPostId","variant","position","onClose","minWidth","padding","display","alignItems","flexGrow","autoComplete","paddingBottom","paddingLeft","width","Toolbar","headerSize","isChartArt","columnWidth","columnIsEqualWidth","Icon","svgPath","isPressed","height","viewBox","xmlns","d","ImageSlotIcon","selected","arrowRight","arrowLeft","arrowUp","arrowDown","close","more","ImageSizeIcon","currentlyActive","A1","A2","A3","A4","XL","HeadingLevelIcon","1","2","3","handleImageSizeChange","newSize","setArtBySize","controls","isActive","isDisabled","Controls","ALLOWED_MEDIA_TYPES","small","hidpi","smallHidpi","ImageDisplay","img","size","placeholder","getImgURL","args","resize","addQueryArgs","getImgSrcSet","threshold","srcSet","media","src","alt","sources","href","Edit","onSelect","allowedTypes","render","open","Img","slot","chartArt","isXL","isA1","isA2","isA3","isA4","classNames","ui","bordered","Excerpt","content","sansSerif","enabled","classes","Extra","breakingNews","Header","altHeaderWeight","large","medium","light","t","allowedFormats","Meta","termOptions","l","IMAGE_SIZES","Preview","logicalClasses","aligned","blockPropsArgs","useBlockProps","headerClasses","imageClasses","excerptClasses","formats","edit","isSelected","clientId","isPreview","inLoop","setTermOptions","getTermsAsOptions","payload","Object","keys","handlePostIdCaseChange","hasOwnProperty","Number","useSelect","select","getBlockRootClientId","enableAltHeaderWeight","variations","name","isDefault","metadata","settings","example","moment","format","registerBlockType","rawUrl","getAttributesFromPost","opts","Date","storyItem","rendered","art","Promise","resolve","reject","attrs","error","getAttributesFromURL","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","useWindowSize","ButtonStyled","styled","Button","SearchItem","suggestion","searchTerm","contentTypes","showType","decodeEntities","borderRadius","boxSizing","paddingRight","highlight","aria-hidden","filterURLForDisplay","safeDecodeURI","NAMESPACE","searchCache","ContentSearch","onSelectItem","mode","excludeItems","perPage","searchInput","setSearchInput","searchString","searchStringIsUrl","setSearchStringIsUrl","searchResults","setSearchResults","selectedItem","setSelectedItem","abortControllerRef","useRef","mounted","getPostByUrl","filterResults","results","filter","result","keep","every","item","hasSearchString","hasSearchResults","current","isUrl","match","keyword","abort","trim","AbortController","searchQuery","join","post_type","permalink","subtype","code","signal","handleSearchStringChange","listCSS","css","onNavigate","orientation","right","marginTop","marginLeft","listStyle","color","cursor","map","index","key","handleItemSelection","DragHandle","sortableHandle","marginRight","flexShrink","role","focusable","Wrapper","PickedItem","isOrderable","handleItemDelete","preparedItem","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","newItem","uuid","border","paddingTop","aria-label","SortableList","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","itemKey","sortIndex","totalItems","StyleWrapper","ContentPicker","onPickChange","ids","maxContentItems","singlePickedLabel","multiPickedLabel","uniqueContentItems","excludeCurrentPost","PickedItemChild","searchStyle","setContent","currentPostId","getCurrentPostId","useMemo","push","previousContent","uuidv4","Boolean","useDragHandle","deletedItem","onSortEnd","oldIndex","newIndex","newContent","arrayMove","ContentPlaceholder","children","isColumnLayout","textAlign","isLink","LinkToolbarButton","query","showInitialSuggestions","suggestionsQuery","p","CaretHeadingLink","heading","headingSize","disableIcon","h","formattingControls","keepPlaceholderOnFocus","BlockInserterButton","blockName","tooltipPosition","currentBlock","getBlock","innerBlocks","nextIndex","newBlock","createBlock","dispatch","insertBlock","level","levelToPath","4","5","6","POPOVER_PROPS","isAlternate","HeadingLevelToolbar","selectedLevel","levels","popoverProps","renderToggle","onToggle","isOpen","onKeyDown","event","keyCode","DOWN","preventDefault","stopPropagation","renderContent","isCollapsed","targetLevel","sprintf","has","_","MediaDropZone","attachmentId","onUpdate","attachment","warn","mediaType","mediaSize","setId","isUploading","setIsUploading","m","getMedia","mediaSourceUrl","mediaWidth","mediaHeight","media_details","sizes","source_url","onMediaUpdate","onDropImage","filesList","uploadMedia","onFileChange","onError","message","fallback","onFilesDrop","ifMatchSetAttribute","needle","haystack","attrKey","attrValue","getTerms","taxonomy","terms","slug","replace","toLowerCase","parent","termValue","sortByLabel","labelOptions","forEach","termObj","sort","a","b","mailChimpInterests","regeneratorRuntime"],"mappings":";;;;;;;;;;;;;;;;;wHAAcA,EAAOC,QAAUC,OAAc,O,2FCwD9BC,EAlDI,CACf,CACIC,WAAY,CACRC,OAAQ,CACJC,KAAM,WAEVC,KAAM,CACFD,KAAM,UAEVE,QAAS,CACLF,KAAM,SACNG,UAAW,KAEfC,cAAe,CACXJ,KAAM,UACNK,SAAS,GAEbC,mBAAoB,CAChBN,KAAM,UACNK,SAAS,GAEbE,kBAAmB,CACfP,KAAM,UACNK,SAAS,IAIjBG,QA1BJ,YA0B4G,IAA7FT,EAA4F,EAA5FA,OAAQE,EAAoF,EAApFA,KAAMC,EAA8E,EAA9EA,QAASE,EAAqE,EAArEA,cAAeE,EAAsD,EAAtDA,mBAAoBC,EAAkC,EAAlCA,kBAAmBE,EAAe,EAAfA,WAGpF,OAFAC,QAAQC,IAAI,eAAgB,CAAEZ,SAAQE,OAAMC,UAASE,gBAAeE,qBAAoBC,oBAAmBE,eAEpG,CACHG,OAAQb,EACRc,IAAKZ,EACLC,QAASA,EACTE,cAAeA,EACfE,mBAAoBA,EACpBQ,aAPoBL,EAAeF,EAAoB,iBAAmB,UAAc,aAWhGQ,KAvCJ,SAuCUC,GACF,OACI,oBAAC,WAAD,KACM,IAAMA,EAAMd,QAAQe,QAAW,oBAAC,WAASC,QAAV,CAAkBC,UAAU,UAAUC,QAAQ,MAAMC,MAAOL,EAAMd,c,oFCkLvGoB,EAxMG,SAAC,GAA0D,IAAxDxB,EAAuD,EAAvDA,WAAYyB,EAA2C,EAA3CA,cAC7B,GADwE,EAA5BC,QAA4B,EAAnBC,aACrBC,oBAAS,IAAzC,mBAAOC,EAAP,KAAqBC,EAArB,KAEIhB,EAYAd,EAZAc,OACAiB,EAWA/B,EAXA+B,UACAC,EAUAhC,EAVAgC,UACAC,EASAjC,EATAiC,aACA3B,EAQAN,EARAM,cACAE,EAOAR,EAPAQ,mBACA0B,EAMAlC,EANAkC,YACAC,EAKAnC,EALAmC,mBACAC,EAIApC,EAJAoC,eACAC,EAGArC,EAHAqC,oBACA1B,EAEAX,EAFAW,WACAK,EACAhB,EADAgB,aAGEsB,EAAQC,aAAG,sBAEjB,OACI,oBAAC,WAAD,KACI,oBAAC,oBAAD,KACI,oBAAC,YAAD,CAAWC,MAAOF,GACd,oBAAC,cAAD,CACIG,KAAMF,aAAG,wHAET,oBAAC,gBAAD,CACID,MACI3B,EACM,eACA,gBAEV+B,QAAS/B,EACTgC,SAAU,WACNlB,EAAc,CAAEd,YAAaA,OAGrC,oBAAC,gBAAD,CACI2B,MACIL,EAAe,iBAAmB,kBAEtCS,QAAST,EACTU,SAAU,WACNlB,EAAc,CAAEQ,cAAeA,OAGvC,oBAAC,gBAAD,CACIK,MACIhC,EAAgB,kBAAoB,mBAExCoC,QAASpC,EACTqC,SAAU,WACNlB,EAAc,CAAEnB,eAAgBA,OAGxC,oBAAC,gBAAD,CACIgC,MACIJ,EAAc,iBAAmB,kBAErCQ,QAASR,EACTS,SAAU,WACNlB,EAAc,CAAES,aAAcA,OAGtC,oBAAC,gBAAD,CACII,MACIH,EACM,wBACA,yBAEVO,QAASP,EACTQ,SAAU,YACF,IAAU7C,OAAO8C,gBACjBnB,EAAc,CACVU,oBAAqBA,KAIzBU,MACI,wHAEJpB,EAAc,CACVU,oBAAoB,QAKpC,oBAAC,gBAAD,CACIG,MACIF,EACM,mBACA,oBAEVM,QAASN,EACTO,SAAU,WACNlB,EAAc,CAAEW,gBAAiBA,QAK7C,oBAAC,cAAD,MAEA,oBAAC,gBAAD,CACIE,MAAM,6BACNf,MAAQP,EACR8B,QAAU,CACN,CAAER,MAAO,UAAWf,MAAO,WAC3B,CAAEe,MAAO,iBAAkBf,MAAO,kBAClC,CAAEe,MAAO,WAAYf,MAAO,aAEhCoB,SAAW,SAAEI,GACTtB,EAAc,CAACT,aAAc+B,SAK7C,oBAAC,4BAAD,KACI,oBAAC,gBAAD,CACIT,MACKD,EAEK,0BADA,yBAGVI,KAAMF,aAAG,gLACTG,QAASL,EACTM,SAAU,WACNlB,EAAc,CAAEY,qBAAsBA,QAG7C,IAAS/B,IAAkB,UAAY0B,GAAa,SAAWA,IAC5D,oBAAC,WAAD,KACI,oBAAC,gBAAD,CACIM,MACI9B,EACM,kCACA,+BAEViC,KAAMF,aAAG,mHACTG,QAASlC,EACTmC,SAAU,WACNlB,EAAc,CACVjB,oBAAqBA,OAIjC,oBAAC,cAAD,OAIPwC,oBAAUlC,IAAW,IAAMA,GACxB,+BACI,oBAAC,SAAD,CACImC,aAAW,EACXC,OAAQrB,EACRsB,QAAS,WACLrB,GAAQ,GACRsB,YAAW,WACPC,YAAkB,CACdvC,SACAiB,YACAuB,WAAW,EACX7B,kBAEJK,GAAQ,KACT,MAEPyB,MAAO,CAAEC,aAAc,OACvBC,KAAMlB,aAAG,wBAIrB,+BACI,oBAAC,SAAD,CACImB,eAAa,EACbR,OAAQrB,EACRsB,QAAS,WACLrB,GAAQ,GACRsB,YAAW,WACP3B,EAAc,CACVe,MAAO,GACPpC,QAAS,GACTuD,MAAO,GACP5C,IAAK,GACLuB,MAAO,GACPsB,KAAM,GACNC,MAAO,GACP/C,OAAQ,IAEZgB,GAAQ,KACT,MAEPyB,MAAO,CAAEC,aAAc,OACvBC,KAAMlB,aAAG,gC,ykBC9KlBuB,MA7Bf,YAAiE,IAA1C9D,EAAyC,EAAzCA,WAAYyB,EAA6B,EAA7BA,cAAesC,EAAc,EAAdA,WACzChC,EAAc/B,EAAd+B,UAER,EAAsCH,oBAAS,GAA/C,mBAAOoC,EAAP,KAAoBC,EAApB,KAEA,OACC,oBAAC,IAAD,CACCtB,SAAU,SAACuB,GACVtD,QAAQC,IAAI,SAAUqD,GAClB,EAAIA,EAAc/C,aAAUgD,IAAcD,EAAc,GAAGE,KAC9DxD,QAAQC,IAAI,SAAUqD,EAAc,IACpCD,GAAe,GACfZ,YAAkB,CACjBvC,OAAQoD,EAAc,GAAGE,GACzBrC,YACAuB,WAAW,EACX7B,oBAIH4C,OAAQ,WACP5C,EAAc,CAAEX,OAAQ,KAEzBiD,WAAU,OAAOA,GAAP,IAAmBR,MAAO,CAAEC,aAAc,UACpDc,iBAAkBN,K,uECOfO,EAAa,SAAC,GAA8D,EAA5D/B,MAA4D,EAArDtC,KAAqD,EAA/CkE,GAAgD,IAA5CrD,EAA2C,EAA3CA,IAA2C,IAAtCgB,iBAAsC,MAA1B,KAA0B,EAApBN,EAAoB,EAApBA,cAC7D,EAAkCG,oBAAS,GAA3C,mBAAO4C,EAAP,KAAkBC,EAAlB,KACG,EAAoC7C,oBAAS,GAA7C,mBAAO8C,EAAP,KAAmBC,EAAnB,KACH,EAAsC/C,oBAAS,GAA/C,mBAAOgD,EAAP,KAAoBC,EAApB,KACA,EAAoCjD,mBAASb,GAA7C,mBAAO+D,EAAP,KAAmBC,EAAnB,KACA,EAAwBnD,mBAAS,MAAjC,mBAAOoD,EAAP,KAAaC,EAAb,KAEM1D,EAAQ2D,YAAYJ,EAAY,KAEtCK,qBAAU,WACJ5D,IAAUR,IACd0D,GAAa,GACbW,IAAS,CACRC,KAAM,oCACNC,OAAQ,OACRC,KAAM,CAAExE,IAAKQ,KAEZiE,MAAK,SAACR,GACNpE,QAAQC,IAAI,kBAAmBmE,QAC1Bb,IAAca,EAAKS,KACvBR,EAAQD,GACRP,GAAa,OAGdiB,OAAM,SAACC,GACP/E,QAAQC,IAAI,UAAW8E,GAEvBV,GAAQ,GACRR,GAAa,SAGd,CAAClD,IAEJ,IAAMqE,EAAe,kBAAMf,GAAe,IAevC,OACI,oBAAC,WAAD,KACI,oBAAC,gBAAD,CACIgB,gBAAenB,EACfoB,gBAAc,OACdxD,MAAOC,aAAG,WACVwD,KAAK,cACL5C,QAAS,kBAAMwB,GAAeD,IAC9BsB,aAAW,KAEvB,IAASpB,GACT,oBAAC,QAAD,CAAOpC,MAAOD,aAAG,6BAA8B,yBAA0B0D,eAAiBL,GACzF,8DAAiC,kCAASZ,EAAKkB,YAA/C,MACA,oBAAC,cAAD,KACC,oBAAC,SAAD,CAAQxC,eAAa,EAACP,QAAU,WAvBnB,IAACgD,IAwBHnB,EAAKS,GAvBpBpC,YAAkB,CACjBvC,OAAQqF,EACRpE,YACAuB,WAAW,EACX7B,kBAoBImE,MAFD,WAMA,oBAAC,SAAD,CAAQQ,QAAQ,YAAYjD,QAAU,WACrC1B,EAAc,CACbV,IAAKQ,IAENqE,MAJD,oBAQA,oBAAC,SAAD,CAAQQ,QAAQ,YAAYjD,QAAUyC,GAAtC,aAMO,IAASlB,GACN,oBAAC,UAAD,CACI2B,SAAS,gBACTC,QAAS,kBAAM3B,GAAc,KAE7B,2BAAKpB,MAAO,CACRgD,SAAU,QACVC,QAAS,MAC3BC,QAAS,OACTC,WAAY,aAEZ,2BAAKnD,MAAO,CACXoD,SAAU,MAEV,oBAAC,cAAD,CACCrE,MAAO,MACPf,MAAOuD,EACPnC,SAAU,SAACpB,GAAD,OAAUwD,EAAcxD,IAClCqF,aAAa,SAGf,2BAAKrD,MAAO,CACXsD,cAAe,MACfC,YAAa,MACbC,MAAO,SAENvC,GACA,2BAAKjB,MAAO,CAAEsD,cAAe,QAC5B,oBAAC,UAAD,QAGArC,IAAa,IAAUQ,GACxB,oBAAC,SAAD,CAAQe,KAAK,UAAUK,QAAQ,WAAWjD,QAAS,WAClD1B,EAAc,CAAEV,IAAKQ,IACrBoD,GAAc,OAGdH,IAAa,IAAUQ,GAAQ,OAASA,GACzC,oBAAC,SAAD,CAAQe,KAAK,UAAUK,QAAQ,WAAWjD,QAtF7B,WACnBwB,GAAc,GACdE,GAAe,WAqVFmC,EAvPC,SAAC,GAA0D,IAAxDhH,EAAuD,EAAvDA,WAAYyB,EAA2C,EAA3CA,cAAeC,EAA4B,EAA5BA,QAClCZ,GAD8D,EAAnBa,aAC0B3B,EAArEc,QAAQC,EAA6Df,EAA7De,IAAKgB,EAAwD/B,EAAxD+B,UAAWC,EAA6ChC,EAA7CgC,UAAWiF,EAAkCjH,EAAlCiH,WAAYC,EAAsBlH,EAAtBkH,WAAY1E,EAAUxC,EAAVwC,MAEtE5B,QAAQC,IAAI,UAAWa,GAEpB,IAAMyF,OAAchD,IAAczC,EAAQ,2BAA4BA,EAAQ,0BAC3E0F,OAAqBjD,IAAczC,EAAQ,0BAA2BA,EAAQ,yBACpFd,QAAQC,IAAI,cAAesG,EAAaC,GAErC,IAAMC,EAAO,SAAC,GAA4C,IAAD,IAAzCC,eAAyC,aAAxBC,iBAAwB,SACrD,OAAI,IAAUD,EACH,KAGP,oBAAC,MAAD,CACIP,MAAO,GACPS,OAAQ,GACRC,QAAQ,YACRC,MAAM,6BACNH,UAAWA,GAEX,oBAAC,OAAD,CAAMI,EAAGL,MAKfM,EAAgB,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SACpB,MAAK,UAAYA,EACNC,IAEN,SAAWD,EACLE,IAEN,QAAUF,EACJG,IAEN,WAAaH,EACPI,IAEN,aAAeJ,EACTK,IAEJC,KAGLC,EAAgB,SAAC,GAAiC,IAAhCP,EAA+B,EAA/BA,SAAUQ,EAAqB,EAArBA,gBAQ9B,OACI,oBAAChB,EAAD,CACIC,QATU,CACdgB,GAAI,sLACJC,GAAI,wWACJC,GAAI,whBACJC,GAAI,qNACJC,GAAI,iIAImBb,GACnBN,UAAWM,IAAaQ,KAK9BM,EAAmB,SAAC,GAAiC,IAAhCd,EAA+B,EAA/BA,SAAUQ,EAAqB,EAArBA,gBAMjC,OACI,oBAAChB,EAAD,CACIC,QAPU,CACdsB,EAAG,kCACHC,EAAG,gFACHC,EAAG,ibAIoBjB,GACnBN,UAAWM,IAAaQ,KAK9BU,EAAwB,SAACC,GAC3BvH,EAAc,CAAEM,UAAWiH,IAC3BC,YAAaD,EAASlI,EAAQW,GAC9Bb,QAAQC,IAAI,uCAAwCa,IAGxD,OACI,oBAAC,gBAAD,KACI,oBAAC,eAAD,KACI,oBAAC,EAAD,CAAYc,MAAOA,EAAO4B,GAAItD,EAAQC,IAAKA,EAAKb,KAAK,OAAOuB,cAAeA,KAE/E,oBAAC,eAAD,KACI,oBAAC,sBAAD,CACIsE,KAAM,kBAAK,oBAAC4C,EAAD,CAAkBd,SAAUZ,EAAYoB,gBAAiBpB,KACpE3E,MAAM,sBACN4G,SAAW,CACP,CACI1G,MAAO,QACPuD,KACI,oBAAC4C,EAAD,CAAkBd,SAAU,EAAGQ,gBAAiBpB,IAEpDkC,SAAU,IAAMlC,EAChB9D,QAAS,kBAAM1B,EAAc,CAAEwF,WAAY,MAE/C,CACIzE,MAAO,SACPuD,KACI,oBAAC4C,EAAD,CAAkBd,SAAU,EAAGQ,gBAAiBpB,IAEpDkC,SAAU,IAAMlC,EAChB9D,QAAS,kBAAM1B,EAAc,CAAEwF,WAAY,MAE/C,CACIzE,MAAO,QACPuD,KACI,oBAAC4C,EAAD,CAAkBd,SAAU,EAAGQ,gBAAiBpB,IAEpDkC,SAAU,IAAMlC,EAChB9D,QAAS,kBAAM1B,EAAc,CAAEwF,WAAY,UAK3D,oBAAC,eAAD,KACI,oBAAC,sBAAD,CACIlB,KAAM,kBAAI,oBAAC6B,EAAD,CAAeC,SAAU7F,KACnCM,MAAM,oBACN4G,SAAW,CACP,CACI1G,MAAO,MACPuD,KACI,oBAAC6B,EAAD,CAAeC,SAAS,QAE5BsB,SAAU,QAAUnH,EACpBmB,QAAS,WAEL1B,EAAc,CAACO,UADC,UAIxB,CACIQ,MAAO,SACPuD,KACI,oBAAC6B,EAAD,CAAeC,SAAS,WAE5BsB,SAAU,WAAanH,EACvBmB,QAAS,WAEL1B,EAAc,CAACO,UADC,aAIxB,CACIQ,MAAO,OACPuD,KACI,oBAAC6B,EAAD,CAAeC,SAAS,SAE5BsB,SAAU,SAAWnH,EACrBoH,YAAY,IAAShC,IAAsB,IAAUD,GA3R5D,GA2R2FA,EACpFhE,QAAS,WAEL1B,EAAc,CAACO,UADC,WAIxB,CACIQ,MAAO,QACPuD,KACI,oBAAC6B,EAAD,CAAeC,SAAS,UAE5BsB,SAAU,UAAYnH,EACtBoH,YAAY,IAAShC,IAAsB,IAAUD,GAvS5D,GAuS2FA,EACpFhE,QAAS,WAEL1B,EAAc,CAACO,UADC,YAIxB,CACIQ,MAAO,WACPuD,KACI,oBAAC6B,EAAD,CAAeC,SAAS,aAE5BsB,SAAU,aAAenH,EACzBmB,QAAS,WAEL1B,EAAc,CAACO,UADC,kBAM/B,aAAeA,GACZ,oBAAC,WAAD,KACA,oBAAC,sBAAD,CACI+D,KAAM,kBAAK,oBAACqC,EAAD,CAAeP,SAAU9F,EAAWsG,gBAAiBtG,KAChEO,MAAM,oBACN4G,SAAW,CACP,CACI1G,MAAO,KACPuD,KACI,oBAACqC,EAAD,CAAeP,SAAS,KAAKQ,gBAAiBtG,IAElDoH,SAAU,OAASpH,EACnBoB,QAAS,kBAAM4F,EAAsB,QAEzC,CACIvG,MAAO,KACPuD,KACI,oBAACqC,EAAD,CAAeP,SAAS,KAAKQ,gBAAiBtG,IAElDoH,SAAU,OAASpH,EACnBoB,QAAS,kBAAM4F,EAAsB,QAEzC,CACIvG,MAAO,KACPuD,KACI,oBAACqC,EAAD,CAAeP,SAAS,KAAKQ,gBAAiBtG,IAElDoH,SAAU,OAASpH,EACnBoB,QAAS,kBAAM4F,EAAsB,QAEzC,CACIvG,MAAO,KACPuD,KACI,oBAACqC,EAAD,CAAeP,SAAS,KAAKQ,gBAAiBtG,IAElDoH,SAAU,OAASpH,EACnBoB,QAAS,kBAAM4F,EAAsB,QAEzC,CACIvG,MAAO,KACPuD,KACI,oBAACqC,EAAD,CAAeP,SAAS,KAAKQ,gBAAiBtG,IAElDoH,SAAU,OAASpH,EACnBoB,QAAS,kBAAM4F,EAAsB,WAIjD,oBAAC,gBAAD,CACIhD,KAAK,YACLwB,UAAWL,EACX5E,MAAOC,aAAG,oBACVY,QAAS,WACL1B,EAAc,CACVyF,YAAaA,WChZvCmC,EAAW,SAAC,GAA0D,IAAxDrJ,EAAuD,EAAvDA,WAAYyB,EAA2C,EAA3CA,cAAeC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,aACpD,OACI,oBAAC,WAAD,KACI,oBAAC,EAAD,CAAe3B,aAAYyB,gBAAeC,UAASC,iBACnD,oBAAC,EAAD,CAEQ3B,aACAyB,gBACAC,UACAC,mB,iBCRd2H,EAAsB,CAAC,SAGvBhB,EAAK,CACP/H,QAAS,UACTgJ,MAAO,UACPC,MAAO,WACPC,WAAY,YAGVlB,EAAK,CACPhI,QAAS,UACTgJ,MAAO,UACPC,MAAO,UACPC,WAAY,YAGVjB,EAAK,CACPjI,QAAS,UACTgJ,MAAO,SACPC,MAAO,UACPC,WAAY,WAGVhB,EAAK,CACPlI,QAAS,UACTgJ,MAAO,UACPC,MAAO,UACPC,WAAY,YAGVf,EAAK,CACPnI,QAAS,UACTgJ,MAAO,UACPC,MAAO,WACPC,WAAY,YAGVC,EAAe,SAAC,GAA+D,IAA7DC,EAA4D,EAA5DA,IAAKC,EAAuD,EAAvDA,KAAMzJ,EAAiD,EAAjDA,KAAiD,IAA3CgD,eAA2C,aAA1B0G,mBAA0B,SAE1EC,EAAY,SAAA1D,GACd,IAAI,IAASyD,EAAa,CActB,MAAM,+BAAN,OAZI,OAASD,EACI,UACN,OAASA,EACH,UACN,OAASA,EACH,UACN,OAASA,EACH,WAGA,WAEjB,qBAA6DA,GAGjE,GAAI,KAAOD,IAAO,IAAUA,EACxB,OAAOA,EAIX,IAAII,EAAO,CAAEC,OAAQ1B,EAAGlC,IAWxB,MAVI,OAASwD,EACTG,EAAO,CAAEC,OAAQzB,EAAGnC,IACb,OAASwD,EAChBG,EAAO,CAAEC,OAAQxB,EAAGpC,IACb,OAASwD,EAChBG,EAAO,CAAEC,OAAQvB,EAAGrC,IACb,OAASwD,IAChBG,EAAO,CAAEC,OAAQtB,EAAGtC,KAGjB6D,uBAAaN,EAAKI,IAIvBG,EAAe,WAAsB,IAArBC,EAAoB,uDAAR,IAC9B,MAAO,CACH,CACIC,OAAO,GAAD,OAAKN,EAAU,WAAf,gBAAiCA,EAAU,SAA3C,OACNO,MAAM,eAAD,OAAiBF,EAAjB,QAET,CACIC,OAAO,GAAD,OAAKN,EAAU,SAAf,gBAA+BA,EACjC,cADE,OAGNO,MAAM,eAAD,OAAiBF,EAAjB,UAKjB,OAAI,IAAUhH,EAEN,2BAAKA,QAASA,IACT,IAAS0G,GACN,2BAAKS,IAAKR,IAAaS,IAAI,qBAE9B,IAASV,GACN,oBAAC,IAAD,CAASW,QAASN,IAAgBK,IAAI,mBAOlD,oBAAC,WAAD,KACK,KAAOpK,GAAQ,oBAAC,IAAD,CAASqK,QAASN,MACjC,KAAO/J,GACJ,yBAAGsK,KAAMtK,GACL,oBAAC,IAAD,CAASqK,QAASN,SAOhCQ,EAAO,SAAC,GAA0C,IAAxCf,EAAuC,EAAvCA,IAAKC,EAAkC,EAAlCA,KAAcnI,GAAoB,EAA5BX,OAA4B,EAApBW,eAoC/B,OACI,oBAAC,mBAAD,KACI,oBAAC,cAAD,CACIkJ,SAAU,SAAAN,GAAK,OAAI5I,EAAc,CAAEoC,MAAOwG,EAAMtJ,OAChD6J,aAActB,EACduB,OAAQ,YAAe,IAAZC,EAAW,EAAXA,KACP,OACI,oBAAC,WAAD,UAIK3G,IAAcwF,GAAO,IAAMA,EAAIxI,QAC5B,oBAAC,EAAD,CACIwI,IAAKA,EACLC,KAAMA,EACNzJ,KAAK,GACLgD,QAAS2H,UAGf3G,IAAcwF,GAAO,IAAMA,EAAIxI,SAC7B,oBAAC,EAAD,CACIwI,IAAKA,EACLC,KAAMA,EACNzJ,KAAK,GACLgD,QAAS2H,EACTjB,aAAW,UA0EhCkB,EAnDH,SAAC,GAA0D,IAAxDpB,EAAuD,EAAvDA,IAAKC,EAAkD,EAAlDA,KAAMoB,EAA4C,EAA5CA,KAAMC,EAAsC,EAAtCA,SAAUnK,EAA4B,EAA5BA,OAAQW,EAAoB,EAApBA,cAC9C,GAAK,aAAeuJ,EAChB,OAAO,oBAAC,WAAD,MAGXpK,QAAQC,IAAI,QAAS8I,GAErB,IACQuB,EACAC,EACAC,EACAC,EACAC,EA2BR,OACI,2BAAKjK,WAhCD6J,GAAO,EACPC,GAAO,EACPC,GAAO,EACPC,GAAO,EACPC,GAAO,GACP,IAAUN,IACN,OAASpB,EACTsB,GAAO,EACA,OAAStB,EAChBuB,GAAO,EACA,OAASvB,EAChBwB,GAAO,EACA,OAASxB,EAChByB,GAAO,EACA,OAASzB,IAChB0B,GAAO,IAIRC,IAAW,CACdC,IAAI,EACJ9C,GAAIwC,EACJ5C,GAAI6C,EACJ5C,GAAI6C,EACJ5C,GAAI6C,EACJ5C,GAAI6C,EACJzH,OAAO,EACP4H,SAAUR,MAMV,oBAAC,EAAD,CACItB,IAAKA,EACLC,KAAMA,EACN9I,OAAQA,EACRW,cAAeA,MCvOhBiK,EAnBC,SAAC,GAAoD,IAAlDC,EAAiD,EAAjDA,QAASC,EAAwC,EAAxCA,UAAWC,EAA6B,EAA7BA,QAASpK,EAAoB,EAApBA,cAC5C,IAAI,IAASoK,EACT,OAAO,oBAAC,WAAD,MAGX,IAAMC,EAAUP,IAAW,UAAW,CAAE,aAAcK,IAEtD,OACI,oBAAC,WAAD,CACItK,QAAQ,MACRC,MAAOoK,EACPhJ,SAAU,SAAAvC,GAAO,OAAIqB,EAAc,CAAErB,aACrCyJ,YAAY,wBACZxJ,UAAU,IACVgB,UAAWyK,KCURC,EA7BD,SAAC,GAAuD,IAArDJ,EAAoD,EAApDA,QAASK,EAA2C,EAA3CA,aAAcH,EAA6B,EAA7BA,QAASpK,EAAoB,EAApBA,cAC7C,OACI,oBAAC,WAAD,MACK,IAASoK,GACN,oBAAC,WAAD,CACIvK,QAAQ,KACRC,MAAOoK,EACPhJ,SAAU,SAAAgB,GAAK,OAAIlC,EAAc,CAAEkC,WACnCkG,YAAa8B,EACbtL,UAAU,KACVgB,UAAU,WAGjB,IAAS2K,IAAgB,IAAUlM,OAAO8C,iBACvC,0BAAIvB,UAAU,uBACV,8BACI,yBACIoJ,KAAM3K,OAAO8C,gBAAgB7B,IAC7BM,UAAU,wBAETvB,OAAO8C,gBAAgBN,WCUrC2J,MAzBf,YAA2E,IAAzDzJ,EAAwD,EAAxDA,MAAOoH,EAAiD,EAAjDA,KAAMiC,EAA2C,EAA3CA,QAASpK,EAAkC,EAAlCA,cAAeyK,EAAmB,EAAnBA,gBACtD,IAAI,IAASL,EACZ,OAAO,oBAAC,WAAD,MAGR,IAAMC,EAAUP,IAAW,SAAU,CACpCY,MAAO,IAAMvC,EACbwC,OAAQ,IAAMxC,EACdL,MAAO,IAAMK,EACbyC,MAAOH,IAGR,OACC,oBAAC,WAAD,CACC5K,QAAQ,SACRC,MAAOiB,EACPG,SAAU,SAAC2J,GAAD,OAAO7K,EAAc,CAAEe,MAAO8J,KACxCC,eAAgB,CAAC,UACjB1C,YAAY,QACZxJ,UAAU,KACVgB,UAAWyK,KCUCU,MAnCf,YAAqE,IAArDX,EAAoD,EAApDA,QAASjI,EAA2C,EAA3CA,KAAMtB,EAAqC,EAArCA,MAAOb,EAA8B,EAA9BA,cAAegL,EAAe,EAAfA,YACpD,OAAKZ,GAILjL,QAAQC,IAAI,SAAUyB,GAGrB,2BAAKjB,UAAU,OAAOkC,MAAO,CAAEkD,QAAS,OAAQC,WAAY,WAC3D,+BACC,oBAAC,gBAAD,CACCnF,MAAOe,EACPQ,QAAS2J,EACT9J,SAAU,SAAC+J,GACVjL,EAAc,CAAEa,MAAOoK,KAExBnJ,MAAO,CAAEC,aAAc,OACvBnC,UAAU,wBAGZ,sCACA,+BACC,oBAAC,cAAD,CACCE,MAAOqC,EACPjB,SAAU,SAACgF,GACVlG,EAAc,CAAEmC,KAAM+D,KAEvBpE,MAAO,CAAEC,aAAc,OACvBnC,UAAU,0BA1BN,oBAAC,WAAD,OCEHsL,EAAc,CACnBrE,GAAI,CAAC,KAAM,KACXC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,KAAM,MAgHGkE,MA7Gf,YAAkC,IAAf5M,EAAc,EAAdA,WAEjBwC,EAkBGxC,EAlBHwC,MACApC,EAiBGJ,EAjBHI,QACAuD,EAgBG3D,EAhBH2D,MACArB,EAeGtC,EAfHsC,MACAsB,EAcG5D,EAdH4D,KACAC,EAaG7D,EAbH6D,MACA7B,EAYGhC,EAZHgC,UACAD,EAWG/B,EAXH+B,UACAmF,EAUGlH,EAVHkH,WACAD,EASGjH,EATHiH,WACA7E,EAQGpC,EARHoC,eACAH,EAOGjC,EAPHiC,aACA3B,EAMGN,EANHM,cACAE,EAKGR,EALHQ,mBACA0B,EAIGlC,EAJHkC,YACAC,EAGGnC,EAHHmC,mBACAxB,EAEGX,EAFHW,WACAU,EACGrB,EADHqB,UAGKwL,EAAiB,CACtBpB,SAAUrJ,EACV,cAAe5B,GAEZ,aAAewB,IAClB6K,EAAe7K,IAAa,EAC5B6K,EAAeC,SAAU,GAE1B,IAAMC,EAAiB,CACtB1L,UAAWkK,IAAW,aAAclK,EAAWwL,IAE5C,aAAe7K,GAAa,EAAID,EAAUZ,SAC7C4L,EAAe,mBAAqBhL,GAGrC,IAAMgC,EAAaiJ,wBAAcD,GAE3BE,EAAgB1B,IAAW,SAAU,CAC1CY,MAAO,IAAMlF,EACbmF,OAAQ,IAAMnF,EACdsC,MAAO,IAAMtC,EACboF,OAAO,IAGFa,EAAe3B,IAAW,QAAS,CACxCE,SAAUvE,EACVwB,GAAI,OAAS3G,EACb0G,GAAI,OAAS1G,EACbyG,GAAI,OAASzG,EACbwG,GAAI,OAASxG,EACbuG,GAAI,OAASvG,IAGRoL,EAAiB5B,IAAW,WAElC,OACC,8BAAaxH,EACXpD,GACA,2BAAKU,UAAU,QACd,4BAAMA,UAAU,SAASiB,GAD1B,KAC0C,IACzC,4BAAMjB,UAAU,QAAQuC,IAIzB,aAAe5B,GACf,2BAAKX,UAAS,UAAK6L,IAClB,mCACC,2BACC9C,OAAQvG,EACRkD,MAAO4F,EAAY5K,GAAW,GAC9ByF,OAAQmF,EAAY5K,GAAW,OAMlCE,GAAgB,8BAAQZ,UAAW4L,GAAgBzK,GAEnDlC,GACA,oBAAC,WAASc,QAAV,CACCE,QAAQ,MACRC,MAAOnB,EACPC,UAAU,IACVgB,UAAW8L,IAIZjL,GACA,oBAAC,WAASd,QAAV,CAAkBE,QAAQ,KAAKC,MAAOoC,EAAOtC,UAAU,WAGvD,IAASc,IAAsB,IAAUrC,OAAO8C,iBAChD,0BAAIvB,UAAU,uBACb,8BACC,yBACCoJ,KAAM3K,OAAO8C,gBAAgB7B,IAC7BM,UAAU,wBAETvB,OAAO8C,gBAAgBN,W,ykBC9E/BxC,OAAO2M,YAAc,CAAEW,QAAS,GAAI,iBAAkB,IAEtD,IAyKeC,EAzKF,SAAC,GAAkE,IAAhErN,EAA+D,EAA/DA,WAAYyB,EAAmD,EAAnDA,cAAe6L,EAAoC,EAApCA,WAAYC,EAAwB,EAAxBA,SAAU7L,EAAc,EAAdA,QAE/Dc,EAsBGxC,EAtBHwC,MACApC,EAqBGJ,EArBHI,QACAuD,EAoBG3D,EApBH2D,MACArB,EAmBGtC,EAnBHsC,MACAsB,EAkBG5D,EAlBH4D,KACAC,EAiBG7D,EAjBH6D,MACA7B,EAgBGhC,EAhBHgC,UACAD,EAeG/B,EAfH+B,UACAmF,EAcGlH,EAdHkH,WACApG,EAaGd,EAbHc,OACAmG,EAYGjH,EAZHiH,WACA7E,EAWGpC,EAXHoC,eACAH,EAUGjC,EAVHiC,aACA3B,EASGN,EATHM,cACAE,EAQGR,EARHQ,mBACA0B,EAOGlC,EAPHkC,YACAC,EAMGnC,EANHmC,mBACAxB,EAKGX,EALHW,WACAK,EAIGhB,EAJHgB,aAEAwM,GAEGxN,EAHHyN,OAGGzN,EAFHwN,WACAnM,EACGrB,EADHqB,UAGD,EAAsCO,mBACrC9B,OAAO2M,YAAYzL,IADpB,mBAAOyL,EAAP,KAAoBiB,EAApB,KAOAvI,qBAAU,WACL,aAAenE,IAEd,IAAMlB,OAAO2M,YAAYzL,GAAcG,OAC1CuM,EAAe5N,OAAO2M,YAAYzL,IAElC2M,YAAkB3M,GAAcwE,MAAK,SAAC1C,GAChChD,OAAO2M,YAAYzL,GAAcG,SACrCrB,OAAO2M,YAAYzL,GAAgB8B,GAEpC4K,EAAe5K,SAIhB,CAAC9B,IAKJmE,qBAAU,YAlEoB,SAACnF,GAAuC,IAA3ByB,EAA0B,wDAC/DmM,EAAU,IACX5N,EAAWc,QAAUd,EAAWC,SACpC2N,EAAQ9M,OAASd,EAAWC,QAGzB,IAAM4N,OAAOC,KAAKF,GAASzM,SAAU,IAAUM,IAClDb,QAAQC,IAAI,yBAA0Bb,EAAY4N,GAClDnM,EAAc,KAAKmM,KA2DnBG,CAAuB/N,EAAYyB,KACjC,IAGH0D,qBAAU,WAERzD,EAAQsM,eAAe,UACvBtM,EAAQsM,eAAe,YACtBC,OAAOjL,UAAUlC,IAElBF,QAAQC,IAAI,wCAUX,CAACa,IAEJ,IAAQC,EAAiBuM,qBACxB,SAACC,GAAD,MAAa,CACZxM,aAAcwM,EAAO,qBAAqBC,qBAAqBb,MAEhE,CAACA,IAJM5L,aAOF0M,GAAyB/N,EAEzBuM,EAAiB,CACtBpB,SAAUrJ,EACV,cAAe5B,GAEZ,aAAewB,IAClB6K,EAAe7K,IAAa,EAC5B6K,EAAeC,SAAU,GAE1B,IAAMC,EAAiB,CACtB1L,UAAWkK,IAAW,aAAclK,EAAWwL,IAE5C,aAAe7K,GAAa,EAAID,EAAUZ,SAC7C4L,EAAe,mBAAqBhL,GAErC,IAAMgC,EAAaiJ,wBAAcD,GAEjC,OAAKO,GAAcE,EACX,oBAAC,EAAD,CAASxN,WAAYA,SAGzBmE,IAAcrD,GAAWY,EAAQsM,eAAe,SAWnD,oBAAC,WAAD,KACC,oBAAC,EAAD,CAEEhO,aACAyB,gBACAC,UACAC,iBAGF,8BAAaoC,EACZ,oBAAC,EAAD,CACC4F,IAAK9F,EACL+F,KAAM7H,EACNiJ,KAAMhJ,EACNiJ,SAAU/D,EACVpG,OAAQA,EACRW,cAAeA,IAGhB,oBAAC,EAAD,CACCoK,QAASlL,GAAc,aAAeK,EACtC4C,KAAMA,EACNtB,MAAOA,EACPb,cAAeA,EACfgL,YAAaA,IAGd,oBAAC,EAAD,CACCZ,QAAS5J,EACTO,MAAOA,EACPoH,KAAM3C,EACNiF,gBAAiBmC,EACjB5M,cAAeA,IAGhB,oBAAC,EAAD,CACCoK,QAASvL,EACTqL,QAASvL,EACTwL,WAAY3J,EACZR,cAAeA,IAGhB,oBAAC,EAAD,CACCoK,QAAS3J,EACTyJ,QAAShI,EACTqI,aAAc7J,EACdV,cAAeA,EACf6L,WAAYA,MAxDd,oBAAC,EAAD,CACCtN,WAAYA,EACZyB,cAAeA,EACfsC,WAAYA,KCtID9C,GAVF,SAAC,GAAoB,IAAlBjB,EAAiB,EAAjBA,WACJI,EAAmBJ,EAAnBI,QAASuD,EAAU3D,EAAV2D,MACjB,OACI,oBAAC,WAAD,KACMvD,GAAY,oBAAC,WAASgB,QAAV,CAAkBC,UAAU,cAAcC,QAAQ,MAAMC,MAAOnB,IAC3EuD,GAAU,oBAAC,WAASvC,QAAV,CAAkBC,UAAU,QAAQC,QAAQ,KAAKC,MAAOoC,MCwBjE2K,GA/BI,CACf,CACIC,KAAM,qBACNC,WAAW,EACXhM,MAAOD,aAAG,cACVnC,QAASmC,aAAG,oDACZvC,WAAY,CACRgC,UAAW,MACXD,UAAW,OAGnB,CACIwM,KAAM,yBACN/L,MAAOD,aAAG,0BACVnC,QAASmC,aAAG,uDACZvC,WAAY,CACRgC,UAAW,OACXD,UAAW,OAGnB,CACIwM,KAAM,kBACN/L,MAAOD,aAAG,mBACVnC,QAASmC,aAAG,yBACZvC,WAAY,CACRgC,UAAW,WACX1B,eAAe,K,6kBCd3B,IAAQiO,GAASE,EAATF,KAEFG,GAAW,CAChBC,QAAS,CACR3O,WAAY,CACXwC,MAAO,qCACPpC,QACC,2OACDkC,MAAO,SACPsB,KAAMgL,IAASC,OAAO,cACtBhL,MAAO,oHACP7B,UAAW,MACXD,UAAW,KACXyL,WAAW,IAGbzN,aACAuO,cACAjB,OACApM,SAGD6N,4BAAkBP,GAAD,GAAC,MAAWE,GAAaC,M,iBCvC5B9O,EAAOC,QAAUC,OAAW,GAAU,Q,iBCAtCF,EAAOC,QAAUC,OAAW,GAAQ,M,iCCAlD,kGAUMmJ,EAAe,SAAClH,EAAWjB,EAAQW,GACpC,IAAMX,IAAU,IAAUW,GAC7B2D,IAAS,CACRC,KAAK,+BAAD,OAAiCvE,KACnC0E,MAAK,SAACD,IACJ,IAAUA,QACTpB,IAAcoB,EAAKxD,KAAc,IAAUN,GAC9CA,EAAc,CACboC,MAAO0B,EAAKxD,GAAWgN,OACvB7H,WAAY3B,EAAKxD,GAAWkJ,eAgB5B+D,EAAwB,SAAxBA,EAAyBC,GAC9B,IAAQjK,EAAuCiK,EAAvCjK,KAAMjD,EAAiCkN,EAAjClN,UAAd,EAA+CkN,EAAtB3L,iBAAzB,SACA1C,QAAQC,IAAImO,EAAuBhK,GAEnC,IAAM2C,EAAI,IAAIuH,KAAKlK,EAAKpB,MAClBA,EAAOgL,EAAOjH,GAAGkH,OAAO,eAExBM,EAAY,CACjB3M,MAAOwC,EAAKxC,MAAMwL,eAAe,YAC9BhJ,EAAKxC,MAAM4M,SACXpK,EAAKxC,MAERpC,QAAS4E,EAAK5E,QAAQ4N,eAAe,YAClChJ,EAAK5E,QAAQgP,SACbpK,EAAK5E,QACRW,IAAKiE,EAAK7E,KACVmC,MAAO0C,EAAKgJ,eAAe,SAAWhJ,EAAK1C,MAAQ,SACnDsB,OACA9C,OAAQkE,EAAKZ,IAOd,IAJI,IAASd,IACZ6L,EAAUxL,MAAQ,IAGfqB,EAAKqK,IAAK,CACb,IAAQA,EAAQrK,EAARqK,IACRF,EAAUtL,MAAQwL,EAAItN,GAAWgN,OACjCI,EAAUjI,WAAamI,EAAItN,GAAWkJ,SAKvC,OAFArK,QAAQC,IAAI,wBAAyBmE,EAAMmK,GAEpCA,GA0CF9L,EAAoB,SAACP,GAC1B,IACCrB,EAKGqB,EALHrB,cADD,EAMIqB,EAJHhC,cAFD,WAMIgC,EAHH/B,WAHD,WAMI+B,EAFHf,iBAJD,MAIa,KAJb,IAMIe,EADHQ,iBALD,UAQK,IAAUxC,IAAU,IAAUC,QAAQoD,IAAc1C,KAIrD,IAAUV,GApDc,SAACkO,GAC7B,IAAQlO,EAAmBkO,EAAnBlO,IAAKgB,EAAckN,EAAdlN,UAEb,OAAO,IAAIuN,SAAQ,SAACC,EAASC,GAC5BpK,IAAS,CACRC,KAAM,gDACNC,OAAQ,OACRC,KAAM,CAAExE,SAEPyE,MAAK,SAACR,GAEN,GADApE,QAAQC,IAAI,uBAAwBmE,IAChC,IAAUA,EAAM,CACnB,IAAMyK,EAAQT,EAAsB,CACnChK,OACAjD,YACAuB,WAAW,IAEZiM,EAAQE,QAERD,EAAOxK,MAGRU,OAAM,SAACC,GACP/E,QAAQ8O,MAAM/J,GACd6J,EAAO7J,SA6BTgK,CAAqB,CACpB5O,MACAgB,cAECyD,MAAK,SAACiK,GACN7O,QAAQC,IAAI,+BAAgC4O,GAC5ChO,EAAcgO,MAEd/J,OAAM,SAACC,GACP/E,QAAQ8O,MAAM/J,MAIjBP,IAAS,CACRC,KAAK,eAAD,OAAiBvE,GACrBwE,OAAQ,QAEPE,MAAK,SAACR,GAEN,GADApE,QAAQC,IAAI,8BAA+BC,EAAQkE,IAC/C,IAAUA,EAAM,CACnB,IAAMyK,EAAQT,EAAsB,CACnChK,OACAjD,YACAuB,cAED7B,EAAcgO,OAGf/J,OAAM,SAACC,GAAD,OAAS/E,QAAQ8O,MAAM/J,S,kBCxJhC/F,EAAOC,QAAU+O,Q,gBCAHhP,EAAOC,QAAUC,OAAW,GAAQ,M,iBCApCF,EAAOC,QAAUC,OAAW,GAAc,Y,iBCA1CF,EAAOC,QAAUC,OAAW,GAAY,U,gBCAxCF,EAAOC,QAAUC,OAAW,GAAc,Y,ojDCA1CF,EAAOC,QAAUC,OAAW,GAAO,K,iBCAnCF,EAAOC,QAAUC,OAAW,GAAgB,c,gBCA5CF,EAAOC,QAAUC,OAAW,GAAW,S,kBCAvCF,EAAOC,QAAUC,OAAW,GAAY,U,+bC2BvCoF,MArBf,SAAqB3D,EAAOqO,GAExB,MAA4ChO,mBAASL,GAArD,mBAAOsO,EAAP,KAAuBC,EAAvB,KAgBA,OAfA3K,qBACI,WAEI,IAAM4K,EAAU3M,YAAW,WACvB0M,EAAkBvO,KACnBqO,GAIH,OAAO,WACHI,aAAaD,MAGrB,CAACxO,EAAOqO,IAELC,G,uBCSII,I,oBCrBTC,EAAeC,YAAOC,SAAPD,CAAH,qZAyEHE,EA9CI,SAAC,GAAuE,IAArEC,EAAoE,EAApEA,WAAYnN,EAAwD,EAAxDA,QAASoN,EAA+C,EAA/CA,WAAYjD,EAAmC,EAAnCA,WAAYlJ,EAAuB,EAAvBA,GAAIoM,EAAmB,EAAnBA,aAChEC,EAAWH,EAAWpQ,MAAQsQ,EAAarP,OAAS,EAE1D,OACC,oBAAC,UAAD,CAASsC,KAAMiN,yBAAeJ,EAAW9N,QACxC,oBAAC0N,EAAD,CACC9L,GAAIA,EACJjB,QAASA,EACT9B,UAAS,2DACRiM,GAAc,eAEf/J,MAAO,CACNoN,aAAc,IACdC,UAAW,eAGZ,4BAAMvP,UAAU,iDACf,4BACCA,UAAU,+CACVkC,MAAO,CACNsN,aAAeJ,EAAe,KAAJ,IAG3B,oBAAC,gBAAD,CAAehN,KAAMiN,yBAAeJ,EAAW9N,OAAQsO,UAAWP,KAEnE,4BACCQ,eAAA,EACA1P,UAAU,8CACVkC,MAAO,CACNsN,aAAeJ,EAAe,KAAJ,IAG1BO,8BAAoBC,wBAAcX,EAAWvP,OAAS,KAGxD0P,GACA,4BAAMpP,UAAU,+CAEM,aAApBiP,EAAWpQ,KAAsB,MAAQoQ,EAAWpQ,SCnDrDgR,EAAY,qBAEZC,EAAc,GAEpB,SAASC,EAAT,GASI,IARHC,EAQE,EARFA,aACAxH,EAOE,EAPFA,YACAvH,EAME,EANFA,MAME,IALFiB,aAKE,MALM,SAKN,EAJFiN,EAIE,EAJFA,aACAc,EAGE,EAHFA,KACAC,EAEE,EAFFA,aACAC,EACE,EADFA,QAEA,EAAsC5P,mBAAS,IAA/C,mBAAO6P,EAAP,KAAoBC,EAApB,KACMC,EAAezM,EAAYuM,EAAa,KAE9C,EAAkD7P,oBAAS,GAA3D,mBAAOgQ,EAAP,KAA0BC,EAA1B,KAEA,EAA0CjQ,mBAAS,IAAnD,mBAAOkQ,EAAP,KAAsBC,EAAtB,KACA,EAAkCnQ,oBAAS,GAA3C,mBAAO4C,EAAP,KAAkBC,EAAlB,KACA,EAAwC7C,mBAAS,MAAjD,mBAAOoQ,EAAP,KAAqBC,EAArB,KACMC,EAAqBC,mBAErBC,EAAUD,kBAAO,GAkBjBE,EAAe,SAACtR,GACrB,YAAIoD,IAAcpD,GAGX,IAAIuO,SAAQ,SAACC,EAASC,GAC5BpK,IAAS,CACRC,KAAM,oCACNC,OAAQ,OACRC,KAAM,CAAExE,SAEPyE,MAAK,SAACR,GACNpE,QAAQC,IAAI,eAAgBmE,GAC5BuK,EAAQvK,MAERU,OAAM,SAACC,GAAD,OAAS6J,EAAO7J,UAkBpB2M,EAAgB,SAACC,GAAD,OACrBA,EAAQC,QAAO,SAACC,GACf,IAAIC,GAAO,EAMX,OAJInB,EAAapQ,SAChBuR,EAAOnB,EAAaoB,OAAM,SAACC,GAAD,OAAUA,EAAKxO,KAAOqO,EAAOrO,OAGjDsO,MAGHG,IAAoBlB,EAAaxQ,OACjC2R,IAAqBhB,EAAc3Q,OAsGzCgE,qBACC,kBAAM,WACLiN,EAAQW,SAAU,KAEnB,IAGD5N,qBAAU,WACT,GAAI,KAAOwM,EAAc,CACxB,IAAMqB,EAAQrB,EAAasB,MAAM,sBACjCpB,EAAqBmB,GAtGU,SAACE,GAA4B,IAAnBF,EAAkB,wDAK5D,GAJId,EAAmBa,SACtBb,EAAmBa,QAAQI,QAGxB,KAAOD,EAAQE,OAIlB,OAHA3O,GAAa,GACbsN,EAAiB,SACjBG,EAAmBa,QAAU,MAI9Bb,EAAmBa,QAAU,IAAIM,gBAEjC5O,GAAa,GAEb,IAAM6O,EAAW,+BAA2BJ,EAA3B,oBAA8C1C,EAAa+C,KAC3E,KADgB,iBAEPjC,EAFO,4BAEiBE,GAE9BL,EAAYmC,IACfpB,EAAmBa,QAAU,KAE7BhB,EAAiBO,EAAcnB,EAAYmC,KAC3C7O,GAAa,IACHuO,GACVpS,QAAQC,IAAI,QAASqS,GACrBb,EAAaa,GACX1N,MAAK,SAACR,GACN,GAAIoN,EAAQW,QAAS,CACpB,IAAQtN,EAAgDT,EAAhDS,GAAIS,EAA4ClB,EAA5CkB,WAAYsN,EAAgCxO,EAAhCwO,UAAWC,EAAqBzO,EAArByO,UAAWnR,EAAU0C,EAAV1C,MAC9C4P,EAAmBa,QAAU,KAE7B,IAAMN,EAAS,CACd,CACCrO,GAAIqB,EACJiO,QAASF,EACThR,MAAO0D,EACPhG,KAAM,OACNa,IAAK0S,EACLnR,UAIF1B,QAAQC,IAAI,qBAAsB4R,EAAQzN,GAE1CmM,EAAYmC,GAAeb,EAE3BV,EAAiBO,EAAcG,IAE/BhO,GAAa,OAGdiB,OAAM,SAACgK,EAAOiE,GACd/S,QAAQC,IACP,sEACAqS,GAGDzO,GAAa,OAGfW,IAAS,CACRC,KAAMiO,EACNM,OAAQ1B,EAAmBa,QAAQa,SAElCpO,MAAK,SAAC+M,IACF,IAAUH,EAAQW,UAItBnS,QAAQC,IAAI,iBAAkB0R,GAE9BL,EAAmBa,QAAU,KAE7B5B,EAAYmC,GAAef,EAE3BR,EAAiBO,EAAcC,IAE/B9N,GAAa,OAEbiB,OAAM,SAACgK,EAAOiE,GAEV,gBAAkBjE,EAAMiE,OAC3B5B,EAAiB,IACjBG,EAAmBa,QAAU,KAC7BtO,GAAa,OAiBhBoP,CAAyBlC,EAAcqB,MAEtC,CAACrB,IAEJ,IAAMmC,EAAUC,YAAH,0GAMb,OACC,YAAC,gBAAD,CAAeC,WAhLS,SAACpB,GACrB,IAAMA,GACTX,EAAgB,MAGjBA,EAAgBW,IA2K6BqB,YAAY,YACxD,mBACC1Q,MAAO,CACNkD,QAAS,SAGV,mBACClD,MAAO,CACNoD,SAAU,MAGV,YAAcpD,GACd,YAAC,cAAD,CACCjB,MAAOA,EACPf,MAAOkQ,EACP9O,SAAU,SAACuQ,GAAD,OAAaxB,EAAewB,IACtCrJ,YAAaA,EACbjD,aAAa,QAGd,WAAarD,GACb,YAAC,gBAAD,CACChC,MAAOkQ,EACP9O,SAAU,SAACuQ,GAAD,OAAaxB,EAAewB,IACtCrJ,YAAaA,KAKfrF,GACA,mBACCjB,MAAO,CACN8C,SAAU,WACV6N,MAAO,YAAc3Q,EAAQ,MAAQ,OACrC4Q,UAAW,YAAc5Q,EAAQ,OAAS,SAG3C,YAAC,UAAD,QAIFsP,EACA,kBACCxR,UAAS,UAAK6P,EAAL,SACT3N,MAAO,CACN4Q,UAAW,IACX3Q,aAAc,IACd4Q,WAAY,IACZtN,YAAa,IACbuN,UAAW,QAEZN,IAAKD,IAEHtP,IAAcsO,IAAoB,IAAUlB,GAC7C,kBACCvQ,UAAS,UAAK6P,EAAL,gCACT3N,MAAO,CACN+Q,MAAO,UACPC,OAAQ,UACRzN,YAAa,QAGbvE,aAAG,iBAAkB,0BAGtBiC,IAAcsO,GAAoBlB,GACnC,kBACCvQ,UAAS,UAAK6P,EAAL,gCACT3N,MAAO,CACN+Q,MAAO,UACPC,OAAQ,UACRzN,YAAa,QAGbvE,aAAG,6BAA8B,0BAGlCiC,GACDsN,EAAc0C,KAAI,SAAC5B,EAAM6B,GACxB,OAAK7B,EAAKpQ,MAAMrB,OAKf,kBACCuT,IAAK9B,EAAKxO,GACV/C,UAAS,UAAK6P,EAAL,cACT3N,MAAO,CACNC,aAAc,MAGf,YAAC,EAAD,CACCL,QAAS,kBA1OU,SAACyP,GAC5Bb,EAAiB,IACjBL,EAAe,IACfL,EAAauB,GAuOU+B,CAAoB/B,IACnCrC,WAAYoB,EACZrB,WAAYsC,EACZpC,aAAcA,EACdlD,WAAY0E,IAAiByC,EAAQ,KAhBhC,SAsBR,M,gBChUDG,EAAaC,aAAe,kBACjC,2BACCtR,MAAO,CAAEuR,YAAa,MAAOP,OAAQ,OAAQQ,WAAY,GACzDhO,MAAM,KACNS,OAAO,KACPE,MAAM,6BACND,QAAQ,YACRuN,KAAK,MACLjE,cAAY,OACZkE,UAAU,SAEV,4BAAMtN,EAAE,8FAIJuN,EAAU/E,YAAO,MAAPA,CAAH,kRAqGEgF,EA9EI,SAAC,GAA2D,IAAzDvC,EAAwD,EAAxDA,KAAwD,IAAlDwC,mBAAkD,SAA7BC,EAA6B,EAA7BA,iBAAkB/D,EAAW,EAAXA,KAC5DpR,EAAgB,SAAToR,EAAkB,WAAa,WAItCgE,EAAepH,qBACpB,SAACC,GACA,MAAmDA,EAAO,QAAlDoH,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,sBAEnBC,EAA4B,CAACvV,EAAM0S,EAAK1S,KAAM0S,EAAKxO,IACnDqO,EAAS8C,EAAe,WAAf,EAAmBE,GAElC,GAAIhD,EAAQ,CACX7R,QAAQC,IAAI,WAAY4R,GACxB,IAAMiD,EAAU,CACflT,MAAgB,SAAT8O,EAAkBmB,EAAOjQ,MAAM4M,SAAWqD,EAAOlE,KACxDxN,IAAK0R,EAAOtS,KACZiE,GAAIqO,EAAOrO,IAOZ,OAJIwO,EAAK+C,OACRD,EAAQC,KAAO/C,EAAK+C,MAGdD,EAGR,GAAIF,EAAsB,kBAAmBC,GAC5C,OAAO,OAKT,CAAC7C,EAAKxO,GAAIlE,IAUX,OANAiF,qBAAU,WACY,OAAjBmQ,GACHD,EAAiBzC,KAEhB,CAACA,EAAMyC,EAAkBC,IAErBA,EACN,oBAACJ,EAAD,CACC3R,MAAO,CACNqS,OAAQ,kBACRC,WAAY,OACZhP,cAAe,OACfC,YAAasO,EAAc,MAAQ,OAEpC/T,UAAU,oDAET+T,EAAc,oBAACR,EAAD,MAAiB,GAChC,4BAAMvT,UAAU,iDACf,4BAAMA,UAAU,gDACdqP,yBAAe4E,EAAa9S,QAE9B,4BAAMuO,eAAA,EAAY1P,UAAU,+CAC1B2P,8BAAoBC,wBAAcqE,EAAavU,OAAS,KAI3D,8BACCb,KAAK,SACLiD,QAAS,WACRkS,EAAiBC,IAElBQ,aAAYvT,aAAG,cAAe,0BAL/B,MAWD,iCC9FawT,EA1BMC,aAAkB,YAA6E,IAA1EC,EAAyE,EAAzEA,MAAOb,EAAkE,EAAlEA,YAAaC,EAAqD,EAArDA,iBAAkB/D,EAAmC,EAAnCA,KAAmC,IAA7B4E,sBAA6B,SAC5GC,GAAgB,IAAUD,EAAkBd,EAAcgB,YAAgBF,GAAkBA,EAAkBd,EAAcgB,YAAgBjB,GAAcA,EAChK,OACC,2BACC5R,MAAO,CACN8S,WACC,wHAGDJ,EAAMzB,KAAI,SAAC5B,EAAM6B,GACjB,IAAM6B,EAAU1D,EAAK+C,KAAO/C,EAAK+C,KAAO/C,EAAKxO,GAC7C,OAAO,oBAAC+R,EAAD,CACNf,eAAaA,GAAea,EAAM9U,OAAS,IAAIiU,EAC/CV,IAAG,eAAU4B,GACb7B,MAAOA,EACPY,iBAAkBA,EAClBkB,UAAW9B,EACX7B,KAAMA,EACNtB,KAAMA,EACNkF,WAAYP,EAAM9U,gBCFjBsV,EAAetG,YAAO,MAAPA,CAAH,4LAcZuG,EAAgB,SAAC,GAkBhB,IAAD,EAjBLpU,EAiBK,EAjBLA,MACAuH,EAgBK,EAhBLA,YAgBK,IAfLyH,YAeK,MAfE,OAeF,MAdLd,oBAcK,MAdU,CAAC,OAAQ,QAcnB,MAbLmG,oBAaK,MAbU,SAACC,GACThW,QAAQC,IAAI,6BAA8B+V,IAY5C,MAVLC,uBAUK,MAVa,EAUb,MATLzB,mBASK,aARL0B,yBAQK,MARevU,aAAG,wCAAyC,wBAQ3D,MAPLwU,wBAOK,MAPcxU,aAAG,yCAA0C,wBAO3D,MANLhB,aAMK,MANG,GAMH,MALLyV,0BAKK,aAJLC,0BAIK,aAHLzF,eAGK,MAHK,GAGL,MAFL0F,uBAEK,aADLC,mBACK,MADS,SACT,EACL,EAA8BvV,mBAASL,GAAvC,mBAAOoK,EAAP,KAAgByL,EAAhB,KAEMC,EAAa,UAAGlJ,iBAAO,sBAAV,aAAG,EAAuBmJ,mBAE7CnS,qBAAU,WACTvE,QAAQC,IAAI,qBAAsBU,KAChC,IAGH4D,qBAAU,WACJwG,IAAYpK,GAA4B,IAAnBoK,EAAQxK,SACjCP,QAAQC,IAAI,2BAA4B8K,GACxCgL,EAAahL,MAEZ,CAACA,IAEJ,IAoCM4F,EAAegG,mBAAQ,WAC5B,IAAMtB,EAAQe,EAAkB,YAAOrL,GAAW,GAQlD,OANIsL,GAAsBI,GACzBpB,EAAMuB,KAAK,CACVpT,GAAIiT,IAICpB,IACL,CAACtK,EAAS0L,EAAeJ,EAAoBD,IAEhD,OACC,2BAAK3V,UAAS,UAxGE,yBAyGZsK,EAAQxK,QAAWwK,EAAQxK,QAAUwK,EAAQxK,OAAS0V,IACxD,oBAACzF,EAAD,CACCvH,YAAaA,EACbvH,MAAOA,EACPiP,aAAcA,EACdF,aAvDiB,SAACuB,GAAyB,IAAnBI,EAAkB,wDAC7CpS,QAAQC,IAAI,iBAAkB+R,EAAMI,GAEnCoE,GADI,IAASpE,EACF,SAACyE,GAAD,OACV,CACC9B,KAAM+B,cACNxX,KAAM,YAAa0S,EAAOA,EAAKc,QAAUd,EAAK1S,KAC9Ca,IAAK6R,EAAK7R,MAJD,mBAMP0W,KAGO,SAACA,GAAD,OACV,CACCrT,GAAIwO,EAAKxO,GACTuR,KAAM+B,cACNxX,KAAM,YAAa0S,EAAOA,EAAKc,QAAUd,EAAK1S,KAC9Ca,IAAK6R,EAAK7R,MALD,mBAOP0W,OAqCFjH,aAAcA,EACdc,KAAMA,EACNE,QAASA,EACTjO,MAAO4T,IAGRQ,QAAQhM,aAAD,EAACA,EAASxK,QAAU,GAC3B,oBAACsV,EAAD,KACC,4BACClT,MAAO,CACN4Q,UAAW,OACX3Q,aAAc,MACdiD,QAAS,UAGTkF,EAAQxK,OAAS,EAAI4V,EAAmBD,GAG1C,oBAAC,EAAD,CACCb,MAAOtK,EACPiM,eAAa,EACbvC,iBArDgB,SAACwC,GACrBT,GAAW,SAACK,GACX,OAAOA,EAAgBjF,QAAO,YAAmB,IAAhBpO,EAAe,EAAfA,GAAIuR,EAAW,EAAXA,KACpC,OAAIkC,EAAYlC,KACRA,IAASkC,EAAYlC,KAErBvR,IAAOyT,EAAYzT,UAgDzBgR,YAAaA,EACb9D,KAAMA,EACNwG,UAAW,YAA6B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACjBC,EAAU,YAAOC,kBAAUvM,EAASoM,EAAUC,IACpDpX,QAAQC,IAAI,cAAeoX,GAC3Bb,EAAWa,IAEZ/B,eAAgBgB,OCjJhBiB,EAAqB,SAAC,GAWrB,IAVHpU,EAUE,EAVFA,WACApB,EASE,EATFA,SACA0B,EAQE,EARFA,OAQE,IAPFiN,YAOE,MAPK,OAOL,MANFd,oBAME,MANa,CAAE,QAMf,MALFlO,aAKE,MALMC,aAAG,oBAAqB,wBAK9B,MAJFsH,mBAIE,MAJYtH,aAAG,wCAAyC,wBAIxD,MAHFhB,aAGE,MAHM,GAGN,MAFF+C,wBAEE,SADF8T,EACE,EADFA,SAEA,OACI,0BAASrU,EACL,oBAAC,cAAD,CACIzB,MAAK,UAAKA,EAAL,KACL+V,gBAAc,IAEb,IAAU/T,GACP,2BAAKf,MAAO,CACR+U,UAAW,WAEX,oBAAC,UAAD,MACA,yBAAGjX,UAAU,cAAb,uBAKP,IAAUiD,GACP,oBAAC,WAAD,KACK8T,EACD,oBAAC,EAAD,CACIzB,aAAe,SAACzS,GACZtD,QAAQC,IAAI,SAAUqD,GACtBvB,EAASuB,IAEboN,KAAMA,EACNhP,MAAK,UAAKA,EAAL,oBACLuH,YAAaA,EACb2G,aAAcA,EACdjP,MAAOA,IAEX,oBAAC,SAAD,CACIgX,QAAM,EACNpV,QAAS,WACLkB,KAEJZ,KAAMlB,aAAG,QACTgB,MAAO,CACHuD,YAAa,a,QCjE7C,I,OC8Ce0R,EAnCW,SAAC,GAIpB,IAHHzX,EAGE,EAHFA,IACA4B,EAEE,EAFFA,SAEE,IADF8V,aACE,MADM,CAAEvY,KAAM,OAAQwT,QAAS,SAC/B,EACF,EAAoC9R,oBAAS,GAA7C,mBAAO8C,EAAP,KAAmBC,EAAnB,KACA,OACI,oBAAC,WAAD,KACI,oBAAC,gBAAD,CACIkB,gBAAenB,EACfoB,gBAAc,OACdxD,MAAOC,aAAG,YACVwD,KAAK,cACL5C,QAAS,kBAAMwB,GAAeD,IAC9BsB,aAAW,KAEd,IAAStB,GACN,oBAAC,UAAD,CACI2B,SAAS,gBACTC,QAAS,kBAAM3B,GAAc,KAE7B,oBAAC,4BAAD,CACItD,UAAU,8CACVE,MAAO,CAAER,OACT2X,wBAAsB,EACtBC,iBAAkBF,EAClB9V,SAAU,SAAAiW,GAAC,OAAIjW,EAASiW,IACxBlK,SAAU,Q,UCwBnBmK,EA7CU,SAAC,GAMnB,IALN9X,EAKK,EALLA,IACA+X,EAIK,EAJLA,QAIK,IAHLC,mBAGK,MAHS,KAGT,MAFLC,mBAEK,SADLvX,EACK,EADLA,cAEA,OACC,oBAAC,WAAD,KACC,oBAAC,gBAAD,KACC,oBAAC,eAAD,KACC,oBAAC,EAAD,CACCV,IAAKA,EACL4B,SAAU,SAAAiW,GACTnX,EAAc,CAAEV,IAAK6X,EAAE7X,WAK3B,oBAAC,OAAD,CAAMwC,MAAO,CAAEsD,cAAe,QAC7B,oBAAC,WAAD,KACC,oBAAC,WAAD,CACCvF,QAASyX,EACTxX,MAAOuX,EACPnW,SAAU,SAAAsW,GAAC,OAAIxX,EAAc,CAAEqX,QAASG,KACxCpP,YAAY,aACZqP,mBAAoB,GACpBC,wBAAsB,EACtB9X,UAAU,iBAGX,IAAS2X,GACT,oBAAC,YAAD,KACC,oBAAC3R,EAAA,EAAD,CACCkH,KAAK,gBACL3E,KAAK,QACLrG,MAAO,CAAE6Q,WAAY,e,QCZbgF,EAjCa,SAAC,GAMtB,IAAD,IALL9W,aAKK,MALG,GAKH,EAJL+W,EAIK,EAJLA,UACA9L,EAGK,EAHLA,SAGK,KAFLlM,UAEK,EADLrB,mBACK,MADQ,GACR,EAeL,OACC,oBAAC,SAAD,CACCsC,MAAOC,aAAGD,GACVgX,gBAAgB,SAChBnW,QAlBkB,WACnB,IAAMoW,EAAepL,iBAAO,qBAAqBqL,SAASjM,GAC1D3M,QAAQC,IAAI,gBAAiB0Y,EAAaE,YAAYtY,QACtD,IAAMuY,EACL,IAAMH,EAAaE,YAAYtY,OAC5B,EACAoY,EAAaE,YAAYtY,OAAS,EAChCwY,EAAWC,sBAAYP,EAAWrZ,GACxC6Z,mBAAS,qBAAqBC,YAC7BH,EACAD,EACAnM,IAQAlM,UAAU,sCAETkB,aAAGD,K,QCtBDqG,EAAmB,SAAC,GAAkC,IAAhCoR,EAA+B,EAA/BA,MAA+B,IAAxBxS,iBAAwB,SACjDyS,EAAc,CAChBpR,EAAG,4EACHC,EAAG,uYACHC,EAAG,gjBACHmR,EAAG,wFACHC,EAAG,2ZACHC,EAAG,unBAEP,OAAKH,EAAYhM,eAAe+L,GAK5B,oBAAC,MAAD,CACIhT,MAAM,KACNS,OAAO,KACPC,QAAQ,YACRC,MAAM,6BACNH,UAAWA,GAEX,oBAAC,OAAD,CAAMI,EAAGqS,EAAYD,MAXlB,MAgBTK,EAAgB,CAClB/Y,UAAW,uCACXgZ,aAAa,GAiEFC,EA9Da,SAAC,GAAkD,IAAhDC,EAA+C,EAA/CA,cAA+C,IAAhCC,cAAgC,MAAvB,CAAC,EAAG,GAAmB,EAAf7X,EAAe,EAAfA,SAE3D,OADA/B,QAAQC,IAAI,sBAAuB0Z,GAE/B,oBAAC,eAAD,KACI,oBAAC,WAAD,CACIE,aAAcL,EACdM,aAAc,YAA2B,IAAxBC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,OASvB,OACI,oBAAC,gBAAD,CACI/U,gBAAe+U,EACf9U,gBAAc,OACdC,KAAM,oBAAC,EAAD,CAAkBgU,MAAOQ,IAC/BjY,MAAOC,aAAG,wBACVY,QAASwX,EACTE,UAfgB,SAAAC,GACfF,GAAUE,EAAMC,UAAYC,SAC7BF,EAAMG,iBACNH,EAAMI,kBACNP,MAYA3U,aAAW,KAIvBmV,cAAe,kBACX,oBAAC,UAAD,CACI9Z,UAAU,sCACViB,MAAOC,aAAG,yBAEV,oBAAC,eAAD,CACI6Y,aAAa,EACblS,SAAUsR,EAAOhG,KAAI,SAAA6G,GACjB,IAAMlS,EAAWkS,IAAgBd,EACjC,MAAO,CACHxU,KACI,oBAAC,EAAD,CACIgU,MAAOsB,EACP9T,UAAW4B,IAGnB3G,MAAO8Y,kBAEH/Y,aAAG,cACH8Y,GAEJlS,WACAhG,QAbG,WAcCR,EAAS0Y,gB,QCpFzCE,EAAQzb,OAAO0b,EAAfD,IAyIOE,MArIf,YAUI,IAAD,IATFC,oBASE,aARFC,gBAQE,MARS,SAACC,GACXhb,QAAQib,KACP,6EACAD,IAKA,MAFFE,iBAEE,MAFU,CAAC,SAEX,MADFC,iBACE,MAZwB,OAYxB,EACF,EAAoBna,mBAAS8Z,GAA7B,mBAAOtX,EAAP,KAAW4X,EAAX,KACA,EAAsCpa,oBAAS,GAA/C,mBAAOqa,EAAP,KAAoBC,EAApB,KAKA,EAA4ChO,qBAC3C,SAACC,GACA,IAAMgO,IAAI/X,GAAK+J,EAAO,QAAQiO,SAAShY,GAEvC,GADAxD,QAAQC,IAAI,OAAQuD,EAAI+X,QACpBhY,IAAcgY,IAAK,IAAUA,EAChC,MAAO,CACN9R,OAAO,EACPC,KAAK,EACLvD,OAAO,EACPS,QAAQ,EACRtH,MAAM,GAIR,IAAImc,GAAiB,EACjBC,GAAa,EACbC,GAAc,EAElB,GAAIhB,EAAIY,EAAG,CAAC,gBAAiB,QAASJ,IAErCO,EAAaH,EAAEK,cAAcC,MAAMV,GAAWhV,MAC9CwV,EAAcJ,EAAEK,cAAcC,MAAMV,GAAWvU,OAC/C6U,EAAiBF,EAAEK,cAAcC,MAAMV,GAAWW,eAC5C,CAGFnB,EAAIY,EAAG,CAAC,gBAAiB,QA7CN,UA+CtBG,EAAaH,EAAEK,cAAcC,MAAhB,KAAyC1V,MACtDwV,EAAcJ,EAAEK,cAAcC,MAAhB,KAAyCjV,OACvD6U,EAAiBF,EAAEK,cAAcC,MAAhB,KAAyCC,aAG1DJ,EAAaH,EAAEK,cAAczV,MAC7BwV,EAAcJ,EAAEK,cAAchV,OAC9B6U,EAAiBF,EAAEO,YAIrB,MAAO,CACNrS,MAAO8R,EACP7R,IAAK+R,EACLtV,MAAOuV,EACP9U,OAAQ+U,EACRrc,MAAM,IAAUic,GAAIA,EAAEjc,QAGxB,CAACkE,IA/CMiG,EAAR,EAAQA,MAAOC,EAAf,EAAeA,IAAKvD,EAApB,EAAoBA,MAAOS,EAA3B,EAA2BA,OAkDrBmV,GAlDN,EAAmCzc,KAkDb,SAACmK,GACtBzJ,QAAQC,IAAI,gBAAiBuD,EAAIiG,EAAMjG,IACnCiG,EAAMjG,KAAOA,IAChB4X,EAAM3R,EAAMjG,IACZuX,EAAStR,IAEV6R,GAAe,KAGVU,EAAc,SAACC,GACpBjc,QAAQC,IAAI,cAAegc,GAC3BC,sBAAY,CACXlS,aAAckR,EACde,YACAE,aAHW,YAGY,IAATlZ,EAAQ,oBACrBjD,QAAQC,IAAI,eAAgBgD,GACvBA,EAAMO,IAIVxD,QAAQC,IAAI,SAAUgD,GACtBA,EAAM4Y,MAAQ5Y,EAAM2Y,cAAcC,MAClCE,EAAc9Y,KALdjD,QAAQC,IAAI,WACZqb,GAAe,KAOjBc,QAdW,SAcHC,GACPrc,QAAQ8O,MAAMuN,OAKjB,OACC,oBAAC,mBAAD,CAAkBC,SAAU3a,aAAG,yCAC9B,oBAAC,cAAD,CACCC,MAAOD,aAAG,gBACVoI,SAAUgS,EACV/R,aAAckR,EACdva,MAAO6C,EACPyG,OAAQ,gBAAGC,EAAH,EAAGA,KAAH,OACP,gCACE,IAAU1G,IACV,IAAUiG,IACV,IAAUC,IACV,IAAU2R,GACV,2BAAK9Y,QAAS2H,EAAMvH,MAAO,CAAEgR,OAAQ,YACpC,2BAAKjK,IAAKA,EAAKvD,MAAK,UAAKA,EAAL,MAAgBS,OAAM,UAAKA,EAAL,WAGzC,IAAUpD,IAAM,IAAUiG,GAAU4R,IACtC,oBAAC,SAAD,CAAQhZ,aAAW,EAACC,QAAM,EAACC,QAAS2H,GAClCvI,aAAG,iBAGL,IAAU6B,GACV,oBAAC,SAAD,CAAQnB,aAAW,EAACE,QAAS2H,GAC3BvI,aAAG,cAGN,oBAAC,WAAD,CAAU4a,YAAaP,UCvIvBQ,EAAsB,SACxBC,EACAC,EACAC,EACAC,EACA/b,GAEI4b,IAAWC,GACX7b,EAAc,eAAG8b,EAAUC,KAqB7BC,EAAW,SAACC,GAA4B,IAAlBlM,EAAiB,uDAAP,GACrC,OAAO,IAAIlC,SAAQ,SAAAC,GAClB,IAAMhK,EAAO,GACbH,IAAS,CACRC,KAAK,UAAD,OAAYqY,EAAZ,qBAAiClM,KACnChM,MAAK,SAAAmY,GACP,IAAK,IAAIlJ,EAAQ,EAAGA,EAAQkJ,EAAMxc,OAAQsT,IAAS,CAClD,IAAMmJ,EAAOD,EAAMlJ,GAAOmJ,KAAKC,QAAlB,UACTH,EAASI,cADA,KAEZ,IAEDvY,EAAKoY,EAAMlJ,GAAOrQ,IAAM,CACvBA,GAAIuZ,EAAMlJ,GAAOrQ,GACjBmK,KAAMoP,EAAMlJ,GAAOlG,KACnBwP,OAAQJ,EAAMlJ,GAAOsJ,OACrBH,QAGFrO,EAAQhK,UAKLoI,EAAoB,SACzB+P,EACAlM,GAGK,IAFLwM,EAEI,uDAFQ,OACZC,IACI,yDACJ,OAAO,IAAI3O,SAAQ,SAAAC,GAClBkO,EAASC,EAAUlM,GAAShM,MAAK,SAAAD,GAChC,IAAM2Y,EAAe,GAErBrQ,OAAOC,KAAKvI,GAAM4Y,SAAQ,SAAAzJ,GACzB,IAAM0J,EAAU7Y,EAAKmP,GAEjBnT,EAAQ6c,EAAQJ,GAEhB1b,EAAQ8b,EAAQ7P,UAChBpK,IAAcia,EAAQL,QAAU,IAAMK,EAAQL,SACjDzb,EAAK,cAAUA,IAGhB4b,EAAa1G,KAAK,CACjBjW,QACAe,cAIE,IAAU2b,GACbC,EAAaG,MAAK,SAACC,EAAGC,GAAJ,OAAWD,EAAEhc,MAAQic,EAAEjc,MAAQ,GAAK,KAGvDiN,EAAQ2O,UCvFLM,EAAqB,CACvB,CACIlc,MAAO,yCACPf,MAAO,cAEX,CACIe,MAAO,sCACPf,MAAO,cAEX,CACIe,MAAO,KACPf,OAAO,GAEX,CACIe,MAAO,4BACPf,MAAO,cAEX,CACIe,MAAO,2BACPf,MAAO,cAEX,CACIe,MAAO,8BACPf,MAAO,cAEX,CACIe,MAAO,kBACPf,MAAO,cAEX,CACIe,MAAO,+BACPf,MAAO,cAEX,CACIe,MAAO,sCACPf,MAAO,cAEX,CACIe,MAAO,8BACPf,MAAO,cAEX,CACIe,MAAO,UACPf,MAAO,cAEX,CACIe,MAAO,WACPf,MAAO,cAEX,CACIe,MAAO,KACPf,OAAO,GAEX,CACIe,MAAO,iCACPf,MAAO,OAEX,CACIe,MAAO,4BACPf,MAAO,QAEX,CACIe,MAAO,kCACPf,MAAO,W,iBC/DD3B,EAAOC,QAAUC,OAAiB,U,gBCAlCF,EAAOC,QAAUC,OAAW,GAAe,a,iBCAzDF,EAAOC,QAAU4e,oB,iBCAH7e,EAAOC,QAAUC,OAAe,Q,iBCAhCF,EAAOC,QAAUC,OAAW,GAAc,Y,iBCA1CF,EAAOC,QAAUC,OAAW,GAAY,U","file":"blocks/story-item-2934931c.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\nconst deprecated = [\n    {\n        attributes: {\n            postID: {\n                type: \"integer\"\n            },\n            link: {\n                type: \"string\"\n            },\n            excerpt: {\n                type: \"string\",\n                multiline: \"p\"\n            },\n            enableExcerpt: {\n                type: \"boolean\",\n                default: true\n            },\n            enableExcerptBelow: {\n                type: \"boolean\",\n                default: false\n            },\n            enableAltTaxonomy: {\n                type: \"boolean\",\n                default: false\n            }\n        },\n\n        migrate( { postID, link, excerpt, enableExcerpt, enableExcerptBelow, enableAltTaxonomy, enableMeta } ) {\n            console.log(\"Migrating...\", { postID, link, excerpt, enableExcerpt, enableExcerptBelow, enableAltTaxonomy, enableMeta });\n            const newMetaTaxonomy = enableMeta ? ( enableAltTaxonomy ? 'research-teams' : 'formats' ) : 'disabled';\n            return {\n                postId: postID,\n                url: link,\n                excerpt: excerpt,\n                enableExcerpt: enableExcerpt,\n                enableExcerptBelow: enableExcerptBelow,\n                metaTaxonomy: newMetaTaxonomy,\n            };\n        },\n\n        save( props ) {\n            return (\n                <Fragment>\n                    { 0 !== props.excerpt.length && (<RichText.Content className=\"excerpt\" tagName=\"div\" value={props.excerpt}/>) }\n                </Fragment>\n            );\n        },\n    },\n];\n\nexport default deprecated;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isInteger } from 'lodash';\nimport {\n    InspectorControls,\n    InspectorAdvancedControls,\n    __experimentalLinkControl as LinkControl,\n} from '@wordpress/block-editor';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { Fragment, useState } from '@wordpress/element';\nimport {\n    BaseControl,\n    Button,\n    CardDivider,\n    PanelBody,\n    Popover,\n    SelectControl,\n    ToggleControl,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nconst Inspector = ({ attributes, setAttributes, context, rootClientId }) => {\n    const [isRefreshing, refresh] = useState(false);\n    const {\n        postId,\n        imageSize,\n        imageSlot,\n        enableHeader,\n        enableExcerpt,\n        enableExcerptBelow,\n        enableExtra,\n        enableBreakingNews,\n        enableEmphasis,\n        disableMobileStyles,\n        enableMeta,\n        metaTaxonomy,\n    } = attributes;\n\n    const label = __('Story Item Options');\n\n    return (\n        <Fragment>\n            <InspectorControls>\n                <PanelBody title={label}>\n                    <BaseControl\n                        help={__('Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).')}\n                    >\n                        <ToggleControl\n                            label={\n                                enableMeta\n                                    ? 'Meta Enabled'\n                                    : 'Meta Disabled'\n                            }\n                            checked={enableMeta}\n                            onChange={() => {\n                                setAttributes({ enableMeta: !enableMeta });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableHeader ? 'Header Enabled' : 'Header Disabled'\n                            }\n                            checked={enableHeader}\n                            onChange={() => {\n                                setAttributes({ enableHeader: !enableHeader });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled'\n                            }\n                            checked={enableExcerpt}\n                            onChange={() => {\n                                setAttributes({ enableExcerpt: !enableExcerpt });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableExtra ? 'Extras Enabled' : 'Extras Disabled'\n                            }\n                            checked={enableExtra}\n                            onChange={() => {\n                                setAttributes({ enableExtra: !enableExtra });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableBreakingNews\n                                    ? 'Breaking News Enabled'\n                                    : 'Breaking News Disabled'\n                            }\n                            checked={enableBreakingNews}\n                            onChange={() => {\n                                if (false !== window.prcBreakingNews) {\n                                    setAttributes({\n                                        enableBreakingNews: !enableBreakingNews,\n                                    });\n                                } else {\n                                    // eslint-disable-next-line no-alert\n                                    alert(\n                                        'There are no currently active, authorized, breaking news events. The breaking news toggle will be set back to false.',\n                                    );\n                                    setAttributes({\n                                        enableBreakingNews: false,\n                                    });\n                                }\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableEmphasis\n                                    ? 'Emphasis Enabled'\n                                    : 'Emphasis Disabled'\n                            }\n                            checked={enableEmphasis}\n                            onChange={() => {\n                                setAttributes({ enableEmphasis: !enableEmphasis });\n                            }}\n                        />\n                    </BaseControl>\n\n                    <CardDivider/>\n\n                    <SelectControl\n                        label=\"Select Taxonomy To Display\"\n                        value={ metaTaxonomy }\n                        options={ [\n                            { label: 'Formats', value: 'formats' },\n                            { label: 'Research Teams', value: 'research-teams' },\n                            { label: 'Disabled', value: 'disabled' },\n                        ] }\n                        onChange={ ( newMetaTaxonomy ) => {\n                            setAttributes({metaTaxonomy: newMetaTaxonomy});\n                        } }\n                    />\n                </PanelBody>\n            </InspectorControls>\n            <InspectorAdvancedControls>\n                <ToggleControl\n                    label={\n                        !disableMobileStyles\n                            ? 'Mobile Styling Enabled'\n                            : 'Mobile Styling Disabled'\n                    }\n                    help={__('If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile.')}\n                    checked={disableMobileStyles}\n                    onChange={() => {\n                        setAttributes({ disableMobileStyles: !disableMobileStyles });\n                    }}\n                />\n                {true === enableExcerpt && ('right' === imageSlot || 'left' === imageSlot) && (\n                    <Fragment>\n                        <ToggleControl\n                            label={\n                                enableExcerptBelow\n                                    ? 'Excerpt Will Appear Below Image'\n                                    : 'Excerpt Will Appear Normally'\n                            }\n                            help={__('If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image.')}\n                            checked={enableExcerptBelow}\n                            onChange={() => {\n                                setAttributes({\n                                    enableExcerptBelow: !enableExcerptBelow,\n                                });\n                            }}\n                        />\n                        <CardDivider/>\n                    </Fragment>\n                )}\n\n                {isInteger(postId) && 0 !== postId && (\n                    <div>\n                        <Button\n                            isSecondary\n                            isBusy={isRefreshing}\n                            onClick={() =>{\n                                refresh(true);\n                                setTimeout(() => {\n                                    setPostAttributes({\n                                        postId,\n                                        imageSize,\n                                        isRefresh: true,\n                                        setAttributes,\n                                    });\n                                    refresh(false);\n                                }, 500);\n                            }}\n                            style={{ marginBottom: '1em' }}\n                            text={__('Refresh Post Data')}\n                        />\n                    </div>\n                )}\n                <div>\n                    <Button\n                        isDestructive\n                        isBusy={isRefreshing}\n                        onClick={() =>{\n                            refresh(true);\n                            setTimeout(() => {\n                                setAttributes({\n                                    title: '',\n                                    excerpt: '',\n                                    extra: '',\n                                    url: '',\n                                    label: '',\n                                    date: '',\n                                    image: '',\n                                    postId: 0,\n                                });\n                                refresh(false);\n                            }, 500);\n                        }}\n                        style={{ marginBottom: '1em' }}\n                        text={__('Reset Story Item Block')}\n                    />\n                </div>\n            </InspectorAdvancedControls>\n        </Fragment>\n    );\n};\n\nexport default Inspector;\n","/**\n * External Dependencies\n */\nimport { ContentPlaceholder } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nfunction Placeholder({ attributes, setAttributes, blockProps }) {\n\tconst { imageSize } = attributes;\n\n\tconst [loadingStub, setLoadingStub] = useState(false);\n\n\treturn (\n\t\t<ContentPlaceholder\n\t\t\tonChange={(pickedContent) => {\n\t\t\t\tconsole.log('Step2:', pickedContent);\n\t\t\t\tif (0 < pickedContent.length && undefined !== pickedContent[0].id) {\n\t\t\t\t\tconsole.log('Step3:', pickedContent[0]);\n\t\t\t\t\tsetLoadingStub(true);\n\t\t\t\t\tsetPostAttributes({\n\t\t\t\t\t\tpostId: pickedContent[0].id,\n\t\t\t\t\t\timageSize,\n\t\t\t\t\t\tisRefresh: false,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonSkip={() => {\n\t\t\t\tsetAttributes({ postId: 0 });\n\t\t\t}}\n\t\t\tblockProps={{ ...blockProps, style: { marginBottom: '16px' } }}\n\t\t\tloadingComponent={loadingStub}\n\t\t/>\n\t);\n}\n\nexport default Placeholder;\n","/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n    BlockControls,\n    __experimentalLinkControl as LinkControl,\n} from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport {\n\tButtonGroup,\n\tButton,\n\tIcon,\n\tModal,\n    Path,\n    Popover,\n\tSpinner,\n    SVG,\n    TextControl,\n    ToolbarButton,\n    ToolbarDropdownMenu,\n    ToolbarGroup,\n} from '@wordpress/components';\nimport {\n    close,\n    more,\n    arrowLeft,\n    arrowRight,\n    arrowUp,\n    arrowDown,\n} from '@wordpress/icons';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes, setArtBySize } from '../../helpers';\n\n// Minimum width of column to allow for left and right imageSlot.\nconst COLUMN_LIMIT = 8;\n\nconst URLControl = ({ title, type, id, url, imageSize = 'A1', setAttributes }) => {\n\tconst [isLoading, setIsLoading] = useState(false);\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [inputValue, setInputValue] = useState(url);\n\tconst [post, setPost] = useState(null);\n\n\tconst value = useDebounce(inputValue, 500);\n\t// When the input value changes, search for the post.\n\tuseEffect(()=>{\n\t\tif ( value !== url ) {\n\t\t\tsetIsLoading(true);\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/utils/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url: value },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('get-post-by-url', post);\n\t\t\t\t\tif ( undefined !== post.ID ) {\n\t\t\t\t\t\tsetPost(post);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log(\"Error: \", err);\n\t\t\t\t\t// In this state no url has been found so we should just assume the user wants the url passed in.\n\t\t\t\t\tsetPost(false);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [value]);\n\n\tconst onModalClose = () => setIsModalOpen(false);\n\tconst onModalOpen = () => {\n\t\tsetIsLinkOpen(false);\n\t\tsetIsModalOpen(true);\n\t}\n\n\tconst onReplace = (newPostId) => {\n\t\tsetPostAttributes({\n\t\t\tpostId: newPostId,\n\t\t\timageSize,\n\t\t\tisRefresh: false,\n\t\t\tsetAttributes,\n\t\t});\n\t}\n\n    return (\n        <Fragment>\n            <ToolbarButton\n                aria-expanded={isLinkOpen}\n                aria-haspopup=\"true\"\n                label={__('Set URL')}\n                icon=\"admin-links\"\n                onClick={() => setIsLinkOpen(!isLinkOpen)}\n                showTooltip\n            />\n\t\t\t{true === isModalOpen &&  (\n\t\t\t\t<Modal title={__('Replace story item content', 'prc-blocks-story-item')} onRequestClose={ onModalClose }>\n\t\t\t\t\t<p>Replace this story item with \"<strong>{post.post_title}</strong>\"?</p>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button isDestructive onClick={ () => {\n\t\t\t\t\t\t\tonReplace(post.ID);\n\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t} }>\n\t\t\t\t\t\t\tReplace\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={ () => {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\turl: value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t} }>\n\t\t\t\t\t\t\tReplace URL Only\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={ onModalClose }>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Modal>\n\t\t\t)}\n            {true === isLinkOpen && (\n                <Popover\n                    position=\"bottom center\"\n                    onClose={() => setIsLinkOpen(false)}\n                >\n                    <div style={{\n                        minWidth: '300px',\n                        padding: '8px',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'flex-end',\n                    }}>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={'URL'}\n\t\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t\tonChange={(value)=> setInputValue(value)}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingBottom: '7px',\n\t\t\t\t\t\t\tpaddingLeft: '8px',\n\t\t\t\t\t\t\twidth: '44px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div style={{ paddingBottom: '3px' }}>\n\t\t\t\t\t\t\t\t\t<Spinner/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{!isLoading && false === post && (\n\t\t\t\t\t\t\t\t<Button icon=\"yes-alt\" variant=\"tertiary\" onClick={()=>{\n\t\t\t\t\t\t\t\t\tsetAttributes({ url: value });\n\t\t\t\t\t\t\t\t\tsetIsLinkOpen(false);\n\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{!isLoading && false !== post && null !== post && (\n\t\t\t\t\t\t\t\t<Button icon=\"warning\" variant=\"tertiary\" onClick={ onModalOpen }/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n                    </div>\n                </Popover>\n            )}\n        </Fragment>\n    );\n};\n\nconst Toolbar = ({ attributes, setAttributes, context, rootClientId }) => {\n    const { postId, url, imageSize, imageSlot, headerSize, isChartArt, title } = attributes;\n\n\tconsole.log(\"Context\", context);\n\n    const columnWidth = undefined !== context['prc-block/column/width'] ? context['prc-block/column/width'] : false;\n\tconst columnIsEqualWidth = undefined !== context['prc-block/row/isEqual'] ? context['prc-block/row/isEqual'] : false;\n\tconsole.log('columnWidth', columnWidth, columnIsEqualWidth);\n\n    const Icon = ({ svgPath = false, isPressed = false }) => {\n        if (false === svgPath) {\n            return null;\n        }\n        return (\n            <SVG\n                width={24}\n                height={24}\n                viewBox='0 0 24 24'\n                xmlns=\"http://www.w3.org/2000/svg\"\n                isPressed={isPressed}\n            >\n                <Path d={svgPath} />\n            </SVG>\n        );\n    };\n\n    const ImageSlotIcon = ({selected}) => {\n        if ( 'right' === selected ) {\n            return arrowRight;\n        }\n        if ( 'left' === selected ) {\n            return arrowLeft;\n        }\n        if ( 'top' === selected ) {\n            return arrowUp;\n        }\n        if ( 'bottom' === selected ) {\n            return arrowDown;\n        }\n        if ( 'disabled' === selected ) {\n            return close;\n        }\n        return more;\n    }\n\n    const ImageSizeIcon = ({selected, currentlyActive}) => {\n        const iconPaths = {\n            A1: 'M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z',\n            A2: 'M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z',\n            A3: 'M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z',\n            A4: 'M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z',\n            XL: 'M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z',\n        };\n        return (\n            <Icon\n                svgPath={iconPaths[selected]}\n                isPressed={selected === currentlyActive}\n            />\n        )\n    }\n\n    const HeadingLevelIcon = ({selected, currentlyActive}) => {\n        const iconPaths = {\n            1: 'M15.81,15.63V18H8.19V6H11v9.63Z', // Large\n            2: 'M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z', // Medium\n            3: 'M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z' // Small\n        };\n        return (\n            <Icon\n                svgPath={iconPaths[selected]}\n                isPressed={selected === currentlyActive}\n            />\n        )\n    }\n\n    const handleImageSizeChange = (newSize) => {\n        setAttributes({ imageSize: newSize });\n        setArtBySize(newSize, postId, setAttributes); // @TODO LOOK INTO\n        console.log('new image size, check column context', context);\n    }\n\n    return (\n        <BlockControls>\n            <ToolbarGroup>\n                <URLControl title={title} id={postId} url={url} type=\"stub\" setAttributes={setAttributes} />\n            </ToolbarGroup>\n            <ToolbarGroup>\n                <ToolbarDropdownMenu\n                    icon={()=> <HeadingLevelIcon selected={headerSize} currentlyActive={headerSize}/>}\n                    label=\"Select Heading Size\"\n                    controls={ [\n                        {\n                            title: 'Large',\n                            icon: (\n                                <HeadingLevelIcon selected={1} currentlyActive={headerSize}/>\n                            ),\n                            isActive: 1 === headerSize,\n                            onClick: () => setAttributes({ headerSize: 1 }),\n                        },\n                        {\n                            title: 'Medium',\n                            icon: (\n                                <HeadingLevelIcon selected={2} currentlyActive={headerSize}/>\n                            ),\n                            isActive: 2 === headerSize,\n                            onClick: () => setAttributes({ headerSize: 2 }),\n                        },\n                        {\n                            title: 'Small',\n                            icon: (\n                                <HeadingLevelIcon selected={3} currentlyActive={headerSize}/>\n                            ),\n                            isActive: 3 === headerSize,\n                            onClick: () => setAttributes({ headerSize: 3 }),\n                        },\n                    ] }\n                />\n            </ToolbarGroup>\n            <ToolbarGroup>\n                <ToolbarDropdownMenu\n                    icon={()=><ImageSlotIcon selected={imageSlot}/>}\n                    label=\"Select Image Slot\"\n                    controls={ [\n                        {\n                            title: 'Top',\n                            icon: (\n                                <ImageSlotIcon selected='top'/>\n                            ),\n                            isActive: 'top' === imageSlot,\n                            onClick: () => {\n                                const newSlot = 'top';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Bottom',\n                            icon: (\n                                <ImageSlotIcon selected='bottom'/>\n                            ),\n                            isActive: 'bottom' === imageSlot,\n                            onClick: () => {\n                                const newSlot = 'bottom';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Left',\n                            icon: (\n                                <ImageSlotIcon selected='left'/>\n                            ),\n                            isActive: 'left' === imageSlot,\n                            isDisabled: true !== columnIsEqualWidth && false !== columnWidth && COLUMN_LIMIT >= columnWidth,\n                            onClick: () => {\n                                const newSlot = 'left';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Right',\n                            icon: (\n                                <ImageSlotIcon selected='right'/>\n                            ),\n                            isActive: 'right' === imageSlot,\n                            isDisabled: true !== columnIsEqualWidth && false !== columnWidth && COLUMN_LIMIT >= columnWidth,\n                            onClick: () => {\n                                const newSlot = 'right';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Disabled',\n                            icon: (\n                                <ImageSlotIcon selected='disabled'/>\n                            ),\n                            isActive: 'disabled' === imageSlot,\n                            onClick: () => {\n                                const newSlot = 'disabled';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                    ] }\n                />\n                {'disabled' !== imageSlot && (\n                    <Fragment>\n                    <ToolbarDropdownMenu\n                        icon={()=> <ImageSizeIcon selected={imageSize} currentlyActive={imageSize}/>}\n                        label=\"Select Image Size\"\n                        controls={ [\n                            {\n                                title: 'A1',\n                                icon: (\n                                    <ImageSizeIcon selected='A1' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A1' === imageSize,\n                                onClick: () => handleImageSizeChange('A1'),\n                            },\n                            {\n                                title: 'A2',\n                                icon: (\n                                    <ImageSizeIcon selected='A2' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A2' === imageSize,\n                                onClick: () => handleImageSizeChange('A2'),\n                            },\n                            {\n                                title: 'A3',\n                                icon: (\n                                    <ImageSizeIcon selected='A3' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A3' === imageSize,\n                                onClick: () => handleImageSizeChange('A3'),\n                            },\n                            {\n                                title: 'A4',\n                                icon: (\n                                    <ImageSizeIcon selected='A4' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A4' === imageSize,\n                                onClick: () => handleImageSizeChange('A4'),\n                            },\n                            {\n                                title: 'XL',\n                                icon: (\n                                    <ImageSizeIcon selected='XL' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'XL' === imageSize,\n                                onClick: () => handleImageSizeChange('XL'),\n                            }\n                        ] }\n                    />\n                    <ToolbarButton\n                        icon=\"chart-pie\"\n                        isPressed={isChartArt}\n                        label={__('Enable Chart Art')}\n                        onClick={() => {\n                            setAttributes({\n                                isChartArt: !isChartArt,\n                            });\n                        }}\n                    />\n                    </Fragment>\n                )}\n            </ToolbarGroup>\n        </BlockControls>\n    );\n};\n\nexport default Toolbar;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport Inspector from './inspector';\nimport Placeholder from './placeholder';\nimport Toolbar from './toolbar';\n\nconst Controls = ({ attributes, setAttributes, context, rootClientId }) => {\n    return (\n        <Fragment>\n            <Toolbar {...{ attributes, setAttributes, context, rootClientId }} />\n            <Inspector\n                {...{\n                    attributes,\n                    setAttributes,\n                    context,\n                    rootClientId,\n                }}\n            />\n        </Fragment>\n    );\n}\n\nexport {\n    Controls,\n    Placeholder\n}\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { Picture } from 'react-responsive-picture';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n \n \nconst A1 = {\n    default: '564,317',\n    small: '690,388',\n    hidpi: '1128,634',\n    smallHidpi: '1380,776',\n};\n\nconst A2 = {\n    default: '268,151',\n    small: '690,388',\n    hidpi: '536,301',\n    smallHidpi: '1380,776',\n};\n\nconst A3 = {\n    default: '194,110',\n    small: '148,84',\n    hidpi: '388,220',\n    smallHidpi: '296,168',\n};\n\nconst A4 = {\n    default: '268,151',\n    small: '690,388',\n    hidpi: '536,302',\n    smallHidpi: '1380,776',\n};\n\nconst XL = {\n    default: '720,405',\n    small: '690,388',\n    hidpi: '1440,810',\n    smallHidpi: '1380,776',\n};\n\nconst ImageDisplay = ({ img, size, link, onClick = false, placeholder = false }) => {\n    // eslint-disable-next-line no-shadow\n    const getImgURL = variant => {\n        if (true === placeholder) {\n            let dimensions = '';\n            if ('A2' === size) {\n                dimensions = '536x301';\n            } else if ('A3' === size) {\n                dimensions = '388x220';\n            } else if ('A4' === size) {\n                dimensions = '536x302';\n            } else if ('XL' === size) {\n                dimensions = '1440x810';\n            } else {\n                // Default to A1\n                dimensions = '1128x634';\n            }\n            return `https://via.placeholder.com/${dimensions}.png?text=${size}`;\n        }\n\n        if ('' === img || false === img) {\n            return img;\n        }\n\n        // Default to A1\n        let args = { resize: A1[variant] };\n        if ('A2' === size) {\n            args = { resize: A2[variant] };\n        } else if ('A3' === size) {\n            args = { resize: A3[variant] };\n        } else if ('A4' === size) {\n            args = { resize: A4[variant] };\n        } else if ('XL' === size) {\n            args = { resize: XL[variant] };\n        }\n\n        return addQueryArgs(img, args);\n    };\n\n    // eslint-disable-next-line no-shadow\n    const getImgSrcSet = (threshold = 767) => {\n        return [\n            {\n                srcSet: `${getImgURL('default')} 1x, ${getImgURL('hidpi')} 2x`,\n                media: `(min-width: ${threshold}px)`,\n            },\n            {\n                srcSet: `${getImgURL('small')} 1x, ${getImgURL(\n                    'smallHidpi',\n                )} 2x`,\n                media: `(max-width: ${threshold}px)`,\n            },\n        ];\n    };\n\n    if (false !== onClick) {\n        return (\n            <div onClick={onClick}>\n                {true === placeholder && (\n                    <img src={getImgURL()} alt=\"Click to insert\" />\n                )}\n                {true !== placeholder && (\n                    <Picture sources={getImgSrcSet()} alt=\"Click to edit\" />\n                )}\n            </div>\n        );\n    }\n\n    return (\n        <Fragment>\n            {'' === link && <Picture sources={getImgSrcSet()} />}\n            {'' !== link && (\n                <a href={link}>\n                    <Picture sources={getImgSrcSet()} />\n                </a>\n            )}\n        </Fragment>\n    );\n};\n\nconst Edit = ({ img, size, postId, setAttributes }) => {\n    // const [art, setArt] = useState(false);\n\n    // // When the postId changes go fetch new art for this post and store it in state and also store the correct image url in attributes.\n    // useEffect(() => {\n    //     if (0 !== postId && false !== setAttributes) {\n    //         apiFetch({\n    //             path: `/prc-api/v2/get-art/?postId=${postId}`,\n    //         }).then(data => {\n    //             if (false !== data) {\n    //                 setArt(data);\n    //                 setAttributes({ image: data[size].rawUrl });\n    //             } else {\n    //                 // If no art on any subsequent art fetches set to false\n    //                 setArt(false);\n    //             }\n    //         });\n    //     }\n    // }, [postId]);\n\n    // /**\n    //  * If the art or size changes then go check the art object and set the approrpiate image and chart art given the arts options.\n    //  */\n    // useEffect(() => {\n    //     if (\n    //         false !== art &&\n    //         undefined !== art[size] &&\n    //         false !== setAttributes\n    //     ) {\n    //         setAttributes({\n    //             image: art[size].rawUrl,\n    //             isChartArt: art[size].chartArt,\n    //         });\n    //     }\n    // }, [art, size]);\n\n    return (\n        <MediaUploadCheck>\n            <MediaUpload\n                onSelect={media => setAttributes({ image: media.url })}\n                allowedTypes={ALLOWED_MEDIA_TYPES}\n                render={({ open }) => {\n                    return(\n                        <Fragment>\n                            {\n                                // If we have an actual image here then display it otherwise give us the placeholder\n                            }\n                            {undefined !== img && 0 !== img.length && (\n                                <ImageDisplay\n                                    img={img}\n                                    size={size}\n                                    link=\"\"\n                                    onClick={open}\n                                />\n                            )}\n                            {(undefined === img || 0 === img.length) && (\n                                <ImageDisplay\n                                    img={img}\n                                    size={size}\n                                    link=\"\"\n                                    onClick={open}\n                                    placeholder\n                                />\n                            )}\n                        </Fragment>\n                    )\n                }}\n            />\n        </MediaUploadCheck>\n    );\n};\n\n/**\n * Props:\n * img: string url of image to display\n * size: string of image/slot size (A1,A2,A3,A4)\n * link: string of url to go to when image is clicked on front end\n * slot: if set to null then no image size chooser will be display\n * chartArt: if set to null then no chart art button will appear\n * setAttributes: defaults to false unless otherwise provided a function to pass data back up to a HOC state.\n *\n * <Img id={} img={} size={} slot={} chartArt={} postId={} setAttributes={}/>\n */\n\nconst Img = ({ img, size, slot, chartArt, postId, setAttributes }) => {\n    if ( 'disabled' === slot ) {\n        return <Fragment/>\n    }\n\n    console.log('<Img>', img);\n\n    const classes = () => {\n        let isXL = false;\n        let isA1 = false;\n        let isA2 = false;\n        let isA3 = false;\n        let isA4 = false;\n        if (false !== slot) {\n            if ('XL' === size) {\n                isXL = true;\n            } else if ('A1' === size) {\n                isA1 = true;\n            } else if ('A2' === size) {\n                isA2 = true;\n            } else if ('A3' === size) {\n                isA3 = true;\n            } else if ('A4' === size) {\n                isA4 = true;\n            }\n        }\n\n        return classNames({\n            ui: true,\n            XL: isXL,\n            A1: isA1,\n            A2: isA2,\n            A3: isA3,\n            A4: isA4,\n            image: true,\n            bordered: chartArt,\n        });\n    };\n\n    return (\n        <div className={classes()}>\n            <Edit\n                img={img}\n                size={size}\n                postId={postId}\n                setAttributes={setAttributes}\n            />\n        </div>\n    );\n};\n\nexport default Img;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst Excerpt = ({ content, sansSerif, enabled, setAttributes }) => {\n    if (true !== enabled) {\n        return <Fragment />;\n    }\n\n    const classes = classNames('excerpt', { 'sans-serif': sansSerif });\n\n    return (\n        <RichText\n            tagName=\"div\"\n            value={content}\n            onChange={excerpt => setAttributes({ excerpt })}\n            placeholder=\"Story item excerpt...\"\n            multiline=\"p\"\n            className={classes}\n        />\n    );\n};\n\nexport default Excerpt;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst Extra = ({ content, breakingNews, enabled, setAttributes }) => {\n    return (\n        <Fragment>\n            {true === enabled && (\n                <RichText\n                    tagName=\"ul\"\n                    value={content}\n                    onChange={extra => setAttributes({ extra })}\n                    placeholder={content}\n                    multiline=\"li\"\n                    className=\"extra\"\n                />\n            )}\n            {true === breakingNews && false !== window.prcBreakingNews && (\n                <ul className=\"extra-breaking-news\">\n                    <li>\n                        <a\n                            href={window.prcBreakingNews.url}\n                            className=\"kicker-breaking-news\"\n                        >\n                            {window.prcBreakingNews.label}\n                        </a>\n                    </li>\n                </ul>\n            )}\n        </Fragment>\n    );\n};\n\nexport default Extra;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Header({ title, size, enabled, setAttributes, altHeaderWeight }) {\n\tif (true !== enabled) {\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = classNames('header', {\n\t\tlarge: 1 === size,\n\t\tmedium: 2 === size,\n\t\tsmall: 3 === size,\n\t\tlight: altHeaderWeight,\n\t});\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName=\"header\"\n\t\t\tvalue={title}\n\t\t\tonChange={(t) => setAttributes({ title: t })}\n\t\t\tallowedFormats={['italic']}\n\t\t\tplaceholder=\"Title\"\n\t\t\tmultiline=\"br\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Header;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { SelectControl, TextControl } from '@wordpress/components';\n\nfunction Meta({ enabled, date, label, setAttributes, termOptions }) {\n\tif (!enabled) {\n\t\treturn <Fragment />;\n\t}\n\n\tconsole.log(\"<Meta>\", label);\n\n\treturn (\n\t\t<div className=\"meta\" style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t<div>\n\t\t\t\t<SelectControl\n\t\t\t\t\tvalue={label}\n\t\t\t\t\toptions={termOptions}\n\t\t\t\t\tonChange={(l) => {\n\t\t\t\t\t\tsetAttributes({ label: l });\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ marginBottom: '0px' }}\n\t\t\t\t\tclassName=\"story-label-select\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>&nbsp;|&nbsp;</div>\n\t\t\t<div>\n\t\t\t\t<TextControl\n\t\t\t\t\tvalue={date}\n\t\t\t\t\tonChange={(d) => {\n\t\t\t\t\t\tsetAttributes({ date: d });\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ marginBottom: '0px' }}\n\t\t\t\t\tclassName=\"story-label-select\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Meta;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\n\nconst IMAGE_SIZES = {\n\tA1: [1128, 634],\n\tA2: [526, 301],\n\tA3: [388, 220],\n\tA4: [536, 302],\n\tXL: [1440, 810],\n};\n\nfunction Preview({ attributes }) {\n\tconst {\n\t\ttitle,\n\t\texcerpt,\n\t\textra,\n\t\tlabel,\n\t\tdate,\n\t\timage,\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\theaderSize,\n\t\tenableEmphasis,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t\tclassName,\n\t} = attributes;\n\n\tconst logicalClasses = {\n\t\tbordered: enableEmphasis,\n\t\t'alt-excerpt': enableExcerptBelow,\n\t};\n\tif ('disbaled' !== imageSlot) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif ('disabled' !== imageSlot && 0 < imageSize.length) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\n\tconst blockProps = useBlockProps(blockPropsArgs);\n\n\tconst headerClasses = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: false,\n\t});\n\n\tconst imageClasses = classNames('image', {\n\t\tbordered: isChartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n\tconst excerptClasses = classNames('excerpt');\n\n\treturn (\n\t\t<article {...blockProps}>\n\t\t\t{enableMeta && (\n\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t<span className=\"label\">{label}</span> |{' '}\n\t\t\t\t\t<span className=\"date\">{date}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{'disabled' !== imageSlot && (\n\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t<picture>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrcSet={image}\n\t\t\t\t\t\t\twidth={IMAGE_SIZES[imageSize][0]}\n\t\t\t\t\t\t\theight={IMAGE_SIZES[imageSize][1]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</picture>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{enableHeader && <header className={headerClasses}>{title}</header>}\n\n\t\t\t{enableExcerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{enableExtra && (\n\t\t\t\t<RichText.Content tagName=\"ul\" value={extra} className=\"extra\" />\n\t\t\t)}\n\n\t\t\t{true === enableBreakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</article>\n\t);\n}\n\nexport default Preview;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { getTermsAsOptions } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useBlockProps } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport { Controls, Placeholder } from './controls';\nimport Image from './image';\nimport Excerpt from './excerpt';\nimport Extra from './extra';\nimport Header from './header';\nimport Meta from './meta';\nimport Preview from './preview';\nimport { setPostAttributes } from '../helpers';\n\n/**\n * To be removed at later date:\n */\nconst handlePostIdCaseChange = (attributes, setAttributes = false) => {\n\tconst payload = {};\n\tif (!attributes.postId && attributes.postID) {\n\t\tpayload.postId = attributes.postID;\n\t}\n\n\tif (0 !== Object.keys(payload).length && false !== setAttributes) {\n\t\tconsole.log('handlePostIdCaseChange', attributes, payload);\n\t\tsetAttributes({ ...payload });\n\t}\n};\n\nwindow.termOptions = { formats: [], 'research-teams': [] };\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId, context }) => {\n\tconst {\n\t\ttitle,\n\t\texcerpt,\n\t\textra,\n\t\tlabel,\n\t\tdate,\n\t\timage,\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\tpostId,\n\t\theaderSize,\n\t\tenableEmphasis,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t\tmetaTaxonomy,\n\t\tinLoop,\n\t\tisPreview,\n\t\tclassName,\n\t} = attributes;\n\n\tconst [termOptions, setTermOptions] = useState(\n\t\twindow.termOptions[metaTaxonomy],\n\t);\n\n\t/**\n\t * When the taxonomy selection changes go update the term options. Setting this here prevents the constant pop in and re-polling for terms.\n\t */\n\tuseEffect(() => {\n\t\tif ('disabled' !== metaTaxonomy) {\n\t\t\t// @TODO change this to use local session, we can set it to expire for like 30 days because this almost never changes.\n\t\t\tif (0 !== window.termOptions[metaTaxonomy].length) {\n\t\t\t\tsetTermOptions(window.termOptions[metaTaxonomy]);\n\t\t\t} else {\n\t\t\t\tgetTermsAsOptions(metaTaxonomy).then((options) => {\n\t\t\t\t\tif (!window.termOptions[metaTaxonomy].length) {\n\t\t\t\t\t\twindow.termOptions[metaTaxonomy] = options;\n\t\t\t\t\t}\n\t\t\t\t\tsetTermOptions(options);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [metaTaxonomy]);\n\n\t// @TODO  If in loop we should get title, image, label, date, and excerpt from the postId on load.\n\t// Also if in loop we should disable setting any of the attributes and force the A3 left variant.\n\t// If we are in loop but have a grid display type then you can set the imageSlot, imageize, enableHeader, enableExcerpt,  enableMeta, metaTaxonomy attributes.\n\tuseEffect(() => {\n\t\thandlePostIdCaseChange(attributes, setAttributes);\n\t}, []);\n\n\t// For posts inside a query block if we have a post id then go fetch the post and set attributes.\n\tuseEffect(() => {\n\t\tif (\n\t\t\tcontext.hasOwnProperty('query') &&\n\t\t\tcontext.hasOwnProperty('postId') &&\n\t\t\t!Number.isInteger(postId)\n\t\t) {\n\t\t\tconsole.log('This post is from a query block...');\n\t\t\t// We need a way to store the info in state, not just attributes...\n\n\t\t\t// setPostAttributes({\n\t\t\t// \tpostId: context.postId,\n\t\t\t// \timageSize,\n\t\t\t// \tisRefresh: false,\n\t\t\t// \tsetAttributes,\n\t\t\t// });\n\t\t}\n\t}, [context]);\n\n\tconst { rootClientId } = useSelect(\n\t\t(select) => ({\n\t\t\trootClientId: select('core/block-editor').getBlockRootClientId(clientId),\n\t\t}),\n\t\t[clientId],\n\t);\n\n\tconst enableAltHeaderWeight = !enableExcerpt;\n\n\tconst logicalClasses = {\n\t\tbordered: enableEmphasis,\n\t\t'alt-excerpt': enableExcerptBelow,\n\t};\n\tif ('disbaled' !== imageSlot) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif ('disabled' !== imageSlot && 0 < imageSize.length) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\tconst blockProps = useBlockProps(blockPropsArgs);\n\n\tif (!isSelected || isPreview) {\n\t\treturn <Preview attributes={attributes} />;\n\t}\n\n\tif (undefined === postId && !context.hasOwnProperty('query')) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tattributes={attributes}\n\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\tblockProps={blockProps}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<Controls\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t\trootClientId,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<article {...blockProps}>\n\t\t\t\t<Image\n\t\t\t\t\timg={image}\n\t\t\t\t\tsize={imageSize}\n\t\t\t\t\tslot={imageSlot}\n\t\t\t\t\tchartArt={isChartArt}\n\t\t\t\t\tpostId={postId}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\n\t\t\t\t<Meta\n\t\t\t\t\tenabled={enableMeta && 'disabled' !== metaTaxonomy}\n\t\t\t\t\tdate={date}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\ttermOptions={termOptions}\n\t\t\t\t/>\n\n\t\t\t\t<Header\n\t\t\t\t\tenabled={enableHeader}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tsize={headerSize}\n\t\t\t\t\taltHeaderWeight={enableAltHeaderWeight}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\n\t\t\t\t<Excerpt\n\t\t\t\t\tenabled={enableExcerpt}\n\t\t\t\t\tcontent={excerpt}\n\t\t\t\t\tsansSerif={!enableHeader}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\n\t\t\t\t<Extra\n\t\t\t\t\tenabled={enableExtra}\n\t\t\t\t\tcontent={extra}\n\t\t\t\t\tbreakingNews={enableBreakingNews}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\tisSelected={isSelected}\n\t\t\t\t/>\n\t\t\t</article>\n\t\t</Fragment>\n\t);\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\n/** Returns a server side block callback */\nconst save = ({ attributes }) => {\n    const { excerpt, extra } = attributes;\n    return(\n        <Fragment>\n            { excerpt && (<RichText.Content className=\"description\" tagName=\"div\" value={excerpt}/>) }\n            { extra && (<RichText.Content className=\"extra\" tagName=\"ul\" value={extra}/>) }\n        </Fragment>\n    );\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nconst variations = [\n    {\n        name: 'story-item-default',\n        isDefault: true,\n        title: __('Story Item'),\n        excerpt: __('Default story item layout: top aligned A1 image.'),\n        attributes: {\n            imageSlot: 'top',\n            imageSize: 'A1',\n        },\n    },\n    {\n        name: 'story-item-pub-listing',\n        title: __('Pub Listing Story Item'),\n        excerpt: __('Left algined A3 image (right aligned A3 on mobile).'),\n        attributes: {\n            imageSlot: 'left',\n            imageSize: 'A3',\n        },\n    },\n    {\n        name: 'story-item-slim',\n        title: __('Story Item Slim'),\n        excerpt: __('No excerpt, no image.'),\n        attributes: {\n            imageSlot: 'disabled',\n            enableExcerpt: false,\n        },\n    },\n];\n\nexport default variations;\n","/**\n * WordPress Dependencies\n */\nimport * as moment from 'moment';\nimport { __ } from '@wordpress/i18n';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport deprecated from './deprecated';\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport variations from './variations';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n\texample: {\n\t\tattributes: {\n\t\t\ttitle: 'Ultricies Ipsum Nibh Egestas Purus',\n\t\t\texcerpt:\n\t\t\t\t'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>',\n\t\t\tlabel: 'Report',\n\t\t\tdate: moment().format('MM-DD-YYYY'),\n\t\t\timage: 'https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg',\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A2',\n\t\t\tisPreview: true,\n\t\t},\n\t},\n\tdeprecated,\n\tvariations,\n\tedit,\n\tsave,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * External Dependencies\n */\nimport * as moment from 'moment';\n\n/**\n * WordPress Dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst setArtBySize = (imageSize, postId, setAttributes) => {\n\tif (0 !== postId && false !== setAttributes) {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/get-art/?postId=${postId}`,\n\t\t}).then((data) => {\n\t\t\tif (false !== data) {\n\t\t\t\tif (undefined !== data[imageSize] && false !== setAttributes) {\n\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\timage: data[imageSize].rawUrl,\n\t\t\t\t\t\tisChartArt: data[imageSize].chartArt,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n\tconst { post, imageSize, isRefresh = false } = opts;\n\tconsole.log(getAttributesFromPost, post);\n\n\tconst d = new Date(post.date);\n\tconst date = moment(d).format('MMM D, YYYY');\n\n\tconst storyItem = {\n\t\ttitle: post.title.hasOwnProperty('rendered')\n\t\t\t? post.title.rendered\n\t\t\t: post.title,\n\t\t// @TODO change back to excerpt everywhere, write a deprecation transition for that and excerptBelow?\n\t\texcerpt: post.excerpt.hasOwnProperty('rendered')\n\t\t\t? post.excerpt.rendered\n\t\t\t: post.excerpt,\n\t\turl: post.link, // @TODO where is this `link` coming from, why is it not url or permalink.\n\t\tlabel: post.hasOwnProperty('label') ? post.label : 'Report',\n\t\tdate,\n\t\tpostId: post.id,\n\t};\n\n\tif (true !== isRefresh) {\n\t\tstoryItem.extra = '';\n\t}\n\n\tif (post.art) {\n\t\tconst { art } = post;\n\t\tstoryItem.image = art[imageSize].rawUrl;\n\t\tstoryItem.isChartArt = art[imageSize].chartArt;\n\t}\n\n\tconsole.log('getAttributesFromPost', post, storyItem);\n\n\treturn storyItem;\n};\n\nconst getAttributesFromURL = (opts) => {\n\tconst { url, imageSize } = opts;\n\n\treturn new Promise((resolve, reject) => {\n\t\tapiFetch({\n\t\t\tpath: '/prc-api/v2/blocks/story-item/get-post-by-url',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { url },\n\t\t})\n\t\t\t.then((post) => {\n\t\t\t\tconsole.log('getAttributesFromURL', post);\n\t\t\t\tif (false !== post) {\n\t\t\t\t\tconst attrs = getAttributesFromPost({\n\t\t\t\t\t\tpost,\n\t\t\t\t\t\timageSize,\n\t\t\t\t\t\tisRefresh: false,\n\t\t\t\t\t});\n\t\t\t\t\tresolve(attrs);\n\t\t\t\t} else {\n\t\t\t\t\treject(post);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t\treject(err);\n\t\t\t});\n\t});\n};\n\n/**\n * Get the attributes for a stub, then throw a warning that a stub can not be found.\n * @TODO allow searching by post id OR url, if its by url use the above function. We need to cehck for a url and then use getAttributesFromURL.\n *\n * @param {*} postId\n * @param {*} imageSize\n * @param {*} isRefresh\n * @param {*} setAttributes\n * @returns\n */\nconst setPostAttributes = (options) => {\n\tconst {\n\t\tsetAttributes,\n\t\tpostId = false,\n\t\turl = false,\n\t\timageSize = 'A1',\n\t\tisRefresh = false,\n\t} = options;\n\n\tif ((false === postId && false === url) || undefined === setAttributes) {\n\t\treturn;\n\t}\n\n\tif (false !== url) {\n\t\tgetAttributesFromURL({\n\t\t\turl,\n\t\t\timageSize,\n\t\t})\n\t\t\t.then((attrs) => {\n\t\t\t\tconsole.log('setPostAttributes -> by url:', attrs);\n\t\t\t\tsetAttributes(attrs);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\tapiFetch({\n\t\tpath: `/wp/v2/stub/${postId}`,\n\t\tmethod: 'GET',\n\t})\n\t\t.then((post) => {\n\t\t\tconsole.log('setPostAttributes -> by id:', postId, post);\n\t\t\tif (false !== post) {\n\t\t\t\tconst attrs = getAttributesFromPost({\n\t\t\t\t\tpost,\n\t\t\t\t\timageSize,\n\t\t\t\t\tisRefresh,\n\t\t\t\t});\n\t\t\t\tsetAttributes(attrs);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error(err));\n};\n\nconst resetAttributes = (options) => {};\n\nexport { setArtBySize, setPostAttributes, resetAttributes };\n","module.exports = moment;","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"coreData\"]; }());","/**\n * WordPress Dependencies\n */\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nfunction useDebounce(value, delay) {\n    // State and setters for debounced value\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(\n        () => {\n            // Update debounced value after delay\n            const handler = setTimeout(() => {\n                setDebouncedValue(value);\n            }, delay);\n            // Cancel the timeout if value changes (also on delay change or unmount)\n            // This is how we prevent debounced value from updating if value is changed ...\n            // .. within the delay period. Timeout gets cleared and restarted.\n            return () => {\n                clearTimeout(handler);\n            };\n        },\n        [value, delay], // Only re-call effect if value or delay changes\n    );\n    return debouncedValue;\n}\n\nexport default useDebounce;","import { useEffect, useState } from '@wordpress/element';\n\n// adapted from:  https://usehooks.com/useWindowSize/\n// usage:   const {width, height} = useWindowSize();\nfunction useWindowSize() {\n    const [windowSize, setWindowSize] = useState({\n        width: undefined,\n        height: undefined,\n    });\n\n    useEffect(() => {\n        // Handler to call on window resize\n        function handleResize() {\n            // Set window width/height to state\n            setWindowSize({\n                width: window.innerWidth,\n                height: window.innerHeight,\n            });\n        }\n\n        // Add event listener\n        window.addEventListener('resize', handleResize);\n\n        // Call handler right away so state gets updated with initial window size\n        handleResize();\n\n        // Remove event listener on cleanup\n        return () => window.removeEventListener('resize', handleResize);\n    }, []); // Empty array ensures that effect is only run on mount\n\n    return windowSize;\n}\n\nexport default useWindowSize;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/** \n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nconst SearchItem = ({ suggestion, onClick, searchTerm, isSelected, id, contentTypes }) => {\n\tconst showType = suggestion.type && contentTypes.length > 1;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight text={decodeEntities(suggestion.title)} highlight={searchTerm} />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{suggestion.type === 'post_tag' ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n};\n\nexport default SearchItem;","/**\n * External Dependencies\n */\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/react';\n\n/**\n * WordPress Dependencies\n */\nimport {\n\tSearchControl,\n\tTextControl,\n\tSpinner,\n\tNavigableMenu,\n\tKeyboardShortcuts,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment, useState, useRef, useEffect } from '@wordpress/element'; // eslint-disable-line\nimport { __ } from '@wordpress/i18n';\nimport { useDebounce } from '../../hooks';\n\n/**\n * Internal Dependencies\n */\nimport SearchItem from './search-item';\n\nconst NAMESPACE = 'prc-content-search';\n\nconst searchCache = {};\n\nfunction ContentSearch({\n\tonSelectItem,\n\tplaceholder,\n\tlabel,\n\tstyle = 'search',\n\tcontentTypes,\n\tmode,\n\texcludeItems,\n\tperPage,\n}) {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst searchString = useDebounce(searchInput, 500);\n\t// Determine if searchString is a url\n\tconst [searchStringIsUrl, setSearchStringIsUrl] = useState(false);\n\n\tconst [searchResults, setSearchResults] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [selectedItem, setSelectedItem] = useState(null);\n\tconst abortControllerRef = useRef();\n\n\tconst mounted = useRef(true);\n\n\t/**\n\t * handleSelection\n\t *\n\t * update the selected item in state to either the selected item or null if the\n\t * selected item does not have a valid id\n\t *\n\t * @param {*} item\n\t */\n\tconst handleOnNavigate = (item) => {\n\t\tif (0 === item) {\n\t\t\tsetSelectedItem(null);\n\t\t}\n\n\t\tsetSelectedItem(item);\n\t};\n\n\tconst getPostByUrl = (url) => {\n\t\tif (undefined === url) {\n\t\t\treturn false;\n\t\t}\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/utils/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('getPostByUrl', post);\n\t\t\t\t\tresolve(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => reject(err));\n\t\t});\n\t};\n\n\t/**\n\t * handleItemSelection\n\t *\n\t * reset the search input & item container\n\t * trigger the onSelectItem callback passed in via props\n\t *\n\t * @param {*} item\n\t */\n\tconst handleItemSelection = (item) => {\n\t\tsetSearchResults([]);\n\t\tsetSearchInput('');\n\t\tonSelectItem(item);\n\t};\n\n\tconst filterResults = (results) =>\n\t\tresults.filter((result) => {\n\t\t\tlet keep = true;\n\n\t\t\tif (excludeItems.length) {\n\t\t\t\tkeep = excludeItems.every((item) => item.id !== result.id);\n\t\t\t}\n\n\t\t\treturn keep;\n\t\t});\n\n\tconst hasSearchString = !!searchString.length;\n\tconst hasSearchResults = !!searchResults.length;\n\n\t/**\n\t * handleSearchStringChange\n\t *\n\t * Using the keyword and the list of tags that are linked to the parent block\n\t * search for posts/terms that match and return them to the autocomplete component.\n\t *\n\t * @param {string} keyword search query string\n\t */\n\tconst handleSearchStringChange = (keyword, isUrl = false) => {\n\t\tif (abortControllerRef.current) {\n\t\t\tabortControllerRef.current.abort();\n\t\t}\n\n\t\tif ('' === keyword.trim()) {\n\t\t\tsetIsLoading(false);\n\t\t\tsetSearchResults([]);\n\t\t\tabortControllerRef.current = null;\n\t\t\treturn;\n\t\t}\n\n\t\tabortControllerRef.current = new AbortController();\n\n\t\tsetIsLoading(true);\n\n\t\tconst searchQuery = `wp/v2/search/?search=${keyword}&subtype=${contentTypes.join(\n\t\t\t',',\n\t\t)}&type=${mode}&_embed&per_page=${perPage}`;\n\n\t\tif (searchCache[searchQuery]) {\n\t\t\tabortControllerRef.current = null;\n\n\t\t\tsetSearchResults(filterResults(searchCache[searchQuery]));\n\t\t\tsetIsLoading(false);\n\t\t} else if (isUrl) {\n\t\t\tconsole.log('isUrl', keyword);\n\t\t\tgetPostByUrl(keyword)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif (mounted.current) {\n\t\t\t\t\t\tconst { ID, post_title, post_type, permalink, label } = post;\n\t\t\t\t\t\tabortControllerRef.current = null;\n\n\t\t\t\t\t\tconst result = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ID,\n\t\t\t\t\t\t\t\tsubtype: post_type,\n\t\t\t\t\t\t\t\ttitle: post_title,\n\t\t\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\t\t\turl: permalink,\n\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\tconsole.log('parse getPostByUrl', result, post);\n\n\t\t\t\t\t\tsearchCache[searchQuery] = result;\n\n\t\t\t\t\t\tsetSearchResults(filterResults(result));\n\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error, code) => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Hey this is a url error, we didnt find a matching post... now what?',\n\t\t\t\t\t\tkeyword,\n\t\t\t\t\t);\n\t\t\t\t\t// Stop spinning.\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t} else {\n\t\t\tapiFetch({\n\t\t\t\tpath: searchQuery,\n\t\t\t\tsignal: abortControllerRef.current.signal,\n\t\t\t})\n\t\t\t\t.then((results) => {\n\t\t\t\t\tif (false === mounted.current) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log('search Results', results);\n\n\t\t\t\t\tabortControllerRef.current = null;\n\n\t\t\t\t\tsearchCache[searchQuery] = results;\n\n\t\t\t\t\tsetSearchResults(filterResults(results));\n\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error, code) => {\n\t\t\t\t\t// fetch_error means the request was aborted\n\t\t\t\t\tif ('fetch_error' !== error.code) {\n\t\t\t\t\t\tsetSearchResults([]);\n\t\t\t\t\t\tabortControllerRef.current = null;\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\tmounted.current = false;\n\t\t},\n\t\t[],\n\t);\n\n\tuseEffect(() => {\n\t\tif ('' !== searchString) {\n\t\t\tconst isUrl = searchString.match(/^(http|https):\\/\\//);\n\t\t\tsetSearchStringIsUrl(isUrl);\n\t\t\thandleSearchStringChange(searchString, isUrl);\n\t\t}\n\t}, [searchString]);\n\n\tconst listCSS = css`\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t`;\n\n\treturn (\n\t\t<NavigableMenu onNavigate={handleOnNavigate} orientation=\"vertical\">\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{'minimal' === style && (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{'search' === style && (\n\t\t\t\t\t\t<SearchControl\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tright: 'minimal' === style ? '8px' : '50px',\n\t\t\t\t\t\t\tmarginTop: 'minimal' === style ? '27px' : '10px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{hasSearchString ? (\n\t\t\t\t<ul\n\t\t\t\t\tclassName={`${NAMESPACE}-list`}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: '0',\n\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\tmarginLeft: '0',\n\t\t\t\t\t\tpaddingLeft: '0',\n\t\t\t\t\t\tlistStyle: 'none',\n\t\t\t\t\t}}\n\t\t\t\t\tcss={listCSS}\n\t\t\t\t>\n\t\t\t\t\t{!isLoading && !hasSearchResults && false === searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\tpaddingLeft: '3px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Nothing found.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading && !hasSearchResults && searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\tpaddingLeft: '3px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Press enter to change url.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\tsearchResults.map((item, index) => {\n\t\t\t\t\t\t\tif (!item.title.length) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemSelection(item)}\n\t\t\t\t\t\t\t\t\t\tsearchTerm={searchString}\n\t\t\t\t\t\t\t\t\t\tsuggestion={item}\n\t\t\t\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\t\t\t\tisSelected={selectedItem === index + 1}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : null}\n\t\t</NavigableMenu>\n\t);\n}\n\nexport { ContentSearch };\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\tconst ItemComponent = false !== ChildComponent ? (isOrderable ? SortableElement(ChildComponent) : ChildComponent) : isOrderable ? SortableElement(PickedItem) : PickedItem;\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tfontFamily:\n\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t}}\n\t\t>\n\t\t\t{items.map((item, index) => {\n\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\treturn <ItemComponent\n\t\t\t\t\tisOrderable={isOrderable && items.length > 1 ? isOrderable : false}\n\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\tindex={index}\n\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\tsortIndex={index}\n\t\t\t\t\titem={item}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t/>\n\t\t\t})}\n\t\t</div>\n\t);\n});\n\nexport default SortableList;","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n    Button,\n    Placeholder as WPComPlaceholder,\n    Spinner,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\n import { ContentPicker } from '../content-picker';\n\nconst ContentPlaceholder = ({\n    blockProps,\n    onChange,\n    onSkip,\n    mode = 'post',\n    contentTypes = [ 'stub' ],\n    label = __('Search for a post', 'prc-block-components'),\n    placeholder = __('Search for a post or pate in a url...', 'prc-block-components'),\n    value = [],\n    loadingComponent = false,\n    children,\n}) => {\n    return (\n        <div {...blockProps}>\n            <WPComPlaceholder\n                label={`${label}:`}\n                isColumnLayout\n            >\n                {false !== loadingComponent && (\n                    <div style={{\n                        textAlign: 'center',\n                    }}>\n                        <Spinner />\n                        <p className=\"sans-serif\">\n                            Loading object...\n                        </p>\n                    </div>\n                )}\n                {false === loadingComponent && (\n                    <Fragment>\n                        {children}\n                        <ContentPicker\n                            onPickChange={ (pickedContent) => {\n                                console.log('Step1:', pickedContent);\n                                onChange(pickedContent);\n                            } }\n                            mode={mode}\n                            label={`${label} or enter a url:`}\n                            placeholder={placeholder}\n                            contentTypes={contentTypes}\n                            value={value}\n                        />\n                        <Button\n                            isLink\n                            onClick={()=>{\n                                onSkip();\n                            }}\n                            text={__('Skip')}\n                            style={{\n                                paddingLeft: '9px'\n                            }}\n                        />\n                    </Fragment>\n                )}\n            </WPComPlaceholder>\n        </div>\n    );\n}\n\nexport { ContentPlaceholder };","const DEFAULT_STATE = [];\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n    // Cloned is used in reorder, setItem, and setItemProp:\n    const cloned = [...state];\n    // eslint-disable-next-line default-case\n    switch (action.type) {\n        case 'SEED':\n            return [...action.items];\n        case 'APPEND':\n            return [...state, ...action.items];\n        case 'PREPEND':\n            return [...action.items, ...state];\n        case 'INSERT':\n            return [\n                ...state.slice(0, action.index),\n                ...action.items,\n                ...state.slice(action.index),\n            ];\n        case 'APPLY':\n            return state.map((item, index) => action.fn(item, index));\n        case 'REMOVE':\n            return state.filter((_, index) => !action.indexes.includes(index));\n        case 'REORDER':\n            // eslint-disable-next-line no-case-declarations\n            const item = state[action.from];\n\n            cloned.splice(action.from, 1);\n            cloned.splice(action.to, 0, item);\n\n            return cloned;\n        case 'SET_ITEM':\n            cloned[action.index] = action.item;\n            return cloned;\n        case 'SET_ITEM_PROP':\n            cloned[action.index] = {\n                ...cloned[action.index],\n                [action.prop]: action.value,\n            };\n            return cloned;\n    }\n\n    return state;\n};\n\nexport default reducer;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport { ToolbarButton, Popover } from '@wordpress/components';\n\n/**\n * Link control in a toolbar button that defaults to searching for topic terms\n */\nconst LinkToolbarButton = ({\n    url,\n    onChange,\n    query = { type: 'term', subtype: 'topic' },\n}) => {\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n    return (\n        <Fragment>\n            <ToolbarButton\n                aria-expanded={isLinkOpen}\n                aria-haspopup=\"true\"\n                label={__('Set Link')}\n                icon=\"admin-links\"\n                onClick={() => setIsLinkOpen(!isLinkOpen)}\n                showTooltip\n            />\n            {true === isLinkOpen && (\n                <Popover\n                    position=\"bottom center\"\n                    onClose={() => setIsLinkOpen(false)}\n                >\n                    <LinkControl\n                        className=\"wp-block-navigation-link__inline-link-input\"\n                        value={{ url }}\n                        showInitialSuggestions\n                        suggestionsQuery={query}\n                        onChange={p => onChange(p)}\n                        settings={[]}\n                    />\n                </Popover>\n            )}\n        </Fragment>\n    );\n};\n\nexport default LinkToolbarButton;\n","/**\n * External Dependencies\n */\nimport { Icon } from 'semantic-ui-react';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { Flex, FlexItem, FlexBlock, ToolbarGroup } from '@wordpress/components';\nimport { BlockControls, RichText } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport LinkToolbarButton from '../link-toolbar-button';\n\nconst CaretHeadingLink = ({\n\turl,\n\theading,\n\theadingSize = 'h2',\n\tdisableIcon = false,\n\tsetAttributes,\n}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<LinkToolbarButton\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tonChange={p => {\n\t\t\t\t\t\t\tsetAttributes({ url: p.url });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Flex style={{ paddingBottom: '1em' }}>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName={headingSize}\n\t\t\t\t\t\tvalue={heading}\n\t\t\t\t\t\tonChange={h => setAttributes({ heading: h })}\n\t\t\t\t\t\tplaceholder=\"Heading...\"\n\t\t\t\t\t\tformattingControls={[]}\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\tclassName=\"sans-serif\"\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t{true !== disableIcon && (\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"chevron right\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{ marginLeft: '0.5em' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</Fragment>\n\t);\n};\n\nexport default CaretHeadingLink;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { select, dispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\n\nconst BlockInserterButton = ({\n\tlabel = '',\n\tblockName,\n\tclientId,\n\tclassName,\n\tattributes = {},\n}) => {\n\tconst handleClick = () => {\n\t\tconst currentBlock = select('core/block-editor').getBlock(clientId);\n\t\tconsole.log('debug info...', currentBlock.innerBlocks.length);\n\t\tconst nextIndex =\n\t\t\t0 === currentBlock.innerBlocks.length\n\t\t\t\t? 0\n\t\t\t\t: currentBlock.innerBlocks.length + 1;\n\t\tconst newBlock = createBlock(blockName, attributes);\n\t\tdispatch('core/block-editor').insertBlock(\n\t\t\tnewBlock,\n\t\t\tnextIndex,\n\t\t\tclientId,\n\t\t);\n\t};\n\treturn (\n\t\t<Button\n\t\t\tlabel={__(label)}\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName=\"block-editor-button-block-appender\"\n\t\t>\n\t\t\t{__(label)}\n\t\t</Button>\n\t);\n};\n\nexport default BlockInserterButton;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n    Dropdown,\n    Toolbar,\n    ToolbarButton,\n    ToolbarGroup,\n    Path,\n    SVG,\n} from '@wordpress/components';\nimport { DOWN } from '@wordpress/keycodes';\n\nconst HeadingLevelIcon = ({ level, isPressed = false }) => {\n    const levelToPath = {\n        1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n        2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n        3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n        4: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z',\n        5: 'M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z',\n        6: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z',\n    };\n    if (!levelToPath.hasOwnProperty(level)) {\n        return null;\n    }\n\n    return (\n        <SVG\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            isPressed={isPressed}\n        >\n            <Path d={levelToPath[level]} />\n        </SVG>\n    );\n};\n\nconst POPOVER_PROPS = {\n    className: 'block-library-heading-level-dropdown',\n    isAlternate: true,\n};\n\nconst HeadingLevelToolbar = ({ selectedLevel, levels = [2, 3], onChange }) => {\n    console.log('HeadingLevelToolbar', selectedLevel);\n    return (\n        <ToolbarGroup>\n            <Dropdown\n                popoverProps={POPOVER_PROPS}\n                renderToggle={({ onToggle, isOpen }) => {\n                    const openOnArrowDown = event => {\n                        if (!isOpen && event.keyCode === DOWN) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            onToggle();\n                        }\n                    };\n\n                    return (\n                        <ToolbarButton\n                            aria-expanded={isOpen}\n                            aria-haspopup=\"true\"\n                            icon={<HeadingLevelIcon level={selectedLevel} />}\n                            label={__('Change heading level')}\n                            onClick={onToggle}\n                            onKeyDown={openOnArrowDown}\n                            showTooltip\n                        />\n                    );\n                }}\n                renderContent={() => (\n                    <Toolbar\n                        className=\"block-library-heading-level-toolbar\"\n                        label={__('Change heading level')}\n                    >\n                        <ToolbarGroup\n                            isCollapsed={false}\n                            controls={levels.map(targetLevel => {\n                                const isActive = targetLevel === selectedLevel;\n                                return {\n                                    icon: (\n                                        <HeadingLevelIcon\n                                            level={targetLevel}\n                                            isPressed={isActive}\n                                        />\n                                    ),\n                                    title: sprintf(\n                                        // translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n                                        __('Heading %d'),\n                                        targetLevel,\n                                    ),\n                                    isActive,\n                                    onClick() {\n                                        onChange(targetLevel);\n                                    },\n                                };\n                            })}\n                        />\n                    </Toolbar>\n                )}\n            />\n        </ToolbarGroup>\n    );\n};\n\nexport default HeadingLevelToolbar;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, DropZone } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { uploadMedia } from '@wordpress/media-utils';\n\n// eslint-disable-next-line no-undef\nconst { has } = window._;\n\nconst DEFAULT_IMAGE_SIZE = 'full';\n\nfunction MediaDropZone({\n\tattachmentId = false,\n\tonUpdate = (attachment) => {\n\t\tconsole.warn(\n\t\t\t'Media DropZone Attachment, use onUpdate prop when using <MediaDropZone/>: ',\n\t\t\tattachment,\n\t\t);\n\t},\n\tmediaType = ['image'],\n\tmediaSize = DEFAULT_IMAGE_SIZE,\n}) {\n\tconst [id, setId] = useState(attachmentId);\n\tconst [isUploading, setIsUploading] = useState(false);\n\n\t/**\n\t * When id (attachmentId) changes update the media and get its src, dimensions, and type.\n\t */\n\tconst { media, src, width, height, type } = useSelect(\n\t\t(select) => {\n\t\t\tconst m = id ? select('core').getMedia(id) : false;\n\t\t\tconsole.log('m...', id, m);\n\t\t\tif (undefined === m || false === m) {\n\t\t\t\treturn {\n\t\t\t\t\tmedia: false,\n\t\t\t\t\tsrc: false,\n\t\t\t\t\twidth: false,\n\t\t\t\t\theight: false,\n\t\t\t\t\ttype: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet mediaSourceUrl = false;\n\t\t\tlet mediaWidth = false;\n\t\t\tlet mediaHeight = false;\n\n\t\t\tif (has(m, ['media_details', 'sizes', mediaSize])) {\n\t\t\t\t// use mediaSize when available\n\t\t\t\tmediaWidth = m.media_details.sizes[mediaSize].width;\n\t\t\t\tmediaHeight = m.media_details.sizes[mediaSize].height;\n\t\t\t\tmediaSourceUrl = m.media_details.sizes[mediaSize].source_url;\n\t\t\t} else {\n\t\t\t\t// get fallbackMediaSize if mediaSize is not available\n\t\t\t\tconst fallbackMediaSize = DEFAULT_IMAGE_SIZE;\n\t\t\t\tif (has(m, ['media_details', 'sizes', fallbackMediaSize])) {\n\t\t\t\t\t// use fallbackMediaSize when mediaSize is not available\n\t\t\t\t\tmediaWidth = m.media_details.sizes[fallbackMediaSize].width;\n\t\t\t\t\tmediaHeight = m.media_details.sizes[fallbackMediaSize].height;\n\t\t\t\t\tmediaSourceUrl = m.media_details.sizes[fallbackMediaSize].source_url;\n\t\t\t\t} else {\n\t\t\t\t\t// use full image size when mediaFallbackSize and mediaSize are not available\n\t\t\t\t\tmediaWidth = m.media_details.width;\n\t\t\t\t\tmediaHeight = m.media_details.height;\n\t\t\t\t\tmediaSourceUrl = m.source_url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmedia: m,\n\t\t\t\tsrc: mediaSourceUrl,\n\t\t\t\twidth: mediaWidth,\n\t\t\t\theight: mediaHeight,\n\t\t\t\ttype: false !== m ? m.type : false,\n\t\t\t};\n\t\t},\n\t\t[id],\n\t);\n\n\tconst onMediaUpdate = (media) => {\n\t\tconsole.log('onMediaUpdate', id, media.id);\n\t\tif (media.id !== id) {\n\t\t\tsetId(media.id);\n\t\t\tonUpdate(media);\n\t\t}\n\t\tsetIsUploading(false);\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList);\n\t\tuploadMedia({\n\t\t\tallowedTypes: mediaType,\n\t\t\tfilesList,\n\t\t\tonFileChange([image]) {\n\t\t\t\tconsole.log('onFileChange', image);\n\t\t\t\tif (!image.id) {\n\t\t\t\t\tconsole.log('waiting');\n\t\t\t\t\tsetIsUploading(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('found!', image);\n\t\t\t\t\timage.sizes = image.media_details.sizes;\n\t\t\t\t\tonMediaUpdate(image);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<MediaUploadCheck fallback={__(`Fallback Instructions Should Go Here`)}>\n\t\t\t<MediaUpload\n\t\t\t\ttitle={__(`Media Upload`)}\n\t\t\t\tonSelect={onMediaUpdate}\n\t\t\t\tallowedTypes={mediaType}\n\t\t\t\tvalue={id}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{false !== id &&\n\t\t\t\t\t\t\tfalse !== media &&\n\t\t\t\t\t\t\tfalse !== src &&\n\t\t\t\t\t\t\tfalse === isUploading && (\n\t\t\t\t\t\t\t<div onClick={open} style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t\t<img src={src} width={`${width}px`} height={`${height}px`} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{((false !== id && false === media) || isUploading) && (\n\t\t\t\t\t\t\t<Button isSecondary isBusy onClick={open}>\n\t\t\t\t\t\t\t\t{__(` Loading...`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false === id && (\n\t\t\t\t\t\t\t<Button isSecondary onClick={open}>\n\t\t\t\t\t\t\t\t{__(`Set Image`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<DropZone onFilesDrop={onDropImage} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default MediaDropZone;\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst ifMatchSetAttribute = (\n    needle,\n    haystack,\n    attrKey,\n    attrValue,\n    setAttributes,\n) => {\n    if (needle === haystack) {\n        setAttributes({ [attrKey]: attrValue });\n    }\n};\n\nconst randomId = () => {\n    // Math.random should be unique because of its seeding algorithm.\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n    // after the decimal.\n    return `_${Math.random().toString(36).substr(2, 9)}`;\n};\n\nconst getTermsByLetter = (taxonomy, letter) => {\n\treturn new Promise(resolve => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then(terms => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n};\n\nconst getTerms = (taxonomy, perPage = 25) => {\n\treturn new Promise(resolve => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then(terms => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n};\n\nconst getTermsAsOptions = (\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) => {\n\treturn new Promise(resolve => {\n\t\tgetTerms(taxonomy, perPage).then(data => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach(key => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tlet value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n};\n\nconst getTermsAsTree = taxonomy => {\n\treturn new Promise(resolve => {\n\t\tgetTerms(taxonomy).then(data => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map(i => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter(e => 0 === e.parent);\n\t\t\tparentTerms.forEach(e => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter(f => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach(cT => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n};\n\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n    {\n        label: 'Weekly roundup of all new publications',\n        value: '7c1390ba46',\n    },\n    {\n        label: 'Quarterly update from the President',\n        value: 'a33430a835',\n    },\n    {\n        label: '--',\n        value: false,\n    },\n    {\n        label: 'Global Attitudes & Trends',\n        value: '9203343b04',\n    },\n    {\n        label: 'Internet, Science & Tech',\n        value: 'ea87b26abe',\n    },\n    {\n        label: 'Media & News Daily Briefing',\n        value: '1d2638430b',\n    },\n    {\n        label: 'Hispanic Trends',\n        value: '0e7495c7b2',\n    },\n    {\n        label: 'Religion - Weekly newsletter',\n        value: 'a7d4f3268f',\n    },\n    {\n        label: 'Religion - Daily religion headlines',\n        value: '1a647764b2',\n    },\n    {\n        label: 'Social & Demographic Trends',\n        value: '3836f62305',\n    },\n    {\n        label: 'Methods',\n        value: '6d1e80bbaf',\n    },\n    {\n        label: 'Politics',\n        value: 'fa5fdbc701',\n    },\n    {\n        label: '--',\n        value: false,\n    },\n    {\n        label: 'Mini-course - U.S. Immigration',\n        value: 'xxx',\n    },\n    {\n        label: 'Mini-course - U.S. Census',\n        value: 'xxxx',\n    },\n    {\n        label: 'Mini-course - Muslims and Islam',\n        value: 'xxxxx',\n    },\n];\n\nexport {\n\tmailChimpInterests\n};\n","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"lodash\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());"],"sourceRoot":""}