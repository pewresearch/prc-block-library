{"version":3,"sources":["webpack:///external \"React\"","webpack:///./src/heading/index.js","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///external [\"wp\",\"primitives\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"regeneratorRuntime\"","webpack:///external \"lodash\"","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///external [\"wp\",\"keycodes\"]","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///external [\"wp\",\"hooks\"]","webpack:///external [\"wp\",\"compose\"]"],"names":["module","exports","window","HeadingBlockFilter","createHigherOrderComponent","BlockEdit","props","name","attributes","setAttributes","isChapter","icon","altTocText","content","anchor","label","isActive","onClick","attrs","replace","__","value","placeholder","onChange","attachmentId","mediaType","mediaSize","onUpdate","image","console","log","id","addFilter","settings","level","default","type","transforms","from","blocks","transform","createBlock","registerBlockStyle","registerBlockVariation","title","description","className","_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","test","regeneratorRuntime","_toConsumableArray","isArray","arrayLikeToArray","iterableToArray","unsupportedIterableToArray","TypeError","_iterableToArray","iter","Symbol","iterator"],"mappings":"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","file":"blocks/heading-b9a32e48.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","/**\n * External Dependencies\n */\nimport { isEmpty } from 'lodash';\nimport { MediaDropZone } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\n import { __ } from '@wordpress/i18n';\n import { createHigherOrderComponent } from '@wordpress/compose';\n import { Fragment } from '@wordpress/element';\n import {\n\tcreateBlock,\n    registerBlockStyle,\n    registerBlockVariation\n} from '@wordpress/blocks';\nimport { BlockControls, InspectorAdvancedControls } from '@wordpress/block-editor';\nimport {\n\tBaseControl,\n    KeyboardShortcuts,\n\tTextControl,\n    ToolbarGroup,\n\tToolbarButton\n} from '@wordpress/components';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\n\n// Add toolbar to core/heading block with toggle for isChapter attribute.\nconst HeadingBlockFilter = createHigherOrderComponent((BlockEdit) => {\n    return (props) => {\n        const { name, attributes, setAttributes } = props;\n        if ('core/heading' !== name) {\n            return <BlockEdit {...props} />;\n        }\n\t\tconst { isChapter, icon, altTocText, content, anchor } = attributes;\n        return (\n            <Fragment>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon={ 'book-alt' }\n\t\t\t\t\t\t\tlabel=\"Is Chapter?\"\n\t\t\t\t\t\t\tisActive={isChapter}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\t\t\tanchor: true === !isChapter ? `CHAPTER-${anchor}` : anchor.replace(/CHAPTER-/, ''),\n\t\t\t\t\t\t\t\t\tisChapter: !isChapter\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetAttributes({...attrs});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t</BlockControls>\n\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t{isChapter && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={__('Alternate TOC Text', 'prc-block-library')}\n\t\t\t\t\t\t\t\tvalue={altTocText}\n\t\t\t\t\t\t\t\tplaceholder={content}\n\t\t\t\t\t\t\t\tonChange={(value) => setAttributes({altTocText: value})}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<BaseControl label={__('Chapter Icon', 'prc-block-library')}>\n\t\t\t\t\t\t\t\t<MediaDropZone\n\t\t\t\t\t\t\t\t\tattachmentId={0 === icon ? false : icon}\n\t\t\t\t\t\t\t\t\tmediaType={['image']}\n\t\t\t\t\t\t\t\t\tmediaSize={'heading-block--chapter-icon'}\n\t\t\t\t\t\t\t\t\tonUpdate={(image) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"settingAttributes...\", image);\n\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\ticon: image.id,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseControl>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\t\t\t\t</InspectorAdvancedControls>\n                <BlockEdit {...props} />\n            </Fragment>\n        );\n    };\n}, 'withChapterControls');\naddFilter('editor.BlockEdit', 'prc-block/heading', HeadingBlockFilter, 21);\n\n/**\n * Modify default settings on core/heading block. Change the default heading level to 4 and add isChapter attribute to replace prc-block/chapter at a later date.\n *\n * @param {*} settings\n * @param {*} name\n * @returns\n */\nfunction modifyDefaultSettings( settings, name ) {\n    if ( 'core/heading' !== name ) {\n        return settings;\n    }\n    settings.attributes.level.default = 4;\n    settings.attributes.isChapter = {\n        type: 'boolean',\n        default: false,\n    };\n\tsettings.transforms.from = [...settings.transforms.from, {\n\t\ttype: 'block',\n\t\tblocks: [ 'prc-block/chapter' ],\n\t\ttransform: ( { value, level } ) => {\n\t\t\treturn createBlock( 'core/heading', {\n\t\t\t\tcontent: value,\n\t\t\t\tlevel,\n\t\t\t\tisChapter: true,\n\t\t\t} );\n\t\t},\n\t}];\n\treturn settings;\n}\n\naddFilter(\n    'blocks.registerBlockType',\n    'prc-block-library/heading',\n    modifyDefaultSettings,\n);\n\nregisterBlockStyle('core/heading', [\n    {\n        name: 'section-header',\n        label: 'Section Header',\n    },\n    {\n        name: 'sub-header',\n        label: 'Sub Header',\n    },\n]);\n\nregisterBlockVariation('core/heading', {\n    name: 'section-header',\n    title: __('Section Header'),\n    description: __('A heading styled for \"section headings\".'),\n    attributes: {\n        className: 'is-style-section-header',\n        level: 3,\n    },\n});\n\nregisterBlockVariation('core/heading', {\n    name: 'chapter',\n    title: __('Chapter'),\n    description: __('A chapter heading.'),\n\ticon: 'editor-ol',\n    attributes: {\n        isChapter: true,\n\t\tlevel: 3,\n    },\n});\n","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"lodash\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","(function() { module.exports = window[\"wp\"][\"hooks\"]; }());","(function() { module.exports = window[\"wp\"][\"compose\"]; }());"],"sourceRoot":""}