/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[5],{0:function(e,t){e.exports=wp.element},114:function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/menu-link","category":"layout","attributes":{"label":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"rel":{"type":"string"},"id":{"type":"number"},"opensInNewTab":{"type":"boolean","default":false},"url":{"type":"string"},"title":{"type":"string"},"subMenuEnabled":{"type":"boolean","default":false},"isChild":{"type":"boolean","default":false},"rootBlockName":{"type":"string"},"parentBlockName":{"type":"string"}},"usesContext":["prc-block/menu","prc-block/taxonomy-tree","prc-block/taxonomy-tree-more"],"supports":{"reusable":false,"html":false}}')},14:function(e,t){e.exports=lodash},175:function(e,t,n){n(16),e.exports=n(238)},2:function(e,t){e.exports=wp.i18n},238:function(e,t,n){"use strict";n.r(t);var o=n(5),r=n(2),c=n(272),a=n(6),l=n(114),i=n(19),s=n(9),u=n.n(s),p=n(14),b=n(8),m=n(4),d=n(133),f=n(3),k=n(42),g=n(0),O=n(275),y=n(266),j=n(267),_=n(268),w=function(e){switch(e){case"page":return{type:"post",subtype:"page"};case"topic":return{type:"term",subtype:"topic"};case"formats":return{type:"term",subtype:"formats"};case"programs":return{type:"term",subtype:"programs"};default:return{}}},h=function(e){var t=e.type,n=e.close,o=Object(f.__experimentalUseInnerBlocksProps)({className:u()({list:"inline"===t}),style:"dropdown"===t?{width:"200px",padding:"0 1em 1em 1em",zIndex:2}:null},{allowedBlocks:["prc-block/menu-link"],orientation:"vertical",__experimentalCaptureToolbars:"dropdown"===t,templateLock:!1});return"inline"===t?React.createElement("div",o):React.createElement(m.Popover,{position:"bottom center",onFocusOutside:function(){return null},onClose:n,style:{zIndex:1}},React.createElement("div",o))},R=function(e){var t=e.attributes,n=e.context,c=e.isSelected,a=e.setAttributes,l=e.clientId,s=e.mergeBlocks,R=e.onReplace,E=t.label,v=t.type,x=t.opensInNewTab,B=t.url,C=t.description,T=t.rel,P=t.title,N=t.subMenuEnabled,I={url:B,opensInNewTab:x},L=Object(b.useSelect)((function(e){var t=e("core/block-editor"),o=t.getBlockHierarchyRootClientId,r=t.getClientIdsOfDescendants,c=t.getBlockRootClientId,a=t.getBlock,i=!0,s=a(c(l)),u=a(o(l));return["prc-block/menu-link","prc-block/taxonomy-tree-more"].includes(s.name)&&(i=!1),{allowSubMenu:i,hasDescendants:!!r([l]).length,isDraggingBlocks:e("core/block-editor").isDraggingBlocks(),subMenuType:n.hasOwnProperty("prc-block/menu")?"dropdown":"inline",rootBlockName:u.name,parentBlockName:s.name}}),[]),S=L.isDraggingBlocks,D=L.subMenuType,M=L.allowSubMenu,A=L.parentBlockName,F=L.rootBlockName,U=Object(g.useState)(!1),z=Object(i.a)(U,2),J=z[0],G=z[1],H=Object(g.useState)(!1),V=Object(i.a)(H,2),K=V[0],Q=V[1],q=Object(g.useRef)(null),W=Object(r.__)("Add linkâ€¦"),X=Object(g.useRef)();Object(g.useEffect)((function(){B||G(!0),a({rootBlockName:F,parentBlockName:A})}),[]),Object(g.useEffect)((function(){c||G(!1)}),[c]),Object(g.useEffect)((function(){J&&B&&(Object(k.isURL)(Object(k.prependHTTP)(E))&&/^.+\.[a-z]+/.test(E)?function(){X.current.focus();var e=X.current.ownerDocument,t=e.defaultView.getSelection(),n=e.createRange();n.selectNodeContents(X.current),t.removeAllRanges(),t.addRange(n)}():Object(O.a)(X.current,!0))}),[B]),Object(g.useEffect)((function(){}),[M]);var Y=Object(f.useBlockProps)({ref:q,className:u()("item",{"is-editing":c&&!S,"is-selected":c&&!S,"has-link":!!B})});return React.createElement(g.Fragment,null,React.createElement(f.BlockControls,null,React.createElement(m.ToolbarGroup,null,React.createElement(m.KeyboardShortcuts,{bindGlobal:!0,shortcuts:Object(o.a)({},d.b.primary("k"),(function(){return G(!0)}))}),React.createElement(m.ToolbarButton,{name:"link",icon:y.a,title:Object(r.__)("Link"),shortcut:d.a.primary("k"),onClick:function(){return G(!0)}}),!0===M&&React.createElement(m.ToolbarButton,{name:"sub-menu",icon:j.a,title:Object(r.__)("Sub Menu"),isActive:K,onClick:function(){!1===N&&a({subMenuEnabled:!0}),Q(!K)}}))),React.createElement(f.InspectorControls,null,React.createElement(m.PanelBody,{title:Object(r.__)("Link settings")},React.createElement(m.TextareaControl,{value:C||"",onChange:function(e){a({description:e})},label:Object(r.__)("Description"),help:Object(r.__)("The description will be displayed in the menu if the current theme supports it.")}),React.createElement(m.TextControl,{value:P||"",onChange:function(e){a({title:e})},label:Object(r.__)("Link title"),autoComplete:"off"}),React.createElement(m.TextControl,{value:T||"",onChange:function(e){a({rel:e})},label:Object(r.__)("Link rel"),autoComplete:"off"}),!0===M&&React.createElement(m.ToggleControl,{checked:N,onChange:function(){a({subMenuEnabled:!N})},label:Object(r.__)("Enable Sub Menu")}))),React.createElement("div",Y,React.createElement(m.Flex,null,React.createElement(m.FlexItem,null,React.createElement(f.RichText,{ref:X,identifier:"label",className:"is-style-text"===n["prc-block/menu"]&&!0===M?"ui basic button":"",value:E,onChange:function(e){return a({label:e})},onMerge:s,onReplace:R,"aria-label":Object(r.__)("Menu link text"),placeholder:W,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic"]})),React.createElement(m.FlexBlock,null,!0===N&&"inline"===D&&React.createElement(m.Button,{isTertiary:!0,isPressed:K,icon:_.a,onClick:function(){return Q(!K)}}))),J&&React.createElement(m.Popover,{position:"bottom center",onClose:function(){return G(!1)}},React.createElement(f.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:I,showInitialSuggestions:!0,noDirectEntry:!!v,noURLSuggestion:!!v,suggestionsQuery:w(v),onChange:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.title,r=void 0===o?"":o,c=n.url,l=void 0===c?"":c,i=n.opensInNewTab,s=n.id;return a({url:encodeURI(l),label:(e=r.replace(/http(s?):\/\//gi,""),t=l.replace(/http(s?):\/\//gi,""),""!==r&&e!==t&&E!==r?Object(p.escape)(r):E||Object(p.escape)(t)),opensInNewTab:i,id:s})}})),!0===N&&!0===K&&React.createElement(h,{type:D,close:function(){return Q(!K)}})))},E=function(){return React.createElement(f.InnerBlocks.Content,null)},v=n(269),x=n(270),B=n(271),C=[{name:"link",isDefault:!0,title:Object(r.__)("Link"),description:Object(r.__)("A link to a URL."),attributes:{}},{name:"page",icon:v.a,title:Object(r.__)("Page Link"),description:Object(r.__)("A link to a page."),attributes:{type:"page"}},{name:"topic",icon:x.a,title:Object(r.__)("Topic Page Link"),description:Object(r.__)("A link to a topic."),attributes:{type:"topic"}},{name:"formats",icon:B.a,title:Object(r.__)("Format Link"),description:Object(r.__)("A link to a format."),attributes:{type:"formats"}},{name:"programs",icon:B.a,title:Object(r.__)("Program Link"),description:Object(r.__)("A link to a program."),attributes:{type:"programs"}}];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=l.name,I={title:Object(r.__)("Link"),icon:c.a,description:Object(r.__)("Add a page, link, or another item to your navigation."),variations:C,__experimentalLabel:function(e){return e.label},edit:R,save:E};Object(a.registerBlockType)(N,P(P({},l),I))},3:function(e,t){e.exports=wp.blockEditor},4:function(e,t){e.exports=wp.components},42:function(e,t){e.exports=wp.url},6:function(e,t){e.exports=wp.blocks},8:function(e,t){e.exports=wp.data}},[[175,0,21]]]);
//# sourceMappingURL=menu-link-8d64130d.js.map