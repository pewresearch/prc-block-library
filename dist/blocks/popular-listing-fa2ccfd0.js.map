{"version":3,"sources":["webpack:///external \"React\"","webpack:///./src/story-item/helpers.js","webpack:///external [\"wp\",\"data\"]","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/hooks/use-debounce.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-search/search-item.jsx","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-search/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-picker/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-placeholder/index.js","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"moment\"","webpack:///external \"ReactDOM\"","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///./src/popular-listing/edit/placeholder.jsx","webpack:///./src/popular-listing/edit/index.js","webpack:///./src/popular-listing/save.js","webpack:///./src/popular-listing/index.js"],"names":["module","exports","window","setArtBySize","imageSize","postId","setAttributes","apiFetch","path","then","data","undefined","image","rawUrl","isChartArt","chartArt","getAttributesFromPost","opts","post","isRefresh","console","log","d","Date","date","moment","format","storyItem","title","hasOwnProperty","rendered","excerpt","url","link","label","id","extra","art","setPostAttributes","options","Promise","resolve","reject","method","attrs","catch","err","error","getAttributesFromURL","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","ButtonStyled","styled","Button","SearchItem","suggestion","onClick","searchTerm","isSelected","contentTypes","showType","type","length","text","decodeEntities","className","style","borderRadius","boxSizing","paddingRight","highlight","aria-hidden","filterURLForDisplay","safeDecodeURI","NAMESPACE","searchCache","ContentSearch","onSelectItem","placeholder","mode","excludeItems","perPage","searchInput","setSearchInput","searchString","searchResults","setSearchResults","isLoading","setIsLoading","selectedItem","setSelectedItem","abortControllerRef","useRef","mounted","filterResults","results","filter","result","keep","every","item","hasSearchString","hasSearchResults","handleSearchStringChange","keyword","current","abort","isUrl","match","trim","AbortController","searchQuery","join","ID","post_title","post_type","permalink","subtype","signal","code","listCSS","css","onNavigate","orientation","display","flexGrow","onChange","autoComplete","position","right","marginTop","marginBottom","marginLeft","paddingLeft","listStyle","color","cursor","__","map","index","key","handleItemSelection","DragHandle","sortableHandle","marginRight","flexShrink","width","height","xmlns","viewBox","role","focusable","Wrapper","PickedItem","isOrderable","handleItemDelete","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","newItem","name","uuid","border","paddingTop","paddingBottom","aria-label","SortableList","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","itemKey","sortIndex","totalItems","StyleWrapper","ContentPicker","onPickChange","ids","maxContentItems","singlePickedLabel","multiPickedLabel","uniqueContentItems","excludeCurrentPost","PickedItemChild","searchStyle","content","setContent","currentPostId","getCurrentPostId","useMemo","push","previousContent","uuidv4","Boolean","useDragHandle","deletedItem","onSortEnd","oldIndex","newIndex","newContent","arrayMove","ContentPlaceholder","blockProps","onSkip","loadingComponent","children","isColumnLayout","textAlign","pickedContent","isLink","Placeholder","loadingStub","setLoadingStub","edit","attributes","clientId","blockIndexAttr","enableNumber","useBlockProps","blockIndexID","parentBlockId","getBlockRootClientId","blockIndex","numberEnabled","getBlock","getBlockIndex","class","href","padding","tagName","t","keepPlaceholderOnFocus","fontWeight","fontSize","lineHeight","save","metadata","settings","icon","trendingUp","registerBlockType"],"mappings":"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","file":"blocks/popular-listing-fa2ccfd0.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","/**\n * External Dependencies\n */\n import * as moment from 'moment';\n\n/**\n * WordPress Dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst setArtBySize = (imageSize, postId, setAttributes) => {\n    if (0 !== postId && false !== setAttributes) {\n        apiFetch({\n            path: `/prc-api/v2/get-art/?postId=${postId}`,\n        }).then(data => {\n            if (false !== data) {\n                if (\n                    undefined !== data[imageSize] &&\n                    false !== setAttributes\n                ) {\n                    setAttributes({\n                        image: data[imageSize].rawUrl,\n                        isChartArt: data[imageSize].chartArt,\n                    });\n                }\n            }\n        });\n    }\n};\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n    const {\n        post,\n        imageSize,\n        isRefresh = false\n    } = opts;\n    console.log(getAttributesFromPost, post);\n\n    const d = new Date(post.date);\n    const date = moment(d).format('MMM D, YYYY');\n\n    const storyItem = {\n        title: post.title.hasOwnProperty('rendered')\n            ? post.title.rendered\n            : post.title,\n        // @TODO change back to excerpt everywhere, write a deprecation transition for that and excerptBelow?\n        excerpt: post.excerpt.hasOwnProperty('rendered')\n            ? post.excerpt.rendered\n            : post.excerpt,\n        url: post.link, // @TODO where is this `link` coming from, why is it not url or permalink.\n        label: post.hasOwnProperty('label') ? post.label : 'Report',\n        date,\n        postId: post.id,\n    };\n\n    if ( true !== isRefresh ) {\n        storyItem.extra = '';\n    }\n\n    if (post.art) {\n        const art = post.art;\n        storyItem.image = art[imageSize].rawUrl;\n        storyItem.isChartArt = art[imageSize].chartArt;\n    }\n\n    console.log('getAttributesFromPost', post, storyItem);\n\n    return storyItem;\n};\n\nconst getAttributesFromURL = (opts) => {\n    const {\n        url,\n        imageSize,\n    } = opts;\n\n    return new Promise((resolve, reject) => {\n        apiFetch({\n            path: '/prc-api/v2/blocks/story-item/get-post-by-url',\n            method: 'POST',\n            data: { url },\n        })\n            .then(post => {\n                console.log('getAttributesFromURL', post);\n                if (false !== post) {\n                    const attrs = getAttributesFromPost({\n                        post,\n                        imageSize,\n                        isRefresh: false\n                    });\n                    resolve(attrs);\n                } else {\n                    reject(post);\n                }\n            })\n            .catch(err => {\n                console.error(err);\n                reject(err);\n            });\n    });\n}\n\n/**\n * Get the attributes for a stub, then throw a warning that a stub can not be found.\n * @TODO allow searching by post id OR url, if its by url use the above function. We need to cehck for a url and then use getAttributesFromURL.\n *\n * @param {*} postId\n * @param {*} imageSize\n * @param {*} isRefresh\n * @param {*} setAttributes\n * @returns\n */\nconst setPostAttributes = (options) => {\n    const {\n        setAttributes,\n        postId = false,\n        url = false,\n        imageSize = 'A1',\n        isRefresh = false,\n    } = options;\n\n    if ((false === postId && false === url) || undefined === setAttributes) {\n        return;\n    }\n\n\n    if ( false !== url ) {\n        getAttributesFromURL({\n            url,\n            imageSize\n        })\n            .then(attrs => {\n                console.log('setPostAttributes -> by url:', attrs);\n                setAttributes(attrs);\n            }).catch(err => {\n                console.error(err);\n            });\n    }\n\n    apiFetch({\n        path: `/wp/v2/stub/${postId}`,\n        method: 'GET',\n    })\n        .then(post => {\n            console.log('setPostAttributes -> by id:', postId, post);\n            if (false !== post) {\n                const attrs = getAttributesFromPost({\n                    post,\n                    imageSize,\n                    isRefresh\n                });\n                setAttributes(attrs);\n            }\n        })\n        .catch(err => console.error(err));\n};\n\nconst resetAttributes = (options) => {\n\n}\n\nexport {\n    setArtBySize,\n    setPostAttributes,\n    resetAttributes\n}\n","(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * WordPress Dependencies\n */\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nfunction useDebounce(value, delay) {\n    // State and setters for debounced value\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(\n        () => {\n            // Update debounced value after delay\n            const handler = setTimeout(() => {\n                setDebouncedValue(value);\n            }, delay);\n            // Cancel the timeout if value changes (also on delay change or unmount)\n            // This is how we prevent debounced value from updating if value is changed ...\n            // .. within the delay period. Timeout gets cleared and restarted.\n            return () => {\n                clearTimeout(handler);\n            };\n        },\n        [value, delay], // Only re-call effect if value or delay changes\n    );\n    return debouncedValue;\n}\n\nexport default useDebounce;","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/** \n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nconst SearchItem = ({ suggestion, onClick, searchTerm, isSelected, id, contentTypes }) => {\n\tconst showType = suggestion.type && contentTypes.length > 1;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight text={decodeEntities(suggestion.title)} highlight={searchTerm} />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{suggestion.type === 'post_tag' ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n};\n\nexport default SearchItem;","/**\n * External Dependencies\n */\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/react';\nimport { useDebounce } from '../../hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { SearchControl, TextControl, Spinner, NavigableMenu } from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment, useState, useRef, useEffect } from '@wordpress/element'; // eslint-disable-line\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal Dependencies\n */\nimport SearchItem from './search-item';\n\nconst NAMESPACE = 'prc-content-search';\n\nconst searchCache = {};\n\nconst ContentSearch = ({ onSelectItem, placeholder, label, style = 'search', contentTypes, mode, excludeItems, perPage }) => {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst searchString = useDebounce(searchInput, 500);\n\n\tconst [searchResults, setSearchResults] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [selectedItem, setSelectedItem] = useState(null);\n\tconst abortControllerRef = useRef();\n\n\tconst mounted = useRef(true);\n\n\t/**\n\t * handleSelection\n\t *\n\t * update the selected item in state to either the selected item or null if the\n\t * selected item does not have a valid id\n\t *\n\t * @param {*} item\n\t */\n\tconst handleOnNavigate = (item) => {\n\t\tif (item === 0) {\n\t\t\tsetSelectedItem(null);\n\t\t}\n\n\t\tsetSelectedItem(item);\n\t}\n\n\tconst getPostByUrl = (url) => {\n        if (undefined === url) {\n            return false;\n        }\n        return new Promise((resolve, reject) => {\n            apiFetch({\n                path: '/prc-api/v2/utils/get-post-by-url',\n                method: 'POST',\n                data: { url },\n            })\n                .then((post) => {\n                    console.log('getPostByUrl', post);\n                    resolve(post);\n                })\n                .catch((err) => reject(err));\n        });\n    };\n\n\t/**\n\t * handleItemSelection\n\t *\n\t * reset the search input & item container\n\t * trigger the onSelectItem callback passed in via props\n\t *\n\t * @param {*} item\n\t */\n\tconst handleItemSelection = (item) => {\n\t\tsetSearchResults([]);\n\t\tsetSearchInput('');\n\t\tonSelectItem(item);\n\t}\n\n\tconst filterResults = (results) => {\n\t\treturn results.filter((result) => {\n\t\t\tlet keep = true;\n\n\t\t\tif (excludeItems.length) {\n\t\t\t\tkeep = excludeItems.every((item) => item.id !== result.id);\n\t\t\t}\n\n\t\t\treturn keep;\n\t\t});\n\t}\n\n\tconst hasSearchString = !!searchString.length;\n\tconst hasSearchResults = !!searchResults.length;\n\n\t/**\n\t * handleSearchStringChange\n\t *\n\t * Using the keyword and the list of tags that are linked to the parent block\n\t * search for posts/terms that match and return them to the autocomplete component.\n\t *\n\t * @param {string} keyword search query string\n\t */\n\tconst handleSearchStringChange = (keyword) => {\n\t\tif (abortControllerRef.current) {\n\t\t\tabortControllerRef.current.abort();\n\t\t}\n\n\t\t// Determine if keyword is a url\n\t\tconst isUrl = keyword.match(/^(http|https):\\/\\//);\n\n\t\tif (keyword.trim() === '') {\n\t\t\tsetIsLoading(false);\n\t\t\tsetSearchResults([]);\n\t\t\tabortControllerRef.current = null;\n\t\t\treturn;\n\t\t}\n\n\t\tabortControllerRef.current = new AbortController();\n\n\t\tsetIsLoading(true);\n\n\t\tconst searchQuery = `wp/v2/search/?search=${keyword}&subtype=${contentTypes.join(\n\t\t\t',',\n\t\t)}&type=${mode}&_embed&per_page=${perPage}`;\n\n\t\tif (searchCache[searchQuery]) {\n\t\t\tabortControllerRef.current = null;\n\n\t\t\tsetSearchResults(filterResults(searchCache[searchQuery]));\n\t\t\tsetIsLoading(false);\n\t\t} else if (isUrl) {\n\t\t\tgetPostByUrl(keyword)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif (mounted.current) {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tID,\n\t\t\t\t\t\t\tpost_title,\n\t\t\t\t\t\t\tpost_type,\n\t\t\t\t\t\t\tpermalink,\n\t\t\t\t\t\t} = post;\n\t\t\t\t\t\tabortControllerRef.current = null;\n\n\t\t\t\t\t\tconst result = [{\n\t\t\t\t\t\t\tid: ID,\n\t\t\t\t\t\t\tsubtype: post_type,\n\t\t\t\t\t\t\ttitle: post_title,\n\t\t\t\t\t\t\ttype: \"post\",\n\t\t\t\t\t\t\turl: permalink,\n\t\t\t\t\t\t}];\n\n\t\t\t\t\t\tconsole.log(\"this is where we should do our stuff...\", result, post);\n\n\t\t\t\t\t\tsearchCache[searchQuery] = result;\n\n\t\t\t\t\t\tsetSearchResults(filterResults(result));\n\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tapiFetch({\n\t\t\t\tpath: searchQuery,\n\t\t\t\tsignal: abortControllerRef.current.signal\n\t\t\t}).then((results) => {\n\t\t\t\tif (mounted.current === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\"search Results\", results);\n\n\t\t\t\tabortControllerRef.current = null;\n\n\t\t\t\tsearchCache[searchQuery] = results;\n\n\t\t\t\tsetSearchResults(filterResults(results));\n\n\t\t\t\tsetIsLoading(false);\n\t\t\t}).catch((error, code) => {\n\t\t\t\t// fetch_error means the request was aborted\n\t\t\t\tif (error.code !== 'fetch_error') {\n\t\t\t\t\tsetSearchResults([]);\n\t\t\t\t\tabortControllerRef.current = null;\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmounted.current = false;\n\t\t};\n\t}, []);\n\n\tuseEffect(()=>{\n\t\tif ( '' !== searchString ) {\n\t\t\thandleSearchStringChange(searchString);\n\t\t}\n\t}, [searchString]);\n\n\tconst listCSS = css`\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t`;\n\n\treturn (\n\t\t<NavigableMenu onNavigate={handleOnNavigate} orientation=\"vertical\">\n\t\t\t<div style={{\n\t\t\t\tdisplay: 'flex'\n\t\t\t}}>\n\t\t\t\t<div style={{\n\t\t\t\t\tflexGrow: '1',\n\t\t\t\t}}>\n\t\t\t\t\t{ 'minimal' === style && (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword)=> setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{ 'search' === style && (\n\t\t\t\t\t\t<SearchControl\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword)=> setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tright: 'minimal' === style ? '8px' : '50px',\n\t\t\t\t\t\tmarginTop: 'minimal' === style ? '27px' : '10px',\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{hasSearchString ? (\n\t\t\t\t<ul\n\t\t\t\t\tclassName={`${NAMESPACE}-list`}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: '0',\n\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\tmarginLeft: '0',\n\t\t\t\t\t\tpaddingLeft: '0',\n\t\t\t\t\t\tlistStyle: 'none',\n\t\t\t\t\t}}\n\t\t\t\t\tcss={listCSS}\n\t\t\t\t>\n\t\t\t\t\t{!isLoading && !hasSearchResults && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{ color: 'inherit', cursor: 'default', paddingLeft: '3px' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Nothing found.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading && searchResults.map((item, index) => {\n\t\t\t\t\t\tif (!item.title.length) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item`}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t\tonClick={() => handleItemSelection(item)}\n\t\t\t\t\t\t\t\t\tsearchTerm={searchString}\n\t\t\t\t\t\t\t\t\tsuggestion={item}\n\t\t\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\t\t\tisSelected={selectedItem === index + 1}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : null}\n\t\t</NavigableMenu>\n\t);\n};\n\nexport { ContentSearch };","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\tconst ItemComponent = false !== ChildComponent ? (isOrderable ? SortableElement(ChildComponent) : ChildComponent) : isOrderable ? SortableElement(PickedItem) : PickedItem;\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tfontFamily:\n\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t}}\n\t\t>\n\t\t\t{items.map((item, index) => {\n\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\treturn <ItemComponent\n\t\t\t\t\tisOrderable={isOrderable && items.length > 1 ? isOrderable : false}\n\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\tindex={index}\n\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\tsortIndex={index}\n\t\t\t\t\titem={item}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t/>\n\t\t\t})}\n\t\t</div>\n\t);\n});\n\nexport default SortableList;","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t/**\n\t * This legacy code allows you to pass in only IDs to content like [ 1, 4, 5 ].\n\t * This really shouldn't be done as of version 1.5.0.\n\t */\n\t// if (content.length && typeof content[0] !== 'object') {\n\t// \tfor (let i = 0; i < content.length; i++) {\n\t// \t\tcontent[i] = {\n\t// \t\t\tid: content[i],\n\t// \t\t\ttype: contentTypes[0],\n\t// \t\t};\n\t// \t}\n\t// }\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\tonPickChange(content);\n\t}, [content]);\n\n\tconst handleSelect = (item) => {\n\t\tconsole.log(\"handleSelect->\", item); // eslint-disable-line no-console\n\t\tsetContent((previousContent) => [\n\t\t\t{\n\t\t\t\tid: item.id,\n\t\t\t\tuuid: uuidv4(),\n\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\turl: item.url,\n\t\t\t},\n\t\t\t...previousContent,\n\t\t]);\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n    Button,\n    Placeholder as WPComPlaceholder,\n    Spinner,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\n import { ContentPicker } from '../content-picker';\n\nconst ContentPlaceholder = ({\n    blockProps,\n    onChange,\n    onSkip,\n    mode = 'post',\n    contentTypes = [ 'stub' ],\n    label = __('Search for a post', 'prc-block-components'),\n    placeholder = __('Search for a post or pate in a url...', 'prc-block-components'),\n    value = [],\n    loadingComponent = false,\n    children,\n}) => {\n    return (\n        <div {...blockProps}>\n            <WPComPlaceholder\n                label={`${label}:`}\n                isColumnLayout\n            >\n                {false !== loadingComponent && (\n                    <div style={{\n                        textAlign: 'center',\n                    }}>\n                        <Spinner />\n                        <p className=\"sans-serif\">\n                            Loading object...\n                        </p>\n                    </div>\n                )}\n                {false === loadingComponent && (\n                    <Fragment>\n                        {children}\n                        <ContentPicker\n                            onPickChange={ (pickedContent) => {\n                                console.log('Step1:', pickedContent);\n                                onChange(pickedContent);\n                            } }\n                            mode={mode}\n                            label={`${label} or enter a url:`}\n                            placeholder={placeholder}\n                            contentTypes={contentTypes}\n                            value={value}\n                        />\n                        <Button\n                            isLink\n                            onClick={()=>{\n                                onSkip();\n                            }}\n                            text={__('Skip')}\n                            style={{\n                                paddingLeft: '9px'\n                            }}\n                        />\n                    </Fragment>\n                )}\n            </WPComPlaceholder>\n        </div>\n    );\n}\n\nexport { ContentPlaceholder };","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = moment;","(function() { module.exports = window[\"ReactDOM\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","/**\n * External Dependencies\n */\nimport { ContentPlaceholder } from '@prc/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, Fragment, useEffect } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../story-item/helpers.js';\nimport GoogleAnalyticsMostPopular from './google-analytics.jsx';\n\nconst Placeholder = ({setAttributes, blockProps}) => {\n    const [loadingStub, setLoadingStub] = useState(false);\n\n    const onPick = (id, title) => {\n        setPostAttributes({\n            postId: id,\n            title: title,\n            setAttributes\n        });\n    }\n\n    return (\n        <ContentPlaceholder\n            onChange={(pickedContent)=>{\n                if ( pickedContent.length > 0 && undefined !== pickedContent[0].id ) {\n                    setLoadingStub(true);\n                    onPick(pickedContent[0].id, pickedContent[0].title);\n                }\n            }}\n            onSkip={()=>{\n                setAttributes({postId: 0});\n            }}\n            label={__('Search for a popular post', 'prc-block-library')}\n            blockProps={{...blockProps, style: {marginBottom: '16px'}}}\n            loadingComponent={loadingStub}\n        >\n            {/* @TODO we'll revisit this in 2022 when we update to GA4 <GoogleAnalyticsMostPopular onPick={onPick}/> */}\n        </ContentPlaceholder>\n    );\n}\n\nexport default Placeholder;","/**\n * WordPress Dependencies\n */\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useBlockProps } from '@wordpress/block-editor';\nimport { Fragment, useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { RichText } from '@wordpress/block-editor';\nimport {\n    Flex,\n    FlexBlock,\n    FlexItem,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport Placeholder from './placeholder';\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId }) => {\n\n    const { title, link, postId, blockIndexAttr, enableNumber } = attributes;\n\n    const blockProps = useBlockProps();\n\n    const { blockIndex, numberEnabled } = useSelect(\n        select => {\n            const parentBlockId = select('core/block-editor').getBlockRootClientId(\n                clientId,\n            );\n\n            if (null == parentBlockId || typeof parentBlockId === 'string' && 0 === parentBlockId.length) {\n                return {\n                    blockIndex: null,\n                    numberEnabled: false\n                };\n            }\n\n            let blockIndexID;\n\n            const parentBlock = select('core/block-editor').getBlock(parentBlockId);\n\n            if (parentBlock.name === 'core/group') {\n                //get the block index for this block\n                blockIndexID = select('core/block-editor').getBlockIndex(clientId, parentBlockId)\n            }\n\n            // Set your attribute with the index number here.\n            return {\n                blockIndex: blockIndexID,\n                numberEnabled: true\n            };\n        },\n        [clientId],\n    );\n\n    useEffect(() => {\n        setAttributes({ blockIndexAttr: blockIndex })\n\n        if (numberEnabled == true) {\n            setAttributes({ enableNumber: true })\n        } else {\n            setAttributes({ enableNumber: false })\n        }\n\n    }, [blockIndex])\n\n    if (true !== isSelected && blockIndex >= 0) {\n        return (\n\n            <div {...blockProps}>\n                <div class=\"main\">\n                    {numberEnabled && (\n                        <span className=\"big-number\">\n                            {blockIndex + 1}\n                        </span >\n                    )}\n                    <h2 className=\"my-class\">\n                        <a href={link}> {title}</a>\n                    </h2>\n                </div>\n            </div>\n        )\n    }\n\n\n    if (true !== isSelected) {\n        return <div {...blockProps} style={{ padding: '5px' }}>{title}</div>\n    }\n\n    if ( undefined === postId ) {\n        return <Placeholder setAttributes={setAttributes} blockProps={blockProps}/>;\n    }\n\n    return (\n        <div {...blockProps} >\n            {postId && (\n                <article className=\"item story stacked\" style={{ border: \"2px solid gray\" }}>\n                    <div className=\"content\">\n                        <div className=\"header small light\">\n                            <a href={link}>\n                                <RichText\n                                    tagName=\"p\"\n                                    value={title}\n                                    onChange={t => setAttributes({ title: t })}\n                                    placeholder=\"How we did this\"\n                                    keepPlaceholderOnFocus\n                                    style={{\n                                        fontFamily: 'Abril',\n                                        fontWeight: '400',\n                                        fontSize: '18px',\n                                        color: '#2a2a2a',\n                                        lineHeight: '128%',\n                                    }}\n                                />\n                            </a>\n                        </div>\n                    </div>\n                </article>\n            )}\n\n        </div >\n    );\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\nconst save = () => {\n    return (\n        <Fragment/>\n    )\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { registerBlockType } from '@wordpress/blocks';\nimport { trendingUp } from '@wordpress/icons';\n\n\n/**\n * Internal Dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n    icon: trendingUp,\n    edit,\n    save,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n"],"sourceRoot":""}