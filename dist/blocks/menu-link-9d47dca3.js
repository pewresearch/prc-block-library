/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2021 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[4],{0:function(e,t){e.exports=wp.element},1:function(e,t){e.exports=wp.i18n},140:function(e,t,n){"use strict";n.r(t),n.d(t,"settings",(function(){return T}));var r=n(19),o=n(4),c=n(1),a=n(149),i=n(150),l=n(151),s=n(152),u=n(153),p=n(2),b=n(7),f=n(54),d=n(55),g=n.n(d),m=n(78),k=n(16),O=n(10),j=n.n(O),y=n(6),_=n(23),v=n(5),h=n(3),w=n(63),E=n(56),C=n(0),R=n(156),B=n(148);function L(e){switch(e){case"post":case"page":return{type:"post",subtype:e};case"topic":return{type:"term",subtype:"topic"};case"formats":return{type:"term",subtype:"formats"};case"programs":return{type:"term",subtype:"programs"};default:return{}}}var x=Object(_.compose)([Object(v.withSelect)((function(e,t){var n,r=e("core/block-editor"),o=(r.getBlockAttributes,r.getClientIdsOfDescendants),c=r.hasSelectedInnerBlock,a=(r.getBlockParentsByBlockName,r.getSelectedBlockClientId),i=(r.getSettings,t.clientId),l=!!o([i]).length;return{isImmediateParentOfSelectedBlock:c(i,!1),hasDescendants:l,selectedBlockHasDescendants:!!(null===(n=o([a()]))||void 0===n?void 0:n.length),userCanCreatePages:e("core").canUser("create","pages"),userCanCreatePosts:e("core").canUser("create","posts")}})),Object(v.withDispatch)((function(e,t,n){return{insertLinkBlock:function(){var r=t.clientId,o=e("core/block-editor").insertBlock,c=(0,n.select("core/block-editor").getClientIdsOfDescendants)([r]),a=c.length?c.length:0;o(Object(b.createBlock)("prc-block/menu-link"),a,r)}}}))])((function(e){var t=e.attributes,n=e.context,r=e.isSelected,a=(e.isImmediateParentOfSelectedBlock,e.setAttributes),i=(e.insertLinkBlock,e.userCanCreatePages),l=void 0!==i&&i,s=e.userCanCreatePosts,u=void 0!==s&&s,f=e.insertBlocksAfter,d=e.mergeBlocks,O=e.onReplace,_=t.label,x=t.type,P=t.opensInNewTab,I=t.url,S=t.description,T=t.rel,D=t.title,A={url:I,opensInNewTab:P},N=Object(v.useDispatch)("core").saveEntityRecord,U=Object(C.useState)(!1),F=Object(k.a)(U,2),J=F[0],G=F[1],H=Object(C.useRef)(null),V=function(e){var t=Object(C.useState)(!1),n=Object(k.a)(t,2),r=n[0],o=n[1];return Object(C.useEffect)((function(){var t=e.current.ownerDocument;function n(e){c(e)}function r(){o(!1)}function c(t){e.current.contains(t.target)?o(!0):o(!1)}return t.addEventListener("dragstart",n),t.addEventListener("dragend",r),t.addEventListener("dragenter",c),function(){t.removeEventListener("dragstart",n),t.removeEventListener("dragend",r),t.removeEventListener("dragenter",c)}}),[]),r}(H),z=Object(c.__)("Add linkâ€¦"),K=Object(C.useRef)(),M=Object(v.useSelect)((function(e){return e("core/block-editor").isDraggingBlocks()}),[]);Object(C.useEffect)((function(){I||G(!0)}),[]),Object(C.useEffect)((function(){r||G(!1)}),[r]),Object(C.useEffect)((function(){J&&I&&(Object(E.isURL)(Object(E.prependHTTP)(_))&&/^.+\.[a-z]+/.test(_)?function(){K.current.focus();var e=K.current.ownerDocument,t=e.defaultView.getSelection(),n=e.createRange();n.selectNodeContents(K.current),t.removeAllRanges(),t.addRange(n)}():Object(R.a)(K.current,!0))}),[I]);var Q=!1;function q(){return(q=Object(m.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x||"page",e.next=3,N("postType",n,{title:t,status:"publish"});case 3:return r=e.sent,e.abrupt("return",{id:r.id,postType:n,title:r.title.rendered,url:r.link});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x&&"page"!==x?"post"===x&&(Q=u):Q=l;var W=Object(p.useBlockProps)({ref:H,className:j()("item",{"is-editing":r&&!M,"is-selected":r&&!M,"is-dragging-within":V,"has-link":!!I})});return React.createElement(C.Fragment,null,React.createElement(p.BlockControls,null,React.createElement(h.ToolbarGroup,null,React.createElement(h.KeyboardShortcuts,{bindGlobal:!0,shortcuts:Object(o.a)({},w.b.primary("k"),(function(){return G(!0)}))}),React.createElement(h.ToolbarButton,{name:"link",icon:B.a,title:Object(c.__)("Link"),shortcut:w.a.primary("k"),onClick:function(){return G(!0)}}))),React.createElement(p.InspectorControls,null,React.createElement(h.PanelBody,{title:Object(c.__)("Link settings")},React.createElement(h.TextareaControl,{value:S||"",onChange:function(e){a({description:e})},label:Object(c.__)("Description"),help:Object(c.__)("The description will be displayed in the menu if the current theme supports it.")}),React.createElement(h.TextControl,{value:D||"",onChange:function(e){a({title:e})},label:Object(c.__)("Link title"),autoComplete:"off"}),React.createElement(h.TextControl,{value:T||"",onChange:function(e){a({rel:e})},label:Object(c.__)("Link rel"),autoComplete:"off"}))),React.createElement("div",W,React.createElement(p.RichText,{ref:K,identifier:"label",className:"is-style-text"===n["prc-block/menu"]?"ui basic button":"",value:_,onChange:function(e){return a({label:e})},onMerge:d,onReplace:O,__unstableOnSplitAtEnd:function(){return f(Object(b.createBlock)("prc-block/menu-link"))},"aria-label":Object(c.__)("Navigation link text"),placeholder:z,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),J&&React.createElement(h.Popover,{position:"bottom center",onClose:function(){return G(!1)}},React.createElement(p.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:A,showInitialSuggestions:!0,withCreateSuggestion:Q,createSuggestion:function(e){return q.apply(this,arguments)},createSuggestionButtonText:function(e){var t;return t="post"===x?Object(c.__)("Create post: <mark>%s</mark>"):Object(c.__)("Create page: <mark>%s</mark>"),Object(C.createInterpolateElement)(Object(c.sprintf)(t,e),{mark:React.createElement("mark",null)})},noDirectEntry:!!x,noURLSuggestion:!!x,suggestionsQuery:L(x),onChange:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.title,o=void 0===r?"":r,c=n.url,i=void 0===c?"":c,l=n.opensInNewTab,s=n.id;return a({url:encodeURI(i),label:(e=o.replace(/http(s?):\/\//gi,""),t=i.replace(/http(s?):\/\//gi,""),""!==o&&e!==t&&_!==o?Object(y.escape)(o):_||Object(y.escape)(t)),opensInNewTab:l,id:s})}}))))}));function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=f.name,T={title:Object(c.__)("Link"),icon:a.a,description:Object(c.__)("Add a page, link, or another item to your navigation."),variations:[{name:"link",isDefault:!0,title:Object(c.__)("Link"),description:Object(c.__)("A link to a URL."),attributes:{}},{name:"post",icon:i.a,title:Object(c.__)("Post Link"),description:Object(c.__)("A link to a post."),attributes:{type:"post"}},{name:"page",icon:l.a,title:Object(c.__)("Page Link"),description:Object(c.__)("A link to a page."),attributes:{type:"page"}},{name:"topic",icon:s.a,title:Object(c.__)("Topic Page Link"),description:Object(c.__)("A link to a topic."),attributes:{type:"topic"}},{name:"formats",icon:u.a,title:Object(c.__)("Format Link"),description:Object(c.__)("A link to a format."),attributes:{type:"formats"}},{name:"programs",icon:u.a,title:Object(c.__)("Program Link"),description:Object(c.__)("A link to a program."),attributes:{type:"programs"}}],__experimentalLabel:function(e){return e.label},merge:function(e,t){var n=t.label,r=void 0===n?"":n;return I(I({},e),{},{label:e.label+r})},edit:x,save:function(){return React.createElement(p.InnerBlocks.Content,null)},deprecated:[{isEligible:function(e){return e.nofollow},attributes:{label:{type:"string"},type:{type:"string"},nofollow:{type:"boolean"},description:{type:"string"},id:{type:"number"},opensInNewTab:{type:"boolean",default:!1},url:{type:"string"}},migrate:function(e){return I({rel:e.nofollow?"nofollow":""},Object(r.a)(e,["nofollow"]))},save:function(){return React.createElement(p.InnerBlocks.Content,null)}}]};Object(b.registerBlockType)(S,I(I({},f),T))},2:function(e,t){e.exports=wp.blockEditor},23:function(e,t){e.exports=wp.compose},3:function(e,t){e.exports=wp.components},5:function(e,t){e.exports=wp.data},54:function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/menu-link","category":"layout","parent":["prc-block/menu"],"attributes":{"label":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"rel":{"type":"string"},"id":{"type":"number"},"opensInNewTab":{"type":"boolean","default":false},"url":{"type":"string"},"title":{"type":"string"}},"usesContext":["prc-block/menu"],"supports":{"reusable":false,"html":false}}')},55:function(e,t){e.exports=regeneratorRuntime},56:function(e,t){e.exports=wp.url},6:function(e,t){e.exports=lodash},7:function(e,t){e.exports=wp.blocks},98:function(e,t,n){n(13),e.exports=n(140)}},[[98,0,10]]]);
//# sourceMappingURL=menu-link-9d47dca3.js.map