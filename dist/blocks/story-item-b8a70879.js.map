{"version":3,"sources":["webpack:///external \"React\"","webpack:///external [\"wp\",\"data\"]","webpack:///./src/story-item/helpers.js","webpack:///external \"moment\"","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external \"ReactDOM\"","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/hooks/use-debounce.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/hooks/use-fetch.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-search/search-item.jsx","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-search/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-picker/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/content-placeholder/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/list-store/reducer.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/link-toolbar-button/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/caret-heading-link/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/block-inserter-button/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/heading-level-toolbar/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/components/media-dropzone/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/functions/index.js","webpack:////Users/benwormald/Projects/pewresearch-org/private/_shared/mailchimp/index.js","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"regeneratorRuntime\"","webpack:///external \"lodash\"","webpack:///external [\"wp\",\"keycodes\"]","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///./src/story-item/deprecated.js","webpack:///./src/story-item/edit/controls/inspector.jsx","webpack:///./src/story-item/edit/controls/placeholder.jsx","webpack:///./src/story-item/edit/controls/icons.jsx","webpack:///./src/story-item/edit/controls/url-control.jsx","webpack:///./src/story-item/edit/controls/toolbar.jsx","webpack:///./src/story-item/edit/controls/index.js","webpack:///./src/story-item/edit/image.jsx","webpack:///./src/story-item/edit/excerpt.jsx","webpack:///./src/story-item/edit/extra.jsx","webpack:///./src/story-item/edit/header.jsx","webpack:///./src/story-item/edit/meta.jsx","webpack:///./src/story-item/edit/preview.jsx","webpack:///./src/story-item/edit/index.js","webpack:///./src/story-item/save.js","webpack:///./src/story-item/variations.js","webpack:///./src/story-item/index.js"],"names":["module","exports","window","setArtBySize","imageSize","postId","setAttributes","apiFetch","path","then","data","undefined","image","rawUrl","isChartArt","chartArt","setPostAttributes","options","isRefresh","method","post","console","log","attrs","getAttributesFromPost","opts","d","Date","date","moment","format","storyItem","title","hasOwnProperty","rendered","excerpt","url","link","label","id","extra","art","catch","err","error","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","ButtonStyled","styled","Button","SearchItem","suggestion","onClick","searchTerm","isSelected","contentTypes","showType","type","length","text","decodeEntities","className","style","borderRadius","boxSizing","paddingRight","highlight","aria-hidden","filterURLForDisplay","safeDecodeURI","NAMESPACE","searchCache","ContentSearch","onSelectItem","placeholder","mode","excludeItems","perPage","searchInput","setSearchInput","searchString","searchStringIsUrl","useMemo","match","searchResults","setSearchResults","isLoading","setIsLoading","selectedItem","setSelectedItem","abortControllerRef","useRef","mounted","handleSearchResults","results","searchQuery","current","toSet","filter","result","keep","every","item","getPostByUrl","Error","Promise","resolve","reject","hasSearchString","hasSearchResults","keyword","isUrl","abort","trim","AbortController","join","ID","post_title","post_type","permalink","subtype","code","signal","handleSearchStringChange","listCSS","css","onNavigate","orientation","display","flexGrow","onChange","autoComplete","position","right","marginTop","marginBottom","marginLeft","paddingLeft","listStyle","color","cursor","__","map","index","key","handleItemSelection","DragHandle","sortableHandle","marginRight","flexShrink","width","height","xmlns","viewBox","role","focusable","Wrapper","PickedItem","isOrderable","handleItemDelete","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","newItem","name","uuid","border","paddingTop","paddingBottom","aria-label","SortableList","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","itemKey","sortIndex","totalItems","StyleWrapper","ContentPicker","onPickChange","ids","maxContentItems","singlePickedLabel","multiPickedLabel","uniqueContentItems","excludeCurrentPost","PickedItemChild","searchStyle","content","setContent","currentPostId","getCurrentPostId","push","previousContent","uuidv4","Boolean","useDragHandle","deletedItem","onSortEnd","oldIndex","newIndex","newContent","arrayMove","ContentPlaceholder","blockProps","onSkip","loadingComponent","children","isColumnLayout","textAlign","pickedContent","isLink","LinkToolbarButton","query","isLinkOpen","setIsLinkOpen","aria-expanded","aria-haspopup","icon","showTooltip","onClose","showInitialSuggestions","suggestionsQuery","p","settings","CaretHeadingLink","heading","headingSize","disableIcon","tagName","h","formattingControls","keepPlaceholderOnFocus","Icon","size","BlockInserterButton","blockName","clientId","attributes","tooltipPosition","currentBlock","getBlock","innerBlocks","nextIndex","newBlock","createBlock","dispatch","insertBlock","HeadingLevelIcon","level","isPressed","levelToPath","1","2","3","4","5","6","POPOVER_PROPS","isAlternate","HeadingLevelToolbar","selectedLevel","levels","popoverProps","renderToggle","onToggle","isOpen","onKeyDown","event","keyCode","DOWN","preventDefault","stopPropagation","renderContent","isCollapsed","controls","targetLevel","isActive","sprintf","MediaDropZone","attachmentId","onUpdate","attachment","warn","onClear","mediaType","mediaSize","setId","isUploading","setIsUploading","m","getMedia","media","src","mediaSourceUrl","mediaWidth","mediaHeight","has","media_details","sizes","source_url","onMediaUpdate","onDropImage","filesList","uploadMedia","allowedTypes","onFileChange","onError","message","displayImage","fallback","onSelect","render","open","background","alt","variant","isSmall","isBusy","onFilesDrop","getTerms","taxonomy","terms","slug","replace","toLowerCase","parent","getTermsAsOptions","termValue","sortByLabel","labelOptions","Object","keys","forEach","termObj","sort","a","b","getTermsAsTree","treeData","convertedData","i","e","c","f","cT","mailChimpInterests","regeneratorRuntime","deprecated","postID","multiline","enableExcerpt","default","enableExcerptBelow","enableAltTaxonomy","migrate","enableMeta","metaTaxonomy","save","props","Content","Inspector","context","rootClientId","isRefreshing","refresh","imageSlot","enableHeader","enableExtra","enableBreakingNews","enableEmphasis","disableMobileStyles","help","checked","prcBreakingNews","alert","newMetaTaxonomy","isInteger","isSecondary","isDestructive","Placeholder","loadingStub","setLoadingStub","todaysDate","toLocaleDateString","month","day","year","svgPath","ImageSlotIcon","selected","arrowRight","arrowLeft","arrowUp","arrowDown","close","more","ImageSizeIcon","currentlyActive","A1","A2","A3","A4","XL","URLControl","isModalOpen","setIsModalOpen","inputValue","setInputValue","setPost","onModalClose","onRequestClose","newPostId","minWidth","padding","alignItems","Toolbar","headerSize","columnWidth","columnIsEqualWidth","handleImageSizeChange","newSize","MemoizedHeadingLevelIcon","useCallback","MemoizedImageSlotIcon","MemoizedImageSizeIcon","isDisabled","Controls","ALLOWED_MEDIA_TYPES","small","hidpi","smallHidpi","ImageDisplay","img","getImgURL","args","resize","addQueryArgs","getImgSrcSet","threshold","srcSet","sources","href","Edit","Img","isXL","isA1","isA2","isA3","isA4","slot","classNames","ui","bordered","Excerpt","sansSerif","enabled","classes","Extra","breakingNews","Header","altHeaderWeight","large","medium","light","t","allowedFormats","Meta","termOptions","cleanedLabel","cleanForSlug","l","IMAGE_SIZES","Preview","logicalClasses","aligned","blockPropsArgs","useBlockProps","headerClasses","imageClasses","excerptClasses","formats","edit","isPreview","inLoop","setTermOptions","payload","handlePostIdCaseChange","Number","getBlockRootClientId","enableAltHeaderWeight","variations","isDefault","metadata","example","registerBlockType"],"mappings":"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","file":"blocks/story-item-b8a70879.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * External Dependencies\n */\nimport * as moment from 'moment';\n\n/**\n * WordPress Dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst setArtBySize = (imageSize, postId, setAttributes) => {\n\tif (0 !== postId && false !== setAttributes) {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/get-art/?postId=${postId}`,\n\t\t}).then((data) => {\n\t\t\tif (false !== data) {\n\t\t\t\tif (undefined !== data[imageSize] && false !== setAttributes) {\n\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\timage: data[imageSize].rawUrl,\n\t\t\t\t\t\tisChartArt: data[imageSize].chartArt,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n\tconst { post, imageSize, isRefresh = false } = opts;\n\tconsole.log(getAttributesFromPost, post);\n\n\tconst d = new Date(post.date);\n\tconst date = moment(d).format('MMM D, YYYY');\n\n\tconst storyItem = {\n\t\ttitle: post.title.hasOwnProperty('rendered')\n\t\t\t? post.title.rendered\n\t\t\t: post.title,\n\t\t// @TODO change back to excerpt everywhere, write a deprecation transition for that and excerptBelow?\n\t\texcerpt: post.excerpt.hasOwnProperty('rendered')\n\t\t\t? post.excerpt.rendered\n\t\t\t: post.excerpt,\n\t\turl: post.link, // @TODO where is this `link` coming from, why is it not url or permalink.\n\t\tlabel: post.hasOwnProperty('label') ? post.label : 'Report',\n\t\tdate,\n\t\tpostId: post.id,\n\t};\n\n\tif (true !== isRefresh) {\n\t\tstoryItem.extra = '';\n\t}\n\n\tif (post.art) {\n\t\tconst { art } = post;\n\t\tstoryItem.image = art[imageSize].rawUrl;\n\t\tstoryItem.isChartArt = art[imageSize].chartArt;\n\t}\n\n\tconsole.log('getAttributesFromPost', post, storyItem);\n\n\treturn storyItem;\n};\n\n/**\n * Set attributes for a story item from a stub by post id OR by url.\n *\n * @param {*} postId\n * @param {*} imageSize\n * @param {*} isRefresh\n * @param {*} setAttributes\n * @returns\n */\nconst setPostAttributes = (options) => {\n\tconst {\n\t\tsetAttributes,\n\t\tpostId = false,\n\t\timageSize = 'A1',\n\t\tisRefresh = false,\n\t} = options;\n\n\tif (false === postId || undefined === setAttributes) {\n\t\treturn;\n\t}\n\n\tapiFetch({\n\t\tpath: `/wp/v2/stub/${postId}`,\n\t\tmethod: 'GET',\n\t})\n\t\t.then((post) => {\n\t\t\tconsole.log('setPostAttributes -> by id:', postId, post);\n\t\t\tif (false !== post) {\n\t\t\t\tconst attrs = getAttributesFromPost({\n\t\t\t\t\tpost,\n\t\t\t\t\timageSize,\n\t\t\t\t\tisRefresh,\n\t\t\t\t});\n\t\t\t\tsetAttributes(attrs);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error(err));\n};\n\nexport { setArtBySize, setPostAttributes };\n","module.exports = moment;","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","/**\n * WordPress Dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Watches an inputValue and returns a debounced version of it after set delay.\n * Usage: const debouncedValue = useDebounce('a string being typed by a user...', 500);\n * @param {*} inputValue\n * @param {*} delay\n * @returns value after delay\n */\nconst useDebounce = (value, delay) => {\n\t// State and setters for debounced value\n\tconst [debouncedValue, setDebouncedValue] = useState(value);\n\tuseEffect(\n\t\t() => {\n\t\t\t// Update debounced value after delay\n\t\t\tconst handler = setTimeout(() => {\n\t\t\t\tsetDebouncedValue(value);\n\t\t\t}, delay);\n\t\t\t// Cancel the timeout if value changes (also on delay change or unmount)\n\t\t\t// This is how we prevent debounced value from updating if value is changed ...\n\t\t\t// .. within the delay period. Timeout gets cleared and restarted.\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(handler);\n\t\t\t};\n\t\t},\n\t\t[value, delay], // Only re-call effect if value or delay changes\n\t);\n\treturn debouncedValue;\n}\n\nexport default useDebounce;\n","import { useEffect, useRef, useReducer } from '@wordpress/element';\n\n/**\n * A react hook to fetch data from a url and store status, errors, and date in state.\n * Usage: const { status, data, error } = useFetch(url);\n * Adapted from https://www.smashingmagazine.com/2020/07/custom-react-hook-fetch-cache-data/\n * Example application: https://codesandbox.io/s/usefetch-demo-clt9o\n * @param {*} url\n * @returns {object} status, data, and error\n */\nconst useFetch = (url) => {\n\tconst cache = useRef({});\n\n\t// initial state, no preloaded data\n\tconst initialState = {\n\t\tstatus: 'idle',\n\t\terror: null,\n\t\tdata: [],\n\t};\n\n\t// reducer function to update state depending on current status of fetch\n\tconst reducer = (state, action) => {\n\t\tswitch (action.type) {\n\t\t\tcase 'FETCHING':\n\t\t\t\treturn { ...initialState, status: 'fetching' };\n\t\t\tcase 'FETCHED':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'fetched',\n\t\t\t\t\tdata: action.payload,\n\t\t\t\t};\n\t\t\tcase 'FETCH_ERROR':\n\t\t\t\treturn {\n\t\t\t\t\t...initialState,\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\terror: action.payload,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t};\n\t// useReducer instead of useState to set multiple values simultaneously and prevent unnecessary rerenders.\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\tuseEffect(() => {\n\t\tlet cancelRequest = false;\n\t\tif (!url) return undefined;\n\n\t\tconst fetchData = async () => {\n\t\t\tdispatch({ type: 'FETCHING' });\n\t\t\tif (cache.current[url]) {\n\t\t\t\tconst data = cache.current[url];\n\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url);\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tcache.current[url] = data;\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({ type: 'FETCHED', payload: data });\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!cancelRequest) {\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: 'FETCH_ERROR',\n\t\t\t\t\t\t\tpayload: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\t// cleanup switch to prevent data leak on unmount\n\t\treturn function cleanup() {\n\t\t\tcancelRequest = true;\n\t\t};\n\t}, [url]);\n\n\treturn state;\n};\n\nexport default useFetch;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nfunction SearchItem({\n\tsuggestion,\n\tonClick,\n\tsearchTerm,\n\tisSelected,\n\tid,\n\tcontentTypes,\n}) {\n\tconst showType = suggestion.type && 1 < contentTypes.length;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight\n\t\t\t\t\t\t\ttext={decodeEntities(suggestion.title)}\n\t\t\t\t\t\t\thighlight={searchTerm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{'post_tag' === suggestion.type ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n}\n\nexport default SearchItem;\n","/**\n * External Dependencies\n */\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/react';\n\n/**\n * WordPress Dependencies\n */\nimport {\n\tSearchControl,\n\tTextControl,\n\tSpinner,\n\tNavigableMenu,\n\tKeyboardShortcuts,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment, useState, useRef, useMemo, useEffect } from '@wordpress/element'; // eslint-disable-line\nimport { __ } from '@wordpress/i18n';\nimport { useDebounce } from '../../hooks';\nimport { cleanForSlug } from '@wordpress/url';\n\n/**\n * Internal Dependencies\n */\nimport SearchItem from './search-item';\n\nconst NAMESPACE = 'prc-content-search';\n\n// Establish a cache for search results by search query.\nconst searchCache = {};\n\nfunction ContentSearch({\n\tonSelectItem,\n\tplaceholder,\n\tlabel,\n\tstyle = 'search',\n\tcontentTypes,\n\tmode,\n\texcludeItems,\n\tperPage,\n}) {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst searchString = useDebounce(searchInput, 500);\n\tconst searchStringIsUrl = useMemo(() => {\n\t\tif (searchString.match(/^(http|https):\\/\\//)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [searchString]);\n\n\tconst [searchResults, setSearchResults] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [selectedItem, setSelectedItem] = useState(null);\n\n\tconst abortControllerRef = useRef();\n\tconst mounted = useRef(true);\n\n\tconst handleSearchResults = (results, searchQuery = false) => {\n\t\tabortControllerRef.current = null;\n\n\t\tif (false !== searchQuery) {\n\t\t\tsearchCache[searchQuery] = results;\n\t\t}\n\n\t\tconst toSet = results.filter((result) => {\n\t\t\tlet keep = true;\n\n\t\t\tif (excludeItems.length) {\n\t\t\t\tkeep = excludeItems.every((item) => item.id !== result.id);\n\t\t\t}\n\n\t\t\treturn keep;\n\t\t});\n\n\t\tsetSearchResults(toSet);\n\n\t\tsetIsLoading(false);\n\t};\n\n\t/**\n\t * handleSelection\n\t *\n\t * update the selected item in state to either the selected item or null if the\n\t * selected item does not have a valid id\n\t *\n\t * @param {*} item\n\t */\n\tconst handleOnNavigate = (item) => {\n\t\tif (0 === item) {\n\t\t\tsetSelectedItem(null);\n\t\t}\n\n\t\tsetSelectedItem(item);\n\t};\n\n\tconst getPostByUrl = (url) => {\n\t\tif (undefined === url) {\n\t\t\treturn new Error('url is undefined');\n\t\t}\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/utils/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('getPostByUrl', url, post);\n\t\t\t\t\tif ('object' !== typeof post) {\n\t\t\t\t\t\treject(new Error('post is not an object'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(post);\n\t\t\t\t})\n\t\t\t\t.catch((err) => reject(err));\n\t\t});\n\t};\n\n\t/**\n\t * handleItemSelection\n\t *\n\t * reset the search input & item container\n\t * trigger the onSelectItem callback passed in via props\n\t *\n\t * @param {*} item\n\t */\n\tconst handleItemSelection = (item) => {\n\t\tsetSearchResults([]);\n\t\tsetSearchInput('');\n\t\tonSelectItem(item);\n\t};\n\n\tconst hasSearchString = !!searchString.length;\n\tconst hasSearchResults = !!searchResults.length;\n\n\t/**\n\t * handleSearchStringChange\n\t *\n\t * Using the keyword and the list of tags that are linked to the parent block\n\t * search for posts/terms that match and return them to the autocomplete component.\n\t *\n\t * @param {string} keyword search query string\n\t */\n\tconst handleSearchStringChange = (keyword, isUrl = false) => {\n\t\tif (abortControllerRef.current) {\n\t\t\tabortControllerRef.current.abort();\n\t\t}\n\n\t\t// If the keyword is empty, reset the search results and return.\n\t\tif ('' === keyword.trim()) {\n\t\t\tconsole.log('Resetting search string...');\n\t\t\thandleSearchResults([]);\n\t\t\treturn;\n\t\t}\n\n\t\tabortControllerRef.current = new AbortController();\n\n\t\tsetIsLoading(true);\n\n\t\tconst searchQuery = `wp/v2/search/?search=${keyword}&subtype=${contentTypes.join(\n\t\t\t',',\n\t\t)}&type=${mode}&_embed&per_page=${perPage}`;\n\n\t\t// Check search cache for the searchQuery and if present then return the cached results.\n\t\tif (searchCache[searchQuery]) {\n\t\t\thandleSearchResults(searchCache[searchQuery], searchQuery);\n\t\t} else if (isUrl) {\n\t\t\tconsole.log('isUrl', keyword);\n\t\t\tgetPostByUrl(keyword)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif (mounted.current) {\n\t\t\t\t\t\tconsole.log('parse getPostByUrl', post);\n\n\t\t\t\t\t\tconst { ID, post_title, post_type, permalink, label } = post;\n\n\t\t\t\t\t\thandleSearchResults(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: ID,\n\t\t\t\t\t\t\t\t\tsubtype: post_type,\n\t\t\t\t\t\t\t\t\ttitle: post_title,\n\t\t\t\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\t\t\t\turl: permalink,\n\t\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error, code) => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Hey this is a url error, we didnt find a matching post... now what?',\n\t\t\t\t\t\tkeyword,\n\t\t\t\t\t);\n\t\t\t\t\tconsole.error(error, code);\n\t\t\t\t\t// Stop spinning.\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t} else {\n\t\t\tapiFetch({\n\t\t\t\tpath: searchQuery,\n\t\t\t\tsignal: abortControllerRef.current.signal,\n\t\t\t})\n\t\t\t\t.then((results) => {\n\t\t\t\t\tif (false === mounted.current) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Not a url, searching.... here are the results:',\n\t\t\t\t\t\tresults,\n\t\t\t\t\t);\n\n\t\t\t\t\thandleSearchResults(results, searchQuery);\n\t\t\t\t})\n\t\t\t\t.catch((error, code) => {\n\t\t\t\t\t// fetch_error means the request was aborted\n\t\t\t\t\tif ('fetch_error' !== error.code) {\n\t\t\t\t\t\thandleSearchResults([]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\tmounted.current = false;\n\t\t},\n\t\t[],\n\t);\n\n\tuseEffect(() => {\n\t\tif ('' !== searchString) {\n\t\t\thandleSearchStringChange(searchString, searchStringIsUrl);\n\t\t}\n\t}, [searchString, searchStringIsUrl]);\n\n\tconst listCSS = css`\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t`;\n\n\treturn (\n\t\t<NavigableMenu onNavigate={handleOnNavigate} orientation=\"vertical\">\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{'minimal' === style && (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{'search' === style && (\n\t\t\t\t\t\t<SearchControl\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword) => setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tright: 'minimal' === style ? '8px' : '50px',\n\t\t\t\t\t\t\tmarginTop: 'minimal' === style ? '27px' : '10px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{hasSearchString ? (\n\t\t\t\t<ul\n\t\t\t\t\tclassName={`${NAMESPACE}-list`}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: '0',\n\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\tmarginLeft: '0',\n\t\t\t\t\t\tpaddingLeft: '0',\n\t\t\t\t\t\tlistStyle: 'none',\n\t\t\t\t\t}}\n\t\t\t\t\tcss={listCSS}\n\t\t\t\t>\n\t\t\t\t\t{!isLoading && !hasSearchResults && false === searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\tpaddingLeft: '3px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Nothing found.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading && !hasSearchResults && searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\tpaddingLeft: '3px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Press enter to change url.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\tsearchResults.map((item, index) => {\n\t\t\t\t\t\t\tconsole.log('searchResults map...', item);\n\t\t\t\t\t\t\tif (undefined === item.title) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemSelection(item)}\n\t\t\t\t\t\t\t\t\t\tsearchTerm={searchString}\n\t\t\t\t\t\t\t\t\t\tsuggestion={item}\n\t\t\t\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\t\t\t\tisSelected={selectedItem === index + 1}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : null}\n\t\t</NavigableMenu>\n\t);\n}\n\n// eslint-disable-next-line import/prefer-default-export\nexport { ContentSearch };\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(\n\t({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\t\tconst ItemComponent =\n\t\t\tfalse !== ChildComponent\n\t\t\t\t? isOrderable\n\t\t\t\t\t? SortableElement(ChildComponent)\n\t\t\t\t\t: ChildComponent\n\t\t\t\t: isOrderable\n\t\t\t\t? SortableElement(PickedItem)\n\t\t\t\t: PickedItem;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{items.map((item, index) => {\n\t\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ItemComponent\n\t\t\t\t\t\t\tisOrderable={\n\t\t\t\t\t\t\t\tisOrderable && 1 < items.length ? isOrderable : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\t\t\tsortIndex={index}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nexport default SortableList;\n","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tPlaceholder as WPComPlaceholder,\n\tSpinner,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { ContentPicker } from '../content-picker';\n\nfunction ContentPlaceholder({\n\tblockProps,\n\tonChange,\n\tonSkip,\n\tmode = 'post',\n\tcontentTypes = ['stub'],\n\tlabel = __('Search for a post', 'prc-block-components'),\n\tplaceholder = __(\n\t\t'Search for a post or paste in a url...',\n\t\t'prc-block-components',\n\t),\n\tvalue = [],\n\tloadingComponent = false,\n\tchildren,\n}) {\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t<WPComPlaceholder label={`${label}:`} isColumnLayout>\n\t\t\t\t{false !== loadingComponent && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t<p className=\"sans-serif\">Loading object...</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{false === loadingComponent && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t\t<ContentPicker\n\t\t\t\t\t\t\tonPickChange={(pickedContent) => {\n\t\t\t\t\t\t\t\tconsole.log('Step1:', pickedContent);\n\t\t\t\t\t\t\t\tonChange(pickedContent);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\tlabel={`${label} or enter a url:`}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLink\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tonSkip();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttext={__('Skip')}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tpaddingLeft: '9px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t</WPComPlaceholder>\n\t\t</div>\n\t);\n}\n\n// eslint-disable-next-line import/prefer-default-export\nexport { ContentPlaceholder };\n","const DEFAULT_STATE = [];\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n\t// Cloned is used in reorder, setItem, and setItemProp:\n\tconst cloned = [...state];\n\t// eslint-disable-next-line default-case\n\tswitch (action.type) {\n\t\tcase 'SEED':\n\t\t\treturn [...action.items];\n\t\tcase 'APPEND':\n\t\t\treturn [...state, ...action.items];\n\t\tcase 'PREPEND':\n\t\t\treturn [...action.items, ...state];\n\t\tcase 'INSERT':\n\t\t\treturn [\n\t\t\t\t...state.slice(0, action.index),\n\t\t\t\t...action.items,\n\t\t\t\t...state.slice(action.index),\n\t\t\t];\n\t\tcase 'APPLY':\n\t\t\treturn state.map((item, index) => action.fn(item, index));\n\t\tcase 'REMOVE':\n\t\t\treturn state.filter((_, index) => !action.indexes.includes(index));\n\t\tcase 'REORDER':\n\t\t\t// eslint-disable-next-line no-case-declarations\n\t\t\tconst item = state[action.from];\n\n\t\t\tcloned.splice(action.from, 1);\n\t\t\tcloned.splice(action.to, 0, item);\n\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM':\n\t\t\tcloned[action.index] = action.item;\n\t\t\treturn cloned;\n\t\tcase 'SET_ITEM_PROP':\n\t\t\tcloned[action.index] = {\n\t\t\t\t...cloned[action.index],\n\t\t\t\t[action.prop]: action.value,\n\t\t\t};\n\t\t\treturn cloned;\n\t}\n\n\treturn state;\n};\n\nexport default reducer;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\nimport { Fragment, useState } from '@wordpress/element';\nimport { ToolbarButton, Popover } from '@wordpress/components';\n\n/**\n * Link control in a toolbar button that defaults to searching for topic terms\n */\nfunction LinkToolbarButton({\n\turl,\n\tonChange,\n\tquery = { type: 'term', subtype: 'topic' },\n}) {\n\tconst [isLinkOpen, setIsLinkOpen] = useState(false);\n\treturn (\n\t\t<Fragment>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isLinkOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__('Set Link')}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsLinkOpen(!isLinkOpen)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isLinkOpen && (\n\t\t\t\t<Popover position=\"bottom center\" onClose={() => setIsLinkOpen(false)}>\n\t\t\t\t\t<LinkControl\n\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\n\t\t\t\t\t\tvalue={{ url }}\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t\tsuggestionsQuery={query}\n\t\t\t\t\t\tonChange={(p) => onChange(p)}\n\t\t\t\t\t\tsettings={[]}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default LinkToolbarButton;\n","/**\n * External Dependencies\n */\nimport { Icon } from 'semantic-ui-react';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { Flex, FlexItem, FlexBlock, ToolbarGroup } from '@wordpress/components';\nimport { BlockControls, RichText } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport LinkToolbarButton from '../link-toolbar-button';\n\nconst CaretHeadingLink = ({\n\turl,\n\theading,\n\theadingSize = 'h2',\n\tdisableIcon = false,\n\tsetAttributes,\n}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<LinkToolbarButton\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tonChange={p => {\n\t\t\t\t\t\t\tsetAttributes({ url: p.url });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Flex style={{ paddingBottom: '1em' }}>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName={headingSize}\n\t\t\t\t\t\tvalue={heading}\n\t\t\t\t\t\tonChange={h => setAttributes({ heading: h })}\n\t\t\t\t\t\tplaceholder=\"Heading...\"\n\t\t\t\t\t\tformattingControls={[]}\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\tclassName=\"sans-serif\"\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t{true !== disableIcon && (\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"chevron right\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{ marginLeft: '0.5em' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</Fragment>\n\t);\n};\n\nexport default CaretHeadingLink;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { select, dispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\n\nfunction BlockInserterButton({\n\tlabel = '',\n\tblockName,\n\tclientId,\n\tclassName,\n\tattributes = {},\n}) {\n\tconst handleClick = () => {\n\t\tconst currentBlock = select('core/block-editor').getBlock(clientId);\n\t\tconsole.log('debug info...', currentBlock.innerBlocks.length);\n\t\tconst nextIndex =\n\t\t\t0 === currentBlock.innerBlocks.length\n\t\t\t\t? 0\n\t\t\t\t: currentBlock.innerBlocks.length + 1;\n\t\tconst newBlock = createBlock(blockName, attributes);\n\t\tdispatch('core/block-editor').insertBlock(newBlock, nextIndex, clientId);\n\t};\n\treturn (\n\t\t<Button\n\t\t\tlabel={__(label)}\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName=\"block-editor-button-block-appender\"\n\t\t>\n\t\t\t{__(label)}\n\t\t</Button>\n\t);\n}\n\nexport default BlockInserterButton;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n    Dropdown,\n    Toolbar,\n    ToolbarButton,\n    ToolbarGroup,\n    Path,\n    SVG,\n} from '@wordpress/components';\nimport { DOWN } from '@wordpress/keycodes';\n\nconst HeadingLevelIcon = ({ level, isPressed = false }) => {\n    const levelToPath = {\n        1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n        2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n        3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n        4: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z',\n        5: 'M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z',\n        6: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z',\n    };\n    if (!levelToPath.hasOwnProperty(level)) {\n        return null;\n    }\n\n    return (\n        <SVG\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            isPressed={isPressed}\n        >\n            <Path d={levelToPath[level]} />\n        </SVG>\n    );\n};\n\nconst POPOVER_PROPS = {\n    className: 'block-library-heading-level-dropdown',\n    isAlternate: true,\n};\n\nconst HeadingLevelToolbar = ({ selectedLevel, levels = [2, 3], onChange }) => {\n    console.log('HeadingLevelToolbar', selectedLevel);\n    return (\n        <ToolbarGroup>\n            <Dropdown\n                popoverProps={POPOVER_PROPS}\n                renderToggle={({ onToggle, isOpen }) => {\n                    const openOnArrowDown = event => {\n                        if (!isOpen && event.keyCode === DOWN) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            onToggle();\n                        }\n                    };\n\n                    return (\n                        <ToolbarButton\n                            aria-expanded={isOpen}\n                            aria-haspopup=\"true\"\n                            icon={<HeadingLevelIcon level={selectedLevel} />}\n                            label={__('Change heading level')}\n                            onClick={onToggle}\n                            onKeyDown={openOnArrowDown}\n                            showTooltip\n                        />\n                    );\n                }}\n                renderContent={() => (\n                    <Toolbar\n                        className=\"block-library-heading-level-toolbar\"\n                        label={__('Change heading level')}\n                    >\n                        <ToolbarGroup\n                            isCollapsed={false}\n                            controls={levels.map(targetLevel => {\n                                const isActive = targetLevel === selectedLevel;\n                                return {\n                                    icon: (\n                                        <HeadingLevelIcon\n                                            level={targetLevel}\n                                            isPressed={isActive}\n                                        />\n                                    ),\n                                    title: sprintf(\n                                        // translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n                                        __('Heading %d'),\n                                        targetLevel,\n                                    ),\n                                    isActive,\n                                    onClick() {\n                                        onChange(targetLevel);\n                                    },\n                                };\n                            })}\n                        />\n                    </Toolbar>\n                )}\n            />\n        </ToolbarGroup>\n    );\n};\n\nexport default HeadingLevelToolbar;\n","/**\n * WordPress Dependencies\n */\nimport { has } from 'underscore';\nimport { __ } from '@wordpress/i18n';\nimport { Button, DropZone } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst DEFAULT_IMAGE_SIZE = 'full';\n\nfunction MediaDropZone({\n\tattachmentId = false,\n\tonUpdate = (attachment) => {\n\t\tconsole.warn(\n\t\t\t'Media DropZone Attachment, use onUpdate prop when using <MediaDropZone/>: ',\n\t\t\tattachment,\n\t\t);\n\t},\n\tonClear = false,\n\tmediaType = ['image'],\n\tmediaSize = DEFAULT_IMAGE_SIZE,\n\tlabel = __('Set Image'),\n}) {\n\tconst [id, setId] = useState(attachmentId);\n\tconst [isUploading, setIsUploading] = useState(false);\n\n\t/**\n\t * When id (attachmentId) changes update the media and get its src, dimensions, and type.\n\t */\n\tconst { media, src, width, height, type } = useSelect(\n\t\t(select) => {\n\t\t\tconst m = id ? select('core').getMedia(id) : false;\n\t\t\tconsole.log('m...', id, m);\n\t\t\tif (undefined === m || false === m) {\n\t\t\t\treturn {\n\t\t\t\t\tmedia: false,\n\t\t\t\t\tsrc: false,\n\t\t\t\t\twidth: false,\n\t\t\t\t\theight: false,\n\t\t\t\t\ttype: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet mediaSourceUrl = false;\n\t\t\tlet mediaWidth = false;\n\t\t\tlet mediaHeight = false;\n\n\t\t\tif (has(m, ['media_details', 'sizes', mediaSize])) {\n\t\t\t\t// use mediaSize when available\n\t\t\t\tmediaWidth = m.media_details.sizes[mediaSize].width;\n\t\t\t\tmediaHeight = m.media_details.sizes[mediaSize].height;\n\t\t\t\tmediaSourceUrl = m.media_details.sizes[mediaSize].source_url;\n\t\t\t} else {\n\t\t\t\t// get fallbackMediaSize if mediaSize is not available\n\t\t\t\tconst fallbackMediaSize = DEFAULT_IMAGE_SIZE;\n\t\t\t\tif (has(m, ['media_details', 'sizes', fallbackMediaSize])) {\n\t\t\t\t\t// use fallbackMediaSize when mediaSize is not available\n\t\t\t\t\tmediaWidth = m.media_details.sizes[fallbackMediaSize].width;\n\t\t\t\t\tmediaHeight = m.media_details.sizes[fallbackMediaSize].height;\n\t\t\t\t\tmediaSourceUrl = m.media_details.sizes[fallbackMediaSize].source_url;\n\t\t\t\t} else {\n\t\t\t\t\t// use full image size when mediaFallbackSize and mediaSize are not available\n\t\t\t\t\tmediaWidth = m.media_details.width;\n\t\t\t\t\tmediaHeight = m.media_details.height;\n\t\t\t\t\tmediaSourceUrl = m.source_url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmedia: m,\n\t\t\t\tsrc: mediaSourceUrl,\n\t\t\t\twidth: mediaWidth,\n\t\t\t\theight: mediaHeight,\n\t\t\t\ttype: false !== m ? m.type : false,\n\t\t\t};\n\t\t},\n\t\t[id],\n\t);\n\n\tconst onMediaUpdate = (media) => {\n\t\tconsole.log('onMediaUpdate', id, media.id);\n\t\tif (media.id !== id) {\n\t\t\tsetId(media.id);\n\t\t\tonUpdate(media);\n\t\t}\n\t\tsetIsUploading(false);\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList);\n\t\tuploadMedia({\n\t\t\tallowedTypes: mediaType,\n\t\t\tfilesList,\n\t\t\tonFileChange([image]) {\n\t\t\t\tconsole.log('onFileChange', image);\n\t\t\t\tif (!image.id) {\n\t\t\t\t\tconsole.log('waiting');\n\t\t\t\t\tsetIsUploading(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('found!', image);\n\t\t\t\t\timage.sizes = image.media_details.sizes;\n\t\t\t\t\tonMediaUpdate(image);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t});\n\t};\n\n\tconst displayImage =\n\t\tfalse !== id && false !== media && false !== src && false === isUploading;\n\n\treturn (\n\t\t<MediaUploadCheck fallback={__(`Fallback Instructions Should Go Here`)}>\n\t\t\t<MediaUpload\n\t\t\t\ttitle={__(`Media Upload`)}\n\t\t\t\tonSelect={onMediaUpdate}\n\t\t\t\tallowedTypes={mediaType}\n\t\t\t\tvalue={id}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{displayImage && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\t\tbackground: 'none',\n\t\t\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt=\"Drop an asset here, or click to replace.\"\n\t\t\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t\t\twidth={`${width}px`}\n\t\t\t\t\t\t\t\t\theight={`${height}px`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false !== onClear && displayImage && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tonClear();\n\t\t\t\t\t\t\t\t\tsetId(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tClear Image\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{((false !== id && false === media) || isUploading) && (\n\t\t\t\t\t\t\t<Button variant=\"secondary\" isBusy onClick={open}>\n\t\t\t\t\t\t\t\t{__(` Loading...`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false === id && (\n\t\t\t\t\t\t\t<Button variant=\"secondary\" onClick={open}>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<DropZone onFilesDrop={onDropImage} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default MediaDropZone;\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nfunction ifMatchSetAttribute(\n\tneedle,\n\thaystack,\n\tattrKey,\n\tattrValue,\n\tsetAttributes,\n) {\n\tif (needle === haystack) {\n\t\tsetAttributes({ [attrKey]: attrValue });\n\t}\n}\n\nfunction randomId() {\n\t// Math.random should be unique because of its seeding algorithm.\n\t// Convert it to base 36 (numbers + letters), and grab the first 9 characters\n\t// after the decimal.\n\treturn `_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction getTermsByLetter(taxonomy, letter) {\n\treturn new Promise((resolve) => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then((terms) => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n}\n\nfunction getTerms(taxonomy, perPage = 25) {\n\treturn new Promise((resolve) => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then((terms) => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n}\n\nfunction getTermsAsOptions(\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy, perPage).then((data) => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tconst value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n}\n\nfunction getTermsAsTree(taxonomy) {\n\treturn new Promise((resolve) => {\n\t\tgetTerms(taxonomy).then((data) => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map((i) => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter((e) => 0 === e.parent);\n\t\t\tparentTerms.forEach((e) => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter((f) => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach((cT) => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n}\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n\t{\n\t\tlabel: 'Weekly roundup of all new publications',\n\t\tvalue: '7c1390ba46',\n\t},\n\t{\n\t\tlabel: 'Quarterly update from the president',\n\t\tvalue: 'a33430a835',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Global attitudes & trends (twice a month)',\n\t\tvalue: '9203343b04',\n\t},\n\t{\n\t\tlabel: 'Internet, science & tech (monthly)',\n\t\tvalue: 'ea87b26abe',\n\t},\n\t{\n\t\tlabel: 'Daily briefing of media news',\n\t\tvalue: '1d2638430b',\n\t},\n\t{\n\t\tlabel: 'Race & ethnicity (monthly)',\n\t\tvalue: '0e7495c7b2',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Weekly newsletter',\n\t\tvalue: 'a7d4f3268f',\n\t},\n\t{\n\t\tlabel: 'Religion & public life - Daily religion headlines',\n\t\tvalue: '1a647764b2',\n\t},\n\t{\n\t\tlabel: 'Social & demographic trends (monthly)',\n\t\tvalue: '3836f62305',\n\t},\n\t{\n\t\tlabel: 'Methodological research (quarterly)',\n\t\tvalue: '6d1e80bbaf',\n\t},\n\t{\n\t\tlabel: 'U.S. politics & policy (monthly)',\n\t\tvalue: 'fa5fdbc701',\n\t},\n\t{\n\t\tlabel: '--',\n\t\tvalue: false,\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Immigration',\n\t\tvalue: 'xxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - U.S. Census',\n\t\tvalue: 'xxxx',\n\t},\n\t{\n\t\tlabel: 'Mini-course - Muslims and Islam',\n\t\tvalue: 'xxxxx',\n\t},\n];\n\nexport { mailChimpInterests };\n","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"lodash\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\nconst deprecated = [\n    {\n        attributes: {\n            postID: {\n                type: \"integer\"\n            },\n            link: {\n                type: \"string\"\n            },\n            excerpt: {\n                type: \"string\",\n                multiline: \"p\"\n            },\n            enableExcerpt: {\n                type: \"boolean\",\n                default: true\n            },\n            enableExcerptBelow: {\n                type: \"boolean\",\n                default: false\n            },\n            enableAltTaxonomy: {\n                type: \"boolean\",\n                default: false\n            }\n        },\n\n        migrate( { postID, link, excerpt, enableExcerpt, enableExcerptBelow, enableAltTaxonomy, enableMeta } ) {\n            console.log(\"Migrating...\", { postID, link, excerpt, enableExcerpt, enableExcerptBelow, enableAltTaxonomy, enableMeta });\n            const newMetaTaxonomy = enableMeta ? ( enableAltTaxonomy ? 'research-teams' : 'formats' ) : 'disabled';\n            return {\n                postId: postID,\n                url: link,\n                excerpt: excerpt,\n                enableExcerpt: enableExcerpt,\n                enableExcerptBelow: enableExcerptBelow,\n                metaTaxonomy: newMetaTaxonomy,\n            };\n        },\n\n        save( props ) {\n            return (\n                <Fragment>\n                    { 0 !== props.excerpt.length && (<RichText.Content className=\"excerpt\" tagName=\"div\" value={props.excerpt}/>) }\n                </Fragment>\n            );\n        },\n    },\n];\n\nexport default deprecated;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isInteger } from 'lodash';\nimport {\n\tInspectorControls,\n\tInspectorAdvancedControls,\n} from '@wordpress/block-editor';\nimport { Fragment, useState } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tButton,\n\tCardDivider,\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nfunction Inspector({ attributes, setAttributes, context, rootClientId }) {\n\tconst [isRefreshing, refresh] = useState(false);\n\tconst {\n\t\tpostId,\n\t\timageSize,\n\t\timageSlot,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableEmphasis,\n\t\tdisableMobileStyles,\n\t\tenableMeta,\n\t\tmetaTaxonomy,\n\t} = attributes;\n\n\tconst label = __('Story Item Options');\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={label}>\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t'Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).',\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableMeta ? 'Meta Enabled' : 'Meta Disabled'}\n\t\t\t\t\t\t\tchecked={enableMeta}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableMeta: !enableMeta });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableHeader ? 'Header Enabled' : 'Header Disabled'}\n\t\t\t\t\t\t\tchecked={enableHeader}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableHeader: !enableHeader });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled'}\n\t\t\t\t\t\t\tchecked={enableExcerpt}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableExcerpt: !enableExcerpt });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableExtra ? 'Extras Enabled' : 'Extras Disabled'}\n\t\t\t\t\t\t\tchecked={enableExtra}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableExtra: !enableExtra });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\tenableBreakingNews\n\t\t\t\t\t\t\t\t\t? 'Breaking News Enabled'\n\t\t\t\t\t\t\t\t\t: 'Breaking News Disabled'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchecked={enableBreakingNews}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tif (false !== window.prcBreakingNews) {\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\tenableBreakingNews: !enableBreakingNews,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t'There are no currently active authorized breaking news events. The breaking news toggle will be set back to false.',\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\tenableBreakingNews: false,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={enableEmphasis ? 'Emphasis Enabled' : 'Emphasis Disabled'}\n\t\t\t\t\t\t\tchecked={enableEmphasis}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetAttributes({ enableEmphasis: !enableEmphasis });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BaseControl>\n\n\t\t\t\t\t<CardDivider />\n\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Select Taxonomy To Display\"\n\t\t\t\t\t\tvalue={metaTaxonomy}\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ label: 'Formats', value: 'formats' },\n\t\t\t\t\t\t\t{ label: 'Research Teams', value: 'research-teams' },\n\t\t\t\t\t\t\t{ label: 'Disabled', value: 'disabled' },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tonChange={(newMetaTaxonomy) => {\n\t\t\t\t\t\t\tsetAttributes({ metaTaxonomy: newMetaTaxonomy });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorAdvancedControls>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={\n\t\t\t\t\t\t!disableMobileStyles\n\t\t\t\t\t\t\t? 'Mobile Styling Enabled'\n\t\t\t\t\t\t\t: 'Mobile Styling Disabled'\n\t\t\t\t\t}\n\t\t\t\t\thelp={__(\n\t\t\t\t\t\t'If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile.',\n\t\t\t\t\t)}\n\t\t\t\t\tchecked={disableMobileStyles}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tsetAttributes({ disableMobileStyles: !disableMobileStyles });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{true === enableExcerpt &&\n\t\t\t\t\t('right' === imageSlot || 'left' === imageSlot) && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\tenableExcerptBelow\n\t\t\t\t\t\t\t\t\t\t? 'Excerpt Will Appear Below Image'\n\t\t\t\t\t\t\t\t\t\t: 'Excerpt Will Appear Normally'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t\t\t'If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image.',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tchecked={enableExcerptBelow}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\tenableExcerptBelow: !enableExcerptBelow,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\n\t\t\t\t{isInteger(postId) && 0 !== postId && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tisBusy={isRefreshing}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\trefresh(true);\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tsetPostAttributes({\n\t\t\t\t\t\t\t\t\t\tpostId,\n\t\t\t\t\t\t\t\t\t\timageSize,\n\t\t\t\t\t\t\t\t\t\tisRefresh: true,\n\t\t\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\trefresh(false);\n\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ marginBottom: '1em' }}\n\t\t\t\t\t\t\ttext={__('Refresh Post Data')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tisBusy={isRefreshing}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\trefresh(true);\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\texcerpt: '',\n\t\t\t\t\t\t\t\t\textra: '',\n\t\t\t\t\t\t\t\t\turl: '',\n\t\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\t\tdate: '',\n\t\t\t\t\t\t\t\t\timage: '',\n\t\t\t\t\t\t\t\t\tpostId: 0,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\trefresh(false);\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ marginBottom: '1em' }}\n\t\t\t\t\t\ttext={__('Reset Story Item Block')}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</InspectorAdvancedControls>\n\t\t</Fragment>\n\t);\n}\n\nexport default Inspector;\n","/**\n * External Dependencies\n */\nimport { ContentPlaceholder } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nfunction Placeholder({ attributes, setAttributes, blockProps }) {\n\tconst { imageSize } = attributes;\n\n\tconst [loadingStub, setLoadingStub] = useState(false);\n\n\treturn (\n\t\t<ContentPlaceholder\n\t\t\tonChange={(pickedContent) => {\n\t\t\t\tconsole.log('Step2:', pickedContent);\n\t\t\t\tif (0 < pickedContent.length && undefined !== pickedContent[0].id) {\n\t\t\t\t\tconsole.log('Step3:', pickedContent[0]);\n\t\t\t\t\tsetLoadingStub(true);\n\t\t\t\t\tsetPostAttributes({\n\t\t\t\t\t\tpostId: pickedContent[0].id,\n\t\t\t\t\t\timageSize,\n\t\t\t\t\t\tisRefresh: false,\n\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonSkip={() => {\n\t\t\t\tconst todaysDate = new Date().toLocaleDateString('en-US', {\n\t\t\t\t\tmonth: 'short',\n\t\t\t\t\tday: 'numeric',\n\t\t\t\t\tyear: 'numeric',\n\t\t\t\t});\n\t\t\t\tsetAttributes({ postId: 0, label: 'Report', date: todaysDate });\n\t\t\t}}\n\t\t\tblockProps={{ ...blockProps, style: { marginBottom: '16px' } }}\n\t\t\tloadingComponent={loadingStub}\n\t\t/>\n\t);\n}\n\nexport default Placeholder;\n","/**\n * WordPress Dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\nimport {\n\tclose,\n\tmore,\n\tarrowLeft,\n\tarrowRight,\n\tarrowUp,\n\tarrowDown,\n} from '@wordpress/icons';\n\nfunction Icon({ svgPath = false, isPressed = false }) {\n\tif (false === svgPath) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<SVG\n\t\t\twidth={24}\n\t\t\theight={24}\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tisPressed={isPressed}\n\t\t>\n\t\t\t<Path d={svgPath} />\n\t\t</SVG>\n\t);\n}\n\nfunction ImageSlotIcon({ selected }) {\n\tif ('right' === selected) {\n\t\treturn arrowRight;\n\t}\n\tif ('left' === selected) {\n\t\treturn arrowLeft;\n\t}\n\tif ('top' === selected) {\n\t\treturn arrowUp;\n\t}\n\tif ('bottom' === selected) {\n\t\treturn arrowDown;\n\t}\n\tif ('disabled' === selected) {\n\t\treturn close;\n\t}\n\treturn more;\n}\n\nfunction ImageSizeIcon({ selected, currentlyActive }) {\n\tconst iconPaths = {\n\t\tA1: 'M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z',\n\t\tA2: 'M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z',\n\t\tA3: 'M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z',\n\t\tA4: 'M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z',\n\t\tXL: 'M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z',\n\t};\n\treturn (\n\t\t<Icon\n\t\t\tsvgPath={iconPaths[selected]}\n\t\t\tisPressed={selected === currentlyActive}\n\t\t/>\n\t);\n}\n\nfunction HeadingLevelIcon({ selected, currentlyActive }) {\n\tconst iconPaths = {\n\t\t1: 'M15.81,15.63V18H8.19V6H11v9.63Z', // Large\n\t\t2: 'M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z', // Medium\n\t\t3: 'M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z', // Small\n\t};\n\treturn (\n\t\t<Icon\n\t\t\tsvgPath={iconPaths[selected]}\n\t\t\tisPressed={selected === currentlyActive}\n\t\t/>\n\t);\n}\n\nexport { ImageSizeIcon, ImageSlotIcon, HeadingLevelIcon };\n","/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport {\n\tButtonGroup,\n\tButton,\n\tModal,\n\tPopover,\n\tSpinner,\n\tTextControl,\n\tToolbarButton,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nfunction URLControl({ url, imageSize = 'A1', setAttributes }) {\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [isLinkOpen, setIsLinkOpen] = useState(false);\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [inputValue, setInputValue] = useState(url);\n\tconst [post, setPost] = useState(null);\n\n\tconst value = useDebounce(inputValue, 500);\n\t// When the input value changes, search for the post.\n\tuseEffect(() => {\n\t\tif (value !== url) {\n\t\t\tsetIsLoading(true);\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/utils/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url: value },\n\t\t\t})\n\t\t\t\t.then((p) => {\n\t\t\t\t\tconsole.log('get-post-by-url', p);\n\t\t\t\t\tif (undefined !== p.ID) {\n\t\t\t\t\t\tsetPost(p);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log('Error: ', err);\n\t\t\t\t\t// In this state no url has been found so we should just assume the user wants the url passed in.\n\t\t\t\t\tsetPost(false);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [value]);\n\n\tconst onModalClose = () => setIsModalOpen(false);\n\tconst onModalOpen = () => {\n\t\tsetIsLinkOpen(false);\n\t\tsetIsModalOpen(true);\n\t};\n\n\tconst onReplace = (newPostId) => {\n\t\tsetPostAttributes({\n\t\t\tpostId: newPostId,\n\t\t\timageSize,\n\t\t\tisRefresh: false,\n\t\t\tsetAttributes,\n\t\t});\n\t};\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<ToolbarButton\n\t\t\t\taria-expanded={isLinkOpen}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tlabel={__('Set URL')}\n\t\t\t\ticon=\"admin-links\"\n\t\t\t\tonClick={() => setIsLinkOpen(!isLinkOpen)}\n\t\t\t\tshowTooltip\n\t\t\t/>\n\t\t\t{true === isModalOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__('Replace story item content', 'prc-blocks-story-item')}\n\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tReplace this story item with <strong>{post.post_title}</strong>?\n\t\t\t\t\t</p>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tonReplace(post.ID);\n\t\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tReplace\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\turl: value,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tReplace URL Only\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={onModalClose}>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t\t{true === isLinkOpen && (\n\t\t\t\t<Popover position=\"bottom center\" onClose={() => setIsLinkOpen(false)}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tminWidth: '300px',\n\t\t\t\t\t\t\tpadding: '8px',\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\talignItems: 'flex-end',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel=\"URL\"\n\t\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t\tonChange={(value) => setInputValue(value)}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tpaddingBottom: '7px',\n\t\t\t\t\t\t\t\tpaddingLeft: '8px',\n\t\t\t\t\t\t\t\twidth: '44px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div style={{ paddingBottom: '3px' }}>\n\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{!isLoading && false === post && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon=\"yes-alt\"\n\t\t\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetAttributes({ url: value });\n\t\t\t\t\t\t\t\t\t\tsetIsLinkOpen(false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{!isLoading && false !== post && null !== post && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\t\t\tonClick={onModalOpen}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default URLControl;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { BlockControls } from '@wordpress/block-editor';\nimport { Fragment, useCallback } from '@wordpress/element';\nimport {\n\tToolbarButton,\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { HeadingLevelIcon, ImageSizeIcon, ImageSlotIcon } from './icons';\nimport { setArtBySize } from '../../helpers';\nimport URLControl from './url-control';\n\nconst COLUMN_LIMIT = 8;\n\nfunction Toolbar({ attributes, setAttributes, context, rootClientId }) {\n\tconst { postId, url, imageSize, imageSlot, headerSize, isChartArt, title } =\n\t\tattributes;\n\n\tconsole.log('Context', context);\n\n\tconst columnWidth =\n\t\tundefined !== context['prc-block/column/width']\n\t\t\t? context['prc-block/column/width']\n\t\t\t: false;\n\tconst columnIsEqualWidth =\n\t\tundefined !== context['prc-block/row/isEqual']\n\t\t\t? context['prc-block/row/isEqual']\n\t\t\t: false;\n\tconsole.log('columnWidth', columnWidth, columnIsEqualWidth);\n\n\tconst handleImageSizeChange = (newSize) => {\n\t\tsetAttributes({ imageSize: newSize });\n\t\tsetArtBySize(newSize, postId, setAttributes); // @TODO LOOK INTO\n\t\tconsole.log('new image size, check column context', context);\n\t};\n\n\tconst MemoizedHeadingLevelIcon = useCallback(\n\t\t() => (\n\t\t\t<HeadingLevelIcon selected={headerSize} currentlyActive={headerSize} />\n\t\t),\n\t\t[headerSize],\n\t);\n\n\tconst MemoizedImageSlotIcon = useCallback(\n\t\t() => <ImageSlotIcon selected={imageSlot} />,\n\t\t[imageSlot],\n\t);\n\n\tconst MemoizedImageSizeIcon = useCallback(\n\t\t() => <ImageSizeIcon selected={imageSize} currentlyActive={imageSize} />,\n\t\t[imageSize],\n\t);\n\n\treturn (\n\t\t<BlockControls>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<URLControl\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tid={postId}\n\t\t\t\t\turl={url}\n\t\t\t\t\ttype=\"stub\"\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\ticon={MemoizedHeadingLevelIcon}\n\t\t\t\t\tlabel=\"Select Heading Size\"\n\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Large',\n\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t<HeadingLevelIcon selected={1} currentlyActive={headerSize} />\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisActive: 1 === headerSize,\n\t\t\t\t\t\t\tonClick: () => setAttributes({ headerSize: 1 }),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Medium',\n\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t<HeadingLevelIcon selected={2} currentlyActive={headerSize} />\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisActive: 2 === headerSize,\n\t\t\t\t\t\t\tonClick: () => setAttributes({ headerSize: 2 }),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Small',\n\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t<HeadingLevelIcon selected={3} currentlyActive={headerSize} />\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisActive: 3 === headerSize,\n\t\t\t\t\t\t\tonClick: () => setAttributes({ headerSize: 3 }),\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\ticon={MemoizedImageSlotIcon}\n\t\t\t\t\tlabel=\"Select Image Slot\"\n\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Top',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"top\" />,\n\t\t\t\t\t\t\tisActive: 'top' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'top';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Bottom',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"bottom\" />,\n\t\t\t\t\t\t\tisActive: 'bottom' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'bottom';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Left',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"left\" />,\n\t\t\t\t\t\t\tisActive: 'left' === imageSlot,\n\t\t\t\t\t\t\tisDisabled:\n\t\t\t\t\t\t\t\ttrue !== columnIsEqualWidth &&\n\t\t\t\t\t\t\t\tfalse !== columnWidth &&\n\t\t\t\t\t\t\t\tCOLUMN_LIMIT >= columnWidth,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'left';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Right',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"right\" />,\n\t\t\t\t\t\t\tisActive: 'right' === imageSlot,\n\t\t\t\t\t\t\tisDisabled:\n\t\t\t\t\t\t\t\ttrue !== columnIsEqualWidth &&\n\t\t\t\t\t\t\t\tfalse !== columnWidth &&\n\t\t\t\t\t\t\t\tCOLUMN_LIMIT >= columnWidth,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'right';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Disabled',\n\t\t\t\t\t\t\ticon: <ImageSlotIcon selected=\"disabled\" />,\n\t\t\t\t\t\t\tisActive: 'disabled' === imageSlot,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst newSlot = 'disabled';\n\t\t\t\t\t\t\t\tsetAttributes({ imageSlot: newSlot });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t\t{'disabled' !== imageSlot && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ToolbarDropdownMenu\n\t\t\t\t\t\t\ticon={MemoizedImageSizeIcon}\n\t\t\t\t\t\t\tlabel=\"Select Image Size\"\n\t\t\t\t\t\t\tcontrols={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A1',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A1\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A1' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A1'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A2',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A2\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A2' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A2'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A3',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A3\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A3' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A3'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'A4',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"A4\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'A4' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('A4'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'XL',\n\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t<ImageSizeIcon selected=\"XL\" currentlyActive={imageSize} />\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tisActive: 'XL' === imageSize,\n\t\t\t\t\t\t\t\t\tonClick: () => handleImageSizeChange('XL'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon=\"chart-pie\"\n\t\t\t\t\t\t\tisPressed={isChartArt}\n\t\t\t\t\t\t\tlabel={__('Enable Chart Art')}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\tisChartArt: !isChartArt,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n}\n\nexport default Toolbar;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport Inspector from './inspector';\nimport Placeholder from './placeholder';\nimport Toolbar from './toolbar';\n\nfunction Controls({ attributes, setAttributes, context, rootClientId }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Toolbar {...{ attributes, setAttributes, context, rootClientId }} />\n\t\t\t<Inspector\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t\trootClientId,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\nexport { Controls, Placeholder };\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { Picture } from 'react-responsive-picture';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { addQueryArgs } from '@wordpress/url';\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n\nconst A1 = {\n\tdefault: '564,317',\n\tsmall: '690,388',\n\thidpi: '1128,634',\n\tsmallHidpi: '1380,776',\n};\n\nconst A2 = {\n\tdefault: '268,151',\n\tsmall: '690,388',\n\thidpi: '536,301',\n\tsmallHidpi: '1380,776',\n};\n\nconst A3 = {\n\tdefault: '194,110',\n\tsmall: '148,84',\n\thidpi: '388,220',\n\tsmallHidpi: '296,168',\n};\n\nconst A4 = {\n\tdefault: '268,151',\n\tsmall: '690,388',\n\thidpi: '536,302',\n\tsmallHidpi: '1380,776',\n};\n\nconst XL = {\n\tdefault: '720,405',\n\tsmall: '690,388',\n\thidpi: '1440,810',\n\tsmallHidpi: '1380,776',\n};\n\nfunction ImageDisplay({\n\timg,\n\tsize,\n\tlink,\n\tonClick = false,\n\tplaceholder = false,\n}) {\n\t// eslint-disable-next-line no-shadow\n\tconst getImgURL = (variant) => {\n\t\tif (true === placeholder) {\n\t\t\tlet dimensions = '';\n\t\t\tif ('A2' === size) {\n\t\t\t\tdimensions = '536x301';\n\t\t\t} else if ('A3' === size) {\n\t\t\t\tdimensions = '388x220';\n\t\t\t} else if ('A4' === size) {\n\t\t\t\tdimensions = '536x302';\n\t\t\t} else if ('XL' === size) {\n\t\t\t\tdimensions = '1440x810';\n\t\t\t} else {\n\t\t\t\t// Default to A1\n\t\t\t\tdimensions = '1128x634';\n\t\t\t}\n\t\t\treturn `https://via.placeholder.com/${dimensions}.png?text=${size}`;\n\t\t}\n\n\t\tif ('' === img || false === img) {\n\t\t\treturn img;\n\t\t}\n\n\t\t// Default to A1\n\t\tlet args = { resize: A1[variant] };\n\t\tif ('A2' === size) {\n\t\t\targs = { resize: A2[variant] };\n\t\t} else if ('A3' === size) {\n\t\t\targs = { resize: A3[variant] };\n\t\t} else if ('A4' === size) {\n\t\t\targs = { resize: A4[variant] };\n\t\t} else if ('XL' === size) {\n\t\t\targs = { resize: XL[variant] };\n\t\t}\n\n\t\treturn addQueryArgs(img, args);\n\t};\n\n\t// eslint-disable-next-line no-shadow\n\tconst getImgSrcSet = (threshold = 767) => [\n\t\t{\n\t\t\tsrcSet: `${getImgURL('default')} 1x, ${getImgURL('hidpi')} 2x`,\n\t\t\tmedia: `(min-width: ${threshold}px)`,\n\t\t},\n\t\t{\n\t\t\tsrcSet: `${getImgURL('small')} 1x, ${getImgURL('smallHidpi')} 2x`,\n\t\t\tmedia: `(max-width: ${threshold}px)`,\n\t\t},\n\t];\n\n\tif (false !== onClick) {\n\t\treturn (\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={onClick}\n\t\t\t\tstyle={{ padding: 0, border: 'none', cursor: 'pointer' }}\n\t\t\t>\n\t\t\t\t{true === placeholder && (\n\t\t\t\t\t<img src={getImgURL()} alt=\"Click to insert\" />\n\t\t\t\t)}\n\t\t\t\t{true !== placeholder && (\n\t\t\t\t\t<Picture sources={getImgSrcSet()} alt=\"Click to edit\" />\n\t\t\t\t)}\n\t\t\t</button>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{'' === link && <Picture sources={getImgSrcSet()} />}\n\t\t\t{'' !== link && (\n\t\t\t\t<a href={link}>\n\t\t\t\t\t<Picture sources={getImgSrcSet()} />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nfunction Edit({ img, size, setAttributes }) {\n\treturn (\n\t\t<MediaUploadCheck>\n\t\t\t<MediaUpload\n\t\t\t\tonSelect={(media) => setAttributes({ image: media.url })}\n\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// If we have an actual image here then display it otherwise give us the placeholder\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{undefined !== img && 0 !== img.length && (\n\t\t\t\t\t\t\t<ImageDisplay img={img} size={size} link=\"\" onClick={open} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{(undefined === img || 0 === img.length) && (\n\t\t\t\t\t\t\t<ImageDisplay\n\t\t\t\t\t\t\t\timg={img}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tlink=\"\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tplaceholder\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\n/**\n * Props:\n * img: string url of image to display\n * size: string of image/slot size (A1,A2,A3,A4)\n * link: string of url to go to when image is clicked on front end\n * slot: if set to null then no image size chooser will be display\n * chartArt: if set to null then no chart art button will appear\n * setAttributes: defaults to false unless otherwise provided a function to pass data back up to a HOC state.\n *\n * <Img id={} img={} size={} slot={} chartArt={} setAttributes={}/>\n */\n\nfunction Img({ img, size, slot, chartArt, setAttributes }) {\n\tif ('disabled' === slot) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = () => {\n\t\tlet isXL = false;\n\t\tlet isA1 = false;\n\t\tlet isA2 = false;\n\t\tlet isA3 = false;\n\t\tlet isA4 = false;\n\t\tif (false !== slot) {\n\t\t\tif ('XL' === size) {\n\t\t\t\tisXL = true;\n\t\t\t} else if ('A1' === size) {\n\t\t\t\tisA1 = true;\n\t\t\t} else if ('A2' === size) {\n\t\t\t\tisA2 = true;\n\t\t\t} else if ('A3' === size) {\n\t\t\t\tisA3 = true;\n\t\t\t} else if ('A4' === size) {\n\t\t\t\tisA4 = true;\n\t\t\t}\n\t\t}\n\n\t\treturn classNames({\n\t\t\tui: true, // @TODO is this necessary?\n\t\t\tXL: isXL,\n\t\t\tA1: isA1,\n\t\t\tA2: isA2,\n\t\t\tA3: isA3,\n\t\t\tA4: isA4,\n\t\t\timage: true,\n\t\t\tbordered: chartArt,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className={classes()}>\n\t\t\t<Edit img={img} size={size} setAttributes={setAttributes} />\n\t\t</div>\n\t);\n}\n\nexport default Img;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Excerpt({ content, sansSerif, enabled, setAttributes }) {\n\tif (true !== enabled) {\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = classNames('excerpt', { 'sans-serif': sansSerif });\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName=\"div\"\n\t\t\tvalue={content}\n\t\t\tonChange={(excerpt) => setAttributes({ excerpt })}\n\t\t\tplaceholder=\"Story item excerpt...\"\n\t\t\tmultiline=\"p\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Excerpt;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Extra({ content, breakingNews, enabled, setAttributes }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t{true === enabled && (\n\t\t\t\t<RichText\n\t\t\t\t\ttagName=\"ul\"\n\t\t\t\t\tvalue={content}\n\t\t\t\t\tonChange={(extra) => setAttributes({ extra })}\n\t\t\t\t\tplaceholder={content}\n\t\t\t\t\tmultiline=\"li\"\n\t\t\t\t\tclassName=\"extra\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{true === breakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default Extra;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nfunction Header({ title, size, enabled, setAttributes, altHeaderWeight }) {\n\tif (true !== enabled) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst classes = classNames('header', {\n\t\tlarge: 1 === size,\n\t\tmedium: 2 === size,\n\t\tsmall: 3 === size,\n\t\tlight: altHeaderWeight,\n\t});\n\n\treturn (\n\t\t<RichText\n\t\t\ttagName=\"header\"\n\t\t\tvalue={title}\n\t\t\tonChange={(t) => setAttributes({ title: t })}\n\t\t\tallowedFormats={['italic']}\n\t\t\tplaceholder=\"Title\"\n\t\t\tmultiline=\"br\"\n\t\t\tclassName={classes}\n\t\t/>\n\t);\n}\n\nexport default Header;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { SelectControl, TextControl } from '@wordpress/components';\nimport { cleanForSlug } from '@wordpress/url';\n\nfunction Meta({ enabled, date, label, setAttributes, termOptions }) {\n\tif (!enabled) {\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\treturn <Fragment />;\n\t}\n\n\tconst cleanedLabel =\n\t\tundefined !== label ? cleanForSlug(label.toLowerCase()) : 'report';\n\n\tconst value = 'short-read' === cleanedLabel ? 'fact-tank' : cleanedLabel;\n\n\treturn (\n\t\t<div className=\"meta\" style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t<div>\n\t\t\t\t<SelectControl\n\t\t\t\t\tvalue={value}\n\t\t\t\t\toptions={termOptions}\n\t\t\t\t\tonChange={(l) => {\n\t\t\t\t\t\tsetAttributes({ label: l });\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ marginBottom: '0px' }}\n\t\t\t\t\tclassName=\"story-label-select\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>&nbsp;|&nbsp;</div>\n\t\t\t<div>\n\t\t\t\t<TextControl\n\t\t\t\t\tvalue={date}\n\t\t\t\t\tonChange={(d) => {\n\t\t\t\t\t\tsetAttributes({ date: d });\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ marginBottom: '0px' }}\n\t\t\t\t\tclassName=\"story-label-select\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Meta;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\n\nconst IMAGE_SIZES = {\n\tA1: [1128, 634],\n\tA2: [526, 301],\n\tA3: [388, 220],\n\tA4: [536, 302],\n\tXL: [1440, 810],\n};\n\nfunction Preview({ attributes }) {\n\tconst {\n\t\ttitle,\n\t\texcerpt,\n\t\textra,\n\t\tlabel,\n\t\tdate,\n\t\timage,\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\theaderSize,\n\t\tenableEmphasis,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t\tclassName,\n\t} = attributes;\n\n\tconst logicalClasses = {\n\t\tbordered: enableEmphasis,\n\t\t'alt-excerpt': enableExcerptBelow,\n\t};\n\tif ('disbaled' !== imageSlot) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif ('disabled' !== imageSlot && 0 < imageSize.length) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\n\tconst blockProps = useBlockProps(blockPropsArgs);\n\n\tconst headerClasses = classNames('header', {\n\t\tlarge: 1 === headerSize,\n\t\tmedium: 2 === headerSize,\n\t\tsmall: 3 === headerSize,\n\t\tlight: false,\n\t});\n\n\tconst imageClasses = classNames('image', {\n\t\tbordered: isChartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n\tconst excerptClasses = classNames('excerpt');\n\n\treturn (\n\t\t<article {...blockProps}>\n\t\t\t{enableMeta && (\n\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t<span className=\"label\">{label}</span> |{' '}\n\t\t\t\t\t<span className=\"date\">{date}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{'disabled' !== imageSlot && (\n\t\t\t\t<div className={`${imageClasses}`}>\n\t\t\t\t\t<picture>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrcSet={image}\n\t\t\t\t\t\t\twidth={IMAGE_SIZES[imageSize][0]}\n\t\t\t\t\t\t\theight={IMAGE_SIZES[imageSize][1]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</picture>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{enableHeader && <header className={headerClasses}>{title}</header>}\n\n\t\t\t{enableExcerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t\tmultiline=\"p\"\n\t\t\t\t\tclassName={excerptClasses}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{enableExtra && (\n\t\t\t\t<RichText.Content tagName=\"ul\" value={extra} className=\"extra\" />\n\t\t\t)}\n\n\t\t\t{true === enableBreakingNews && false !== window.prcBreakingNews && (\n\t\t\t\t<ul className=\"extra-breaking-news\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.prcBreakingNews.url}\n\t\t\t\t\t\t\tclassName=\"kicker-breaking-news\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.prcBreakingNews.label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</article>\n\t);\n}\n\nexport default Preview;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { getTermsAsOptions } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useBlockProps } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport { Controls, Placeholder } from './controls';\nimport Image from './image';\nimport Excerpt from './excerpt';\nimport Extra from './extra';\nimport Header from './header';\nimport Meta from './meta';\nimport Preview from './preview';\n\n/**\n * To be removed at later date:\n */\nconst handlePostIdCaseChange = (attributes, setAttributes = false) => {\n\tconst payload = {};\n\tif (!attributes.postId && attributes.postID) {\n\t\tpayload.postId = attributes.postID;\n\t}\n\n\tif (0 !== Object.keys(payload).length && false !== setAttributes) {\n\t\tconsole.log('handlePostIdCaseChange', attributes, payload);\n\t\tsetAttributes({ ...payload });\n\t}\n};\n\nwindow.termOptions = { formats: [], 'research-teams': [] };\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId, context }) => {\n\tconst {\n\t\ttitle,\n\t\texcerpt,\n\t\textra,\n\t\tlabel,\n\t\tdate,\n\t\timage,\n\t\timageSlot,\n\t\timageSize,\n\t\tisChartArt,\n\t\tpostId,\n\t\theaderSize,\n\t\tenableEmphasis,\n\t\tenableHeader,\n\t\tenableExcerpt,\n\t\tenableExcerptBelow,\n\t\tenableExtra,\n\t\tenableBreakingNews,\n\t\tenableMeta,\n\t\tmetaTaxonomy,\n\t\tinLoop,\n\t\tisPreview,\n\t\tclassName,\n\t} = attributes;\n\n\tconst [termOptions, setTermOptions] = useState(\n\t\twindow.termOptions[metaTaxonomy],\n\t);\n\n\t/**\n\t * When the taxonomy selection changes go update the term options. Setting this here prevents the constant pop in and re-polling for terms.\n\t */\n\tuseEffect(() => {\n\t\tif ('disabled' !== metaTaxonomy) {\n\t\t\t// @TODO change this to use local session, we can set it to expire for like 30 days because this almost never changes.\n\t\t\tif (0 !== window.termOptions[metaTaxonomy].length) {\n\t\t\t\tsetTermOptions(window.termOptions[metaTaxonomy]);\n\t\t\t} else {\n\t\t\t\tgetTermsAsOptions(metaTaxonomy).then((options) => {\n\t\t\t\t\tif (!window.termOptions[metaTaxonomy].length) {\n\t\t\t\t\t\twindow.termOptions[metaTaxonomy] = options;\n\t\t\t\t\t}\n\t\t\t\t\tsetTermOptions(options);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [metaTaxonomy]);\n\n\t// @TODO  If in loop we should get title, image, label, date, and excerpt from the postId on load.\n\t// Also if in loop we should disable setting any of the attributes and force the A3 left variant.\n\t// If we are in loop but have a grid display type then you can set the imageSlot, imageize, enableHeader, enableExcerpt,  enableMeta, metaTaxonomy attributes.\n\tuseEffect(() => {\n\t\thandlePostIdCaseChange(attributes, setAttributes);\n\t}, []);\n\n\t// For posts inside a query block if we have a post id then go fetch the post and set attributes.\n\tuseEffect(() => {\n\t\tif (\n\t\t\tcontext.hasOwnProperty('query') &&\n\t\t\tcontext.hasOwnProperty('postId') &&\n\t\t\t!Number.isInteger(postId)\n\t\t) {\n\t\t\tconsole.log('This post is from a query block...');\n\t\t\t// We need a way to store the info in state, not just attributes...\n\t\t}\n\t}, [context]);\n\n\tconst { rootClientId } = useSelect(\n\t\t(select) => ({\n\t\t\trootClientId: select('core/block-editor').getBlockRootClientId(clientId),\n\t\t}),\n\t\t[clientId],\n\t);\n\n\tconst enableAltHeaderWeight = !enableExcerpt;\n\n\tconst logicalClasses = {\n\t\tbordered: enableEmphasis,\n\t\t'alt-excerpt': enableExcerptBelow,\n\t};\n\tif ('disbaled' !== imageSlot) {\n\t\tlogicalClasses[imageSlot] = true;\n\t\tlogicalClasses.aligned = true;\n\t}\n\tconst blockPropsArgs = {\n\t\tclassName: classNames('story item', className, logicalClasses),\n\t};\n\tif ('disabled' !== imageSlot && 0 < imageSize.length) {\n\t\tblockPropsArgs['data-image-size'] = imageSize;\n\t}\n\tconst blockProps = useBlockProps(blockPropsArgs);\n\n\tif (!isSelected || isPreview) {\n\t\treturn <Preview attributes={attributes} />;\n\t}\n\n\tif (undefined === postId && !context.hasOwnProperty('query')) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tattributes={attributes}\n\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\tblockProps={blockProps}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<Controls\n\t\t\t\t{...{\n\t\t\t\t\tattributes,\n\t\t\t\t\tsetAttributes,\n\t\t\t\t\tcontext,\n\t\t\t\t\trootClientId,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<article {...blockProps}>\n\t\t\t\t<Image\n\t\t\t\t\timg={image}\n\t\t\t\t\tsize={imageSize}\n\t\t\t\t\tslot={imageSlot}\n\t\t\t\t\tchartArt={isChartArt}\n\t\t\t\t\tpostId={postId}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\n\t\t\t\t<Meta\n\t\t\t\t\tenabled={enableMeta && 'disabled' !== metaTaxonomy}\n\t\t\t\t\tdate={date}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\ttermOptions={termOptions}\n\t\t\t\t/>\n\n\t\t\t\t<Header\n\t\t\t\t\tenabled={enableHeader}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tsize={headerSize}\n\t\t\t\t\taltHeaderWeight={enableAltHeaderWeight}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\n\t\t\t\t<Excerpt\n\t\t\t\t\tenabled={enableExcerpt}\n\t\t\t\t\tcontent={excerpt}\n\t\t\t\t\tsansSerif={!enableHeader}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t/>\n\n\t\t\t\t<Extra\n\t\t\t\t\tenabled={enableExtra}\n\t\t\t\t\tcontent={extra}\n\t\t\t\t\tbreakingNews={enableBreakingNews}\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\tisSelected={isSelected}\n\t\t\t\t/>\n\t\t\t</article>\n\t\t</Fragment>\n\t);\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\n/** Returns a server side block callback */\nconst save = ({ attributes }) => {\n\tconst { excerpt, extra } = attributes;\n\treturn (\n\t\t<Fragment>\n\t\t\t{excerpt && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\tclassName=\"description\"\n\t\t\t\t\ttagName=\"div\"\n\t\t\t\t\tvalue={excerpt}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{extra && (\n\t\t\t\t<RichText.Content className=\"extra\" tagName=\"ul\" value={extra} />\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nconst variations = [\n\t{\n\t\tname: 'story-item-default',\n\t\tisDefault: true,\n\t\ttitle: __('Story Item'),\n\t\texcerpt: __('Default story item layout: top aligned A1 image.'),\n\t\tattributes: {\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A1',\n\t\t},\n\t},\n\t{\n\t\tname: 'story-item-pub-listing',\n\t\ttitle: __('Pub Listing Story Item'),\n\t\texcerpt: __('Left algined A3 image (right aligned A3 on mobile).'),\n\t\tattributes: {\n\t\t\timageSlot: 'left',\n\t\t\timageSize: 'A3',\n\t\t},\n\t},\n\t{\n\t\tname: 'story-item-slim',\n\t\ttitle: __('Story Item Slim'),\n\t\texcerpt: __('No excerpt, no image.'),\n\t\tattributes: {\n\t\t\timageSlot: 'disabled',\n\t\t\tenableExcerpt: false,\n\t\t},\n\t},\n];\n\nexport default variations;\n","/**\n * WordPress Dependencies\n */\nimport * as moment from 'moment';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport deprecated from './deprecated';\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport variations from './variations';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n\texample: {\n\t\tattributes: {\n\t\t\ttitle: 'Ultricies Ipsum Nibh Egestas Purus',\n\t\t\texcerpt:\n\t\t\t\t'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>',\n\t\t\tlabel: 'Report',\n\t\t\tdate: moment().format('MM-DD-YYYY'), // Set the current date.\n\t\t\timage:\n\t\t\t\t'https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg',\n\t\t\timageSlot: 'top',\n\t\t\timageSize: 'A2',\n\t\t\tisPreview: true,\n\t\t},\n\t},\n\tdeprecated,\n\tvariations,\n\tedit,\n\tsave,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n"],"sourceRoot":""}