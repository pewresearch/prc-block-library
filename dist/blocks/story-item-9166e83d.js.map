{"version":3,"sources":["webpack:///external \"React\"","webpack:///external [\"wp\",\"blocks\"]","webpack:///external \"moment\"","webpack:///external [\"wp\",\"data\"]","webpack:///./src/story-item/helpers.js","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"primitives\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"url\"]","webpack:///external [\"wp\",\"htmlEntities\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"coreData\"]","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/hooks/use-debounce.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/hooks/use-window-size.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-search/search-item.jsx","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-search/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-picker/picked-item.jsx","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-picker/sortable-list.jsx","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-picker/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/content-placeholder/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/list-store/reducer.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/link-toolbar-button/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/caret-heading-link/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/block-inserter-button/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/heading-level-toolbar/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/components/media-dropzone/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/functions/index.js","webpack:////Users/srubenstein/dev/local-wp/prc/app/public/wp-content/private/_shared/mailchimp/index.js","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external \"ReactDOM\"","webpack:///external \"regeneratorRuntime\"","webpack:///external \"lodash\"","webpack:///external [\"wp\",\"mediaUtils\"]","webpack:///external [\"wp\",\"keycodes\"]","webpack:///./src/story-item/deprecated.js","webpack:///./src/story-item/edit/controls/inspector.jsx","webpack:///./src/story-item/edit/controls/placeholder.jsx","webpack:///./src/story-item/edit/controls/toolbar.jsx","webpack:///./src/story-item/edit/controls/index.js","webpack:///./src/story-item/edit/image.jsx","webpack:///./src/story-item/edit/excerpt.jsx","webpack:///./src/story-item/edit/extra.jsx","webpack:///./src/story-item/edit/header.jsx","webpack:///./src/story-item/edit/meta.jsx","webpack:///./src/story-item/edit/preview.jsx","webpack:///./src/story-item/edit/index.js","webpack:///./src/story-item/save.js","webpack:///./src/story-item/variations.js","webpack:///./src/story-item/index.js"],"names":["module","exports","window","moment","setArtBySize","imageSize","postId","setAttributes","apiFetch","path","then","data","undefined","image","rawUrl","isChartArt","chartArt","getAttributesFromPost","opts","post","isRefresh","console","log","d","Date","date","format","storyItem","title","hasOwnProperty","rendered","excerpt","url","link","label","id","extra","art","setPostAttributes","options","Promise","resolve","reject","method","attrs","catch","err","error","getAttributesFromURL","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useWindowSize","ButtonStyled","styled","Button","SearchItem","suggestion","onClick","searchTerm","isSelected","contentTypes","showType","type","length","text","decodeEntities","className","style","borderRadius","boxSizing","paddingRight","highlight","aria-hidden","filterURLForDisplay","safeDecodeURI","NAMESPACE","searchCache","ContentSearch","onSelectItem","placeholder","mode","excludeItems","perPage","searchInput","setSearchInput","searchString","searchStringIsUrl","setSearchStringIsUrl","searchResults","setSearchResults","isLoading","setIsLoading","selectedItem","setSelectedItem","abortControllerRef","useRef","mounted","getPostByUrl","filterResults","results","filter","result","keep","every","item","hasSearchString","hasSearchResults","current","isUrl","match","keyword","abort","trim","AbortController","searchQuery","join","ID","post_title","post_type","permalink","subtype","code","signal","handleSearchStringChange","listCSS","css","onNavigate","orientation","display","flexGrow","onChange","autoComplete","position","right","marginTop","marginBottom","marginLeft","paddingLeft","listStyle","color","cursor","__","map","index","key","handleItemSelection","DragHandle","sortableHandle","marginRight","flexShrink","width","height","xmlns","viewBox","role","focusable","Wrapper","PickedItem","isOrderable","handleItemDelete","preparedItem","useSelect","select","getEntityRecord","hasFinishedResolution","getEntityRecordParameters","newItem","name","uuid","border","paddingTop","paddingBottom","aria-label","SortableList","SortableContainer","items","ChildComponent","ItemComponent","SortableElement","fontFamily","itemKey","sortIndex","totalItems","StyleWrapper","ContentPicker","onPickChange","ids","maxContentItems","singlePickedLabel","multiPickedLabel","uniqueContentItems","excludeCurrentPost","PickedItemChild","searchStyle","content","setContent","currentPostId","getCurrentPostId","useMemo","push","previousContent","uuidv4","Boolean","useDragHandle","deletedItem","onSortEnd","oldIndex","newIndex","newContent","arrayMove","ContentPlaceholder","blockProps","onSkip","loadingComponent","children","isColumnLayout","textAlign","pickedContent","isLink","LinkToolbarButton","query","isLinkOpen","setIsLinkOpen","aria-expanded","aria-haspopup","icon","showTooltip","onClose","showInitialSuggestions","suggestionsQuery","p","settings","CaretHeadingLink","heading","headingSize","disableIcon","tagName","h","formattingControls","keepPlaceholderOnFocus","Icon","size","BlockInserterButton","blockName","clientId","attributes","tooltipPosition","currentBlock","getBlock","innerBlocks","nextIndex","newBlock","createBlock","dispatch","insertBlock","HeadingLevelIcon","level","isPressed","levelToPath","1","2","3","4","5","6","POPOVER_PROPS","isAlternate","HeadingLevelToolbar","selectedLevel","levels","popoverProps","renderToggle","onToggle","isOpen","onKeyDown","event","keyCode","DOWN","preventDefault","stopPropagation","renderContent","isCollapsed","controls","targetLevel","isActive","sprintf","MediaDropZone","attachmentId","onUpdate","attachment","warn","mediaType","mediaSize","setId","isUploading","setIsUploading","m","getMedia","media","src","media_details","sizes","targetSize","source_url","onMediaUpdate","onDropImage","filesList","uploadMedia","allowedTypes","onFileChange","onError","message","fallback","onSelect","render","open","isSecondary","isBusy","onFilesDrop","ifMatchSetAttribute","needle","haystack","attrKey","attrValue","getTerms","taxonomy","terms","slug","replace","toLowerCase","parent","getTermsAsOptions","termValue","sortByLabel","labelOptions","Object","keys","forEach","termObj","sort","a","b","mailChimpInterests","regeneratorRuntime","deprecated","postID","multiline","enableExcerpt","default","enableExcerptBelow","enableAltTaxonomy","migrate","enableMeta","metaTaxonomy","save","props","Content","Inspector","context","rootClientId","isRefreshing","refresh","imageSlot","enableHeader","enableExtra","enableBreakingNews","enableEmphasis","disableMobileStyles","help","checked","prcBreakingNews","alert","newMetaTaxonomy","isInteger","isDestructive","Placeholder","loadingStub","setLoadingStub","URLControl","isModalOpen","setIsModalOpen","inputValue","setInputValue","setPost","onModalClose","onRequestClose","newPostId","variant","minWidth","padding","alignItems","Toolbar","headerSize","columnWidth","columnIsEqualWidth","svgPath","ImageSlotIcon","selected","arrowRight","arrowLeft","arrowUp","arrowDown","close","more","ImageSizeIcon","currentlyActive","A1","A2","A3","A4","XL","handleImageSizeChange","newSize","isDisabled","Controls","ALLOWED_MEDIA_TYPES","small","hidpi","smallHidpi","ImageDisplay","img","getImgURL","args","resize","addQueryArgs","getImgSrcSet","threshold","srcSet","alt","sources","href","Edit","Img","slot","isXL","isA1","isA2","isA3","isA4","classNames","ui","bordered","Excerpt","sansSerif","enabled","classes","Extra","breakingNews","Header","altHeaderWeight","large","medium","light","t","allowedFormats","Meta","termOptions","l","IMAGE_SIZES","Preview","logicalClasses","blockPropsArgs","useBlockProps","headerClasses","imageClasses","excerptClasses","class","srcset","formats","edit","isPreview","inLoop","setTermOptions","payload","handlePostIdCaseChange","Number","getBlockRootClientId","enableAltHeaderWeight","variations","isDefault","metadata","example","registerBlockType"],"mappings":"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","file":"blocks/story-item-9166e83d.js","sourcesContent":["(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","module.exports = moment;","(function() { module.exports = window[\"wp\"][\"data\"]; }());","/**\n * External Dependencies\n */\n import * as moment from 'moment';\n\n/**\n * WordPress Dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst setArtBySize = (imageSize, postId, setAttributes) => {\n    if (0 !== postId && false !== setAttributes) {\n        apiFetch({\n            path: `/prc-api/v2/get-art/?postId=${postId}`,\n        }).then(data => {\n            if (false !== data) {\n                if (\n                    undefined !== data[imageSize] &&\n                    false !== setAttributes\n                ) {\n                    setAttributes({\n                        image: data[imageSize].rawUrl,\n                        isChartArt: data[imageSize].chartArt,\n                    });\n                }\n            }\n        });\n    }\n};\n\n/**\n * Converts a post object to attributes for a story item.\n * @TODO Have moment clean up the date data.\n * @param {*} post\n * @param {*} imageSize\n * @param {*} isRefresh\n * @returns\n */\nconst getAttributesFromPost = (opts) => {\n    const {\n        post,\n        imageSize,\n        isRefresh = false\n    } = opts;\n    console.log(getAttributesFromPost, post);\n\n    const d = new Date(post.date);\n    const date = moment(d).format('MMM D, YYYY');\n\n    const storyItem = {\n        title: post.title.hasOwnProperty('rendered')\n            ? post.title.rendered\n            : post.title,\n        // @TODO change back to excerpt everywhere, write a deprecation transition for that and excerptBelow?\n        excerpt: post.excerpt.hasOwnProperty('rendered')\n            ? post.excerpt.rendered\n            : post.excerpt,\n        url: post.link, // @TODO where is this `link` coming from, why is it not url or permalink.\n        label: post.hasOwnProperty('label') ? post.label : 'Report',\n        date,\n        postId: post.id,\n    };\n\n    if ( true !== isRefresh ) {\n        storyItem.extra = '';\n    }\n\n    if (post.art) {\n        const art = post.art;\n        storyItem.image = art[imageSize].rawUrl;\n        storyItem.isChartArt = art[imageSize].chartArt;\n    }\n\n    console.log('getAttributesFromPost', post, storyItem);\n\n    return storyItem;\n};\n\nconst getAttributesFromURL = (opts) => {\n    const {\n        url,\n        imageSize,\n    } = opts;\n\n    return new Promise((resolve, reject) => {\n        apiFetch({\n            path: '/prc-api/v2/blocks/story-item/get-post-by-url',\n            method: 'POST',\n            data: { url },\n        })\n            .then(post => {\n                console.log('getAttributesFromURL', post);\n                if (false !== post) {\n                    const attrs = getAttributesFromPost({\n                        post,\n                        imageSize,\n                        isRefresh: false\n                    });\n                    resolve(attrs);\n                } else {\n                    reject(post);\n                }\n            })\n            .catch(err => {\n                console.error(err);\n                reject(err);\n            });\n    });\n}\n\n/**\n * Get the attributes for a stub, then throw a warning that a stub can not be found.\n * @TODO allow searching by post id OR url, if its by url use the above function. We need to cehck for a url and then use getAttributesFromURL.\n *\n * @param {*} postId\n * @param {*} imageSize\n * @param {*} isRefresh\n * @param {*} setAttributes\n * @returns\n */\nconst setPostAttributes = (options) => {\n    const {\n        setAttributes,\n        postId = false,\n        url = false,\n        imageSize = 'A1',\n        isRefresh = false,\n    } = options;\n\n    if ((false === postId && false === url) || undefined === setAttributes) {\n        return;\n    }\n\n\n    if ( false !== url ) {\n        getAttributesFromURL({\n            url,\n            imageSize\n        })\n            .then(attrs => {\n                console.log('setPostAttributes -> by url:', attrs);\n                setAttributes(attrs);\n            }).catch(err => {\n                console.error(err);\n            });\n    }\n\n    apiFetch({\n        path: `/wp/v2/stub/${postId}`,\n        method: 'GET',\n    })\n        .then(post => {\n            console.log('setPostAttributes -> by id:', postId, post);\n            if (false !== post) {\n                const attrs = getAttributesFromPost({\n                    post,\n                    imageSize,\n                    isRefresh\n                });\n                setAttributes(attrs);\n            }\n        })\n        .catch(err => console.error(err));\n};\n\nconst resetAttributes = (options) => {\n\n}\n\nexport {\n    setArtBySize,\n    setPostAttributes,\n    resetAttributes\n}\n","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"wp\"][\"primitives\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"url\"]; }());","(function() { module.exports = window[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"coreData\"]; }());","/**\n * WordPress Dependencies\n */\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nfunction useDebounce(value, delay) {\n    // State and setters for debounced value\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(\n        () => {\n            // Update debounced value after delay\n            const handler = setTimeout(() => {\n                setDebouncedValue(value);\n            }, delay);\n            // Cancel the timeout if value changes (also on delay change or unmount)\n            // This is how we prevent debounced value from updating if value is changed ...\n            // .. within the delay period. Timeout gets cleared and restarted.\n            return () => {\n                clearTimeout(handler);\n            };\n        },\n        [value, delay], // Only re-call effect if value or delay changes\n    );\n    return debouncedValue;\n}\n\nexport default useDebounce;","import { useEffect, useState } from '@wordpress/element';\n\n// adapted from:  https://usehooks.com/useWindowSize/\n// usage:   const {width, height} = useWindowSize();\nfunction useWindowSize() {\n    const [windowSize, setWindowSize] = useState({\n        width: undefined,\n        height: undefined,\n    });\n\n    useEffect(() => {\n        // Handler to call on window resize\n        function handleResize() {\n            // Set window width/height to state\n            setWindowSize({\n                width: window.innerWidth,\n                height: window.innerHeight,\n            });\n        }\n\n        // Add event listener\n        window.addEventListener('resize', handleResize);\n\n        // Call handler right away so state gets updated with initial window size\n        handleResize();\n\n        // Remove event listener on cleanup\n        return () => window.removeEventListener('resize', handleResize);\n    }, []); // Empty array ensures that effect is only run on mount\n\n    return windowSize;\n}\n\nexport default useWindowSize;\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\n\n/** \n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Button, TextHighlight, Tooltip } from '@wordpress/components';\n\nconst ButtonStyled = styled(Button)`\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n`;\n\n/**\n * SearchItem\n *\n * @param {Object} props react props\n * @param props.suggestion\n * @param props.onClick\n * @param props.searchTerm\n * @param props.isSelected\n * @param props.id\n * @return {*} React JSX\n */\nconst SearchItem = ({ suggestion, onClick, searchTerm, isSelected, id, contentTypes }) => {\n\tconst showType = suggestion.type && contentTypes.length > 1;\n\n\treturn (\n\t\t<Tooltip text={decodeEntities(suggestion.title)}>\n\t\t\t<ButtonStyled\n\t\t\t\tid={id}\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={`block-editor-link-control__search-item is-entity ${\n\t\t\t\t\tisSelected && 'is-selected'\n\t\t\t\t}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextHighlight text={decodeEntities(suggestion.title)} highlight={searchTerm} />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: !showType ? 0 : null,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(suggestion.url)) || ''}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t{showType && (\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t\t{/* Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label. */}\n\t\t\t\t\t\t{suggestion.type === 'post_tag' ? 'tag' : suggestion.type}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</ButtonStyled>\n\t\t</Tooltip>\n\t);\n};\n\nexport default SearchItem;","/**\n * External Dependencies\n */\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/react';\nimport { useDebounce } from '../../hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { SearchControl, TextControl, Spinner, NavigableMenu, KeyboardShortcuts } from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment, useState, useRef, useEffect } from '@wordpress/element'; // eslint-disable-line\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal Dependencies\n */\nimport SearchItem from './search-item';\n\nconst NAMESPACE = 'prc-content-search';\n\nconst searchCache = {};\n\nconst ContentSearch = ({ onSelectItem, placeholder, label, style = 'search', contentTypes, mode, excludeItems, perPage }) => {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst searchString = useDebounce(searchInput, 500);\n\t// Determine if searchString is a url\n\tconst [searchStringIsUrl, setSearchStringIsUrl] = useState(false);\n\n\tconst [searchResults, setSearchResults] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [selectedItem, setSelectedItem] = useState(null);\n\tconst abortControllerRef = useRef();\n\n\tconst mounted = useRef(true);\n\n\t/**\n\t * handleSelection\n\t *\n\t * update the selected item in state to either the selected item or null if the\n\t * selected item does not have a valid id\n\t *\n\t * @param {*} item\n\t */\n\tconst handleOnNavigate = (item) => {\n\t\tif (item === 0) {\n\t\t\tsetSelectedItem(null);\n\t\t}\n\n\t\tsetSelectedItem(item);\n\t}\n\n\tconst getPostByUrl = (url) => {\n        if (undefined === url) {\n            return false;\n        }\n        return new Promise((resolve, reject) => {\n            apiFetch({\n                path: '/prc-api/v2/utils/get-post-by-url',\n                method: 'POST',\n                data: { url },\n            })\n                .then((post) => {\n                    console.log('getPostByUrl', post);\n                    resolve(post);\n                })\n                .catch((err) => reject(err));\n        });\n    };\n\n\t/**\n\t * handleItemSelection\n\t *\n\t * reset the search input & item container\n\t * trigger the onSelectItem callback passed in via props\n\t *\n\t * @param {*} item\n\t */\n\tconst handleItemSelection = (item) => {\n\t\tsetSearchResults([]);\n\t\tsetSearchInput('');\n\t\tonSelectItem(item);\n\t}\n\n\tconst filterResults = (results) => {\n\t\treturn results.filter((result) => {\n\t\t\tlet keep = true;\n\n\t\t\tif (excludeItems.length) {\n\t\t\t\tkeep = excludeItems.every((item) => item.id !== result.id);\n\t\t\t}\n\n\t\t\treturn keep;\n\t\t});\n\t}\n\n\tconst hasSearchString = !!searchString.length;\n\tconst hasSearchResults = !!searchResults.length;\n\n\t/**\n\t * handleSearchStringChange\n\t *\n\t * Using the keyword and the list of tags that are linked to the parent block\n\t * search for posts/terms that match and return them to the autocomplete component.\n\t *\n\t * @param {string} keyword search query string\n\t */\n\tconst handleSearchStringChange = (keyword, isUrl = false) => {\n\t\tif (abortControllerRef.current) {\n\t\t\tabortControllerRef.current.abort();\n\t\t}\n\n\t\tif (keyword.trim() === '') {\n\t\t\tsetIsLoading(false);\n\t\t\tsetSearchResults([]);\n\t\t\tabortControllerRef.current = null;\n\t\t\treturn;\n\t\t}\n\n\t\tabortControllerRef.current = new AbortController();\n\n\t\tsetIsLoading(true);\n\n\t\tconst searchQuery = `wp/v2/search/?search=${keyword}&subtype=${contentTypes.join(\n\t\t\t',',\n\t\t)}&type=${mode}&_embed&per_page=${perPage}`;\n\n\t\tif (searchCache[searchQuery]) {\n\t\t\tabortControllerRef.current = null;\n\n\t\t\tsetSearchResults(filterResults(searchCache[searchQuery]));\n\t\t\tsetIsLoading(false);\n\t\t} else if (isUrl) {\n\t\t\tconsole.log('isUrl', keyword);\n\t\t\tgetPostByUrl(keyword)\n\t\t\t\t.then((post) => {\n\t\t\t\t\tif (mounted.current) {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tID,\n\t\t\t\t\t\t\tpost_title,\n\t\t\t\t\t\t\tpost_type,\n\t\t\t\t\t\t\tpermalink,\n\t\t\t\t\t\t} = post;\n\t\t\t\t\t\tabortControllerRef.current = null;\n\n\t\t\t\t\t\tconst result = [{\n\t\t\t\t\t\t\tid: ID,\n\t\t\t\t\t\t\tsubtype: post_type,\n\t\t\t\t\t\t\ttitle: post_title,\n\t\t\t\t\t\t\ttype: \"post\",\n\t\t\t\t\t\t\turl: permalink,\n\t\t\t\t\t\t}];\n\n\t\t\t\t\t\tconsole.log(\"this is where we should do our stuff...\", result, post);\n\n\t\t\t\t\t\tsearchCache[searchQuery] = result;\n\n\t\t\t\t\t\tsetSearchResults(filterResults(result));\n\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).catch((error, code) => {\n\t\t\t\tconsole.log(\"Hey this is a url error, we didnt find a matching post... now what?\", keyword);\n\t\t\t\t// Stop spinning.\n\t\t\t\tsetIsLoading(false);\n\t\t\t});\n\t\t} else {\n\t\t\tapiFetch({\n\t\t\t\tpath: searchQuery,\n\t\t\t\tsignal: abortControllerRef.current.signal\n\t\t\t}).then((results) => {\n\t\t\t\tif (mounted.current === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\"search Results\", results);\n\n\t\t\t\tabortControllerRef.current = null;\n\n\t\t\t\tsearchCache[searchQuery] = results;\n\n\t\t\t\tsetSearchResults(filterResults(results));\n\n\t\t\t\tsetIsLoading(false);\n\t\t\t}).catch((error, code) => {\n\t\t\t\t// fetch_error means the request was aborted\n\t\t\t\tif (error.code !== 'fetch_error') {\n\t\t\t\t\tsetSearchResults([]);\n\t\t\t\t\tabortControllerRef.current = null;\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmounted.current = false;\n\t\t};\n\t}, []);\n\n\tuseEffect(()=>{\n\t\tif ( '' !== searchString ) {\n\t\t\tconst isUrl = searchString.match(/^(http|https):\\/\\//);\n\t\t\tsetSearchStringIsUrl(isUrl);\n\t\t\thandleSearchStringChange(searchString, isUrl);\n\t\t}\n\t}, [searchString]);\n\n\tconst listCSS = css`\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t`;\n\n\treturn (\n\t\t<NavigableMenu onNavigate={handleOnNavigate} orientation=\"vertical\">\n\t\t\t<div style={{\n\t\t\t\tdisplay: 'flex'\n\t\t\t}}>\n\t\t\t\t<div style={{\n\t\t\t\t\tflexGrow: '1',\n\t\t\t\t}}>\n\t\t\t\t\t{ 'minimal' === style && (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword)=> setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{ 'search' === style && (\n\t\t\t\t\t\t<SearchControl\n\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\tonChange={(keyword)=> setSearchInput(keyword)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tright: 'minimal' === style ? '8px' : '50px',\n\t\t\t\t\t\tmarginTop: 'minimal' === style ? '27px' : '10px',\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{hasSearchString ? (\n\t\t\t\t<ul\n\t\t\t\t\tclassName={`${NAMESPACE}-list`}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: '0',\n\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\tmarginLeft: '0',\n\t\t\t\t\t\tpaddingLeft: '0',\n\t\t\t\t\t\tlistStyle: 'none',\n\t\t\t\t\t}}\n\t\t\t\t\tcss={listCSS}\n\t\t\t\t>\n\t\t\t\t\t{!isLoading && !hasSearchResults && false === searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{ color: 'inherit', cursor: 'default', paddingLeft: '3px' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Nothing found.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading && !hasSearchResults && searchStringIsUrl && (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item components-button`}\n\t\t\t\t\t\t\tstyle={{ color: 'inherit', cursor: 'default', paddingLeft: '3px' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Press enter to change url.', 'prc-block-components')}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{!isLoading && searchResults.map((item, index) => {\n\t\t\t\t\t\tif (!item.title.length) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\tclassName={`${NAMESPACE}-list-item`}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tmarginBottom: '0',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SearchItem\n\t\t\t\t\t\t\t\t\tonClick={() => handleItemSelection(item)}\n\t\t\t\t\t\t\t\t\tsearchTerm={searchString}\n\t\t\t\t\t\t\t\t\tsuggestion={item}\n\t\t\t\t\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\t\t\t\t\tisSelected={selectedItem === index + 1}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t) : null}\n\t\t</NavigableMenu>\n\t);\n};\n\nexport { ContentSearch };\n","/**\n * External Dependencies\n */\nimport styled from '@emotion/styled';\nimport { sortableHandle } from 'react-sortable-hoc';\n\n/**\n * WordPress Dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * SVG Drag Handle\n */\nconst DragHandle = sortableHandle(() => (\n\t<svg\n\t\tstyle={{ marginRight: '5px', cursor: 'grab', flexShrink: 0 }}\n\t\twidth=\"18\"\n\t\theight=\"18\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 18 18\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<path d=\"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z\" />\n\t</svg>\n));\n\nconst Wrapper = styled('div')`\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n`;\n\n\n/**\n * PickedItem\n *\n * @param {Object} props react props\n * @return {*} React JSX\n */\nconst PickedItem = ({ item, isOrderable = false, handleItemDelete, mode }) => {\n\tconst type = mode === 'post' ? 'postType' : 'taxonomy';\n\n\t// This will return undefined while the item data is being fetched. If the item comes back\n\t// empty, it will return null, which is handled in the effect below.\n\tconst preparedItem = useSelect(\n\t\t(select) => {\n\t\t\tconst { getEntityRecord, hasFinishedResolution } = select('core');\n\n\t\t\tconst getEntityRecordParameters = [type, item.type, item.id];\n\t\t\tconst result = getEntityRecord(...getEntityRecordParameters);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\"Has Item\", result);\n\t\t\t\tconst newItem = {\n\t\t\t\t\ttitle: mode === 'post' ? result.title.rendered : result.name,\n\t\t\t\t\turl: result.link,\n\t\t\t\t\tid: result.id,\n\t\t\t\t};\n\n\t\t\t\tif (item.uuid) {\n\t\t\t\t\tnewItem.uuid = item.uuid;\n\t\t\t\t}\n\n\t\t\t\treturn newItem;\n\t\t\t}\n\n\t\t\tif (hasFinishedResolution('getEntityRecord', getEntityRecordParameters)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\t[item.id, type],\n\t);\n\n\t// If `getEntityRecord` did not return an item, pass it to the delete callback.\n\tuseEffect(() => {\n\t\tif (preparedItem === null) {\n\t\t\thandleItemDelete(item);\n\t\t}\n\t}, [item, handleItemDelete, preparedItem]);\n\n\treturn preparedItem ? (\n\t\t<Wrapper\n\t\t\tstyle={{\n\t\t\t\tborder: '2px dashed #ddd',\n\t\t\t\tpaddingTop: '10px',\n\t\t\t\tpaddingBottom: '10px',\n\t\t\t\tpaddingLeft: isOrderable ? '3px' : '8px',\n\t\t\t}}\n\t\t\tclassName=\"block-editor-link-control__search-item is-entity\"\n\t\t>\n\t\t\t{isOrderable ? <DragHandle /> : ''}\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{decodeEntities(preparedItem.title)}\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t{filterURLForDisplay(safeDecodeURI(preparedItem.url)) || ''}\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\thandleItemDelete(preparedItem);\n\t\t\t\t}}\n\t\t\t\taria-label={__('Delete item', '10up-block-components')}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t</Wrapper>\n\t) : (\n\t\t<div />\n\t);\n};\n\nexport default PickedItem;","/**\n * External Dependencies\n */\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\n\n/**\n * Internal Dependencies\n */\nimport PickedItem from './picked-item';\n\nconst SortableList = SortableContainer(({ items, isOrderable, handleItemDelete, mode, ChildComponent = false }) => {\n\tconst ItemComponent = false !== ChildComponent ? (isOrderable ? SortableElement(ChildComponent) : ChildComponent) : isOrderable ? SortableElement(PickedItem) : PickedItem;\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tfontFamily:\n\t\t\t\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif',\n\t\t\t}}\n\t\t>\n\t\t\t{items.map((item, index) => {\n\t\t\t\tconst itemKey = item.uuid ? item.uuid : item.id;\n\t\t\t\treturn <ItemComponent\n\t\t\t\t\tisOrderable={isOrderable && items.length > 1 ? isOrderable : false}\n\t\t\t\t\tkey={`item-${itemKey}`}\n\t\t\t\t\tindex={index}\n\t\t\t\t\thandleItemDelete={handleItemDelete}\n\t\t\t\t\tsortIndex={index}\n\t\t\t\t\titem={item}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\ttotalItems={items.length}\n\t\t\t\t/>\n\t\t\t})}\n\t\t</div>\n\t);\n});\n\nexport default SortableList;","/**\n * External Dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport arrayMove from 'array-move';\nimport styled from '@emotion/styled';\n\n/**\n * WordPress Dependencies\n */\nimport { select } from '@wordpress/data';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, Modal } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ContentSearch } from '../content-search';\nimport SortableList from './sortable-list';\n\nconst NAMESPACE = 'prc-content-picker';\n\n/**\n * Unfortunately, we had to use !important because on PickedItem we couldn't @emotion/styled css\n * as it was breaking sortability from react-sortable-hoc\n */\nconst StyleWrapper = styled('div')`\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n`;\n\n/**\n * Content Picker\n */\nconst ContentPicker = ({\n\tlabel,\n\tplaceholder,\n\tmode = 'post',\n\tcontentTypes = ['post', 'page'],\n\tonPickChange = (ids) => {\n        console.log('Content picker list change', ids); // eslint-disable-line no-console\n    },\n\tmaxContentItems = 1,\n\tisOrderable = false,\n\tsinglePickedLabel = __('You have selected the following item:', 'prc-block-components'),\n\tmultiPickedLabel = __('You have selected the following items:', 'prc-block-components'),\n\tvalue = [],\n\tuniqueContentItems = true,\n\texcludeCurrentPost = true,\n\tperPage = 50,\n\tPickedItemChild = false,\n\tsearchStyle = 'search',\n}) => {\n\tconst [content, setContent] = useState(value);\n\n\tconst currentPostId = select('core/editor')?.getCurrentPostId();\n\n\tuseEffect(()=> {\n\t\tconsole.log(\"Init content state\", value);\n\t}, []);\n\n\t// Run onPickChange callback when content changes.\n\tuseEffect(() => {\n\t\tif ( content !== value && content.length !== 0 ) {\n\t\t\tconsole.log(\"useEffect onPickChange->\", content); // eslint-disable-line no-console\n\t\t\tonPickChange(content);\n\t\t}\n\t}, [content]);\n\n\tconst handleSelect = (item, isUrl = false) => {\n\t\tconsole.log(\"handleSelect->\", item, isUrl); // eslint-disable-line no-console\n\t\tif ( true === isUrl ) {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t} else {\n\t\t\tsetContent((previousContent) => [\n\t\t\t\t{\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t\ttype: 'subtype' in item ? item.subtype : item.type,\n\t\t\t\t\turl: item.url,\n\t\t\t\t},\n\t\t\t\t...previousContent,\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst onDeleteItem = (deletedItem) => {\n\t\tsetContent((previousContent) => {\n\t\t\treturn previousContent.filter(({ id, uuid }) => {\n\t\t\t\tif (deletedItem.uuid) {\n\t\t\t\t\treturn uuid !== deletedItem.uuid;\n\t\t\t\t} else {\n\t\t\t\t\treturn id !== deletedItem.id;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tconst excludeItems = useMemo(() => {\n\t\tconst items = uniqueContentItems ? [...content] : [];\n\n\t\tif (excludeCurrentPost && currentPostId) {\n\t\t\titems.push({\n\t\t\t\tid: currentPostId\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [content, currentPostId, excludeCurrentPost, uniqueContentItems]);\n\n\treturn (\n\t\t<div className={`${NAMESPACE}`}>\n\t\t\t{(!content.length || (content.length && content.length < maxContentItems)) && (\n\t\t\t\t<ContentSearch\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\texcludeItems={excludeItems}\n\t\t\t\t\tonSelectItem={handleSelect}\n\t\t\t\t\tcontentTypes={contentTypes}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tperPage={perPage}\n\t\t\t\t\tstyle={searchStyle}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{Boolean(content?.length) > 0 && (\n\t\t\t\t<StyleWrapper>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '15px',\n\t\t\t\t\t\t\tmarginBottom: '2px',\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content.length > 1 ? multiPickedLabel : singlePickedLabel}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={content}\n\t\t\t\t\t\tuseDragHandle\n\t\t\t\t\t\thandleItemDelete={onDeleteItem}\n\t\t\t\t\t\tisOrderable={isOrderable}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\tonSortEnd={({ oldIndex, newIndex }) => {\n\t\t\t\t\t\t\tconst newContent = [...arrayMove(content, oldIndex, newIndex)];\n\t\t\t\t\t\t\tconsole.log(\"newContent?\", newContent);\n\t\t\t\t\t\t\tsetContent(newContent);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tChildComponent={PickedItemChild}\n\t\t\t\t\t/>\n\t\t\t\t</StyleWrapper>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { ContentPicker };\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n    Button,\n    Placeholder as WPComPlaceholder,\n    Spinner,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\n import { ContentPicker } from '../content-picker';\n\nconst ContentPlaceholder = ({\n    blockProps,\n    onChange,\n    onSkip,\n    mode = 'post',\n    contentTypes = [ 'stub' ],\n    label = __('Search for a post', 'prc-block-components'),\n    placeholder = __('Search for a post or pate in a url...', 'prc-block-components'),\n    value = [],\n    loadingComponent = false,\n    children,\n}) => {\n    return (\n        <div {...blockProps}>\n            <WPComPlaceholder\n                label={`${label}:`}\n                isColumnLayout\n            >\n                {false !== loadingComponent && (\n                    <div style={{\n                        textAlign: 'center',\n                    }}>\n                        <Spinner />\n                        <p className=\"sans-serif\">\n                            Loading object...\n                        </p>\n                    </div>\n                )}\n                {false === loadingComponent && (\n                    <Fragment>\n                        {children}\n                        <ContentPicker\n                            onPickChange={ (pickedContent) => {\n                                console.log('Step1:', pickedContent);\n                                onChange(pickedContent);\n                            } }\n                            mode={mode}\n                            label={`${label} or enter a url:`}\n                            placeholder={placeholder}\n                            contentTypes={contentTypes}\n                            value={value}\n                        />\n                        <Button\n                            isLink\n                            onClick={()=>{\n                                onSkip();\n                            }}\n                            text={__('Skip')}\n                            style={{\n                                paddingLeft: '9px'\n                            }}\n                        />\n                    </Fragment>\n                )}\n            </WPComPlaceholder>\n        </div>\n    );\n}\n\nexport { ContentPlaceholder };","const DEFAULT_STATE = [];\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n    // Cloned is used in reorder, setItem, and setItemProp:\n    const cloned = [...state];\n    // eslint-disable-next-line default-case\n    switch (action.type) {\n        case 'SEED':\n            return [...action.items];\n        case 'APPEND':\n            return [...state, ...action.items];\n        case 'PREPEND':\n            return [...action.items, ...state];\n        case 'INSERT':\n            return [\n                ...state.slice(0, action.index),\n                ...action.items,\n                ...state.slice(action.index),\n            ];\n        case 'APPLY':\n            return state.map((item, index) => action.fn(item, index));\n        case 'REMOVE':\n            return state.filter((_, index) => !action.indexes.includes(index));\n        case 'REORDER':\n            // eslint-disable-next-line no-case-declarations\n            const item = state[action.from];\n\n            cloned.splice(action.from, 1);\n            cloned.splice(action.to, 0, item);\n\n            return cloned;\n        case 'SET_ITEM':\n            cloned[action.index] = action.item;\n            return cloned;\n        case 'SET_ITEM_PROP':\n            cloned[action.index] = {\n                ...cloned[action.index],\n                [action.prop]: action.value,\n            };\n            return cloned;\n    }\n\n    return state;\n};\n\nexport default reducer;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport { ToolbarButton, Popover } from '@wordpress/components';\n\n/**\n * Link control in a toolbar button that defaults to searching for topic terms\n */\nconst LinkToolbarButton = ({\n    url,\n    onChange,\n    query = { type: 'term', subtype: 'topic' },\n}) => {\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n    return (\n        <Fragment>\n            <ToolbarButton\n                aria-expanded={isLinkOpen}\n                aria-haspopup=\"true\"\n                label={__('Set Link')}\n                icon=\"admin-links\"\n                onClick={() => setIsLinkOpen(!isLinkOpen)}\n                showTooltip\n            />\n            {true === isLinkOpen && (\n                <Popover\n                    position=\"bottom center\"\n                    onClose={() => setIsLinkOpen(false)}\n                >\n                    <LinkControl\n                        className=\"wp-block-navigation-link__inline-link-input\"\n                        value={{ url }}\n                        showInitialSuggestions\n                        suggestionsQuery={query}\n                        onChange={p => onChange(p)}\n                        settings={[]}\n                    />\n                </Popover>\n            )}\n        </Fragment>\n    );\n};\n\nexport default LinkToolbarButton;\n","/**\n * External Dependencies\n */\nimport { Icon } from 'semantic-ui-react';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { Flex, FlexItem, FlexBlock, ToolbarGroup } from '@wordpress/components';\nimport { BlockControls, RichText } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport LinkToolbarButton from '../link-toolbar-button';\n\nconst CaretHeadingLink = ({\n\turl,\n\theading,\n\theadingSize = 'h2',\n\tdisableIcon = false,\n\tsetAttributes,\n}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<LinkToolbarButton\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tonChange={p => {\n\t\t\t\t\t\t\tsetAttributes({ url: p.url });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Flex style={{ paddingBottom: '1em' }}>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName={headingSize}\n\t\t\t\t\t\tvalue={heading}\n\t\t\t\t\t\tonChange={h => setAttributes({ heading: h })}\n\t\t\t\t\t\tplaceholder=\"Heading...\"\n\t\t\t\t\t\tformattingControls={[]}\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\tclassName=\"sans-serif\"\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t{true !== disableIcon && (\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"chevron right\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{ marginLeft: '0.5em' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</Fragment>\n\t);\n};\n\nexport default CaretHeadingLink;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { select, dispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\n\nconst BlockInserterButton = ({\n\tlabel = '',\n\tblockName,\n\tclientId,\n\tclassName,\n\tattributes = {},\n}) => {\n\tconst handleClick = () => {\n\t\tconst currentBlock = select('core/block-editor').getBlock(clientId);\n\t\tconsole.log('debug info...', currentBlock.innerBlocks.length);\n\t\tconst nextIndex =\n\t\t\t0 === currentBlock.innerBlocks.length\n\t\t\t\t? 0\n\t\t\t\t: currentBlock.innerBlocks.length + 1;\n\t\tconst newBlock = createBlock(blockName, attributes);\n\t\tdispatch('core/block-editor').insertBlock(\n\t\t\tnewBlock,\n\t\t\tnextIndex,\n\t\t\tclientId,\n\t\t);\n\t};\n\treturn (\n\t\t<Button\n\t\t\tlabel={__(label)}\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName=\"block-editor-button-block-appender\"\n\t\t>\n\t\t\t{__(label)}\n\t\t</Button>\n\t);\n};\n\nexport default BlockInserterButton;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n    Dropdown,\n    Toolbar,\n    ToolbarButton,\n    ToolbarGroup,\n    Path,\n    SVG,\n} from '@wordpress/components';\nimport { DOWN } from '@wordpress/keycodes';\n\nconst HeadingLevelIcon = ({ level, isPressed = false }) => {\n    const levelToPath = {\n        1: 'M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z',\n        2: 'M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z',\n        3: 'M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z',\n        4: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z',\n        5: 'M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z',\n        6: 'M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z',\n    };\n    if (!levelToPath.hasOwnProperty(level)) {\n        return null;\n    }\n\n    return (\n        <SVG\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            isPressed={isPressed}\n        >\n            <Path d={levelToPath[level]} />\n        </SVG>\n    );\n};\n\nconst POPOVER_PROPS = {\n    className: 'block-library-heading-level-dropdown',\n    isAlternate: true,\n};\n\nconst HeadingLevelToolbar = ({ selectedLevel, levels = [2, 3], onChange }) => {\n    console.log('HeadingLevelToolbar', selectedLevel);\n    return (\n        <ToolbarGroup>\n            <Dropdown\n                popoverProps={POPOVER_PROPS}\n                renderToggle={({ onToggle, isOpen }) => {\n                    const openOnArrowDown = event => {\n                        if (!isOpen && event.keyCode === DOWN) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            onToggle();\n                        }\n                    };\n\n                    return (\n                        <ToolbarButton\n                            aria-expanded={isOpen}\n                            aria-haspopup=\"true\"\n                            icon={<HeadingLevelIcon level={selectedLevel} />}\n                            label={__('Change heading level')}\n                            onClick={onToggle}\n                            onKeyDown={openOnArrowDown}\n                            showTooltip\n                        />\n                    );\n                }}\n                renderContent={() => (\n                    <Toolbar\n                        className=\"block-library-heading-level-toolbar\"\n                        label={__('Change heading level')}\n                    >\n                        <ToolbarGroup\n                            isCollapsed={false}\n                            controls={levels.map(targetLevel => {\n                                const isActive = targetLevel === selectedLevel;\n                                return {\n                                    icon: (\n                                        <HeadingLevelIcon\n                                            level={targetLevel}\n                                            isPressed={isActive}\n                                        />\n                                    ),\n                                    title: sprintf(\n                                        // translators: %s: heading level e.g: \"1\", \"2\", \"3\"\n                                        __('Heading %d'),\n                                        targetLevel,\n                                    ),\n                                    isActive,\n                                    onClick() {\n                                        onChange(targetLevel);\n                                    },\n                                };\n                            })}\n                        />\n                    </Toolbar>\n                )}\n            />\n        </ToolbarGroup>\n    );\n};\n\nexport default HeadingLevelToolbar;\n","/**\n * WordPress Dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tDropZone,\n} from '@wordpress/components';\nimport { useState, Fragment } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst MediaDropZone = ({\n\tattachmentId = false,\n\tonUpdate = (attachment) => {\n\t\tconsole.warn('Media DropZone Attachment, use onUpdate prop when using <MediaDropZone/>: ', attachment)\n\t},\n\tmediaType = ['image'],\n\tmediaSize = 'thumbnail'\n}) => {\n\tconst [id, setId] = useState(attachmentId);\n\tconst [isUploading, setIsUploading] = useState(false);\n\n\t/**\n\t * When id (attachmentId) changes update the media and get its src, dimensions, and type.\n\t */\n\tconst { media, src, width, height, type } = useSelect(select => {\n\t\tconst m = id ? select('core').getMedia(id) : false;\n\t\tconsole.log('m...', id, m);\n\t\tif ( undefined === m || false === m ) {\n\t\t\treturn {\n\t\t\t\tmedia: false,\n\t\t\t\tsrc: false,\n\t\t\t\twidth: false,\n\t\t\t\theight: false,\n\t\t\t\ttype: false\n\t\t\t}\n\t\t}\n\n\t\tif ( !m.hasOwnProperty('size') && m.hasOwnProperty('media_details') && m.media_details.hasOwnProperty('sizes') ) {\n\t\t\tm.sizes = m.media_details.sizes;\n\t\t}\n\t\tconst targetSize = false !== m && m.hasOwnProperty('sizes') && m.sizes.hasOwnProperty(mediaSize) ? mediaSize : 'thumbnail';\n\t\treturn {\n\t\t\tmedia: m,\n\t\t\tsrc: false !== m ? m.sizes[targetSize].source_url : false,\n\t\t\twidth: false !== m ? m.sizes[targetSize].width : 200,\n\t\t\theight: false !== m ? m.sizes[targetSize].height : 100,\n\t\t\ttype: false !== m ? m.type : false,\n\t\t};\n\t}, [id]);\n\n\tconst onMediaUpdate = (media) => {\n\t\tconsole.log(\"onMediaUpdate\", id, media.id);\n\t\tif ( media.id !== id ) {\n\t\t\tsetId(media.id);\n\t\t\tonUpdate(media);\n\t\t}\n\t\tsetIsUploading(false);\n\t}\n\n\tconst onDropImage = filesList => {\n\t\tconsole.log('onDropImage', filesList);\n\t\tuploadMedia({\n\t\t\tallowedTypes: mediaType,\n\t\t\tfilesList,\n\t\t\tonFileChange([image]) {\n\t\t\t\tconsole.log('onFileChange', image);\n\t\t\t\tif (!image.id) {\n\t\t\t\t\tconsole.log('waiting');\n\t\t\t\t\tsetIsUploading(true);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('found!', image);\n\t\t\t\t\timage.sizes = image.media_details.sizes;\n\t\t\t\t\tonMediaUpdate(image);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<MediaUploadCheck fallback={__(`Fallback Instructions Should Go Here`)}>\n\t\t\t<MediaUpload\n\t\t\t\ttitle={__(`Media Upload`)}\n\t\t\t\tonSelect={onMediaUpdate}\n\t\t\t\tallowedTypes={mediaType}\n\t\t\t\tvalue={id}\n\t\t\t\trender={({ open }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{false !== id && false !== media && false === isUploading && (\n\t\t\t\t\t\t\t<div onClick={open} style={{cursor:'pointer'}}>\n\t\t\t\t\t\t\t\t<img src={src} width={`${width}px`} height={`${height}px`}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{((false !== id && false === media) || isUploading) && (\n\t\t\t\t\t\t\t<Button isSecondary isBusy onClick={open}>\n\t\t\t\t\t\t\t\t{__(` Loading...`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{false === id && (\n\t\t\t\t\t\t\t<Button isSecondary onClick={open}>\n\t\t\t\t\t\t\t\t{__(`Set Image`)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<DropZone onFilesDrop={onDropImage} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n};\n\nexport default MediaDropZone;\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst ifMatchSetAttribute = (\n    needle,\n    haystack,\n    attrKey,\n    attrValue,\n    setAttributes,\n) => {\n    if (needle === haystack) {\n        setAttributes({ [attrKey]: attrValue });\n    }\n};\n\nconst randomId = () => {\n    // Math.random should be unique because of its seeding algorithm.\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n    // after the decimal.\n    return `_${Math.random().toString(36).substr(2, 9)}`;\n};\n\nconst getTermsByLetter = (taxonomy, letter) => {\n\treturn new Promise(resolve => {\n\t\tapiFetch({\n\t\t\tpath: `/prc-api/v2/blocks/helpers/get-taxonomy-by-letter/?taxonomy=${taxonomy}&letter=${letter}`,\n\t\t}).then(terms => {\n\t\t\tresolve(terms);\n\t\t});\n\t});\n};\n\nconst getTerms = (taxonomy, perPage = 25) => {\n\treturn new Promise(resolve => {\n\t\tconst data = {};\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/${taxonomy}?per_page=${perPage}`,\n\t\t}).then(terms => {\n\t\t\tfor (let index = 0; index < terms.length; index++) {\n\t\t\t\tconst slug = terms[index].slug.replace(\n\t\t\t\t\t`${taxonomy.toLowerCase()}_`,\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t\tdata[terms[index].id] = {\n\t\t\t\t\tid: terms[index].id,\n\t\t\t\t\tname: terms[index].name,\n\t\t\t\t\tparent: terms[index].parent,\n\t\t\t\t\tslug,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n};\n\nconst getTermsAsOptions = (\n\ttaxonomy,\n\tperPage,\n\ttermValue = 'slug',\n\tsortByLabel = true,\n) => {\n\treturn new Promise(resolve => {\n\t\tgetTerms(taxonomy, perPage).then(data => {\n\t\t\tconst labelOptions = [];\n\n\t\t\tObject.keys(data).forEach(key => {\n\t\t\t\tconst termObj = data[key];\n\n\t\t\t\tlet value = termObj[termValue];\n\n\t\t\t\tlet label = termObj.name;\n\t\t\t\tif (undefined !== termObj.parent && 0 !== termObj.parent) {\n\t\t\t\t\tlabel = ` -- ${label}`;\n\t\t\t\t}\n\n\t\t\t\tlabelOptions.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (false !== sortByLabel) {\n\t\t\t\tlabelOptions.sort((a, b) => (a.label > b.label ? 1 : -1));\n\t\t\t}\n\n\t\t\tresolve(labelOptions);\n\t\t});\n\t});\n};\n\nconst getTermsAsTree = taxonomy => {\n\treturn new Promise(resolve => {\n\t\tgetTerms(taxonomy).then(data => {\n\t\t\tconst treeData = [];\n\t\t\t// Convert data from object of objects to array of objects.\n\t\t\tconst convertedData = Object.keys(data).map(i => data[i]);\n\t\t\t// Filter out the parent terms first\n\t\t\tconst parentTerms = convertedData.filter(e => 0 === e.parent);\n\t\t\tparentTerms.forEach(e => {\n\t\t\t\t// Get children by filtering for terms with parent matching this id in loop.\n\t\t\t\tconst c = convertedData.filter(f => f.parent === e.id);\n\t\t\t\tconst children = [];\n\t\t\t\t// Construct children array.\n\t\t\t\tc.forEach(cT => {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tname: cT.name,\n\t\t\t\t\t\tid: cT.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// Finally, push the fully structured parent -> child relationship to the tree data.\n\t\t\t\ttreeData.push({\n\t\t\t\t\tname: e.name,\n\t\t\t\t\tid: e.id,\n\t\t\t\t\tchildren,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tresolve(treeData);\n\t\t});\n\t});\n};\n\n\nexport {\n\tgetTerms,\n\tgetTermsByLetter,\n\tgetTermsAsOptions,\n\tgetTermsAsTree,\n\tifMatchSetAttribute,\n\trandomId,\n};\n","const mailChimpInterests = [\n    {\n        label: 'Weekly roundup of all new publications',\n        value: '7c1390ba46',\n    },\n    {\n        label: 'Quarterly update from the President',\n        value: 'a33430a835',\n    },\n    {\n        label: '--',\n        value: false,\n    },\n    {\n        label: 'Global Attitudes & Trends',\n        value: '9203343b04',\n    },\n    {\n        label: 'Internet, Science & Tech',\n        value: 'ea87b26abe',\n    },\n    {\n        label: 'Media & News Daily Briefing',\n        value: '1d2638430b',\n    },\n    {\n        label: 'Hispanic Trends',\n        value: '0e7495c7b2',\n    },\n    {\n        label: 'Religion - Weekly newsletter',\n        value: 'a7d4f3268f',\n    },\n    {\n        label: 'Religion - Daily religion headlines',\n        value: '1a647764b2',\n    },\n    {\n        label: 'Social & Demographic Trends',\n        value: '3836f62305',\n    },\n    {\n        label: 'Methods',\n        value: '6d1e80bbaf',\n    },\n    {\n        label: 'Politics',\n        value: 'fa5fdbc701',\n    },\n    {\n        label: '--',\n        value: false,\n    },\n    {\n        label: 'Mini-course - U.S. Immigration',\n        value: 'xxx',\n    },\n    {\n        label: 'Mini-course - U.S. Census',\n        value: 'xxxx',\n    },\n    {\n        label: 'Mini-course - Muslims and Islam',\n        value: 'xxxxx',\n    },\n];\n\nexport {\n\tmailChimpInterests\n};\n","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());","module.exports = regeneratorRuntime;","(function() { module.exports = window[\"lodash\"]; }());","(function() { module.exports = window[\"wp\"][\"mediaUtils\"]; }());","(function() { module.exports = window[\"wp\"][\"keycodes\"]; }());","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\nconst deprecated = [\n    {\n        attributes: {\n            postID: {\n                type: \"integer\"\n            },\n            link: {\n                type: \"string\"\n            },\n            excerpt: {\n                type: \"string\",\n                multiline: \"p\"\n            },\n            enableExcerpt: {\n                type: \"boolean\",\n                default: true\n            },\n            enableExcerptBelow: {\n                type: \"boolean\",\n                default: false\n            },\n            enableAltTaxonomy: {\n                type: \"boolean\",\n                default: false\n            }\n        },\n\n        migrate( { postID, link, excerpt, enableExcerpt, enableExcerptBelow, enableAltTaxonomy, enableMeta } ) {\n            console.log(\"Migrating...\", { postID, link, excerpt, enableExcerpt, enableExcerptBelow, enableAltTaxonomy, enableMeta });\n            const newMetaTaxonomy = enableMeta ? ( enableAltTaxonomy ? 'research-teams' : 'formats' ) : 'disabled';\n            return {\n                postId: postID,\n                url: link,\n                excerpt: excerpt,\n                enableExcerpt: enableExcerpt,\n                enableExcerptBelow: enableExcerptBelow,\n                metaTaxonomy: newMetaTaxonomy,\n            };\n        },\n\n        save( props ) {\n            return (\n                <Fragment>\n                    { 0 !== props.excerpt.length && (<RichText.Content className=\"excerpt\" tagName=\"div\" value={props.excerpt}/>) }\n                </Fragment>\n            );\n        },\n    },\n];\n\nexport default deprecated;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isInteger } from 'lodash';\nimport {\n    InspectorControls,\n    InspectorAdvancedControls,\n    __experimentalLinkControl as LinkControl,\n} from '@wordpress/block-editor';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { Fragment, useState } from '@wordpress/element';\nimport {\n    BaseControl,\n    Button,\n    CardDivider,\n    PanelBody,\n    Popover,\n    SelectControl,\n    ToggleControl,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nconst Inspector = ({ attributes, setAttributes, context, rootClientId }) => {\n    const [isRefreshing, refresh] = useState(false);\n    const {\n        postId,\n        imageSize,\n        imageSlot,\n        enableHeader,\n        enableExcerpt,\n        enableExcerptBelow,\n        enableExtra,\n        enableBreakingNews,\n        enableEmphasis,\n        disableMobileStyles,\n        enableMeta,\n        metaTaxonomy,\n    } = attributes;\n\n    const label = __('Story Item Options');\n\n    return (\n        <Fragment>\n            <InspectorControls>\n                <PanelBody title={label}>\n                    <BaseControl\n                        help={__('Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).')}\n                    >\n                        <ToggleControl\n                            label={\n                                enableMeta\n                                    ? 'Meta Enabled'\n                                    : 'Meta Disabled'\n                            }\n                            checked={enableMeta}\n                            onChange={() => {\n                                setAttributes({ enableMeta: !enableMeta });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableHeader ? 'Header Enabled' : 'Header Disabled'\n                            }\n                            checked={enableHeader}\n                            onChange={() => {\n                                setAttributes({ enableHeader: !enableHeader });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableExcerpt ? 'Excerpt Enabled' : 'Excerpt Disabled'\n                            }\n                            checked={enableExcerpt}\n                            onChange={() => {\n                                setAttributes({ enableExcerpt: !enableExcerpt });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableExtra ? 'Extras Enabled' : 'Extras Disabled'\n                            }\n                            checked={enableExtra}\n                            onChange={() => {\n                                setAttributes({ enableExtra: !enableExtra });\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableBreakingNews\n                                    ? 'Breaking News Enabled'\n                                    : 'Breaking News Disabled'\n                            }\n                            checked={enableBreakingNews}\n                            onChange={() => {\n                                if (false !== window.prcBreakingNews) {\n                                    setAttributes({\n                                        enableBreakingNews: !enableBreakingNews,\n                                    });\n                                } else {\n                                    // eslint-disable-next-line no-alert\n                                    alert(\n                                        'There are no currently active, authorized, breaking news events. The breaking news toggle will be set back to false.',\n                                    );\n                                    setAttributes({\n                                        enableBreakingNews: false,\n                                    });\n                                }\n                            }}\n                        />\n                        <ToggleControl\n                            label={\n                                enableEmphasis\n                                    ? 'Emphasis Enabled'\n                                    : 'Emphasis Disabled'\n                            }\n                            checked={enableEmphasis}\n                            onChange={() => {\n                                setAttributes({ enableEmphasis: !enableEmphasis });\n                            }}\n                        />\n                    </BaseControl>\n\n                    <CardDivider/>\n\n                    <SelectControl\n                        label=\"Select Taxonomy To Display\"\n                        value={ metaTaxonomy }\n                        options={ [\n                            { label: 'Formats', value: 'formats' },\n                            { label: 'Research Teams', value: 'research-teams' },\n                            { label: 'Disabled', value: 'disabled' },\n                        ] }\n                        onChange={ ( newMetaTaxonomy ) => {\n                            setAttributes({metaTaxonomy: newMetaTaxonomy});\n                        } }\n                    />\n                </PanelBody>\n            </InspectorControls>\n            <InspectorAdvancedControls>\n                <ToggleControl\n                    label={\n                        !disableMobileStyles\n                            ? 'Mobile Styling Enabled'\n                            : 'Mobile Styling Disabled'\n                    }\n                    help={__('If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile.')}\n                    checked={disableMobileStyles}\n                    onChange={() => {\n                        setAttributes({ disableMobileStyles: !disableMobileStyles });\n                    }}\n                />\n                {true === enableExcerpt && ('right' === imageSlot || 'left' === imageSlot) && (\n                    <Fragment>\n                        <ToggleControl\n                            label={\n                                enableExcerptBelow\n                                    ? 'Excerpt Will Appear Below Image'\n                                    : 'Excerpt Will Appear Normally'\n                            }\n                            help={__('If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image.')}\n                            checked={enableExcerptBelow}\n                            onChange={() => {\n                                setAttributes({\n                                    enableExcerptBelow: !enableExcerptBelow,\n                                });\n                            }}\n                        />\n                        <CardDivider/>\n                    </Fragment>\n                )}\n\n                {isInteger(postId) && 0 !== postId && (\n                    <div>\n                        <Button\n                            isSecondary\n                            isBusy={isRefreshing}\n                            onClick={() =>{\n                                refresh(true);\n                                setTimeout(() => {\n                                    setPostAttributes({\n                                        postId,\n                                        imageSize,\n                                        isRefresh: true,\n                                        setAttributes,\n                                    });\n                                    refresh(false);\n                                }, 500);\n                            }}\n                            style={{ marginBottom: '1em' }}\n                            text={__('Refresh Post Data')}\n                        />\n                    </div>\n                )}\n                <div>\n                    <Button\n                        isDestructive\n                        isBusy={isRefreshing}\n                        onClick={() =>{\n                            refresh(true);\n                            setTimeout(() => {\n                                setAttributes({\n                                    title: '',\n                                    excerpt: '',\n                                    extra: '',\n                                    url: '',\n                                    label: '',\n                                    date: '',\n                                    image: '',\n                                    postId: 0,\n                                });\n                                refresh(false);\n                            }, 500);\n                        }}\n                        style={{ marginBottom: '1em' }}\n                        text={__('Reset Story Item Block')}\n                    />\n                </div>\n            </InspectorAdvancedControls>\n        </Fragment>\n    );\n};\n\nexport default Inspector;\n","/**\n * External Dependencies\n */\nimport { ContentPlaceholder } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes } from '../../helpers';\n\nconst Placeholder = ({attributes, setAttributes, blockProps}) => {\n    const {imageSize} = attributes;\n\n    const [loadingStub, setLoadingStub] = useState(false);\n\n    return (\n        <ContentPlaceholder\n            onChange={(pickedContent)=>{\n                console.log('Step2:', pickedContent);\n                if ( pickedContent.length > 0 && undefined !== pickedContent[0].id ) {\n                    console.log('Step3:', pickedContent[0]);\n                    setLoadingStub(true);\n                    setPostAttributes({\n                        postId: pickedContent[0].id,\n                        imageSize,\n                        isRefresh: false,\n                        setAttributes\n                    });\n                }\n            }}\n            onSkip={()=>{\n                setAttributes({postId: 0});\n            }}\n            blockProps={{...blockProps, style: {marginBottom: '16px'}}}\n            loadingComponent={loadingStub}\n        />\n    );\n}\n\nexport default Placeholder;\n","/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n    BlockControls,\n    __experimentalLinkControl as LinkControl,\n} from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport {\n\tButtonGroup,\n\tButton,\n\tIcon,\n\tModal,\n    Path,\n    Popover,\n\tSpinner,\n    SVG,\n    TextControl,\n    ToolbarButton,\n    ToolbarDropdownMenu,\n    ToolbarGroup,\n} from '@wordpress/components';\nimport {\n    close,\n    more,\n    arrowLeft,\n    arrowRight,\n    arrowUp,\n    arrowDown,\n} from '@wordpress/icons';\n\n/**\n * Internal Dependencies\n */\nimport { setPostAttributes, setArtBySize } from '../../helpers';\n\n// Minimum width of column to allow for left and right imageSlot.\nconst COLUMN_LIMIT = 8;\n\nconst URLControl = ({ title, type, id, url, imageSize = 'A1', setAttributes }) => {\n\tconst [isLoading, setIsLoading] = useState(false);\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [inputValue, setInputValue] = useState(url);\n\tconst [post, setPost] = useState(null);\n\n\tconst value = useDebounce(inputValue, 500);\n\t// When the input value changes, search for the post.\n\tuseEffect(()=>{\n\t\tif ( value !== url ) {\n\t\t\tsetIsLoading(true);\n\t\t\tapiFetch({\n\t\t\t\tpath: '/prc-api/v2/utils/get-post-by-url',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: { url: value },\n\t\t\t})\n\t\t\t\t.then((post) => {\n\t\t\t\t\tconsole.log('get-post-by-url', post);\n\t\t\t\t\tif ( undefined !== post.ID ) {\n\t\t\t\t\t\tsetPost(post);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log(\"Error: \", err);\n\t\t\t\t\t// In this state no url has been found so we should just assume the user wants the url passed in.\n\t\t\t\t\tsetPost(false);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [value]);\n\n\tconst onModalClose = () => setIsModalOpen(false);\n\tconst onModalOpen = () => {\n\t\tsetIsLinkOpen(false);\n\t\tsetIsModalOpen(true);\n\t}\n\n\tconst onReplace = (newPostId) => {\n\t\tsetPostAttributes({\n\t\t\tpostId: newPostId,\n\t\t\timageSize,\n\t\t\tisRefresh: false,\n\t\t\tsetAttributes,\n\t\t});\n\t}\n\n    return (\n        <Fragment>\n            <ToolbarButton\n                aria-expanded={isLinkOpen}\n                aria-haspopup=\"true\"\n                label={__('Set URL')}\n                icon=\"admin-links\"\n                onClick={() => setIsLinkOpen(!isLinkOpen)}\n                showTooltip\n            />\n\t\t\t{true === isModalOpen &&  (\n\t\t\t\t<Modal title={__('Replace story item content', 'prc-blocks-story-item')} onRequestClose={ onModalClose }>\n\t\t\t\t\t<p>Replace this story item with \"<strong>{post.post_title}</strong>\"?</p>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button isDestructive onClick={ () => {\n\t\t\t\t\t\t\tonReplace(post.ID);\n\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t} }>\n\t\t\t\t\t\t\tReplace\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={ () => {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\turl: value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t} }>\n\t\t\t\t\t\t\tReplace URL Only\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={ onModalClose }>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Modal>\n\t\t\t)}\n            {true === isLinkOpen && (\n                <Popover\n                    position=\"bottom center\"\n                    onClose={() => setIsLinkOpen(false)}\n                >\n                    <div style={{\n                        minWidth: '300px',\n                        padding: '8px',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'flex-end',\n                    }}>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={'URL'}\n\t\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\t\tonChange={(value)=> setInputValue(value)}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingBottom: '7px',\n\t\t\t\t\t\t\tpaddingLeft: '8px',\n\t\t\t\t\t\t\twidth: '44px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div style={{ paddingBottom: '3px' }}>\n\t\t\t\t\t\t\t\t\t<Spinner/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{!isLoading && false === post && (\n\t\t\t\t\t\t\t\t<Button icon=\"yes-alt\" variant=\"tertiary\" onClick={()=>{\n\t\t\t\t\t\t\t\t\tsetAttributes({ url: value });\n\t\t\t\t\t\t\t\t\tsetIsLinkOpen(false);\n\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{!isLoading && false !== post && null !== post && (\n\t\t\t\t\t\t\t\t<Button icon=\"warning\" variant=\"tertiary\" onClick={ onModalOpen }/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n                    </div>\n                </Popover>\n            )}\n        </Fragment>\n    );\n};\n\nconst Toolbar = ({ attributes, setAttributes, context, rootClientId }) => {\n    const { postId, url, imageSize, imageSlot, headerSize, isChartArt, title } = attributes;\n\n\tconsole.log(\"Context\", context);\n\n    const columnWidth = undefined !== context['prc-block/column/width'] ? context['prc-block/column/width'] : false;\n\tconst columnIsEqualWidth = undefined !== context['prc-block/row/isEqual'] ? context['prc-block/row/isEqual'] : false;\n\tconsole.log('columnWidth', columnWidth, columnIsEqualWidth);\n\n    const Icon = ({ svgPath = false, isPressed = false }) => {\n        if (false === svgPath) {\n            return null;\n        }\n        return (\n            <SVG\n                width={24}\n                height={24}\n                viewBox='0 0 24 24'\n                xmlns=\"http://www.w3.org/2000/svg\"\n                isPressed={isPressed}\n            >\n                <Path d={svgPath} />\n            </SVG>\n        );\n    };\n\n    const ImageSlotIcon = ({selected}) => {\n        if ( 'right' === selected ) {\n            return arrowRight;\n        }\n        if ( 'left' === selected ) {\n            return arrowLeft;\n        }\n        if ( 'top' === selected ) {\n            return arrowUp;\n        }\n        if ( 'bottom' === selected ) {\n            return arrowDown;\n        }\n        if ( 'disabled' === selected ) {\n            return close;\n        }\n        return more;\n    }\n\n    const ImageSizeIcon = ({selected, currentlyActive}) => {\n        const iconPaths = {\n            A1: 'M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z',\n            A2: 'M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z',\n            A3: 'M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z',\n            A4: 'M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z',\n            XL: 'M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z',\n        };\n        return (\n            <Icon\n                svgPath={iconPaths[selected]}\n                isPressed={selected === currentlyActive}\n            />\n        )\n    }\n\n    const HeadingLevelIcon = ({selected, currentlyActive}) => {\n        const iconPaths = {\n            1: 'M15.81,15.63V18H8.19V6H11v9.63Z', // Large\n            2: 'M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z', // Medium\n            3: 'M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z' // Small\n        };\n        return (\n            <Icon\n                svgPath={iconPaths[selected]}\n                isPressed={selected === currentlyActive}\n            />\n        )\n    }\n\n    const handleImageSizeChange = (newSize) => {\n        setAttributes({ imageSize: newSize });\n        setArtBySize(newSize, postId, setAttributes); // @TODO LOOK INTO\n        console.log('new image size, check column context', context);\n    }\n\n    return (\n        <BlockControls>\n            <ToolbarGroup>\n                <URLControl title={title} id={postId} url={url} type=\"stub\" setAttributes={setAttributes} />\n            </ToolbarGroup>\n            <ToolbarGroup>\n                <ToolbarDropdownMenu\n                    icon={()=> <HeadingLevelIcon selected={headerSize} currentlyActive={headerSize}/>}\n                    label=\"Select Heading Size\"\n                    controls={ [\n                        {\n                            title: 'Large',\n                            icon: (\n                                <HeadingLevelIcon selected={1} currentlyActive={headerSize}/>\n                            ),\n                            isActive: 1 === headerSize,\n                            onClick: () => setAttributes({ headerSize: 1 }),\n                        },\n                        {\n                            title: 'Medium',\n                            icon: (\n                                <HeadingLevelIcon selected={2} currentlyActive={headerSize}/>\n                            ),\n                            isActive: 2 === headerSize,\n                            onClick: () => setAttributes({ headerSize: 2 }),\n                        },\n                        {\n                            title: 'Small',\n                            icon: (\n                                <HeadingLevelIcon selected={3} currentlyActive={headerSize}/>\n                            ),\n                            isActive: 3 === headerSize,\n                            onClick: () => setAttributes({ headerSize: 3 }),\n                        },\n                    ] }\n                />\n            </ToolbarGroup>\n            <ToolbarGroup>\n                <ToolbarDropdownMenu\n                    icon={()=><ImageSlotIcon selected={imageSlot}/>}\n                    label=\"Select Image Slot\"\n                    controls={ [\n                        {\n                            title: 'Top',\n                            icon: (\n                                <ImageSlotIcon selected='top'/>\n                            ),\n                            isActive: 'top' === imageSlot,\n                            onClick: () => {\n                                const newSlot = 'top';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Bottom',\n                            icon: (\n                                <ImageSlotIcon selected='bottom'/>\n                            ),\n                            isActive: 'bottom' === imageSlot,\n                            onClick: () => {\n                                const newSlot = 'bottom';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Left',\n                            icon: (\n                                <ImageSlotIcon selected='left'/>\n                            ),\n                            isActive: 'left' === imageSlot,\n                            isDisabled: true !== columnIsEqualWidth && false !== columnWidth && COLUMN_LIMIT >= columnWidth,\n                            onClick: () => {\n                                const newSlot = 'left';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Right',\n                            icon: (\n                                <ImageSlotIcon selected='right'/>\n                            ),\n                            isActive: 'right' === imageSlot,\n                            isDisabled: true !== columnIsEqualWidth && false !== columnWidth && COLUMN_LIMIT >= columnWidth,\n                            onClick: () => {\n                                const newSlot = 'right';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                        {\n                            title: 'Disabled',\n                            icon: (\n                                <ImageSlotIcon selected='disabled'/>\n                            ),\n                            isActive: 'disabled' === imageSlot,\n                            onClick: () => {\n                                const newSlot = 'disabled';\n                                setAttributes({imageSlot: newSlot});\n                            },\n                        },\n                    ] }\n                />\n                {'disabled' !== imageSlot && (\n                    <Fragment>\n                    <ToolbarDropdownMenu\n                        icon={()=> <ImageSizeIcon selected={imageSize} currentlyActive={imageSize}/>}\n                        label=\"Select Image Size\"\n                        controls={ [\n                            {\n                                title: 'A1',\n                                icon: (\n                                    <ImageSizeIcon selected='A1' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A1' === imageSize,\n                                onClick: () => handleImageSizeChange('A1'),\n                            },\n                            {\n                                title: 'A2',\n                                icon: (\n                                    <ImageSizeIcon selected='A2' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A2' === imageSize,\n                                onClick: () => handleImageSizeChange('A2'),\n                            },\n                            {\n                                title: 'A3',\n                                icon: (\n                                    <ImageSizeIcon selected='A3' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A3' === imageSize,\n                                onClick: () => handleImageSizeChange('A3'),\n                            },\n                            {\n                                title: 'A4',\n                                icon: (\n                                    <ImageSizeIcon selected='A4' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'A4' === imageSize,\n                                onClick: () => handleImageSizeChange('A4'),\n                            },\n                            {\n                                title: 'XL',\n                                icon: (\n                                    <ImageSizeIcon selected='XL' currentlyActive={imageSize}/>\n                                ),\n                                isActive: 'XL' === imageSize,\n                                onClick: () => handleImageSizeChange('XL'),\n                            }\n                        ] }\n                    />\n                    <ToolbarButton\n                        icon=\"chart-pie\"\n                        isPressed={isChartArt}\n                        label={__('Enable Chart Art')}\n                        onClick={() => {\n                            setAttributes({\n                                isChartArt: !isChartArt,\n                            });\n                        }}\n                    />\n                    </Fragment>\n                )}\n            </ToolbarGroup>\n        </BlockControls>\n    );\n};\n\nexport default Toolbar;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport Inspector from './inspector';\nimport Placeholder from './placeholder';\nimport Toolbar from './toolbar';\n\nconst Controls = ({ attributes, setAttributes, context, rootClientId }) => {\n    return (\n        <Fragment>\n            <Toolbar {...{ attributes, setAttributes, context, rootClientId }} />\n            <Inspector\n                {...{\n                    attributes,\n                    setAttributes,\n                    context,\n                    rootClientId,\n                }}\n            />\n        </Fragment>\n    );\n}\n\nexport {\n    Controls,\n    Placeholder\n}\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { Picture } from 'react-responsive-picture';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useState, useEffect } from '@wordpress/element';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n \n \nconst A1 = {\n    default: '564,317',\n    small: '690,388',\n    hidpi: '1128,634',\n    smallHidpi: '1380,776',\n};\n\nconst A2 = {\n    default: '268,151',\n    small: '690,388',\n    hidpi: '536,301',\n    smallHidpi: '1380,776',\n};\n\nconst A3 = {\n    default: '194,110',\n    small: '148,84',\n    hidpi: '388,220',\n    smallHidpi: '296,168',\n};\n\nconst A4 = {\n    default: '268,151',\n    small: '690,388',\n    hidpi: '536,302',\n    smallHidpi: '1380,776',\n};\n\nconst XL = {\n    default: '720,405',\n    small: '690,388',\n    hidpi: '1440,810',\n    smallHidpi: '1380,776',\n};\n\nconst ImageDisplay = ({ img, size, link, onClick = false, placeholder = false }) => {\n    // eslint-disable-next-line no-shadow\n    const getImgURL = variant => {\n        if (true === placeholder) {\n            let dimensions = '';\n            if ('A2' === size) {\n                dimensions = '536x301';\n            } else if ('A3' === size) {\n                dimensions = '388x220';\n            } else if ('A4' === size) {\n                dimensions = '536x302';\n            } else if ('XL' === size) {\n                dimensions = '1440x810';\n            } else {\n                // Default to A1\n                dimensions = '1128x634';\n            }\n            return `https://via.placeholder.com/${dimensions}.png?text=${size}`;\n        }\n\n        if ('' === img || false === img) {\n            return img;\n        }\n\n        // Default to A1\n        let args = { resize: A1[variant] };\n        if ('A2' === size) {\n            args = { resize: A2[variant] };\n        } else if ('A3' === size) {\n            args = { resize: A3[variant] };\n        } else if ('A4' === size) {\n            args = { resize: A4[variant] };\n        } else if ('XL' === size) {\n            args = { resize: XL[variant] };\n        }\n\n        return addQueryArgs(img, args);\n    };\n\n    // eslint-disable-next-line no-shadow\n    const getImgSrcSet = (threshold = 767) => {\n        return [\n            {\n                srcSet: `${getImgURL('default')} 1x, ${getImgURL('hidpi')} 2x`,\n                media: `(min-width: ${threshold}px)`,\n            },\n            {\n                srcSet: `${getImgURL('small')} 1x, ${getImgURL(\n                    'smallHidpi',\n                )} 2x`,\n                media: `(max-width: ${threshold}px)`,\n            },\n        ];\n    };\n\n    if (false !== onClick) {\n        return (\n            <div onClick={onClick}>\n                {true === placeholder && (\n                    <img src={getImgURL()} alt=\"Click to insert\" />\n                )}\n                {true !== placeholder && (\n                    <Picture sources={getImgSrcSet()} alt=\"Click to edit\" />\n                )}\n            </div>\n        );\n    }\n\n    return (\n        <Fragment>\n            {'' === link && <Picture sources={getImgSrcSet()} />}\n            {'' !== link && (\n                <a href={link}>\n                    <Picture sources={getImgSrcSet()} />\n                </a>\n            )}\n        </Fragment>\n    );\n};\n\nconst Edit = ({ img, size, postId, setAttributes }) => {\n    // const [art, setArt] = useState(false);\n\n    // // When the postId changes go fetch new art for this post and store it in state and also store the correct image url in attributes.\n    // useEffect(() => {\n    //     if (0 !== postId && false !== setAttributes) {\n    //         apiFetch({\n    //             path: `/prc-api/v2/get-art/?postId=${postId}`,\n    //         }).then(data => {\n    //             if (false !== data) {\n    //                 setArt(data);\n    //                 setAttributes({ image: data[size].rawUrl });\n    //             } else {\n    //                 // If no art on any subsequent art fetches set to false\n    //                 setArt(false);\n    //             }\n    //         });\n    //     }\n    // }, [postId]);\n\n    // /**\n    //  * If the art or size changes then go check the art object and set the approrpiate image and chart art given the arts options.\n    //  */\n    // useEffect(() => {\n    //     if (\n    //         false !== art &&\n    //         undefined !== art[size] &&\n    //         false !== setAttributes\n    //     ) {\n    //         setAttributes({\n    //             image: art[size].rawUrl,\n    //             isChartArt: art[size].chartArt,\n    //         });\n    //     }\n    // }, [art, size]);\n\n    return (\n        <MediaUploadCheck>\n            <MediaUpload\n                onSelect={media => setAttributes({ image: media.url })}\n                allowedTypes={ALLOWED_MEDIA_TYPES}\n                render={({ open }) => {\n                    return(\n                        <Fragment>\n                            {\n                                // If we have an actual image here then display it otherwise give us the placeholder\n                            }\n                            {undefined !== img && 0 !== img.length && (\n                                <ImageDisplay\n                                    img={img}\n                                    size={size}\n                                    link=\"\"\n                                    onClick={open}\n                                />\n                            )}\n                            {(undefined === img || 0 === img.length) && (\n                                <ImageDisplay\n                                    img={img}\n                                    size={size}\n                                    link=\"\"\n                                    onClick={open}\n                                    placeholder\n                                />\n                            )}\n                        </Fragment>\n                    )\n                }}\n            />\n        </MediaUploadCheck>\n    );\n};\n\n/**\n * Props:\n * img: string url of image to display\n * size: string of image/slot size (A1,A2,A3,A4)\n * link: string of url to go to when image is clicked on front end\n * slot: if set to null then no image size chooser will be display\n * chartArt: if set to null then no chart art button will appear\n * setAttributes: defaults to false unless otherwise provided a function to pass data back up to a HOC state.\n *\n * <Img id={} img={} size={} slot={} chartArt={} postId={} setAttributes={}/>\n */\n\nconst Img = ({ img, size, slot, chartArt, postId, setAttributes }) => {\n    if ( 'disabled' === slot ) {\n        return <Fragment/>\n    }\n\n    console.log('<Img>', img);\n\n    const classes = () => {\n        let isXL = false;\n        let isA1 = false;\n        let isA2 = false;\n        let isA3 = false;\n        let isA4 = false;\n        if (false !== slot) {\n            if ('XL' === size) {\n                isXL = true;\n            } else if ('A1' === size) {\n                isA1 = true;\n            } else if ('A2' === size) {\n                isA2 = true;\n            } else if ('A3' === size) {\n                isA3 = true;\n            } else if ('A4' === size) {\n                isA4 = true;\n            }\n        }\n\n        return classNames({\n            ui: true,\n            XL: isXL,\n            A1: isA1,\n            A2: isA2,\n            A3: isA3,\n            A4: isA4,\n            image: true,\n            bordered: chartArt,\n        });\n    };\n\n    return (\n        <div className={classes()}>\n            <Edit\n                img={img}\n                size={size}\n                postId={postId}\n                setAttributes={setAttributes}\n            />\n        </div>\n    );\n};\n\nexport default Img;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst Excerpt = ({ content, sansSerif, enabled, setAttributes }) => {\n    if (true !== enabled) {\n        return <Fragment />;\n    }\n\n    const classes = classNames('excerpt', { 'sans-serif': sansSerif });\n\n    return (\n        <RichText\n            tagName=\"div\"\n            value={content}\n            onChange={excerpt => setAttributes({ excerpt })}\n            placeholder=\"Story item excerpt...\"\n            multiline=\"p\"\n            className={classes}\n        />\n    );\n};\n\nexport default Excerpt;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst Extra = ({ content, breakingNews, enabled, setAttributes }) => {\n    return (\n        <Fragment>\n            {true === enabled && (\n                <RichText\n                    tagName=\"ul\"\n                    value={content}\n                    onChange={extra => setAttributes({ extra })}\n                    placeholder={content}\n                    multiline=\"li\"\n                    className=\"extra\"\n                />\n            )}\n            {true === breakingNews && false !== window.prcBreakingNews && (\n                <ul className=\"extra-breaking-news\">\n                    <li>\n                        <a\n                            href={window.prcBreakingNews.url}\n                            className=\"kicker-breaking-news\"\n                        >\n                            {window.prcBreakingNews.label}\n                        </a>\n                    </li>\n                </ul>\n            )}\n        </Fragment>\n    );\n};\n\nexport default Extra;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\n\nconst Header = ({\n    title,\n    size,\n    enabled,\n    setAttributes,\n    altHeaderWeight,\n}) => {\n    if (true !== enabled) {\n        return <Fragment />;\n    }\n\n    const classes = classNames('header', {\n        large: 1 === size,\n        medium: 2 === size,\n        small: 3 === size,\n        light: altHeaderWeight,\n    });\n\n    return (\n        <RichText\n            tagName=\"header\"\n            value={title}\n            onChange={t => setAttributes({ title: t })}\n            allowedFormats={['italic']}\n            placeholder=\"Title\"\n            multiline=\"br\"\n            className={classes}\n        />\n    );\n};\n\nexport default Header;\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { SelectControl, TextControl } from '@wordpress/components';\n\nconst Meta = ({ enabled, date, label, setAttributes, termOptions }) => {\n    if ( ! enabled ) {\n        return <Fragment />;\n    }\n\n    return (\n        <div className=\"meta\" style={{ display: 'flex', alignItems: 'center' }}>\n            <div>\n                <SelectControl\n                    value={label}\n                    options={termOptions}\n                    onChange={l => {\n                        setAttributes({ label: l });\n                    }}\n                    style={{ marginBottom: '0px' }}\n                    className=\"story-label-select\"\n                />\n            </div>\n            <div>&nbsp;|&nbsp;</div>\n            <div>\n                <TextControl\n                    value={date}\n                    onChange={d => {\n                        setAttributes({ date: d });\n                    }}\n                    style={{ marginBottom: '0px' }}\n                    className=\"story-label-select\"\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default Meta;","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\n\n/**\n * WordPress Dependencies\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\n\n\nconst IMAGE_SIZES = {\n    A1: [1128, 634],\n    A2: [526, 301],\n    A3: [388, 220],\n    A4: [536, 302],\n    XL: [1440, 810],\n};\n\nconst Preview = ( { attributes } ) => {\n    const {\n        title,\n        excerpt,\n        extra,\n        label,\n        date,\n        image,\n        imageSlot,\n        imageSize,\n        isChartArt,\n        headerSize,\n        enableEmphasis,\n        enableHeader,\n        enableExcerpt,\n        enableExcerptBelow,\n        enableExtra,\n        enableBreakingNews,\n        enableMeta,\n        className,\n    } = attributes;\n\n    const logicalClasses = {\n        bordered: enableEmphasis,\n        'alt-excerpt': enableExcerptBelow,\n    };\n    if ( 'disbaled' !== imageSlot ) {\n        logicalClasses[imageSlot] = true;\n        logicalClasses['aligned'] = true;\n    }\n    const blockPropsArgs = {\n        className: classNames('story item', className, logicalClasses),\n    }\n    if ( 'disabled' !== imageSlot && imageSize.length > 0) {\n        blockPropsArgs['data-image-size'] = imageSize;\n    }\n\n    const blockProps = useBlockProps(blockPropsArgs);\n\n    const headerClasses = classNames('header', {\n        large: 1 === headerSize,\n        medium: 2 === headerSize,\n        small: 3 === headerSize,\n        light: false,\n    });\n\n\tconst imageClasses = classNames('image', {\n\t\t'bordered': isChartArt,\n\t\tXL: 'XL' === imageSize,\n\t\tA4: 'A4' === imageSize,\n\t\tA3: 'A3' === imageSize,\n\t\tA2: 'A2' === imageSize,\n\t\tA1: 'A1' === imageSize,\n\t});\n\n    const excerptClasses = classNames('excerpt');\n\n    return(\n        <article {...blockProps}>\n            {enableMeta && (\n                <div class=\"meta\">\n                    <span class=\"label\">{label}</span> | <span class=\"date\">{date}</span>\n                </div>\n            )}\n\n            {'disabled' !== imageSlot && (\n                <div class={`${imageClasses}`}>\n                    <picture>\n                        <img srcset={image} width={IMAGE_SIZES[imageSize][0]} height={IMAGE_SIZES[imageSize][1]}/>\n                    </picture>\n                </div>\n            )}\n\n            {enableHeader && (\n                <header class={headerClasses}>\n                    {title}\n                </header>\n            )}\n\n            {enableExcerpt && (\n                <RichText.Content\n                    tagName=\"div\"\n                    value={excerpt}\n                    multiline=\"p\"\n                    className={excerptClasses}\n                />\n            )}\n\n            {enableExtra && (\n                <RichText.Content\n                    tagName=\"ul\"\n                    value={extra}\n                    className=\"extra\"\n                />\n            )}\n\n            {true === enableBreakingNews && false !== window.prcBreakingNews && (\n                <ul className=\"extra-breaking-news\">\n                    <li>\n                        <a\n                            href={window.prcBreakingNews.url}\n                            className=\"kicker-breaking-news\"\n                        >\n                            {window.prcBreakingNews.label}\n                        </a>\n                    </li>\n                </ul>\n            )}\n        </article>\n    );\n}\n\nexport default Preview;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames/bind';\nimport { getTermsAsOptions } from '@prc-app/shared';\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useBlockProps } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport {Controls, Placeholder} from './controls';\nimport Image from './image';\nimport Excerpt from './excerpt';\nimport Extra from './extra';\nimport Header from './header';\nimport Meta from './meta';\nimport Preview from './preview';\nimport { setPostAttributes } from '../helpers';\n\n/**\n * To be removed at later date:\n*/\nconst handlePostIdCaseChange = (attributes, setAttributes = false) => {\n    const payload = {};\n    if (!attributes.postId && attributes.postID) {\n        payload.postId = attributes.postID;\n    }\n\n    if ( 0 !== Object.keys(payload).length && false !== setAttributes ) {\n        console.log('handlePostIdCaseChange', attributes, payload);\n        setAttributes({...payload});\n    }\n}\n\nwindow.termOptions = {formats: [], 'research-teams': []};\n\nconst edit = ({ attributes, setAttributes, isSelected, clientId, context }) => {\n    const {\n        title,\n        excerpt,\n        extra,\n        label,\n        date,\n        image,\n        imageSlot,\n        imageSize,\n        isChartArt,\n        postId,\n        headerSize,\n        enableEmphasis,\n        enableHeader,\n        enableExcerpt,\n        enableExcerptBelow,\n        enableExtra,\n        enableBreakingNews,\n        enableMeta,\n        metaTaxonomy,\n        inLoop,\n        isPreview,\n        className,\n    } = attributes;\n\n    const [termOptions, setTermOptions] = useState(window.termOptions[metaTaxonomy]);\n\n    /**\n     * When the taxonomy selection changes go update the term options. Setting this here prevents the constant pop in and re-polling for terms.\n     */\n    useEffect(() => {\n        if ( 'disabled' !== metaTaxonomy ) {\n\t\t\t//@TODO change this to use local session, we can set it to expire for like 30 days because this almost never changes.\n\t\t\tif ( 0 !== window.termOptions[metaTaxonomy].length ) {\n\t\t\t\tsetTermOptions(window.termOptions[metaTaxonomy]);\n\t\t\t} else {\n\t\t\t\tgetTermsAsOptions(metaTaxonomy).then(options => {\n\t\t\t\t\tif ( !window.termOptions[metaTaxonomy].length ) {\n\t\t\t\t\t\twindow.termOptions[metaTaxonomy] = options;\n\t\t\t\t\t}\n\t\t\t\t\tsetTermOptions(options);\n\t\t\t\t});\n\t\t\t}\n        }\n    }, [metaTaxonomy]);\n\n    //@TODO  If in loop we should get title, image, label, date, and excerpt from the postId on load.\n    // Also if in loop we should disable setting any of the attributes and force the A3 left variant.\n    // If we are in loop but have a grid display type then you can set the imageSlot, imageize, enableHeader, enableExcerpt,  enableMeta, metaTaxonomy attributes.\n    useEffect(()=> {\n        handlePostIdCaseChange(attributes, setAttributes);\n    }, []);\n\n\t// For posts inside a query block if we have a post id then go fetch the post and set attributes.\n\tuseEffect(() => {\n\t\tif ( context.hasOwnProperty('query') && context.hasOwnProperty('postId') && !Number.isInteger(postId) ) {\n\t\t\t// setPostAttributes({\n\t\t\t// \tpostId: context.postId,\n\t\t\t// \timageSize,\n\t\t\t// \tisRefresh: false,\n\t\t\t// \tsetAttributes,\n\t\t\t// });\n\t\t}\n\t}, [context]);\n\n    const { rootClientId } = useSelect(\n        select => {\n            return {\n                rootClientId: select('core/block-editor').getBlockRootClientId(\n                    clientId,\n                ),\n            };\n        },\n        [clientId],\n    );\n\n    const enableAltHeaderWeight = !enableExcerpt;\n\n    const logicalClasses = {\n        bordered: enableEmphasis,\n        'alt-excerpt': enableExcerptBelow,\n    };\n    if ( 'disbaled' !== imageSlot ) {\n        logicalClasses[imageSlot] = true;\n        logicalClasses['aligned'] = true;\n    }\n    const blockPropsArgs = {\n        className: classNames('story item', className, logicalClasses),\n    }\n    if ( 'disabled' !== imageSlot && imageSize.length > 0) {\n        blockPropsArgs['data-image-size'] = imageSize;\n    }\n    const blockProps = useBlockProps(blockPropsArgs);\n\n    if ( !isSelected || isPreview ) {\n        return <Preview attributes={attributes} />;\n    }\n\n    if ( undefined === postId && !context.hasOwnProperty('query') ) {\n        return <Placeholder attributes={attributes} setAttributes={setAttributes} blockProps={blockProps}/>\n    }\n\n    return (\n        <Fragment>\n            <Controls\n                {...{\n                    attributes,\n                    setAttributes,\n                    context,\n                    rootClientId,\n                }}\n            />\n            <article {...blockProps}>\n                <Image\n                    img={image}\n                    size={imageSize}\n                    slot={imageSlot}\n                    chartArt={isChartArt}\n                    postId={postId}\n                    setAttributes={setAttributes}\n                />\n\n                <Meta\n                    enabled={enableMeta && 'disabled' !== metaTaxonomy}\n                    date={date}\n                    label={label}\n                    setAttributes={setAttributes}\n                    termOptions={termOptions}\n                />\n\n                <Header\n                    enabled={enableHeader}\n                    title={title}\n                    size={headerSize}\n                    altHeaderWeight={enableAltHeaderWeight}\n                    setAttributes={setAttributes}\n                />\n\n                <Excerpt\n                    enabled={enableExcerpt}\n                    content={excerpt}\n                    sansSerif={!enableHeader}\n                    setAttributes={setAttributes}\n                />\n\n                <Extra\n                    enabled={enableExtra}\n                    content={extra}\n                    breakingNews={enableBreakingNews}\n                    setAttributes={setAttributes}\n                    isSelected={isSelected}\n                />\n            </article>\n        </Fragment>\n    );\n};\n\nexport default edit;\n","/**\n * WordPress Dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\n\n/** Returns a server side block callback */\nconst save = ({ attributes }) => {\n    const { excerpt, extra } = attributes;\n    return(\n        <Fragment>\n            { excerpt && (<RichText.Content className=\"description\" tagName=\"div\" value={excerpt}/>) }\n            { extra && (<RichText.Content className=\"extra\" tagName=\"ul\" value={extra}/>) }\n        </Fragment>\n    );\n};\n\nexport default save;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nconst variations = [\n    {\n        name: 'story-item-default',\n        isDefault: true,\n        title: __('Story Item'),\n        excerpt: __('Default story item layout: top aligned A1 image.'),\n        attributes: {\n            imageSlot: 'top',\n            imageSize: 'A1',\n        },\n    },\n    {\n        name: 'story-item-pub-listing',\n        title: __('Pub Listing Story Item'),\n        excerpt: __('Left algined A3 image (right aligned A3 on mobile).'),\n        attributes: {\n            imageSlot: 'left',\n            imageSize: 'A3',\n        },\n    },\n    {\n        name: 'story-item-slim',\n        title: __('Story Item Slim'),\n        excerpt: __('No excerpt, no image.'),\n        attributes: {\n            imageSlot: 'disabled',\n            enableExcerpt: false,\n        },\n    },\n];\n\nexport default variations;\n","/**\n * WordPress Dependencies\n */\nimport * as moment from 'moment';\nimport { __ } from '@wordpress/i18n';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal Dependencies\n */\nimport deprecated from './deprecated';\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport variations from './variations';\nimport './style.scss';\n\nconst { name } = metadata;\n\nconst settings = {\n    example: {\n        attributes: {\n            title: 'Ultricies Ipsum Nibh Egestas Purus',\n            excerpt:\n                '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>',\n            label: 'Report',\n            date: moment().format('MM-DD-YYYY'),\n            image:\n                'https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg',\n            imageSlot: 'top',\n            imageSize: 'A2',\n            isPreview: true,\n        },\n    },\n    deprecated,\n    variations,\n    edit,\n    save,\n};\n\nregisterBlockType(name, { ...metadata, ...settings });\n"],"sourceRoot":""}