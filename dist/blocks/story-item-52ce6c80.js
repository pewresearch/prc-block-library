/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 2.1.17
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2022 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprcBlocksLibraryblocksJsonp=window.wpackioprcBlocksLibraryblocksJsonp||[]).push([[58,2],{1:function(e,t){e.exports=window.React},138:function(e,t){e.exports=window.wp.coreData},149:function(e,t){e.exports=moment},2:function(e,t){e.exports=window.wp.i18n},208:function(e,t){e.exports=window.wp.date},23:function(e,t){e.exports=window.wp.primitives},28:function(e,t){e.exports=window.wp.apiFetch},3:function(e,t){e.exports=window.wp.components},32:function(e,t){e.exports=window.wp.url},4:function(e,t){e.exports=window.wp.element},40:function(e,t){e.exports=window.wp.htmlEntities},404:function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/story-item","title":"Story Item","category":"content-curation","icon":"admin-post","description":"A story item is a visual display of a post, usually referencing a stub post.","keywords":["prc","story","item","story item","stub"],"usesContext":["queryId","postId","postType","core/column/gridSpan","core/column/tabletGridSpan","core/column/mobileGridSpan"],"attributes":{"title":{"type":"string"},"excerpt":{"type":"string","source":"html","multiline":"p","selector":".description"},"extra":{"type":"string","source":"html","multiline":"li","selector":".extra"},"url":{"type":"string","default":""},"label":{"type":"string"},"date":{"type":"string"},"image":{"type":"string"},"imageSlot":{"type":"string","default":"top"},"imageSize":{"type":"string","default":"A1"},"isChartArt":{"type":"boolean"},"postId":{"type":"integer"},"headerSize":{"type":"integer","default":2},"enableAltHeaderWeight":{"type":"boolean","default":false},"enableEmphasis":{"type":"boolean","default":false},"enableHeader":{"type":"boolean","default":true},"enableExcerpt":{"type":"boolean","default":true},"enableExcerptBelow":{"type":"boolean","default":false},"enableExtra":{"type":"boolean","default":false},"enableBreakingNews":{"type":"boolean","default":false},"disableMobileStyles":{"type":"boolean","default":false},"enableMeta":{"type":"boolean","default":true},"metaTaxonomy":{"type":"string","default":"formats"},"inLoop":{"type":"boolean","default":false},"isPreview":{"type":"boolean","default":false}},"supports":{"html":false,"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}}}')},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return M})),n.d(t,"e",(function(){return J})),n.d(t,"f",(function(){return Q})),n.d(t,"d",(function(){return Y})),n.d(t,"g",(function(){return q})),n.d(t,"h",(function(){return K})),n.d(t,"i",(function(){return h}));var a=n(27),r=n(21),l=n(44),c=n(1101),o=n(132),i=n(53),s=n(9),u=n(4),d=n(2),m=n(3),p=n(34),b=n(31),g=n(28),f=n.n(g),h=function(e,t){var n=Object(u.useState)(e),a=Object(r.a)(n,2),l=a[0],c=a[1];return Object(u.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),l},v=(n(133),n(35));n(49);var y,E=n(32),R=n(40),x=Object(i.a)(m.Button)(y||(y=Object(l.a)(["\n\t&:hover {\n\t\t/* Add opacity background to support future color changes */\n\t\t/* Reduce background from #ddd to 0.05 for text contrast  */\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\n\t\t.block-editor-link-control__search-item-type {\n\t\t\tcolor: black;\n\t\t}\n\t}\n\n\t.block-editor-link-control__search-item-type {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n"])));var O,k=function(e){var t=e.suggestion,n=e.onClick,a=e.searchTerm,r=e.isSelected,l=e.id,c=e.contentTypes,o=t.type&&1<c.length;return React.createElement(m.Tooltip,{text:Object(R.decodeEntities)(t.title)},React.createElement(x,{id:l,onClick:n,className:"block-editor-link-control__search-item is-entity ".concat(r&&"is-selected"),style:{borderRadius:"0",boxSizing:"border-box"}},React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title",style:{paddingRight:o?null:0}},React.createElement(m.TextHighlight,{text:Object(R.decodeEntities)(t.title),highlight:a})),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info",style:{paddingRight:o?null:0}},Object(E.filterURLForDisplay)(Object(E.safeDecodeURI)(t.url))||"")),o&&React.createElement("span",{className:"block-editor-link-control__search-item-type"},"post_tag"===t.type?"tag":t.type)))},w="prc-content-search",j={};function A(e){var t=e.onSelectItem,n=e.placeholder,a=e.label,c=e.style,o=void 0===c?"search":c,i=e.contentTypes,s=e.mode,g=e.excludeItems,v=e.perPage,y=Object(u.useState)(""),E=Object(r.a)(y,2),R=E[0],x=E[1],A=h(R,500),S=Object(u.useMemo)((function(){return!!A.match(/^(http|https):\/\//)}),[A]),C=Object(u.useState)([]),_=Object(r.a)(C,2),T=_[0],I=_[1],N=Object(u.useState)(!1),P=Object(r.a)(N,2),B=P[0],H=P[1],M=Object(u.useState)(null),z=Object(r.a)(M,2),D=z[0],L=z[1],F=Object(u.useRef)(),V=Object(u.useRef)(!0),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];F.current=null,!1!==t&&(j[t]=e);var n=e.filter((function(e){var t=!0;return g.length&&(t=g.every((function(t){return t.id!==e.id}))),t}));I(n),H(!1)},Z=function(e){return void 0===e?new Error("url is undefined"):new Promise((function(t,n){f()({path:"/prc-api/v2/utils/get-post-by-url",method:"POST",data:{url:e}}).then((function(a){console.log("getPostByUrl",e,a),"object"!==Object(p.a)(a)&&n(new Error("post is not an object")),t(a)})).catch((function(e){return n(e)}))}))},G=!!A.length,X=!!T.length;Object(u.useEffect)((function(){return function(){V.current=!1}}),[]),Object(u.useEffect)((function(){""!==A&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(F.current&&F.current.abort(),""===e.trim())return console.log("Resetting search string..."),void U([]);F.current=new AbortController,H(!0);var n="wp/v2/search/?search=".concat(e,"&subtype=").concat(i.join(","),"&type=").concat(s,"&_embed&per_page=").concat(v);j[n]?U(j[n],n):t?(console.log("isUrl",e),Z(e).then((function(e){if(V.current){console.log("parse getPostByUrl",e);var t=e.ID,a=e.post_title,r=e.post_type,l=e.permalink,c=e.label;U([{id:t,subtype:r,title:a,type:"post",url:l,label:c}],n)}})).catch((function(t,n){console.log("Hey this is a url error, we didnt find a matching post... now what?",e),console.error(t,n),H(!1)}))):f()({path:n,signal:F.current.signal}).then((function(e){!1!==V.current&&(console.log("Not a url, searching.... here are the results:",e),U(e,n))})).catch((function(e,t){"fetch_error"!==e.code&&U([])}))}(A,S)}),[A,S]);var Y=Object(b.a)(O||(O=Object(l.a)(["\n\t\t/* stylelint-disable */\n\t\tmax-height: 350px;\n\t\toverflow-y: auto;\n\t"])));return Object(b.b)(m.NavigableMenu,{onNavigate:function(e){0===e&&L(null),L(e)},orientation:"vertical"},Object(b.b)("div",{style:{display:"flex"}},Object(b.b)("div",{style:{flexGrow:"1"}},"minimal"===o&&Object(b.b)(m.TextControl,{label:a,value:R,onChange:function(e){return x(e)},placeholder:n,autoComplete:"off"}),"search"===o&&Object(b.b)(m.SearchControl,{value:R,onChange:function(e){return x(e)},placeholder:n})),B&&Object(b.b)("div",{style:{position:"absolute",right:"minimal"===o?"8px":"50px",marginTop:"minimal"===o?"27px":"10px"}},Object(b.b)(m.Spinner,null))),G?Object(b.b)("ul",{className:"".concat(w,"-list"),style:{marginTop:"0",marginBottom:"0",marginLeft:"0",paddingLeft:"0",listStyle:"none"},css:Y},!B&&!X&&!1===S&&Object(b.b)("li",{className:"".concat(w,"-list-item components-button"),style:{color:"inherit",cursor:"default",paddingLeft:"3px"}},Object(d.__)("Nothing found.","prc-block-components")),!B&&!X&&S&&Object(b.b)("li",{className:"".concat(w,"-list-item components-button"),style:{color:"inherit",cursor:"default",paddingLeft:"3px"}},Object(d.__)("Press enter to change url.","prc-block-components")),!B&&T.map((function(e,n){return console.log("searchResults map...",e),void 0===e.title?null:Object(b.b)("li",{key:e.id,className:"".concat(w,"-list-item"),style:{marginBottom:"0"}},Object(b.b)(k,{onClick:function(){return function(e){I([]),x(""),t(e)}(e)},searchTerm:A,suggestion:e,contentTypes:i,isSelected:D===n+1}))}))):null)}var S,C,_=n(54),T=Object(_.c)((function(){return React.createElement("svg",{style:{marginRight:"5px",cursor:"grab",flexShrink:0},width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z"}))})),I=Object(i.a)("div")(S||(S=Object(l.a)(["\n\tbutton {\n\t\tdisplay: block;\n\t\tpadding: 2px 8px 6px 8px;\n\t\tmargin-left: auto;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\n\t\t&:hover {\n\t\t\tbackground-color: #ccc;\n\t\t}\n\t}\n"]))),N=function(e){var t=e.item,n=e.isOrderable,a=void 0!==n&&n,r=e.handleItemDelete,l=e.mode,c="post"===l?"postType":"taxonomy",o=Object(s.useSelect)((function(e){var n=e("core"),a=n.getEntityRecord,r=n.hasFinishedResolution,o=[c,t.type,t.id],i=a.apply(void 0,o);if(i){console.log("Has Item",i);var s={title:"post"===l?i.title.rendered:i.name,url:i.link,id:i.id};return t.uuid&&(s.uuid=t.uuid),s}if(r("getEntityRecord",o))return null}),[t.id,c]);return Object(u.useEffect)((function(){null===o&&r(t)}),[t,r,o]),o?React.createElement(I,{style:{border:"2px dashed #ddd",paddingTop:"10px",paddingBottom:"10px",paddingLeft:a?"3px":"8px"},className:"block-editor-link-control__search-item is-entity"},a?React.createElement(T,null):"",React.createElement("span",{className:"block-editor-link-control__search-item-header"},React.createElement("span",{className:"block-editor-link-control__search-item-title"},Object(R.decodeEntities)(o.title)),React.createElement("span",{"aria-hidden":!0,className:"block-editor-link-control__search-item-info"},Object(E.filterURLForDisplay)(Object(E.safeDecodeURI)(o.url))||"")),React.createElement("button",{type:"button",onClick:function(){r(o)},"aria-label":Object(d.__)("Delete item","10up-block-components")},"×")):React.createElement("div",null)},P=Object(_.a)((function(e){var t=e.items,n=e.isOrderable,a=e.handleItemDelete,r=e.mode,l=e.ChildComponent,c=void 0!==l&&l,o=!1!==c?n?Object(_.b)(c):c:n?Object(_.b)(N):N;return React.createElement("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif'}},t.map((function(e,l){var c=e.uuid?e.uuid:e.id;return React.createElement(o,{isOrderable:!!(n&&1<t.length)&&n,key:"item-".concat(c),index:l,handleItemDelete:a,sortIndex:l,item:e,mode:r,totalItems:t.length})})))})),B=Object(i.a)("div")(C||(C=Object(l.a)(["\n\t& .block-editor-link-control__search-item {\n\t\tborder: none !important;\n\t\tcursor: default;\n\n\t\t&:hover {\n\t\t\tbackground: transparent;\n\t\t}\n\t}\n"]))),H=function(e){var t,n=e.label,l=e.placeholder,i=e.mode,m=void 0===i?"post":i,p=e.contentTypes,b=void 0===p?["post","page"]:p,g=e.onPickChange,f=void 0===g?function(e){console.log("Content picker list change",e)}:g,h=e.maxContentItems,v=void 0===h?1:h,y=e.isOrderable,E=void 0!==y&&y,R=e.singlePickedLabel,x=void 0===R?Object(d.__)("You have selected the following item:","prc-block-components"):R,O=e.multiPickedLabel,k=void 0===O?Object(d.__)("You have selected the following items:","prc-block-components"):O,w=e.value,j=void 0===w?[]:w,S=e.uniqueContentItems,C=void 0===S||S,_=e.excludeCurrentPost,T=void 0===_||_,I=e.perPage,N=void 0===I?50:I,H=e.PickedItemChild,M=void 0!==H&&H,z=e.searchStyle,D=void 0===z?"search":z,L=Object(u.useState)(j),F=Object(r.a)(L,2),V=F[0],U=F[1],Z=null===(t=Object(s.select)("core/editor"))||void 0===t?void 0:t.getCurrentPostId();Object(u.useEffect)((function(){console.log("Init content state",j)}),[]),Object(u.useEffect)((function(){V!==j&&0!==V.length&&(console.log("useEffect onPickChange->",V),f(V))}),[V]);var G=Object(u.useMemo)((function(){var e=C?Object(a.a)(V):[];return T&&Z&&e.push({id:Z}),e}),[V,Z,T,C]);return React.createElement("div",{className:"".concat("prc-content-picker")},(!V.length||V.length&&V.length<v)&&React.createElement(A,{placeholder:l,label:n,excludeItems:G,onSelectItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("handleSelect->",e,t),U(!0===t?function(t){return[{uuid:Object(c.a)(),type:"subtype"in e?e.subtype:e.type,url:e.url}].concat(Object(a.a)(t))}:function(t){return[{id:e.id,uuid:Object(c.a)(),type:"subtype"in e?e.subtype:e.type,url:e.url}].concat(Object(a.a)(t))})},contentTypes:b,mode:m,perPage:N,style:D}),Boolean(null==V?void 0:V.length)>0&&React.createElement(B,null,React.createElement("span",{style:{marginTop:"15px",marginBottom:"2px",display:"block"}},V.length>1?k:x),React.createElement(P,{items:V,useDragHandle:!0,handleItemDelete:function(e){U((function(t){return t.filter((function(t){var n=t.id,a=t.uuid;return e.uuid?a!==e.uuid:n!==e.id}))}))},isOrderable:E,mode:m,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex,r=Object(a.a)(Object(o.default)(V,t,n));console.log("newContent?",r),U(r)},ChildComponent:M})))};function M(e){var t=e.blockProps,n=e.onChange,a=e.onSkip,r=e.mode,l=void 0===r?"post":r,c=e.contentTypes,o=void 0===c?["stub"]:c,i=e.label,s=void 0===i?Object(d.__)("Search for a post","prc-block-components"):i,p=e.placeholder,b=void 0===p?Object(d.__)("Search for a post or paste in a url...","prc-block-components"):p,g=e.value,f=void 0===g?[]:g,h=e.loadingComponent,v=void 0!==h&&h,y=e.children;return React.createElement("div",t,React.createElement(m.Placeholder,{label:"".concat(s,":"),isColumnLayout:!0},!1!==v&&React.createElement("div",{style:{textAlign:"center"}},React.createElement(m.Spinner,null),React.createElement("p",{className:"sans-serif"},"Loading object...")),!1===v&&React.createElement(u.Fragment,null,y,React.createElement(H,{onPickChange:function(e){console.log("Step1:",e),n(e)},mode:l,label:"".concat(s," or enter a url:"),placeholder:b,contentTypes:o,value:f}),React.createElement(m.Button,{isLink:!0,onClick:function(){a()},text:Object(d.__)("Skip"),style:{paddingLeft:"9px"}}))))}n(1092);var z=n(5);var D=function(e){var t=e.url,n=e.onChange,a=e.query,l=void 0===a?{type:"term",subtype:"topic"}:a,c=Object(u.useState)(!1),o=Object(r.a)(c,2),i=o[0],s=o[1];return React.createElement(u.Fragment,null,React.createElement(m.ToolbarButton,{"aria-expanded":i,"aria-haspopup":"true",label:Object(d.__)("Set Link"),icon:"admin-links",onClick:function(){return s(!i)},showTooltip:!0}),!0===i&&React.createElement(m.Popover,{position:"bottom center",onClose:function(){return s(!1)}},React.createElement(z.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:{url:t},showInitialSuggestions:!0,suggestionsQuery:l,onChange:function(e){return n(e)},settings:[]})))},L=n(1100),F=function(e){var t=e.url,n=e.heading,a=e.headingSize,r=void 0===a?"h2":a,l=e.disableIcon,c=void 0!==l&&l,o=e.setAttributes;return React.createElement(u.Fragment,null,React.createElement(z.BlockControls,null,React.createElement(m.ToolbarGroup,null,React.createElement(D,{url:t,onChange:function(e){o({url:e.url})}}))),React.createElement(m.Flex,{style:{paddingBottom:"1em"}},React.createElement(m.FlexItem,null,React.createElement(z.RichText,{tagName:r,value:n,onChange:function(e){return o({heading:e})},placeholder:"Heading...",formattingControls:[],keepPlaceholderOnFocus:!0,className:"sans-serif"})),!0!==c&&React.createElement(m.FlexBlock,null,React.createElement(L.a,{name:"chevron right",size:"small",style:{marginLeft:"0.5em"}}))))},V=n(8);var U=function(e){var t=e.label,n=void 0===t?"":t,a=e.blockName,r=e.clientId,l=(e.className,e.attributes),c=void 0===l?{}:l;return React.createElement(m.Button,{label:Object(d.__)(n),tooltipPosition:"bottom",onClick:function(){var e=Object(s.select)("core/block-editor").getBlock(r);console.log("debug info...",e.innerBlocks.length);var t=0===e.innerBlocks.length?0:e.innerBlocks.length+1,n=Object(V.createBlock)(a,c);Object(s.dispatch)("core/block-editor").insertBlock(n,t,r)},className:"block-editor-button-block-appender"},Object(d.__)(n))},Z=n(56),G=function(e){var t=e.level,n=e.isPressed,a=void 0!==n&&n,r={1:"M9 5h2v10H9v-4H5v4H3V5h2v4h4V5zm6.6 0c-.6.9-1.5 1.7-2.6 2v1h2v7h2V5h-1.4z",2:"M7 5h2v10H7v-4H3v4H1V5h2v4h4V5zm8 8c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6V15h8v-2H15z",3:"M12.1 12.2c.4.3.8.5 1.2.7.4.2.9.3 1.4.3.5 0 1-.1 1.4-.3.3-.1.5-.5.5-.8 0-.2 0-.4-.1-.6-.1-.2-.3-.3-.5-.4-.3-.1-.7-.2-1-.3-.5-.1-1-.1-1.5-.1V9.1c.7.1 1.5-.1 2.2-.4.4-.2.6-.5.6-.9 0-.3-.1-.6-.4-.8-.3-.2-.7-.3-1.1-.3-.4 0-.8.1-1.1.3-.4.2-.7.4-1.1.6l-1.2-1.4c.5-.4 1.1-.7 1.6-.9.5-.2 1.2-.3 1.8-.3.5 0 1 .1 1.6.2.4.1.8.3 1.2.5.3.2.6.5.8.8.2.3.3.7.3 1.1 0 .5-.2.9-.5 1.3-.4.4-.9.7-1.5.9v.1c.6.1 1.2.4 1.6.8.4.4.7.9.7 1.5 0 .4-.1.8-.3 1.2-.2.4-.5.7-.9.9-.4.3-.9.4-1.3.5-.5.1-1 .2-1.6.2-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1l1.1-1.4zM7 9H3V5H1v10h2v-4h4v4h2V5H7v4z",4:"M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm10-2h-1v2h-2v-2h-5v-2l4-6h3v6h1v2zm-3-2V7l-2.8 4H16z",5:"M12.1 12.2c.4.3.7.5 1.1.7.4.2.9.3 1.3.3.5 0 1-.1 1.4-.4.4-.3.6-.7.6-1.1 0-.4-.2-.9-.6-1.1-.4-.3-.9-.4-1.4-.4H14c-.1 0-.3 0-.4.1l-.4.1-.5.2-1-.6.3-5h6.4v1.9h-4.3L14 8.8c.2-.1.5-.1.7-.2.2 0 .5-.1.7-.1.5 0 .9.1 1.4.2.4.1.8.3 1.1.6.3.2.6.6.8.9.2.4.3.9.3 1.4 0 .5-.1 1-.3 1.4-.2.4-.5.8-.9 1.1-.4.3-.8.5-1.3.7-.5.2-1 .3-1.5.3-.8 0-1.6-.1-2.3-.4-.6-.2-1.1-.6-1.6-1-.1-.1 1-1.5 1-1.5zM9 15H7v-4H3v4H1V5h2v4h4V5h2v10z",6:"M9 15H7v-4H3v4H1V5h2v4h4V5h2v10zm8.6-7.5c-.2-.2-.5-.4-.8-.5-.6-.2-1.3-.2-1.9 0-.3.1-.6.3-.8.5l-.6.9c-.2.5-.2.9-.2 1.4.4-.3.8-.6 1.2-.8.4-.2.8-.3 1.3-.3.4 0 .8 0 1.2.2.4.1.7.3 1 .6.3.3.5.6.7.9.2.4.3.8.3 1.3s-.1.9-.3 1.4c-.2.4-.5.7-.8 1-.4.3-.8.5-1.2.6-1 .3-2 .3-3 0-.5-.2-1-.5-1.4-.9-.4-.4-.8-.9-1-1.5-.2-.6-.3-1.3-.3-2.1s.1-1.6.4-2.3c.2-.6.6-1.2 1-1.6.4-.4.9-.7 1.4-.9.6-.3 1.1-.4 1.7-.4.7 0 1.4.1 2 .3.5.2 1 .5 1.4.8 0 .1-1.3 1.4-1.3 1.4zm-2.4 5.8c.2 0 .4 0 .6-.1.2 0 .4-.1.5-.2.1-.1.3-.3.4-.5.1-.2.1-.5.1-.7 0-.4-.1-.8-.4-1.1-.3-.2-.7-.3-1.1-.3-.3 0-.7.1-1 .2-.4.2-.7.4-1 .7 0 .3.1.7.3 1 .1.2.3.4.4.6.2.1.3.3.5.3.2.1.5.2.7.1z"};return r.hasOwnProperty(t)?React.createElement(m.SVG,{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",isPressed:a},React.createElement(m.Path,{d:r[t]})):null},X={className:"block-library-heading-level-dropdown",isAlternate:!0},Y=function(e){var t=e.selectedLevel,n=e.levels,a=void 0===n?[2,3]:n,r=e.onChange;return console.log("HeadingLevelToolbar",t),React.createElement(m.ToolbarGroup,null,React.createElement(m.Dropdown,{popoverProps:X,renderToggle:function(e){var n=e.onToggle,a=e.isOpen;return React.createElement(m.ToolbarButton,{"aria-expanded":a,"aria-haspopup":"true",icon:React.createElement(G,{level:t}),label:Object(d.__)("Change heading level"),onClick:n,onKeyDown:function(e){a||e.keyCode!==Z.DOWN||(e.preventDefault(),e.stopPropagation(),n())},showTooltip:!0})},renderContent:function(){return React.createElement(m.Toolbar,{className:"block-library-heading-level-toolbar",label:Object(d.__)("Change heading level")},React.createElement(m.ToolbarGroup,{isCollapsed:!1,controls:a.map((function(e){var n=e===t;return{icon:React.createElement(G,{level:e,isPressed:n}),title:Object(d.sprintf)(Object(d.__)("Heading %d"),e),isActive:n,onClick:function(){r(e)}}}))}))}}))};n(95),n(59);function q(e,t,n,a,r){e===t&&r(Object(v.a)({},n,a))}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return new Promise((function(n){var a={};f()({path:"/wp/v2/".concat(e,"?per_page=").concat(t)}).then((function(t){for(var r=0;r<t.length;r++){var l=t[r].slug.replace("".concat(e.toLowerCase(),"_"),"");a[t[r].id]={id:t[r].id,name:t[r].name,parent:t[r].parent,slug:l}}n(a)}))}))}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slug",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(r){W(e,t).then((function(e){var t=[];Object.keys(e).forEach((function(a){var r=e[a],l=r[n],c=r.name;void 0!==r.parent&&0!==r.parent&&(c=" -- ".concat(c)),t.push({value:l,label:c})})),!1!==a&&t.sort((function(e,t){return e.label>t.label?1:-1})),r(t)}))}))}function Q(e){return new Promise((function(t){W(e).then((function(e){var n=[],a=Object.keys(e).map((function(t){return e[t]}));a.filter((function(e){return 0===e.parent})).forEach((function(e){var t=a.filter((function(t){return t.parent===e.id})),r=[];t.forEach((function(e){r.push({name:e.name,id:e.id})})),n.push({name:e.name,id:e.id,children:r})})),t(n)}))}))}var K=[{label:"Weekly roundup of all new publications",value:"7c1390ba46"},{label:"Quarterly update from the president",value:"a33430a835"},{label:"--",value:!1},{label:"Global attitudes & trends (twice a month)",value:"9203343b04"},{label:"Internet, science & tech (monthly)",value:"ea87b26abe"},{label:"Daily briefing of media news",value:"1d2638430b"},{label:"Race & ethnicity (monthly)",value:"0e7495c7b2"},{label:"Religion & public life - Weekly newsletter",value:"a7d4f3268f"},{label:"Religion & public life - Daily religion headlines",value:"1a647764b2"},{label:"Social & demographic trends (monthly)",value:"3836f62305"},{label:"Methodological research (quarterly)",value:"6d1e80bbaf"},{label:"U.S. politics & policy (monthly)",value:"fa5fdbc701"},{label:"--",value:!1},{label:"Mini-course - U.S. Immigration",value:"xxx"},{label:"Mini-course - U.S. Census",value:"xxxx"},{label:"Mini-course - Muslims and Islam",value:"xxxxx"}]},49:function(e,t){e.exports=regeneratorRuntime},5:function(e,t){e.exports=window.wp.blockEditor},51:function(e,t){e.exports=window.lodash},56:function(e,t){e.exports=window.wp.keycodes},57:function(e,t){e.exports=window.ReactDOM},59:function(e,t){e.exports=window.wp.mediaUtils},8:function(e,t){e.exports=window.wp.blocks},9:function(e,t){e.exports=window.wp.data},966:function(e,t,n){n(20),e.exports=n(998)},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return m}));var a=n(66),r=n.n(a),l=n(149),c=n(28),o=n.n(c),i=n(5),s=function(e,t,n){0!==t&&!1!==n&&o()({path:"/prc-api/v2/get-art/?postId=".concat(t)}).then((function(t){!1!==t&&void 0!==t[e]&&!1!==n&&n({image:t[e].rawUrl,isChartArt:t[e].chartArt})}))},u=function(e){var t=e.setAttributes,n=e.postId,a=void 0!==n&&n,r=e.imageSize,c=void 0===r?"A1":r,i=e.isRefresh,s=void 0!==i&&i;!1!==a&&void 0!==t&&o()({path:"/wp/v2/stub/".concat(a),method:"GET"}).then((function(e){if(console.log("setPostAttributes -> by id:",a,e),!1!==e){var n=function e(t){var n=t.post,a=t.imageSize,r=t.isRefresh,c=void 0!==r&&r;console.log(e,n);var o=new Date(n.date),i=l(o).format("MMM D, YYYY"),s={title:n.title.hasOwnProperty("rendered")?n.title.rendered:n.title,excerpt:n.excerpt.hasOwnProperty("rendered")?n.excerpt.rendered:n.excerpt,url:n.link,label:n.hasOwnProperty("label")?n.label:"Report",date:i,postId:n.id};if(!0!==c&&(s.extra=""),n.art){var u=n.art;s.image=u[a].rawUrl,s.isChartArt=u[a].chartArt}return console.log("getAttributesFromPost",n,s),s}({post:e,imageSize:c,isRefresh:s});t(n)}})).catch((function(e){return console.error(e)}))},d=function(e){var t=e.imageSlot,n=e.imageSize,a=(e.isChartArt,e.postId,e.headerSize,e.enableEmphasis),l=(e.enableHeader,e.enableExcerpt,e.enableExcerptBelow),c=(e.enableExtra,e.enableBreakingNews,e.enableMeta,e.metaTaxonomy,e.inLoop,e.isPreview,e.className),o={bordered:a,"alt-excerpt":l};"disabled"!==t&&(o[t]=!0,o.aligned=!0);var s={className:r()("story item",c,o)};return"disabled"!==t&&""!==n&&(s["data-image-size"]=n),Object(i.useBlockProps)(s)},m=Array.from(Array(19).keys()).filter((function(e){return 17!==e&&0!==e}))},998:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(149),l=n(8),c=n(5),o=n(4),i=[{attributes:{postID:{type:"integer"},link:{type:"string"},excerpt:{type:"string",multiline:"p"},enableExcerpt:{type:"boolean",default:!0},enableExcerptBelow:{type:"boolean",default:!1},enableAltTaxonomy:{type:"boolean",default:!1}},migrate:function(e){var t=e.postID,n=e.link,a=e.excerpt,r=e.enableExcerpt,l=e.enableExcerptBelow,c=e.enableAltTaxonomy,o=e.enableMeta;return console.log("Migrating...",{postID:t,link:n,excerpt:a,enableExcerpt:r,enableExcerptBelow:l,enableAltTaxonomy:c,enableMeta:o}),{postId:t,url:n,excerpt:a,enableExcerpt:r,enableExcerptBelow:l,metaTaxonomy:o?c?"research-teams":"formats":"disabled"}},save:function(e){return React.createElement(o.Fragment,null,0!==e.excerpt.length&&React.createElement(c.RichText.Content,{className:"excerpt",tagName:"div",value:e.excerpt}))}}],s=n(404),u=n(66),d=n.n(u),m=n(45),p=(n(9),n(138)),b=n(22),g=n(2),f=n(51),h=n(3),v=n(98);var y=function(e){var t=e.attributes,n=e.setAttributes,a=e.context,r=void 0!==a.queryId&&void 0!==a.postId&&void 0!==a.postType&&0!==a.postId&&Number.isInteger(a.postId),l=Object(p.useEntityProp)("root","site","siteId"),i=Object(b.a)(l,1)[0],s=Object(o.useState)(!1),u=Object(b.a)(s,2),d=u[0],m=u[1],y=t.postId,E=t.imageSize,R=t.imageSlot,x=t.enableHeader,O=t.enableExcerpt,k=t.enableExcerptBelow,w=t.enableExtra,j=t.enableBreakingNews,A=t.enableEmphasis,S=t.disableMobileStyles,C=t.enableMeta,_=t.metaTaxonomy,T=Object(g.__)("Story Item Options");return React.createElement(o.Fragment,null,React.createElement(c.InspectorControls,null,React.createElement(h.PanelBody,{title:T},React.createElement(h.BaseControl,{help:Object(g.__)("Toggle specific features of a Story Item on or off, for example you can turn off the meta area (date and taxonomy).")},React.createElement(h.ToggleControl,{label:C?"Meta Enabled":"Meta Disabled",checked:C,onChange:function(){n({enableMeta:!C})}}),React.createElement(h.ToggleControl,{label:x?"Header Enabled":"Header Disabled",checked:x,onChange:function(){n({enableHeader:!x})}}),React.createElement(h.ToggleControl,{label:O?"Excerpt Enabled":"Excerpt Disabled",checked:O,onChange:function(){n({enableExcerpt:!O})}}),!r&&React.createElement(o.Fragment,null,React.createElement(h.ToggleControl,{label:w?"Extras Enabled":"Extras Disabled",checked:w,onChange:function(){n({enableExtra:!w})}}),React.createElement(h.ToggleControl,{label:j?"Breaking News Enabled":"Breaking News Disabled",checked:j,onChange:function(){!1!==window.prcBreakingNews?n({enableBreakingNews:!j}):(alert("There are no currently active authorized breaking news events. The breaking news toggle will be set back to false."),n({enableBreakingNews:!1}))}}),React.createElement(h.ToggleControl,{label:A?"Emphasis Enabled":"Emphasis Disabled",checked:A,onChange:function(){n({enableEmphasis:!A})}}))),React.createElement(h.CardDivider,null),React.createElement(h.SelectControl,{label:"Select Taxonomy To Display",value:_,options:v.c.includes(i)?[{label:"Formats",value:"formats"},{label:"Research Teams",value:"research-teams"},{label:"Disabled",value:"disabled"}]:[{label:"Category",value:"category"},{label:"Disabled",value:"disabled"}],onChange:function(e){n({metaTaxonomy:e})}}))),React.createElement(c.InspectorAdvancedControls,null,React.createElement(h.ToggleControl,{label:S?"Mobile Styling Disabled":"Mobile Styling Enabled",help:Object(g.__)("If enabled your image slot will change to right aligned (if left aligned), and top aligned (if bottom aligned). Also, large headers will switch to medium headers on mobile."),checked:S,onChange:function(){n({disableMobileStyles:!S})}}),!0===O&&("right"===R||"left"===R)&&React.createElement(o.Fragment,null,React.createElement(h.ToggleControl,{label:k?"Excerpt Will Appear Below Image":"Excerpt Will Appear Normally",help:Object(g.__)("If you have excerpts enabled and a right or left image slot you can force the excerpt to appear below an image."),checked:k,onChange:function(){n({enableExcerptBelow:!k})}}),React.createElement(h.CardDivider,null)),Object(f.isInteger)(y)&&0!==y&&React.createElement("div",null,React.createElement(h.Button,{isSecondary:!0,isBusy:d,onClick:function(){m(!0),setTimeout((function(){Object(v.b)({postId:y,imageSize:E,isRefresh:!0,setAttributes:n}),m(!1)}),500)},style:{marginBottom:"1em"},text:Object(g.__)("Refresh Post Data")})),React.createElement("div",null,React.createElement(h.Button,{isDestructive:!0,isBusy:d,onClick:function(){m(!0),setTimeout((function(){n({title:"",excerpt:"",extra:"",url:"",label:"",date:"",image:"",postId:0}),m(!1)}),500)},style:{marginBottom:"1em"},text:Object(g.__)("Reset Story Item Block")}))))},E=(n(19),n(28)),R=n.n(E);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){var t=e.attributes,n=e.setAttributes,r=(t.metaTaxonomy,t.imageSize),l=Object(p.useEntityProp)("root","site","siteId"),i=1===Object(b.a)(l,1)[0]?"stub":"post",s=Object(o.useState)(""),u=Object(b.a)(s,2),d=u[0],f=u[1],v=Object(m.i)(d,500),y=Object(o.useMemo)((function(){return!!v.match(/^(http|https):\/\//)}),[v]),E=Object(o.useState)(null),R=Object(b.a)(E,2),O=R[0],k=(R[1],!!v.length),w=Object(p.useEntityRecords)("postType",i,{per_page:10,search:k&&!y?v:"",context:"view"}),j=w.records,A=w.isResolving,S=!!j&&0<j.length,C=function(e){console.log("handleItemSelection",e);var t={postId:e.id,title:e.title.rendered,excerpt:e.excerpt.rendered,date:e.date};if(e.art){var l=e.art;t.image=l[r].url,t.isChartArt=l[r].chartArt}n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))};Object(o.useEffect)((function(){console.log("searchRecords isResolving",A,j)}),[j,A]);var _=Object(c.useBlockProps)({className:"wp-block-prc-block-story-item__placeholder"});return React.createElement(h.Placeholder,Object.assign({icon:"admin-post",label:Object(g.__)(" Story Item","prc-block-library"),isColumnLayout:!0,instructions:Object(g.__)("Search for a ".concat(i," or paste url here"),"prc-block-library")},_),React.createElement("div",{style:{display:"flex",width:"100%"}},React.createElement("div",{style:{flexGrow:"1"}},React.createElement(h.SearchControl,{value:d,onChange:function(e){return f(e)},placeholder:"Joe Biden climate change...",autoComplete:"off"})),A&&React.createElement("div",{style:{position:"absolute",right:"20px",marginTop:"12px",backgroundColor:"#f0f0f0"}},React.createElement(h.Spinner,null))),k&&React.createElement("ul",{style:{marginTop:"0",marginBottom:"0",marginLeft:"0",paddingLeft:"0",listStyle:"none"}},!A&&!S&&!1===y&&React.createElement("li",null,Object(g.__)("Nothing found.","prc-block-library")),!A&&!S&&y&&React.createElement("li",null,Object(g.__)("Press enter to insert post.","prc-block-library")),!A&&S&&j.map((function(e,t){return console.log("Item: ",e),React.createElement("li",{key:e.id,onClick:function(){return C(e)},style:{cursor:"pointer",padding:"0.2em 1em",display:"block",backgroundColor:O===e.id?"#eee":"transparent"}},e.title.rendered)}))),React.createElement(h.Button,{isLink:!0,onClick:function(){n({postId:0})},text:Object(g.__)("Skip"),style:{paddingLeft:"9px"}}))}var k=n(1094),w=n(1095),j=n(1096),A=n(1097),S=n(1098),C=n(1099);function _(e){var t=e.svgPath,n=void 0!==t&&t,a=e.isPressed,r=void 0!==a&&a;return!1===n?null:React.createElement(h.SVG,{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",isPressed:r},React.createElement(h.Path,{d:n}))}function T(e){var t=e.selected;return"right"===t?k.a:"left"===t?w.a:"top"===t?j.a:"bottom"===t?A.a:"disabled"===t?S.a:C.a}function I(e){var t=e.selected,n=e.currentlyActive;return React.createElement(_,{svgPath:{A1:"M12.13,18.09h-3l-.74-2.46H4.49l-.75,2.46H1.27l3.84-12H8.36ZM7.72,13.41,6.44,9.2,5.16,13.41Z M13.31,8.35a7,7,0,0,0,4-2.44h2v10h3.33v2.19H13V15.9h3.63V9a23.54,23.54,0,0,1-3.33,1.78Z",A2:"M12.5,18.09h-3l-.74-2.46H4.86l-.75,2.46H1.64l3.83-12H8.73ZM8.09,13.41,6.81,9.2,5.53,13.41Z M22.16,18.09h-9V15.75l.72-.52,1.46-1a31.07,31.07,0,0,0,3.1-2.6,2.74,2.74,0,0,0,.9-1.87,1.55,1.55,0,0,0-1.66-1.6c-1.19,0-1.86.76-2,2.3l-2.48-.55c.56-2.67,2.11-4,4.66-4a4.37,4.37,0,0,1,3,.91A3.5,3.5,0,0,1,22.2,9.69c0,1.51-.69,2.61-2.52,4a33.64,33.64,0,0,1-3.06,2h5.74Z",A3:"M12.52,18h-3l-.74-2.47H4.89L4.13,18H1.67L5.5,6H8.76ZM8.11,13.32,6.83,9.11,5.56,13.32Z M17.38,10.75a1.87,1.87,0,0,0,1.46-.47,1.36,1.36,0,0,0,.38-.94A1.5,1.5,0,0,0,17.6,7.89c-1,0-1.51.45-1.84,1.53L13.28,9a3.62,3.62,0,0,1,1.1-2,4.58,4.58,0,0,1,3.33-1.24C20.24,5.82,22,7.13,22,9a2.69,2.69,0,0,1-2,2.68,3.09,3.09,0,0,1,1.51.74,2.73,2.73,0,0,1,.9,2.11c0,2.19-1.82,3.61-4.64,3.61A4.67,4.67,0,0,1,14.23,17a3.88,3.88,0,0,1-1.31-2.45l2.55-.36A2,2,0,0,0,17.63,16a1.64,1.64,0,0,0,1.84-1.62,1.55,1.55,0,0,0-.61-1.27,3,3,0,0,0-1.66-.27H16.1V10.75Z",A4:"M12.31,18.09h-3l-.74-2.46H4.67l-.75,2.46H1.45l3.84-12H8.54ZM7.9,13.41,6.62,9.2,5.34,13.41Z M20.86,13.22h1.69v2.1H20.86v2.77H18.05V15.32H12.81v-2.1l4.84-7.31h3.21Zm-2.69,0V9.16c0-.09,0-.28,0-.57l0-.51-3.29,5.14Z",XL:"M9.23,11.58,12.94,18H9.7L7.28,13.65,4.87,18H2.21l3.71-6.38L2.62,6H5.9L7.84,9.65,9.88,6h2.63Z M21.79,15.63V18H14.18V6H17v9.64Z"}[t],isPressed:t===n})}function N(e){var t=e.selected,n=e.currentlyActive;return React.createElement(_,{svgPath:{1:"M15.81,15.63V18H8.19V6H11v9.63Z",2:"M7.81,8.21V18H5.46V6H9.83l2.11,7.18L14.17,6h4.37V18H15.72V8.21l-3,9.79H10.77Z",3:"M14.21,9.43A1.9,1.9,0,0,0,12.12,8c-1,0-1.64.4-1.64,1.06s.43,1,1.73,1.26a8.68,8.68,0,0,1,3.15,1,3.35,3.35,0,0,1,1.55,2.85,3.89,3.89,0,0,1-1.77,3.2,6,6,0,0,1-3.17.77,5.53,5.53,0,0,1-3.44-1,4,4,0,0,1-1.44-2.31l2.6-.59a2.2,2.2,0,0,0,2.43,1.67c1.19,0,1.92-.48,1.92-1.26s-.48-1-2.09-1.36a8.16,8.16,0,0,1-2.77-.94A3.08,3.08,0,0,1,7.72,9.63,3.58,3.58,0,0,1,9,6.86a4.44,4.44,0,0,1,3.15-1,5.08,5.08,0,0,1,3.15.91,3.74,3.74,0,0,1,1.33,1.91Z"}[t],isPressed:t===n})}var P=function(e){var t=e.url,n=e.imageSize,a=void 0===n?"A1":n,r=e.setAttributes,l=Object(o.useState)(!1),c=Object(b.a)(l,2),i=c[0],s=c[1],u=Object(o.useState)(!1),d=Object(b.a)(u,2),p=d[0],f=d[1],y=Object(o.useState)(!1),E=Object(b.a)(y,2),x=E[0],O=E[1],k=Object(o.useState)(t),w=Object(b.a)(k,2),j=w[0],A=w[1],S=Object(o.useState)(null),C=Object(b.a)(S,2),_=C[0],T=C[1],I=Object(m.i)(j,500);Object(o.useEffect)((function(){I!==t&&(s(!0),R()({path:"/prc-api/v2/utils/get-post-by-url",method:"POST",data:{url:I}}).then((function(e){console.log("get-post-by-url",e),void 0!==e.ID&&(T(e),s(!1))})).catch((function(e){console.log("Error: ",e),T(!1),s(!1)})))}),[I]);var N=function(){return O(!1)};return React.createElement(o.Fragment,null,React.createElement(h.ToolbarButton,{"aria-expanded":p,"aria-haspopup":"true",label:Object(g.__)("Set URL"),icon:"admin-links",onClick:function(){return f(!p)},showTooltip:!0}),!0===x&&React.createElement(h.Modal,{title:Object(g.__)("Replace story item content","prc-blocks-story-item"),onRequestClose:N},React.createElement("p",null,"Replace this story item with ",React.createElement("strong",null,_.post_title),"?"),React.createElement(h.ButtonGroup,null,React.createElement(h.Button,{isDestructive:!0,onClick:function(){var e;e=_.ID,Object(v.b)({postId:e,imageSize:a,isRefresh:!1,setAttributes:r}),N()}},"Replace"),React.createElement(h.Button,{variant:"secondary",onClick:function(){r({url:I}),N()}},"Replace URL Only"),React.createElement(h.Button,{variant:"secondary",onClick:N},"Cancel"))),!0===p&&React.createElement(h.Popover,{position:"bottom center",onClose:function(){return f(!1)}},React.createElement("div",{style:{minWidth:"300px",padding:"8px",display:"flex",alignItems:"flex-end"}},React.createElement("div",{style:{flexGrow:"1"}},React.createElement(h.TextControl,{label:"URL",value:j,onChange:function(e){return A(e)},autoComplete:"off"})),React.createElement("div",{style:{paddingBottom:"7px",paddingLeft:"8px",width:"44px"}},i&&React.createElement("div",{style:{paddingBottom:"3px"}},React.createElement(h.Spinner,null)),!i&&!1===_&&React.createElement(h.Button,{icon:"yes-alt",variant:"tertiary",onClick:function(){r({url:I}),f(!1)}}),!i&&!1!==_&&null!==_&&React.createElement(h.Button,{icon:"warning",variant:"tertiary",onClick:function(){f(!1),O(!0)}})))))};var B=function(e){var t=e.attributes,n=e.setAttributes,a=e.context,r=t.postId,l=t.url,i=t.imageSize,s=t.imageSlot,u=t.headerSize,d=t.isChartArt,m=t.title,p=void 0!==a["core/column/gridSpan"]&&a["core/column/gridSpan"],b=void 0!==a.queryId&&void 0!==a.postId&&void 0!==a.postType&&0!==a.postId&&Number.isInteger(a.postId),f=function(e){n({imageSize:e}),Object(v.a)(e,r,n),console.log("new image size, check column context",a)},y=Object(o.useCallback)((function(){return React.createElement(N,{selected:u,currentlyActive:u})}),[u]),E=Object(o.useCallback)((function(){return React.createElement(T,{selected:s})}),[s]),R=Object(o.useCallback)((function(){return React.createElement(I,{selected:i,currentlyActive:i})}),[i]);return React.createElement(c.BlockControls,null,!b&&React.createElement(h.ToolbarGroup,null,React.createElement(P,{title:m,id:r,url:l,type:"stub",setAttributes:n})),React.createElement(h.ToolbarGroup,null,React.createElement(h.ToolbarDropdownMenu,{icon:y,label:"Select Heading Size",controls:[{title:"Large",icon:React.createElement(N,{selected:1,currentlyActive:u}),isActive:1===u,onClick:function(){return n({headerSize:1})}},{title:"Medium",icon:React.createElement(N,{selected:2,currentlyActive:u}),isActive:2===u,onClick:function(){return n({headerSize:2})}},{title:"Small",icon:React.createElement(N,{selected:3,currentlyActive:u}),isActive:3===u,onClick:function(){return n({headerSize:3})}}]})),React.createElement(h.ToolbarGroup,null,React.createElement(h.ToolbarDropdownMenu,{icon:E,label:"Select Image Slot",controls:[{title:"Top",icon:React.createElement(T,{selected:"top"}),isActive:"top"===s,onClick:function(){n({imageSlot:"top"})}},{title:"Bottom",icon:React.createElement(T,{selected:"bottom"}),isActive:"bottom"===s,onClick:function(){n({imageSlot:"bottom"})}},{title:"Left",icon:React.createElement(T,{selected:"left"}),isActive:"left"===s,isDisabled:!1!==p&&8>=p,onClick:function(){n({imageSlot:"left"})}},{title:"Right",icon:React.createElement(T,{selected:"right"}),isActive:"right"===s,isDisabled:!1!==p&&8>=p,onClick:function(){n({imageSlot:"right"})}},{title:"Disabled",icon:React.createElement(T,{selected:"disabled"}),isActive:"disabled"===s,onClick:function(){n({imageSlot:"disabled"})}}]}),"disabled"!==s&&React.createElement(o.Fragment,null,React.createElement(h.ToolbarDropdownMenu,{icon:R,label:"Select Image Size",controls:[{title:"A1",icon:React.createElement(I,{selected:"A1",currentlyActive:i}),isActive:"A1"===i,onClick:function(){return f("A1")}},{title:"A2",icon:React.createElement(I,{selected:"A2",currentlyActive:i}),isActive:"A2"===i,onClick:function(){return f("A2")}},{title:"A3",icon:React.createElement(I,{selected:"A3",currentlyActive:i}),isActive:"A3"===i,onClick:function(){return f("A3")}},{title:"A4",icon:React.createElement(I,{selected:"A4",currentlyActive:i}),isActive:"A4"===i,onClick:function(){return f("A4")}},{title:"XL",icon:React.createElement(I,{selected:"XL",currentlyActive:i}),isActive:"XL"===i,onClick:function(){return f("XL")}}]}),React.createElement(h.ToolbarButton,{icon:"chart-pie",isPressed:d,label:Object(g.__)("Enable Chart Art"),onClick:function(){n({isChartArt:!d})}}))))};function H(e){var t=e.attributes,n=e.setAttributes,a=e.context;return React.createElement(o.Fragment,null,React.createElement(B,{attributes:t,setAttributes:n,context:a}),React.createElement(y,{attributes:t,setAttributes:n,context:a}))}var M=n(312),z=n(32),D=["image"],L={default:"564,317",small:"690,388",hidpi:"1128,634",smallHidpi:"1380,776"},F={default:"268,151",small:"690,388",hidpi:"536,301",smallHidpi:"1380,776"},V={default:"194,110",small:"148,84",hidpi:"388,220",smallHidpi:"296,168"},U={default:"268,151",small:"690,388",hidpi:"536,302",smallHidpi:"1380,776"},Z={default:"720,405",small:"690,388",hidpi:"1440,810",smallHidpi:"1380,776"};function G(e){var t=e.img,n=e.size,a=e.link,r=e.onClick,l=void 0!==r&&r,c=e.placeholder,i=void 0!==c&&c,s=function(e){if(!0===i){return"https://via.placeholder.com/".concat("A2"===n?"536x301":"A3"===n?"388x220":"A4"===n?"536x302":"XL"===n?"1440x810":"1128x634",".png?text=").concat(n)}if(""===t||!1===t)return t;var a={resize:L[e]};return"A2"===n?a={resize:F[e]}:"A3"===n?a={resize:V[e]}:"A4"===n?a={resize:U[e]}:"XL"===n&&(a={resize:Z[e]}),Object(z.addQueryArgs)(t,a)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:767;return[{srcSet:"".concat(s("default")," 1x, ").concat(s("hidpi")," 2x"),media:"(min-width: ".concat(e,"px)")},{srcSet:"".concat(s("small")," 1x, ").concat(s("smallHidpi")," 2x"),media:"(max-width: ".concat(e,"px)")}]};return!1!==l?React.createElement("button",{type:"button",onClick:l,style:{padding:0,border:"none",cursor:"pointer"}},!0===i&&React.createElement("img",{src:s(),alt:"Click to insert"}),!0!==i&&React.createElement(M.a,{sources:u(),alt:"Click to edit"})):React.createElement(o.Fragment,null,""===a&&React.createElement(M.a,{sources:u()}),""!==a&&React.createElement("a",{href:a},React.createElement(M.a,{sources:u()})))}function X(e){var t=e.img,n=e.size,a=e.setAttributes;return React.createElement(c.MediaUploadCheck,null,React.createElement(c.MediaUpload,{onSelect:function(e){return a({image:e.url})},allowedTypes:D,render:function(e){var a=e.open;return React.createElement(o.Fragment,null,void 0!==t&&0!==t.length&&React.createElement(G,{img:t,size:n,link:"",onClick:a}),(void 0===t||0===t.length)&&React.createElement(G,{img:t,size:n,link:"",onClick:a,placeholder:!0}))}}))}function Y(e){var t=e.attributes,n=e.setAttributes,a=t.image,r=t.imageSlot,l=t.imageSize,c=t.isChartArt;if("disabled"===r)return React.createElement(o.Fragment,null);var i,s,u,m,p;return React.createElement("div",{className:(i=!1,s=!1,u=!1,m=!1,p=!1,!1!==r&&("XL"===l?i=!0:"A1"===l?s=!0:"A2"===l?u=!0:"A3"===l?m=!0:"A4"===l&&(p=!0)),d()({ui:!0,XL:i,A1:s,A2:u,A3:m,A4:p,image:!0,bordered:c}))},React.createElement(X,{img:a,size:l,setAttributes:n}))}var q=function(e){var t=e.attributes,n=e.setAttributes,a=t.excerpt,r=t.enableHeader;if(!t.enableExcerpt)return React.createElement(o.Fragment,null);var l,i=d()("excerpt",{"sans-serif":!r});return React.createElement(c.RichText,{tagName:"div",value:a,onChange:function(e){return n({excerpt:e})},placeholder:(l=["Defense industry stocks fall on news of executive order recalling all U.S. military personnel as focus shifts to fighting climate change.","U.S. President honors 10th anniversary of the loss of Miami to rising sea levels.","Congress passes bill to offer relocation assistance to all Americans living in coastal areas.","U.S. President signs executive order to end all fossil fuel extraction and use by 2030.","Exxon executives indicted for fraud and conspiracy to commit fraud. Company to be liquidated.","Shell oil executives to face United Nations war crimes tribunal."],l[Math.floor(Math.random()*l.length)]),multiline:"p",className:i})};var W=function(e){var t=e.attributes,n=e.setAttributes,a=t.extra,r=t.enableExtra,l=t.enableBreakingNews;return React.createElement(o.Fragment,null,!0===r&&React.createElement(c.RichText,{tagName:"ul",value:a,onChange:function(e){return n({extra:e})},placeholder:a,multiline:"li",className:"extra"}),!0===l&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))};var J=function(e){var t=e.attributes,n=e.setAttributes,a=t.title,r=t.headerSize,l=t.enableExcerpt;if(!t.enableHeader)return React.createElement(o.Fragment,null);var i=d()("header",{large:1===r,medium:2===r,small:3===r,light:!l});return React.createElement(c.RichText,{tagName:"header",value:a,onChange:function(e){return n({title:e})},allowedFormats:["italic"],placeholder:"Title",multiline:"br",className:i})},Q=n(208);var K=function(e){var t=e.attributes,n=e.setAttributes,a=t.date,r=t.label,l=t.enableMeta,c=t.metaTaxonomy,i=Object(o.useState)(!1),s=Object(b.a)(i,2),u=s[0],d=s[1];if(!l)return React.createElement(o.Fragment,null);var m=Object(p.useEntityRecords)("taxonomy",c,{per_page:-1,hide_empty:!1,context:"view"}),g=m.records,f=m.isResolving,v=!!g&&0<g.length;Object(o.useEffect)((function(){console.log("isResolving",f,g),g&&g.length&&console.log("Terms!",g)}),[g,f]);var y=void 0!==r?Object(z.cleanForSlug)(r.toLowerCase()):"report",E="short-read"===y?"fact-tank":y;return React.createElement("div",{className:"meta",style:{display:"flex",alignItems:"center"}},"disabled"!==c&&React.createElement(o.Fragment,null,React.createElement("div",null,f&&React.createElement(h.Spinner,null),!f&&v&&React.createElement(h.SelectControl,{value:E,options:g.map((function(e){return{label:e.name,value:e.slug}})),onChange:function(e){n({label:e})},style:{marginBottom:"0px"}})),React.createElement("div",null," | ")),React.createElement("div",null,React.createElement(h.Button,{variant:"link",onClick:function(){d(!u)}},Object(Q.date)("M j, Y",a)),u&&React.createElement(h.Popover,{position:"bottom center",onClose:function(){return d(!1)}},React.createElement("div",{style:{padding:"1em"}},React.createElement(h.DatePicker,{currentDate:a,onChange:function(e){return n({date:Object(Q.date)("M j, Y",e)})}})))))},$={A1:[1128,634],A2:[526,301],A3:[388,220],A4:[536,302],XL:[1440,810]};var ee=function(e){var t=e.attributes,n=t.title,a=t.excerpt,r=t.extra,l=t.label,o=t.date,i=t.image,s=t.imageSlot,u=t.imageSize,m=t.isChartArt,p=t.headerSize,b=t.enableHeader,g=t.enableExcerpt,f=t.enableExtra,h=t.enableBreakingNews,y=t.enableMeta,E=Object(v.d)(t),R=d()("header",{large:1===p,medium:2===p,small:3===p,light:!1}),x=d()("image",{bordered:m,XL:"XL"===u,A4:"A4"===u,A3:"A3"===u,A2:"A2"===u,A1:"A1"===u}),O=d()("excerpt"),k=void 0!==s&&"disabled"!==s&&void 0!==u&&""!==u;return React.createElement("article",E,y&&React.createElement("div",{className:"meta"},React.createElement("span",{className:"label"},l)," |"," ",React.createElement("span",{className:"date"},Object(Q.date)("M j, Y",o))),k&&React.createElement("div",{className:"".concat(x)},React.createElement("picture",null,React.createElement("img",{srcSet:i,width:$[u][0],height:$[u][1]}))),b&&React.createElement("header",{className:R},n),g&&React.createElement(c.RichText.Content,{tagName:"div",value:a,multiline:"p",className:O}),f&&React.createElement(c.RichText.Content,{tagName:"ul",value:r,className:"extra"}),!0===h&&!1!==window.prcBreakingNews&&React.createElement("ul",{className:"extra-breaking-news"},React.createElement("li",null,React.createElement("a",{href:window.prcBreakingNews.url,className:"kicker-breaking-news"},window.prcBreakingNews.label))))},te={A1:[1128,634],A2:[526,301],A3:[388,220],A4:[536,302],XL:[1440,810]};function ne(e){var t=e.attributes,n=(e.clientId,e.context),a=n.postId,r=n.postType,l=(n.queryId,Object(p.useEntityRecord)("postType",r,a)),i=l.record,s=l.isResolving,u=i.title,m=i.excerpt,b=i.label,g=i.date,f=i.art,h=t.imageSlot,v=t.imageSize,y=t.headerSize,E=t.enableHeader,R=t.enableExcerpt,x=t.enableMeta,O=t.className,k=d()("header",{large:1===y,medium:2===y,small:3===y,light:!1}),w=d()("image",{bordered:f&&f[v]&&f[v].chartArt,XL:"XL"===v,A4:"A4"===v,A3:"A3"===v,A2:"A2"===v,A1:"A1"===v}),j=d()("excerpt"),A=f&&f[v]&&f[v].url&&void 0!==h&&"disabled"!==h&&void 0!==v&&""!==v,S={};A&&(S[h]=!0,S.aligned=!0);var C={className:d()("story item",O,S)};A&&(C["data-image-size"]=v);var _=Object(c.useBlockProps)(C);return Object(o.useEffect)((function(){i&&console.log("record",i)}),[i]),s?"Loading...":React.createElement("article",_,x&&React.createElement("div",{className:"meta"},React.createElement("span",{className:"label"},b)," |"," ",React.createElement("span",{className:"date"},g?Object(Q.date)("M j, Y",g):"")),A&&React.createElement("div",{className:"".concat(w)},React.createElement("picture",null,React.createElement("img",{srcSet:f[v].url,width:te[v][0],height:te[v][1],alt:""}))),E&&React.createElement("header",{className:k},u.rendered),R&&React.createElement(c.RichText.Content,{tagName:"div",value:m.rendered,multiline:"p",className:j}))}var ae=function(e){var t=e.attributes,n=e.setAttributes,a=e.isSelected,r=e.clientId,l=e.context;if(void 0!==l.queryId&&void 0!==l.postId&&void 0!==l.postType&&0!==l.postId&&Number.isInteger(l.postId))return React.createElement(o.Fragment,null,React.createElement(H,{attributes:t,setAttributes:n,context:l}),React.createElement(ne,{attributes:t,context:l}));var c=t.postId,i=t.isPreview;if(void 0===c)return React.createElement(O,{attributes:t,setAttributes:n,clientId:r});if(!a||i)return React.createElement(ee,{attributes:t,context:l});var s=Object(v.d)(t);return React.createElement(o.Fragment,null,React.createElement(H,{attributes:t,setAttributes:n,context:l}),React.createElement("article",s,React.createElement(Y,{attributes:t,setAttributes:n}),React.createElement(K,{attributes:t,setAttributes:n}),React.createElement(J,{attributes:t,setAttributes:n}),React.createElement(q,{attributes:t,setAttributes:n}),React.createElement(W,{attributes:t,setAttributes:n})))},re=function(e){var t=e.attributes,n=t.excerpt,a=t.extra;return React.createElement(o.Fragment,null,n&&React.createElement(c.RichText.Content,{className:"description",tagName:"div",value:n}),a&&React.createElement(c.RichText.Content,{className:"extra",tagName:"ul",value:a}))},le=[{name:"story-item-default",isDefault:!0,title:Object(g.__)("Story Item"),excerpt:Object(g.__)("Default story item layout: top aligned A1 image."),attributes:{imageSlot:"top",imageSize:"A1"}},{name:"story-item-pub-listing",title:Object(g.__)("Pub Listing Story Item"),excerpt:Object(g.__)("Left algined A3 image (right aligned A3 on mobile)."),attributes:{imageSlot:"left",imageSize:"A3"}},{name:"story-item-slim",title:Object(g.__)("Story Item Slim"),excerpt:Object(g.__)("No excerpt, no image."),attributes:{imageSlot:"disabled",enableExcerpt:!1}}];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=s.name,se={example:{attributes:{title:"Ultricies Ipsum Nibh Egestas Purus",excerpt:"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id elit non mi porta gravida at eget metus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>",label:"Report",date:r().format("MM-DD-YYYY"),image:"https://www.pewresearch.org/global/wp-content/uploads/sites/2/2020/04/PG_2020.04.21_U.S.-Views-China_featured.jpg",imageSlot:"top",imageSize:"A2",isPreview:!0}},deprecated:i,variations:le,supports:{color:{text:!0,background:!1},typography:{fontSize:!0}},edit:ae,save:re};Object(l.registerBlockType)(ie,oe(oe({},s),se))}},[[966,0,1,77]]]);
//# sourceMappingURL=story-item-52ce6c80.js.map