{"version":3,"sources":["webpack:///external \"wp.element\"","webpack:///external \"wp.i18n\"","webpack:///external \"regeneratorRuntime\"","webpack:///external \"wp.url\"","webpack:///external \"wp.blockEditor\"","webpack:///external \"wp.components\"","webpack:///external \"lodash\"","webpack:///./src/menu-link/edit.js","webpack:///./src/menu-link/index.js","webpack:///./src/menu-link/save.js","webpack:///external \"wp.data\"","webpack:///external \"wp.blocks\""],"names":["module","exports","wp","element","i18n","regeneratorRuntime","url","blockEditor","components","lodash","getSuggestionsQuery","type","subtype","compose","withSelect","select","ownProps","getClientIdsOfDescendants","getBlockAttributes","hasSelectedInnerBlock","getSelectedBlockClientId","getBlockParentsByBlockName","clientId","getSettings","hasDescendants","length","isImmediateParentOfSelectedBlock","selectedBlockHasDescendants","userCanCreatePages","canUser","userCanCreatePosts","withDispatch","dispatch","registry","insertLinkBlock","insertBlock","navItems","insertionPoint","createBlock","attributes","context","isSelected","setAttributes","insertBlocksAfter","mergeBlocks","onReplace","label","opensInNewTab","description","rel","title","link","saveEntityRecord","useDispatch","useState","isLinkOpen","setIsLinkOpen","listItemRef","useRef","isDraggingWithin","elementRef","setIsDraggingWithin","useEffect","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","useIsDraggingWithin","itemLabelPlaceholder","__","ref","isDraggingBlocks","useSelect","isURL","prependHTTP","test","focus","selection","defaultView","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","selectLabelText","placeCaretAtHorizontalEdge","userCanCreate","pageTitle","a","postType","status","page","id","rendered","blockProps","useBlockProps","className","classnames","bindGlobal","shortcuts","rawShortcut","primary","name","icon","linkIcon","shortcut","displayShortcut","onClick","value","onChange","descriptionValue","help","titleValue","autoComplete","relValue","identifier","labelValue","onMerge","__unstableOnSplitAtEnd","aria-label","placeholder","keepPlaceholderOnFocus","withoutInteractiveFormatting","allowedFormats","position","onClose","showInitialSuggestions","withCreateSuggestion","createSuggestion","createSuggestionButtonText","searchTerm","format","createInterpolateElement","sprintf","mark","noDirectEntry","noURLSuggestion","suggestionsQuery","normalizedTitle","normalizedURL","newTitle","newURL","newOpensInNewTab","encodeURI","replace","escape","metadata","settings","variations","isDefault","postIcon","pageIcon","categoryIcon","tagIcon","__experimentalLabel","merge","leftAttributes","rightLabel","edit","save","Content","deprecated","isEligible","nofollow","default","migrate","registerBlockType","data","blocks"],"mappings":"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","file":"blocks/menu-link-7293a403.js","sourcesContent":["module.exports = wp.element;","module.exports = wp.i18n;","module.exports = regeneratorRuntime;","module.exports = wp.url;","module.exports = wp.blockEditor;","module.exports = wp.components;","module.exports = lodash;","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { escape, get, head, find } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n    useSelect,\n    useDispatch,\n    withDispatch,\n    withSelect,\n} from '@wordpress/data';\nimport {\n    KeyboardShortcuts,\n    PanelBody,\n    Popover,\n    TextControl,\n    TextareaControl,\n    ToolbarButton,\n    ToolbarGroup,\n} from '@wordpress/components';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n    BlockControls,\n    InnerBlocks,\n    __experimentalUseInnerBlocksProps as useInnerBlocksProps,\n    InspectorControls,\n    RichText,\n    __experimentalLinkControl as LinkControl,\n    useBlockProps,\n} from '@wordpress/block-editor';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport {\n    Fragment,\n    useState,\n    useEffect,\n    useRef,\n    createInterpolateElement,\n} from '@wordpress/element';\nimport { placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { link as linkIcon } from '@wordpress/icons';\n\nconst isStyle = (needle, haystack) => {\n    const arr = haystack.split(' ');\n    return arr.includes(needle);\n};\n\n/**\n * A React hook to determine if it's dragging within the target element.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\n *\n * @return {boolean} Is dragging within the target element.\n */\nconst useIsDraggingWithin = elementRef => {\n    const [isDraggingWithin, setIsDraggingWithin] = useState(false);\n\n    useEffect(() => {\n        const { ownerDocument } = elementRef.current;\n\n        function handleDragStart(event) {\n            // Check the first time when the dragging starts.\n            handleDragEnter(event);\n        }\n\n        // Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\n        function handleDragEnd() {\n            setIsDraggingWithin(false);\n        }\n\n        function handleDragEnter(event) {\n            // Check if the current target is inside the item element.\n            if (elementRef.current.contains(event.target)) {\n                setIsDraggingWithin(true);\n            } else {\n                setIsDraggingWithin(false);\n            }\n        }\n\n        // Bind these events to the document to catch all drag events.\n        // Ideally, we can also use `event.relatedTarget`, but sadly that\n        // doesn't work in Safari.\n        ownerDocument.addEventListener('dragstart', handleDragStart);\n        ownerDocument.addEventListener('dragend', handleDragEnd);\n        ownerDocument.addEventListener('dragenter', handleDragEnter);\n\n        return () => {\n            ownerDocument.removeEventListener('dragstart', handleDragStart);\n            ownerDocument.removeEventListener('dragend', handleDragEnd);\n            ownerDocument.removeEventListener('dragenter', handleDragEnter);\n        };\n    }, []);\n\n    return isDraggingWithin;\n};\n\n/**\n * Given the Link block's type attribute, return the query params to give to\n * /wp/v2/search.\n *\n * @param {string} type Link block's type attribute.\n * @return {{ type?: string, subtype?: string }} Search query params.\n */\nfunction getSuggestionsQuery(type) {\n    switch (type) {\n        case 'post':\n        case 'page':\n            return { type: 'post', subtype: type };\n        case 'topic':\n            return { type: 'term', subtype: 'topic' };\n        case 'formats':\n            return { type: 'term', subtype: 'formats' };\n        case 'programs':\n            return { type: 'term', subtype: 'programs' };\n        default:\n            return {};\n    }\n}\n\nfunction NavigationLinkEdit({\n    attributes,\n    context,\n    isSelected,\n    isImmediateParentOfSelectedBlock,\n    setAttributes,\n    insertLinkBlock,\n    userCanCreatePages = false,\n    userCanCreatePosts = false,\n    insertBlocksAfter,\n    mergeBlocks,\n    onReplace,\n}) {\n    const {\n        label,\n        type,\n        opensInNewTab,\n        url,\n        description,\n        rel,\n        title,\n    } = attributes;\n    const link = {\n        url,\n        opensInNewTab,\n    };\n    const { saveEntityRecord } = useDispatch('core');\n    const [isLinkOpen, setIsLinkOpen] = useState(false);\n    const listItemRef = useRef(null);\n    const isDraggingWithin = useIsDraggingWithin(listItemRef);\n    const itemLabelPlaceholder = __('Add link…');\n    const ref = useRef();\n\n    const isDraggingBlocks = useSelect(\n        select => select('core/block-editor').isDraggingBlocks(),\n        [],\n    );\n\n    // Show the LinkControl on mount if the URL is empty\n    // ( When adding a new menu item)\n    // This can't be done in the useState call because it conflicts\n    // with the autofocus behavior of the BlockListBlock component.\n    useEffect(() => {\n        if (!url) {\n            setIsLinkOpen(true);\n        }\n    }, []);\n\n    /**\n     * The hook shouldn't be necessary but due to a focus loss happening\n     * when selecting a suggestion in the link popover, we force close on block unselection.\n     */\n    useEffect(() => {\n        if (!isSelected) {\n            setIsLinkOpen(false);\n        }\n    }, [isSelected]);\n\n    // If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\n    useEffect(() => {\n        if (isLinkOpen && url) {\n            // Does this look like a URL and have something TLD-ish?\n            if (isURL(prependHTTP(label)) && /^.+\\.[a-z]+/.test(label)) {\n                // Focus and select the label text.\n                selectLabelText();\n            } else {\n                // Focus it (but do not select).\n                placeCaretAtHorizontalEdge(ref.current, true);\n            }\n        }\n    }, [url]);\n\n    /**\n     * Focus the Link label text and select it.\n     */\n    function selectLabelText() {\n        ref.current.focus();\n        const { ownerDocument } = ref.current;\n        const { defaultView } = ownerDocument;\n        const selection = defaultView.getSelection();\n        const range = ownerDocument.createRange();\n        // Get the range of the current ref contents so we can add this range to the selection.\n        range.selectNodeContents(ref.current);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n\n    let userCanCreate = false;\n    if (!type || 'page' === type) {\n        userCanCreate = userCanCreatePages;\n    } else if ('post' === type) {\n        userCanCreate = userCanCreatePosts;\n    }\n\n    async function handleCreate(pageTitle) {\n        const postType = type || 'page';\n\n        const page = await saveEntityRecord('postType', postType, {\n            title: pageTitle,\n            status: 'publish',\n        });\n\n        return {\n            id: page.id,\n            postType,\n            title: page.title.rendered,\n            url: page.link,\n        };\n    }\n\n    const blockProps = useBlockProps({\n        ref: listItemRef,\n        className: classnames('item', {\n            'is-editing':\n                isSelected &&\n                // Don't show the element as editing while dragging.\n                !isDraggingBlocks,\n            // Don't select the element while dragging.\n            'is-selected': isSelected && !isDraggingBlocks,\n            'is-dragging-within': isDraggingWithin,\n            'has-link': !!url,\n        }),\n    });\n\n    return (\n        <Fragment>\n            <BlockControls>\n                <ToolbarGroup>\n                    <KeyboardShortcuts\n                        bindGlobal\n                        shortcuts={{\n                            [rawShortcut.primary('k')]: () =>\n                                setIsLinkOpen(true),\n                        }}\n                    />\n                    <ToolbarButton\n                        name=\"link\"\n                        icon={linkIcon}\n                        title={__('Link')}\n                        shortcut={displayShortcut.primary('k')}\n                        onClick={() => setIsLinkOpen(true)}\n                    />\n                </ToolbarGroup>\n            </BlockControls>\n\n            <InspectorControls>\n                <PanelBody title={__('Link settings')}>\n                    <TextareaControl\n                        value={description || ''}\n                        onChange={descriptionValue => {\n                            setAttributes({ description: descriptionValue });\n                        }}\n                        label={__('Description')}\n                        help={__(\n                            'The description will be displayed in the menu if the current theme supports it.',\n                        )}\n                    />\n                    <TextControl\n                        value={title || ''}\n                        onChange={titleValue => {\n                            setAttributes({ title: titleValue });\n                        }}\n                        label={__('Link title')}\n                        autoComplete=\"off\"\n                    />\n                    <TextControl\n                        value={rel || ''}\n                        onChange={relValue => {\n                            setAttributes({ rel: relValue });\n                        }}\n                        label={__('Link rel')}\n                        autoComplete=\"off\"\n                    />\n                </PanelBody>\n            </InspectorControls>\n\n            <div {...blockProps}>\n                <RichText\n                    ref={ref}\n                    identifier=\"label\"\n                    className={\n                        'is-style-text' === context['prc-block/menu']\n                            ? 'ui basic button'\n                            : ''\n                    }\n                    value={label}\n                    onChange={labelValue =>\n                        setAttributes({ label: labelValue })\n                    }\n                    onMerge={mergeBlocks}\n                    onReplace={onReplace}\n                    __unstableOnSplitAtEnd={() =>\n                        insertBlocksAfter(createBlock('prc-block/menu-link'))\n                    }\n                    aria-label={__('Navigation link text')}\n                    placeholder={itemLabelPlaceholder}\n                    keepPlaceholderOnFocus\n                    withoutInteractiveFormatting\n                    allowedFormats={[\n                        'core/bold',\n                        'core/italic',\n                        'core/image',\n                        'core/strikethrough',\n                    ]}\n                />\n                {isLinkOpen && (\n                    <Popover\n                        position=\"bottom center\"\n                        onClose={() => setIsLinkOpen(false)}\n                    >\n                        <LinkControl\n                            className=\"wp-block-navigation-link__inline-link-input\"\n                            value={link}\n                            showInitialSuggestions\n                            withCreateSuggestion={userCanCreate}\n                            createSuggestion={handleCreate}\n                            createSuggestionButtonText={searchTerm => {\n                                let format;\n                                if ('post' === type) {\n                                    /* translators: %s: search term. */\n                                    format = __('Create post: <mark>%s</mark>');\n                                } else {\n                                    /* translators: %s: search term. */\n                                    format = __('Create page: <mark>%s</mark>');\n                                }\n                                return createInterpolateElement(\n                                    sprintf(format, searchTerm),\n                                    { mark: <mark /> },\n                                );\n                            }}\n                            noDirectEntry={!!type}\n                            noURLSuggestion={!!type}\n                            suggestionsQuery={getSuggestionsQuery(type)}\n                            onChange={({\n                                title: newTitle = '',\n                                url: newURL = '',\n                                opensInNewTab: newOpensInNewTab,\n                                id,\n                            } = {}) =>\n                                setAttributes({\n                                    url: encodeURI(newURL),\n                                    label: (() => {\n                                        const normalizedTitle = newTitle.replace(\n                                            /http(s?):\\/\\//gi,\n                                            '',\n                                        );\n                                        const normalizedURL = newURL.replace(\n                                            /http(s?):\\/\\//gi,\n                                            '',\n                                        );\n                                        if (\n                                            '' !== newTitle &&\n                                            normalizedTitle !== normalizedURL &&\n                                            label !== newTitle\n                                        ) {\n                                            return escape(newTitle);\n                                        }\n                                        if (label) {\n                                            return label;\n                                        }\n                                        // If there's no label, add the URL.\n                                        return escape(normalizedURL);\n                                    })(),\n                                    opensInNewTab: newOpensInNewTab,\n                                    id,\n                                })\n                            }\n                        />\n                    </Popover>\n                )}\n            </div>\n        </Fragment>\n    );\n}\n\nexport default compose([\n    withSelect((select, ownProps) => {\n        const {\n            getBlockAttributes,\n            getClientIdsOfDescendants,\n            hasSelectedInnerBlock,\n            getBlockParentsByBlockName,\n            getSelectedBlockClientId,\n            getSettings,\n        } = select('core/block-editor');\n        const { clientId } = ownProps;\n        const hasDescendants = !!getClientIdsOfDescendants([clientId]).length;\n\n        const isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n            clientId,\n            false,\n        );\n        const selectedBlockId = getSelectedBlockClientId();\n        const selectedBlockHasDescendants = !!getClientIdsOfDescendants([\n            selectedBlockId,\n        ])?.length;\n\n        return {\n            isImmediateParentOfSelectedBlock,\n            hasDescendants,\n            selectedBlockHasDescendants,\n            userCanCreatePages: select('core').canUser('create', 'pages'),\n            userCanCreatePosts: select('core').canUser('create', 'posts'),\n        };\n    }),\n    withDispatch((dispatch, ownProps, registry) => {\n        return {\n            insertLinkBlock() {\n                const { clientId } = ownProps;\n\n                const { insertBlock } = dispatch('core/block-editor');\n\n                const { getClientIdsOfDescendants } = registry.select(\n                    'core/block-editor',\n                );\n                const navItems = getClientIdsOfDescendants([clientId]);\n                const insertionPoint = navItems.length ? navItems.length : 0;\n\n                const blockToInsert = createBlock('prc-block/menu-link');\n\n                insertBlock(blockToInsert, insertionPoint, clientId);\n            },\n        };\n    }),\n])(NavigationLinkEdit);\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tcategory as categoryIcon,\n\tmapMarker as linkIcon,\n\tpage as pageIcon,\n\tpostTitle as postIcon,\n\ttag as tagIcon,\n} from '@wordpress/icons';\nimport { InnerBlocks } from '@wordpress/block-editor';\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\n\nconst { name } = metadata;\n\nexport const settings = {\n\ttitle: __( 'Link' ),\n\n\ticon: linkIcon,\n\n\tdescription: __( 'Add a page, link, or another item to your navigation.' ),\n\n\tvariations: [\n\t\t{\n\t\t\tname: 'link',\n\t\t\tisDefault: true,\n\t\t\ttitle: __( 'Link' ),\n\t\t\tdescription: __( 'A link to a URL.' ),\n\t\t\tattributes: {},\n\t\t},\n\t\t{\n\t\t\tname: 'post',\n\t\t\ticon: postIcon,\n\t\t\ttitle: __( 'Post Link' ),\n\t\t\tdescription: __( 'A link to a post.' ),\n\t\t\tattributes: { type: 'post' },\n\t\t},\n\t\t{\n\t\t\tname: 'page',\n\t\t\ticon: pageIcon,\n\t\t\ttitle: __( 'Page Link' ),\n\t\t\tdescription: __( 'A link to a page.' ),\n\t\t\tattributes: { type: 'page' },\n\t\t},\n\t\t{\n\t\t\tname: 'topic',\n\t\t\ticon: categoryIcon,\n\t\t\ttitle: __( 'Topic Page Link' ),\n\t\t\tdescription: __( 'A link to a topic.' ),\n\t\t\tattributes: { type: 'topic' },\n\t\t},\n\t\t{\n\t\t\tname: 'formats',\n\t\t\ticon: tagIcon,\n\t\t\ttitle: __( 'Format Link' ),\n\t\t\tdescription: __( 'A link to a format.' ),\n\t\t\tattributes: { type: 'formats' },\n\t\t},\n\t\t{\n\t\t\tname: 'programs',\n\t\t\ticon: tagIcon,\n\t\t\ttitle: __( 'Program Link' ),\n\t\t\tdescription: __( 'A link to a program.' ),\n\t\t\tattributes: { type: 'programs' },\n\t\t},\n\t],\n\n\t__experimentalLabel: ( { label } ) => label,\n\n\tmerge( leftAttributes, { label: rightLabel = '' } ) {\n\t\treturn {\n\t\t\t...leftAttributes,\n\t\t\tlabel: leftAttributes.label + rightLabel,\n\t\t};\n\t},\n\n\tedit,\n\n\tsave,\n\n\tdeprecated: [\n\t\t{\n\t\t\tisEligible( attributes ) {\n\t\t\t\treturn attributes.nofollow;\n\t\t\t},\n\n\t\t\tattributes: {\n\t\t\t\tlabel: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t\tnofollow: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t},\n\t\t\t\topensInNewTab: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tdefault: false,\n\t\t\t\t},\n\t\t\t\turl: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tmigrate( { nofollow, ...rest } ) {\n\t\t\t\treturn {\n\t\t\t\t\trel: nofollow ? 'nofollow' : '',\n\t\t\t\t\t...rest,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tsave() {\n\t\t\t\treturn <InnerBlocks.Content />;\n\t\t\t},\n\t\t},\n\t],\n};\n\nregisterBlockType( name, {...metadata, ...settings});","/**\n * WordPress dependencies\n */\nimport { InnerBlocks } from '@wordpress/block-editor';\n\nexport default function save() {\n\treturn <InnerBlocks.Content />;\n}\n","module.exports = wp.data;","module.exports = wp.blocks;"],"sourceRoot":""}