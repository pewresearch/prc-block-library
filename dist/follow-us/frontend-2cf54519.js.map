{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.element\"","webpack:///./src/follow-us/frontend.js","webpack:///external \"wp.blockEditor\"","webpack:///external \"ReactDOM\"","webpack:///./src/follow-us/component.js","webpack:///external \"wp.apiFetch\""],"names":["module","exports","React","wp","element","document","addEventListener","querySelector","elms","querySelectorAll","elm","socialMediaMarkup","innerHTML","props","newsletters","getAttribute","setAttributes","render","blockEditor","ReactDOM","FollowUs","undefined","editMode","selected","split","length","setState","ID","state","includes","index","indexOf","splice","push","e","interests","join","email","dimmed","loading","message","apiFetch","path","method","then","catch","err","console","error","finally","window","prcMailchimpBlock","map","item","class","Field","label","value","checked","className","onChange","data","update","classes","classNames","SelectNewsletters","selectNewsletters","fluid","style","marginBottom","Header","Dimmable","as","tagName","socialMedia","formattingControls","placeholder","multiline","children","onSubmit","submitHandler","isSelected","selectNewsletter","required","size","action","color","content","justifyContent","width","type","disabled","target","active","onClickOutside","bind","Component"],"mappings":"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","file":"follow-us/frontend-2cf54519.js","sourcesContent":["module.exports = React;","module.exports = wp.element;","import { render } from '@wordpress/element';\n\nimport FollowUs from './component';\n\n// When DOM is fully loaded load the filters\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n\tif ( document.querySelector('.js-react-follow-us') ) {\n\t\tconst elms = document.querySelectorAll('.js-react-follow-us');\n\t\tfor ( let elm of elms ) {\n\t\t\tconst socialMediaMarkup = elm.innerHTML;\n\t\t\tconst props = {\n\t\t\t\tnewsletters: elm.getAttribute('data-newsletters'),\n\t\t\t\tsetAttributes: false,\n\t\t\t}\n\t\t\trender( \n\t\t\t\t<FollowUs {...props}>{socialMediaMarkup}</FollowUs>,\n\t\t\t\telm\n\t\t\t);\t\n\t\t}\n\t}\n});\n","module.exports = wp.blockEditor;","module.exports = ReactDOM;","import { Component, Fragment, RawHTML } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Card as SemanticCard, Checkbox, Button, Form, Input, Dimmer } from 'semantic-ui-react';\nimport classNames from 'classnames/bind';\n\nclass FollowUs extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\temail: '',\n\t\t\tloading: false,\n\t\t\tdimmed: false,\n\t\t\tmessage: '',\n\t\t\tselected: [],\n\t\t}\n\t\tthis.setState = this.setState.bind(this);\n\t\tthis.submitHandler = this.submitHandler.bind(this);\n\t}\n\n\tcomponentDidMount = () => {\n\t\tif ( undefined !== this.props.editMode && true === this.props.editMode ) {\n\t\t\tconst selected = this.props.newsletters.split(',');\n\t\t\tif ( 0 !== selected.length ) {\n\t\t\t\tthis.setState({selected});\n\t\t\t}\n\t\t}\n\t}\n\n\tselectNewsletter = (ID) => {\n\t\tlet selected = this.state.selected;\n\n\t\tif ( selected.includes(ID) ) {\n\t\t\t// If currently selected then remove\n\t\t\tvar index = selected.indexOf(ID);\n\t\t\tif ( index > -1 ) {\n\t\t\t\tselected.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tselected.push(ID);\n\t\t}\n\t\t\n\t\tthis.setState({ selected });\n\t}\n\n\tisSelected = ( ID ) => {\n\t\tlet newsletters = this.props.newsletters.split(',');\n\t\tif ( newsletters.includes(ID) ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tsubmitHandler = (e) => {\n\t\tconst setState = this.setState;\n\t\tconst interests = this.state.selected.join();\n\t\tconst email = this.state.email;\n\t\tlet state = {\n\t\t\tdimmed: true,\n\t\t\tloading: false,\n\t\t\tmessage: '',\n\t\t}\n\n\t\tsetState({loading: true});\n\n\t\tapiFetch( {\n\t\t\tpath: '/prc-api/v2/mailchimp/subscribe/?email=' +email+ '&interests=' + interests,\n\t\t\tmethod: 'POST',\n\t\t} ).then( () => {\n\t\t\tstate.message = \"You have succesfully subsrcibed to these newsletter(s)\";\n\t\t} ).catch( (err) => {\n\t\t\tconsole.error(err);\n\t\t\tstate.message = \"Unfortunately we could not susbscribe you at this time. Please try again later.\";\n\t\t} ).finally( () => {\n\t\t\tsetState(state);\n\t\t} );\n\t}\n\n\tselectNewsletters = () =>{\n\t\tconst update = ( ID ) => {\n\t\t\tlet selected = this.state.selected;\n\t\n\t\t\tif ( selected.includes(ID) ) {\n\t\t\t\t// If currently selected then remove \"toggle\"\n\t\t\t\tvar index = selected.indexOf(ID);\n\t\t\t\tif ( index > -1 ) {\n\t\t\t\t\tselected.splice(index, 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tselected.push(ID);\n\t\t\t}\n\t\t\t\n\t\t\t// Update the selection of newsletters in the context of the sidebar:\n\t\t\tthis.setState({ selected });\n\t\t\t// Covnert array to string for data storage:\n\t\t\tthis.props.setAttributes({ newsletters: selected.join() });\n\t\t}\n\n\t\tconst isSelected = ( ID ) => {\n\t\t\tlet newsletters = this.state.selected;\n\t\t\tif ( newsletters.includes(ID) ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tlet newsletters = window.prcMailchimpBlock.interests;\n\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t{ newsletters.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t\t<Form.Field><Checkbox label={item.label} value={item.value} checked={ isSelected(item.value)} className=\"sans-serif\" onChange={ (e, data) => update(data.value) }/></Form.Field>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}) }\n\t\t\t</Fragment>\n\t\t)\n\t}\n\n\trender = () => {\n\t\tlet classes = classNames(this.props.className, 'inverted', 'beige');\n\t\tconst newsletters = window.prcMailchimpBlock.interests;\n\t\tconst SelectNewsletters = this.selectNewsletters;\n\t\t\n\t\treturn(\n\t\t\t<SemanticCard fluid className={classes} style={{marginBottom: '35px'}}>\n\t\t\t\t\n\t\t\t\t<SemanticCard.Header>Follow Us</SemanticCard.Header>\n\t\t\t\t<Dimmer.Dimmable as=\"div\" className=\"content\" dimmed={this.state.dimmed}>\n\t\t\t\t\t<div class=\"ui sub header\">Social Media</div>\n\t\t\t\t\t{/* Edit */}\n\t\t\t\t\t{ false !== this.props.setAttributes && (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\ttagName=\"ul\"\n\t\t\t\t\t\t\tvalue={ this.props.socialMedia }\n\t\t\t\t\t\t\tonChange={ ( socialMedia ) => {\n\t\t\t\t\t\t\t\tthis.props.setAttributes( { socialMedia } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tformattingControls={ ['link'] }\n\t\t\t\t\t\t\tplaceholder={ this.props.socialMedia }\n\t\t\t\t\t\t\tmultiline=\"li\"\n\t\t\t\t\t\t\tclassName=\"ui link list\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{/* Display */}\n\t\t\t\t\t{ false === this.props.setAttributes && true === this.props.editMode && (\n\t\t\t\t\t\tthis.props.children\n\t\t\t\t\t) }\n\t\t\t\t\t{ false === this.props.setAttributes && undefined === this.props.editMode && (\n\t\t\t\t\t\t<RawHTML>{this.props.children}</RawHTML>\n\t\t\t\t\t) }\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"ui sub header\">Newsletters</div>\n\t\t\t\t\t<Form onSubmit={this.submitHandler}>\n\t\t\t\t\t\t<div class=\"ui list\">\n\t\t\t\t\t\t{ false === this.props.setAttributes && (\n\t\t\t\t\t\t\tnewsletters.map((item, index) => {\n\t\t\t\t\t\t\t\tif ( this.isSelected(item.value) ) {\n\t\t\t\t\t\t\t\t\treturn <div className=\"item\"><Form.Field><Checkbox label={item.label} value={item.value} className=\"sans-serif\" onChange={ (e, data) => this.selectNewsletter(data.value) }/></Form.Field></div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ false !== this.props.setAttributes && (\n\t\t\t\t\t\t\t<SelectNewsletters/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Form.Field required>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tfluid \n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\taction={{\n\t\t\t\t\t\t\t\t\tcolor: 'secondary',\n\t\t\t\t\t\t\t\t\tsize: 'mini',\n\t\t\t\t\t\t\t\t\tcontent: 'Sign Up',\n\t\t\t\t\t\t\t\t\tloading: this.state.loading,\n\t\t\t\t\t\t\t\t\tstyle: {justifyContent: 'center', width: 'auto'}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tplaceholder='Email Address'\n\t\t\t\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\t\t\t\tdisabled={this.state.loading}\n\t\t\t\t\t\t\t\tonChange={ (e) => this.setState({email: e.target.value}) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Field>\n\t\t\t\t\t</Form>\n\n\t\t\t\t\t<Dimmer active={this.state.dimmed} onClickOutside={()=>{this.setState({dimmed:false})}}>\n\t\t\t\t\t\t<p className=\"sans-serif\">{this.state.message} (Click to close)</p>\n\t\t\t\t\t</Dimmer>\n\t\t\t\t</Dimmer.Dimmable>\t\t\t\t\t\t\t\t\t\n\t\t\t</SemanticCard>\n\t\t)\n\t}\t\n}\n\nexport default FollowUs;","module.exports = wp.apiFetch;"],"sourceRoot":""}