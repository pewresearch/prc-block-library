{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.blocks\"","webpack:///./src/follow-us/index.js","webpack:///external \"wp.element\"","webpack:///external \"wp.blockEditor\"","webpack:///external \"ReactDOM\"","webpack:///./src/follow-us/component.js","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.i18n\""],"names":["module","exports","React","wp","blocks","registerBlockType","title","__","icon","category","keywords","supports","html","attributes","newsletters","type","default","socialMedia","source","selector","multiline","edit","props","data","setAttributes","editMode","isSelected","Content","className","tagName","value","save","data-newsletters","element","blockEditor","ReactDOM","FollowUs","undefined","selected","split","length","setState","ID","state","includes","index","indexOf","splice","push","e","interests","join","email","dimmed","loading","message","apiFetch","path","method","then","catch","err","console","error","finally","window","prcMailchimpBlock","map","item","class","Field","label","checked","onChange","update","classes","classNames","SelectNewsletters","selectNewsletters","fluid","style","marginBottom","Header","Dimmable","as","formattingControls","placeholder","children","onSubmit","submitHandler","selectNewsletter","required","size","action","color","content","justifyContent","width","disabled","target","active","onClickOutside","bind","Component","i18n"],"mappings":"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","file":"follow-us/main-e86d0226.js","sourcesContent":["module.exports = React;","module.exports = wp.blocks;","/**\n * BLOCK: prc-blocks\n *\n * Registering a basic block with Gutenberg.\n * Simple block, renders and saves the same content without any interactivity.\n */\n\nimport { __ } from \"@wordpress/i18n\";\nimport { registerBlockType } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/block-editor';\n\nimport FollowUs from './component';\n\n/**\n * Register: aa Gutenberg Block.\n *\n * Registers a new block provided a unique name and an object defining its\n * behavior. Once registered, the block is made editor as an option to any\n * editor interface where blocks are implemented.\n *\n * @link https://wordpress.org/gutenberg/handbook/block-api/\n * @param  {string}   name     Block name.\n * @param  {Object}   settings Block settings.\n * @return {?WPBlock}          The block, if it has been successfully\n *                             registered; otherwise `undefined`.\n */\nregisterBlockType( 'prc-block/follow-us', {\n\t// Block name. Block names must be string that contains a namespace prefix. Example: my-plugin/my-custom-block.\n\ttitle: __( 'Follow Us' ), // Block title.\n\ticon: 'format-aside', // Block icon from Dashicons → https://developer.wordpress.org/resource/dashicons/.\n\tcategory: 'widgets', // Block category — Group blocks together based on common traits E.g. common, formatting, layout widgets, embed.\n\tkeywords: [\n\t\t__( 'prc' ),\n\t\t__( 'newsletter' ),\n\t\t__( 'follow us' ),\n\t],\n\tsupports: {\n\t\thtml: false, // We do not want to give people the ability to edit the raw html of this block.\n\t},\n\t// Attributes are really react props. \n\tattributes: {\n\t\tnewsletters: {\n\t\t\ttype: 'string',\n\t\t\tdefault: ''\n\t\t},\n\t\tsocialMedia: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tselector: '.ui.link.list',\n\t\t\tmultiline: 'li',\n\t\t\tdefault: '<li><a href=\"#\">Twitter</a></li>'\n\t\t},\n\t},\n\n\t/**\n\t * The edit function describes the structure of your block in the context of the editor.\n\t * This represents what the editor will render when the block is used.\n\t *\n\t * The \"edit\" property must be a valid function.\n\t *\n\t * @link https://wordpress.org/gutenberg/handbook/block-api/block-edit-save/\n\t *\n\t * @param {Object} props Props.\n\t * @returns {Mixed} JSX Component.\n\t */\n\tedit: ( props ) => {\n\t\tlet data = props.attributes;\n\t\tdata.setAttributes = false;\n\t\tdata.editMode = true;\n\t\tif ( true === props.isSelected ) {\n\t\t\tdata.setAttributes = props.setAttributes;\n\t\t}\n\t\treturn(\n\t\t\t<FollowUs {...data}>\n\t\t\t\t<RichText.Content className=\"ui link list\" tagName=\"div\" value={ data.socialMedia } />\n\t\t\t</FollowUs>\n\t\t)\n\t},\n\n\t// Seth Learning Note: SO save literally only transforms on post_content filter. You won't see this result inside the gutenberg editor, you will however see it if you look at code view.\n\t/**\n\t * The save function defines the way in which the different attributes should be combined\n\t * into the final markup, which is then serialized by Gutenberg into post_content.\n\t *\n\t * The \"save\" property must be specified and must be a valid function.\n\t *\n\t * @link https://wordpress.org/gutenberg/handbook/block-api/block-edit-save/\n\t *\n\t * @param {Object} props Props.\n\t * @returns {Mixed} JSX Frontend HTML.\n\t */\n\tsave: ( props ) => {\n\t\treturn (\n\t\t\t<div className=\"js-react-follow-us\" data-newsletters={props.attributes.newsletters}>\n\t\t\t\t<RichText.Content className=\"ui link list\" tagName=\"div\" value={ props.attributes.socialMedia } />\n\t\t\t</div>\n\t\t);\n\t},\n} );\n","module.exports = wp.element;","module.exports = wp.blockEditor;","module.exports = ReactDOM;","import { Component, Fragment, RawHTML } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Card, Checkbox, Button, Form, Input, Dimmer } from 'semantic-ui-react';\nimport classNames from 'classnames/bind';\n\nclass FollowUs extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\temail: '',\n\t\t\tloading: false,\n\t\t\tdimmed: false,\n\t\t\tmessage: '',\n\t\t\tselected: [],\n\t\t}\n\t\tthis.setState = this.setState.bind(this);\n\t\tthis.submitHandler = this.submitHandler.bind(this);\n\t}\n\n\tcomponentDidMount = () => {\n\t\tif ( undefined !== this.props.editMode && true === this.props.editMode ) {\n\t\t\tconst selected = this.props.newsletters.split(',');\n\t\t\tif ( 0 !== selected.length ) {\n\t\t\t\tthis.setState({selected});\n\t\t\t}\n\t\t}\n\t}\n\n\tselectNewsletter = (ID) => {\n\t\tlet selected = this.state.selected;\n\n\t\tif ( selected.includes(ID) ) {\n\t\t\t// If currently selected then remove\n\t\t\tvar index = selected.indexOf(ID);\n\t\t\tif ( index > -1 ) {\n\t\t\t\tselected.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tselected.push(ID);\n\t\t}\n\t\t\n\t\tthis.setState({ selected });\n\t}\n\n\tisSelected = ( ID ) => {\n\t\tlet newsletters = this.props.newsletters.split(',');\n\t\tif ( newsletters.includes(ID) ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tsubmitHandler = (e) => {\n\t\tconst setState = this.setState;\n\t\tconst interests = this.state.selected.join();\n\t\tconst email = this.state.email;\n\t\tlet state = {\n\t\t\tdimmed: true,\n\t\t\tloading: false,\n\t\t\tmessage: '',\n\t\t}\n\n\t\tsetState({loading: true});\n\n\t\tapiFetch( {\n\t\t\tpath: '/prc-api/v2/mailchimp/subscribe/?email=' +email+ '&interests=' + interests,\n\t\t\tmethod: 'POST',\n\t\t} ).then( () => {\n\t\t\tstate.message = \"You have succesfully subsrcibed to these newsletter(s)\";\n\t\t} ).catch( (err) => {\n\t\t\tconsole.error(err);\n\t\t\tstate.message = \"Unfortunately we could not susbscribe you at this time. Please try again later.\";\n\t\t} ).finally( () => {\n\t\t\tsetState(state);\n\t\t} );\n\t}\n\n\tselectNewsletters = () =>{\n\t\tconst update = ( ID ) => {\n\t\t\tlet selected = this.state.selected;\n\t\n\t\t\tif ( selected.includes(ID) ) {\n\t\t\t\t// If currently selected then remove \"toggle\"\n\t\t\t\tvar index = selected.indexOf(ID);\n\t\t\t\tif ( index > -1 ) {\n\t\t\t\t\tselected.splice(index, 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tselected.push(ID);\n\t\t\t}\n\t\t\t\n\t\t\t// Update the selection of newsletters in the context of the sidebar:\n\t\t\tthis.setState({ selected });\n\t\t\t// Covnert array to string for data storage:\n\t\t\tthis.props.setAttributes({ newsletters: selected.join() });\n\t\t}\n\n\t\tconst isSelected = ( ID ) => {\n\t\t\tlet newsletters = this.state.selected;\n\t\t\tif ( newsletters.includes(ID) ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tlet newsletters = window.prcMailchimpBlock.interests;\n\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t{ newsletters.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t\t<Form.Field><Checkbox label={item.label} value={item.value} checked={ isSelected(item.value)} className=\"sans-serif\" onChange={ (e, data) => update(data.value) }/></Form.Field>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}) }\n\t\t\t</Fragment>\n\t\t)\n\t}\n\n\trender = () => {\n\t\tlet classes = classNames(this.props.className, 'inverted', 'beige');\n\t\tconst newsletters = window.prcMailchimpBlock.interests;\n\t\tconst SelectNewsletters = this.selectNewsletters;\n\t\treturn(\n\t\t\t<Card fluid className={classes} style={{marginBottom: '35px'}}>\n\t\t\t\t\n\t\t\t\t<Card.Header>Follow Us</Card.Header>\n\t\t\t\t<Dimmer.Dimmable as=\"div\" className=\"content\" dimmed={this.state.dimmed}>\n\t\t\t\t\t<div class=\"ui sub header\">Social Media</div>\n\t\t\t\t\t{/* Edit */}\n\t\t\t\t\t{ false !== this.props.setAttributes && (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\ttagName=\"ul\"\n\t\t\t\t\t\t\tvalue={ this.props.socialMedia }\n\t\t\t\t\t\t\tonChange={ ( socialMedia ) => {\n\t\t\t\t\t\t\t\tthis.props.setAttributes( { socialMedia } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tformattingControls={ ['link'] }\n\t\t\t\t\t\t\tplaceholder={ this.props.socialMedia }\n\t\t\t\t\t\t\tmultiline=\"li\"\n\t\t\t\t\t\t\tclassName=\"ui link list\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{/* Display */}\n\t\t\t\t\t{ false === this.props.setAttributes && true === this.props.editMode && (\n\t\t\t\t\t\tthis.props.children\n\t\t\t\t\t) }\n\t\t\t\t\t{ false === this.props.setAttributes && undefined === this.props.editMode && (\n\t\t\t\t\t\t<RawHTML>{this.props.children}</RawHTML>\n\t\t\t\t\t) }\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"ui sub header\">Newsletters</div>\n\t\t\t\t\t<Form onSubmit={this.submitHandler}>\n\t\t\t\t\t\t<div class=\"ui list\">\n\t\t\t\t\t\t{ false === this.props.setAttributes && (\n\t\t\t\t\t\t\tnewsletters.map((item, index) => {\n\t\t\t\t\t\t\t\tif ( this.isSelected(item.value) ) {\n\t\t\t\t\t\t\t\t\treturn <div className=\"item\"><Form.Field><Checkbox label={item.label} value={item.value} className=\"sans-serif\" onChange={ (e, data) => this.selectNewsletter(data.value) }/></Form.Field></div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ false !== this.props.setAttributes && (\n\t\t\t\t\t\t\t<SelectNewsletters/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Form.Field required>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tfluid \n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\taction={{\n\t\t\t\t\t\t\t\t\tcolor: 'secondary',\n\t\t\t\t\t\t\t\t\tsize: 'mini',\n\t\t\t\t\t\t\t\t\tcontent: 'Sign Up',\n\t\t\t\t\t\t\t\t\tloading: this.state.loading,\n\t\t\t\t\t\t\t\t\tstyle: {justifyContent: 'center', width: 'auto'}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tplaceholder='Email Address'\n\t\t\t\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\t\t\t\tdisabled={this.state.loading}\n\t\t\t\t\t\t\t\tonChange={ (e) => this.setState({email: e.target.value}) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Field>\n\t\t\t\t\t</Form>\n\n\t\t\t\t\t<Dimmer active={this.state.dimmed} onClickOutside={()=>{this.setState({dimmed:false})}}>\n\t\t\t\t\t\t<p className=\"sans-serif\">{this.state.message} (Click to close)</p>\n\t\t\t\t\t</Dimmer>\n\t\t\t\t</Dimmer.Dimmable>\t\t\t\t\t\t\t\t\t\n\t\t\t</Card>\n\t\t)\n\t}\t\n}\n\nexport default FollowUs;","module.exports = wp.apiFetch;","module.exports = wp.i18n;"],"sourceRoot":""}