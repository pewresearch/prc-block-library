{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.element\"","webpack:///external \"wp.domReady\"","webpack:///./src/follow-us/frontend.js","webpack:///external \"wp.blockEditor\"","webpack:///external \"ReactDOM\"","webpack:///./src/follow-us/component.js","webpack:///external \"wp.apiFetch\""],"names":["module","exports","React","wp","element","domReady","document","querySelector","querySelectorAll","forEach","elm","socialMediaMarkup","innerHTML","props","newsletters","getAttribute","setAttributes","render","blockEditor","ReactDOM","window","prcFollowUsMailchimp","interests","FollowUs","undefined","editMode","selected","split","length","setState","ID","state","includes","index","indexOf","splice","push","e","interest","join","email","dimmed","loading","message","apiFetch","path","method","then","catch","err","finally","map","item","className","Field","label","value","checked","onChange","data","update","classes","classNames","SelectNewsletters","selectNewsletters","fluid","style","marginBottom","Header","Dimmable","as","tagName","socialMedia","formattingControls","placeholder","multiline","children","onSubmit","submitHandler","isSelected","selectNewsletter","required","size","action","color","content","justifyContent","width","type","disabled","target","active","onClickOutside","bind","Component"],"mappings":"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","file":"follow-us/frontend-a2ac64af.js","sourcesContent":["module.exports = React;","module.exports = wp.element;","module.exports = wp.domReady;","import { render } from '@wordpress/element';\nimport domReady from '@wordpress/dom-ready';\nimport FollowUs from './component';\n\ndomReady(() => {\n    if (document.querySelector('.js-react-follow-us')) {\n        const elms = document.querySelectorAll('.js-react-follow-us');\n        elms.forEach(elm => {\n            const socialMediaMarkup = elm.innerHTML;\n            const props = {\n                newsletters: elm.getAttribute('data-newsletters'),\n                setAttributes: false,\n            };\n            render(<FollowUs {...props}>{socialMediaMarkup}</FollowUs>, elm);\n        });\n    }\n});\n","module.exports = wp.blockEditor;","module.exports = ReactDOM;","import { Component, Fragment, RawHTML } from '@wordpress/element';\nimport { RichText } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Card, Checkbox, Form, Input, Dimmer } from 'semantic-ui-react';\nimport classNames from 'classnames/bind';\n\nconst { interests } = window.prcFollowUsMailchimp;\nconst newsletters = interests;\n\nclass FollowUs extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: '',\n            loading: false,\n            dimmed: false,\n            message: '',\n            selected: [],\n        };\n        this.setState = this.setState.bind(this);\n        this.submitHandler = this.submitHandler.bind(this);\n    }\n\n    componentDidMount = () => {\n        if (undefined !== this.props.editMode && true === this.props.editMode) {\n            const selected = this.props.newsletters.split(',');\n            if (0 !== selected.length) {\n                this.setState({ selected });\n            }\n        }\n    };\n\n    selectNewsletter = ID => {\n        const { selected } = this.state;\n\n        if (selected.includes(ID)) {\n            // If currently selected then remove\n            const index = selected.indexOf(ID);\n            if (-1 < index) {\n                selected.splice(index, 1);\n            }\n        } else {\n            selected.push(ID);\n        }\n\n        this.setState({ selected });\n    };\n\n    isSelected = ID => {\n        if (this.props.newsletters.split(',').includes(ID)) {\n            return true;\n        }\n        return false;\n    };\n\n    submitHandler = e => {\n        const { setState } = this;\n        const interest = this.state.selected.join();\n        const { email } = this.state;\n        const state = {\n            dimmed: true,\n            loading: false,\n            message: '',\n        };\n\n        setState({ loading: true });\n\n        apiFetch({\n            path: `/prc-api/v2/mailchimp/subscribe/?email=${email}&interests=${interest}`,\n            method: 'POST',\n        })\n            .then(() => {\n                state.message =\n                    'You have succesfully subsrcibed to these newsletter(s)';\n            })\n            .catch(err => {\n                state.message =\n                    'Unfortunately we could not susbscribe you at this time. Please try again later.';\n            })\n            .finally(() => {\n                setState(state);\n            });\n    };\n\n    selectNewsletters = () => {\n        const update = ID => {\n            const { selected } = this.state;\n\n            if (selected.includes(ID)) {\n                // If currently selected then remove \"toggle\"\n                const index = selected.indexOf(ID);\n                if (-1 < index) {\n                    selected.splice(index, 1);\n                }\n            } else {\n                selected.push(ID);\n            }\n\n            // Update the selection of newsletters in the context of the sidebar:\n            this.setState({ selected });\n            // Covnert array to string for data storage:\n            this.props.setAttributes({ newsletters: selected.join() });\n        };\n\n        const isSelected = ID => {\n            if (this.state.selected.includes(ID)) {\n                return true;\n            }\n            return false;\n        };\n\n        return (\n            <Fragment>\n                {newsletters.map((item, index) => {\n                    return (\n                        <div className=\"item\">\n                            <Form.Field>\n                                <Checkbox\n                                    label={item.label}\n                                    value={item.value}\n                                    checked={isSelected(item.value)}\n                                    className=\"sans-serif\"\n                                    onChange={(e, data) => update(data.value)}\n                                />\n                            </Form.Field>\n                        </div>\n                    );\n                })}\n            </Fragment>\n        );\n    };\n\n    render = () => {\n        const classes = classNames(this.props.className, 'inverted', 'beige');\n        const SelectNewsletters = this.selectNewsletters;\n        return (\n            <Card fluid className={classes} style={{ marginBottom: '35px' }}>\n                <Card.Header>Follow Us</Card.Header>\n                <Dimmer.Dimmable\n                    as=\"div\"\n                    className=\"content\"\n                    dimmed={this.state.dimmed}\n                >\n                    <div className=\"ui sub header\">Social Media</div>\n                    {/* Edit */}\n                    {false !== this.props.setAttributes && (\n                        <RichText\n                            tagName=\"ul\"\n                            value={this.props.socialMedia}\n                            onChange={socialMedia => {\n                                this.props.setAttributes({ socialMedia });\n                            }}\n                            formattingControls={['link']}\n                            placeholder={this.props.socialMedia}\n                            multiline=\"li\"\n                            className=\"ui link list\"\n                        />\n                    )}\n                    {/* Display */}\n                    {false === this.props.setAttributes &&\n                        true === this.props.editMode &&\n                        this.props.children}\n                    {false === this.props.setAttributes &&\n                        undefined === this.props.editMode && (\n                            <RawHTML>{this.props.children}</RawHTML>\n                        )}\n\n                    <div className=\"ui sub header\">Newsletters</div>\n                    <Form onSubmit={this.submitHandler}>\n                        <div className=\"ui list\">\n                            {false === this.props.setAttributes &&\n                                newsletters.map((item, index) => {\n                                    if (this.isSelected(item.value)) {\n                                        return (\n                                            <div className=\"item\">\n                                                <Form.Field>\n                                                    <Checkbox\n                                                        label={item.label}\n                                                        value={item.value}\n                                                        className=\"sans-serif\"\n                                                        onChange={(e, data) =>\n                                                            this.selectNewsletter(\n                                                                data.value,\n                                                            )\n                                                        }\n                                                    />\n                                                </Form.Field>\n                                            </div>\n                                        );\n                                    }\n                                })}\n                            {false !== this.props.setAttributes && (\n                                <SelectNewsletters />\n                            )}\n                        </div>\n\n                        <Form.Field required>\n                            <Input\n                                fluid\n                                size=\"mini\"\n                                action={{\n                                    color: 'secondary',\n                                    size: 'mini',\n                                    content: 'Sign Up',\n                                    loading: this.state.loading,\n                                    style: {\n                                        justifyContent: 'center',\n                                        width: 'auto',\n                                    },\n                                }}\n                                type=\"email\"\n                                placeholder=\"Email Address\"\n                                value={this.state.email}\n                                disabled={this.state.loading}\n                                onChange={e =>\n                                    this.setState({ email: e.target.value })\n                                }\n                            />\n                        </Form.Field>\n                    </Form>\n\n                    <Dimmer\n                        active={this.state.dimmed}\n                        onClickOutside={() => {\n                            this.setState({ dimmed: false });\n                        }}\n                    >\n                        <p className=\"sans-serif\">\n                            {this.state.message} (Click to close)\n                        </p>\n                    </Dimmer>\n                </Dimmer.Dimmable>\n            </Card>\n        );\n    };\n}\n\nexport default FollowUs;\n","module.exports = wp.apiFetch;"],"sourceRoot":""}