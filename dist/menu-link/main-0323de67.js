/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window["wpackioprcBlocksLibrarymenu-linkJsonp"]=window["wpackioprcBlocksLibrarymenu-linkJsonp"]||[]).push([[0],[function(e,t){e.exports=wp.element},function(e,t){e.exports=wp.i18n},function(e,t){e.exports=lodash},,,function(e,t){e.exports=wp.blockEditor},function(e,t){e.exports=wp.components},function(e,t){e.exports=wp.blocks},,,function(e,t){e.exports=wp.data},,,,function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/menu-link","category":"layout","parent":["prc-block/menu"],"attributes":{"label":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"rel":{"type":"string"},"id":{"type":"number"},"opensInNewTab":{"type":"boolean","default":false},"url":{"type":"string"},"title":{"type":"string"}},"styles":[{"name":"default","label":"Default","isDefault":true},{"name":"chiclet","label":"As Chiclet"}],"supports":{"reusable":false,"html":false}}')},function(e,t){e.exports=regeneratorRuntime},function(e,t){e.exports=wp.url},,,,,,function(e,t,n){n(23),e.exports=n(25)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"settings",(function(){return D}));var r=n(13),o=n(3),c=n(1),a=n(30),i=n(31),l=n(32),s=n(33),u=n(34),p=n(5),b=n(7),d=n(14),f=n(15),g=n.n(f),m=n(20),k=n(18),O=n(12),j=n.n(O),y=n(2),_=n(29),h=n(10),v=n(6),w=n(17),E=n(16),R=n(0),C=n(35),B=n(28),L=function(e,t){return t.split(" ").includes(e)};function P(e){switch(e){case"post":case"page":return{type:"post",subtype:e};case"topic":return{type:"term",subtype:"topic"};case"formats":return{type:"term",subtype:"formats"};case"programs":return{type:"term",subtype:"programs"};default:return{}}}var x=Object(_.a)([Object(h.withSelect)((function(e,t){var n,r=e("core/block-editor"),o=(r.getBlockAttributes,r.getClientIdsOfDescendants),c=r.hasSelectedInnerBlock,a=(r.getBlockParentsByBlockName,r.getSelectedBlockClientId),i=(r.getSettings,t.clientId),l=!!o([i]).length;return{isImmediateParentOfSelectedBlock:c(i,!1),hasDescendants:l,selectedBlockHasDescendants:!!(null===(n=o([a()]))||void 0===n?void 0:n.length),userCanCreatePages:e("core").canUser("create","pages"),userCanCreatePosts:e("core").canUser("create","posts")}})),Object(h.withDispatch)((function(e,t,n){return{insertLinkBlock:function(){var r=t.clientId,o=e("core/block-editor").insertBlock,c=(0,n.select("core/block-editor").getClientIdsOfDescendants)([r]),a=c.length?c.length:0;o(Object(b.createBlock)("prc-block/menu-link"),a,r)}}}))])((function(e){var t=e.attributes,n=e.isSelected,r=(e.isImmediateParentOfSelectedBlock,e.setAttributes),a=(e.insertLinkBlock,e.userCanCreatePages),i=void 0!==a&&a,l=e.userCanCreatePosts,s=void 0!==l&&l,u=e.insertBlocksAfter,d=e.mergeBlocks,f=e.onReplace,O=t.label,_=t.type,x=t.opensInNewTab,I=t.url,S=t.description,T=t.rel,D=t.title,N={url:I,opensInNewTab:x},A=Object(h.useDispatch)("core").saveEntityRecord,F=Object(R.useState)(!1),U=Object(k.a)(F,2),J=U[0],G=U[1],H=Object(R.useRef)(null),M=function(e){var t=Object(R.useState)(!1),n=Object(k.a)(t,2),r=n[0],o=n[1];return Object(R.useEffect)((function(){var t=e.current.ownerDocument;function n(e){c(e)}function r(){o(!1)}function c(t){e.current.contains(t.target)?o(!0):o(!1)}return t.addEventListener("dragstart",n),t.addEventListener("dragend",r),t.addEventListener("dragenter",c),function(){t.removeEventListener("dragstart",n),t.removeEventListener("dragend",r),t.removeEventListener("dragenter",c)}}),[]),r}(H),V=Object(c.__)("Add linkâ€¦"),z=Object(R.useRef)(),K=Object(h.useSelect)((function(e){return e("core/block-editor").isDraggingBlocks()}),[]);Object(R.useEffect)((function(){I||G(!0)}),[]),Object(R.useEffect)((function(){n||G(!1)}),[n]),Object(R.useEffect)((function(){J&&I&&(Object(E.isURL)(Object(E.prependHTTP)(O))&&/^.+\.[a-z]+/.test(O)?function(){z.current.focus();var e=z.current.ownerDocument,t=e.defaultView.getSelection(),n=e.createRange();n.selectNodeContents(z.current),t.removeAllRanges(),t.addRange(n)}():Object(C.a)(z.current,!0))}),[I]);var Q=!1;function q(){return(q=Object(m.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_||"page",e.next=3,A("postType",n,{title:t,status:"publish"});case 3:return r=e.sent,e.abrupt("return",{id:r.id,postType:n,title:r.title.rendered,url:r.link});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_&&"page"!==_?"post"===_&&(Q=s):Q=i;var W=Object(p.useBlockProps)({ref:H,className:j()("item",{"is-editing":n&&!K,"is-selected":n&&!K,"is-dragging-within":M,"has-link":!!I})});return React.createElement(R.Fragment,null,React.createElement(p.BlockControls,null,React.createElement(v.ToolbarGroup,null,React.createElement(v.KeyboardShortcuts,{bindGlobal:!0,shortcuts:Object(o.a)({},w.b.primary("k"),(function(){return G(!0)}))}),React.createElement(v.ToolbarButton,{name:"link",icon:B.a,title:Object(c.__)("Link"),shortcut:w.a.primary("k"),onClick:function(){return G(!0)}}))),React.createElement(p.InspectorControls,null,React.createElement(v.PanelBody,{title:Object(c.__)("Link settings")},React.createElement(v.TextareaControl,{value:S||"",onChange:function(e){r({description:e})},label:Object(c.__)("Description"),help:Object(c.__)("The description will be displayed in the menu if the current theme supports it.")}),React.createElement(v.TextControl,{value:D||"",onChange:function(e){r({title:e})},label:Object(c.__)("Link title"),autoComplete:"off"}),React.createElement(v.TextControl,{value:T||"",onChange:function(e){r({rel:e})},label:Object(c.__)("Link rel"),autoComplete:"off"}))),React.createElement("div",W,L("is-style-chiclet",W.className)&&React.createElement("div",{class:"ui basic button"},React.createElement(p.RichText,{ref:z,identifier:"label",className:"wp-block-navigation-link__label",value:O,onChange:function(e){return r({label:e})},onMerge:d,onReplace:f,__unstableOnSplitAtEnd:function(){return u(Object(b.createBlock)("prc-block/menu-link"))},"aria-label":Object(c.__)("Navigation link text"),placeholder:V,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]})),!L("is-style-chiclet",W.className)&&React.createElement(p.RichText,{ref:z,identifier:"label",className:"wp-block-navigation-link__label",value:O,onChange:function(e){return r({label:e})},onMerge:d,onReplace:f,__unstableOnSplitAtEnd:function(){return u(Object(b.createBlock)("prc-block/menu-link"))},"aria-label":Object(c.__)("Navigation link text"),placeholder:V,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),J&&React.createElement(v.Popover,{position:"bottom center",onClose:function(){return G(!1)}},React.createElement(p.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:N,showInitialSuggestions:!0,withCreateSuggestion:Q,createSuggestion:function(e){return q.apply(this,arguments)},createSuggestionButtonText:function(e){var t;return t="post"===_?Object(c.__)("Create post: <mark>%s</mark>"):Object(c.__)("Create page: <mark>%s</mark>"),Object(R.createInterpolateElement)(Object(c.sprintf)(t,e),{mark:React.createElement("mark",null)})},noDirectEntry:!!_,noURLSuggestion:!!_,suggestionsQuery:P(_),onChange:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.title,c=void 0===o?"":o,a=n.url,i=void 0===a?"":a,l=n.opensInNewTab,s=n.id;return r({url:encodeURI(i),label:(e=c.replace(/http(s?):\/\//gi,""),t=i.replace(/http(s?):\/\//gi,""),""!==c&&e!==t&&O!==c?Object(y.escape)(c):O||Object(y.escape)(t)),opensInNewTab:l,id:s})}}))))}));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=d.name,D={title:Object(c.__)("Link"),icon:a.a,description:Object(c.__)("Add a page, link, or another item to your navigation."),variations:[{name:"link",isDefault:!0,title:Object(c.__)("Link"),description:Object(c.__)("A link to a URL."),attributes:{}},{name:"post",icon:i.a,title:Object(c.__)("Post Link"),description:Object(c.__)("A link to a post."),attributes:{type:"post"}},{name:"page",icon:l.a,title:Object(c.__)("Page Link"),description:Object(c.__)("A link to a page."),attributes:{type:"page"}},{name:"topic",icon:s.a,title:Object(c.__)("Topic Page Link"),description:Object(c.__)("A link to a topic."),attributes:{type:"topic"}},{name:"formats",icon:u.a,title:Object(c.__)("Format Link"),description:Object(c.__)("A link to a format."),attributes:{type:"formats"}},{name:"programs",icon:u.a,title:Object(c.__)("Program Link"),description:Object(c.__)("A link to a program."),attributes:{type:"programs"}}],__experimentalLabel:function(e){return e.label},merge:function(e,t){var n=t.label,r=void 0===n?"":n;return S(S({},e),{},{label:e.label+r})},edit:x,save:function(){return React.createElement(p.InnerBlocks.Content,null)},deprecated:[{isEligible:function(e){return e.nofollow},attributes:{label:{type:"string"},type:{type:"string"},nofollow:{type:"boolean"},description:{type:"string"},id:{type:"number"},opensInNewTab:{type:"boolean",default:!1},url:{type:"string"}},migrate:function(e){return S({rel:e.nofollow?"nofollow":""},Object(r.a)(e,["nofollow"]))},save:function(){return React.createElement(p.InnerBlocks.Content,null)}}]};Object(b.registerBlockType)(T,S(S({},d),D))}],[[22,1,2]]]);
//# sourceMappingURL=main-0323de67.js.map