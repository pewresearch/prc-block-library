/*!
 * 
 * prcBlocksLibrary
 * 
 * @author Seth Rubenstein
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 Seth Rubenstein
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window["wpackioprcBlocksLibrarymenu-linkJsonp"]=window["wpackioprcBlocksLibrarymenu-linkJsonp"]||[]).push([[0],[function(e,t){e.exports=wp.element},function(e,t){e.exports=wp.i18n},function(e,t){e.exports=lodash},,function(e,t){e.exports=wp.blockEditor},,function(e,t){e.exports=wp.components},,function(e,t){e.exports=wp.blocks},,,function(e,t){e.exports=wp.data},,,function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"prc-block/menu-link","category":"layout","parent":["prc-block/menu"],"attributes":{"label":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"rel":{"type":"string"},"id":{"type":"number"},"opensInNewTab":{"type":"boolean","default":false},"url":{"type":"string"},"title":{"type":"string"}},"supports":{"reusable":false,"html":false},"editorStyle":"wp-block-navigation-link-editor","style":"wp-block-navigation-link"}')},function(e,t){e.exports=regeneratorRuntime},function(e,t){e.exports=wp.url},,,,,,function(e,t,n){n(23),e.exports=n(25)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"settings",(function(){return T}));var r=n(13),o=n(3),c=n(1),a=n(30),i=n(31),l=n(32),s=n(33),u=n(34),p=n(4),b=n(8),d=n(14),f=n(15),g=n.n(f),k=n(20),m=n(18),O=n(10),j=n.n(O),_=n(2),y=n(29),v=n(11),h=n(6),w=n(17),E=n(16),B=n(0),R=n(35),C=n(28);function P(e){switch(e){case"post":case"page":return{type:"post",subtype:e};case"topic":return{type:"term",subtype:"topic"};case"feature":return{type:"term",subtype:"feature"};case"program":return{type:"term",subtype:"program"};default:return{}}}var L=Object(y.a)([Object(v.withSelect)((function(e,t){var n,r=e("core/block-editor"),o=(r.getBlockAttributes,r.getClientIdsOfDescendants),c=r.hasSelectedInnerBlock,a=(r.getBlockParentsByBlockName,r.getSelectedBlockClientId),i=(r.getSettings,t.clientId),l=!!o([i]).length;return{isParentOfSelectedBlock:c(i,!0),isImmediateParentOfSelectedBlock:c(i,!1),hasDescendants:l,selectedBlockHasDescendants:!!(null===(n=o([a()]))||void 0===n?void 0:n.length),userCanCreatePages:e("core").canUser("create","pages"),userCanCreatePosts:e("core").canUser("create","posts")}})),Object(v.withDispatch)((function(e,t,n){return{insertLinkBlock:function(){var r=t.clientId,o=e("core/block-editor").insertBlock,c=(0,n.select("core/block-editor").getClientIdsOfDescendants)([r]),a=c.length?c.length:0;o(Object(b.createBlock)("prc-block/menu-link"),a,r)}}}))])((function(e){var t=e.attributes,n=e.hasDescendants,r=e.isSelected,a=e.isImmediateParentOfSelectedBlock,i=e.isParentOfSelectedBlock,l=e.setAttributes,s=(e.insertLinkBlock,e.selectedBlockHasDescendants),u=e.userCanCreatePages,d=void 0!==u&&u,f=e.userCanCreatePosts,O=void 0!==f&&f,y=e.insertBlocksAfter,L=e.mergeBlocks,S=e.onReplace,x=t.label,I=t.type,T=t.opensInNewTab,D=t.url,A=t.description,N=t.rel,U=t.title,F={url:D,opensInNewTab:T},H=Object(v.useDispatch)("core").saveEntityRecord,J=Object(B.useState)(!1),G=Object(m.a)(J,2),V=G[0],z=G[1],K=Object(B.useRef)(null),M=function(e){var t=Object(B.useState)(!1),n=Object(m.a)(t,2),r=n[0],o=n[1];return Object(B.useEffect)((function(){var t=e.current.ownerDocument;function n(e){c(e)}function r(){o(!1)}function c(t){e.current.contains(t.target)?o(!0):o(!1)}return t.addEventListener("dragstart",n),t.addEventListener("dragend",r),t.addEventListener("dragenter",c),function(){t.removeEventListener("dragstart",n),t.removeEventListener("dragend",r),t.removeEventListener("dragenter",c)}}),[]),r}(K),Q=Object(c.__)("Add linkâ€¦"),q=Object(B.useRef)(),W=Object(v.useSelect)((function(e){return e("core/block-editor").isDraggingBlocks()}),[]);Object(B.useEffect)((function(){D||z(!0)}),[]),Object(B.useEffect)((function(){r||z(!1)}),[r]),Object(B.useEffect)((function(){V&&D&&(Object(E.isURL)(Object(E.prependHTTP)(x))&&/^.+\.[a-z]+/.test(x)?function(){q.current.focus();var e=q.current.ownerDocument,t=e.defaultView.getSelection(),n=e.createRange();n.selectNodeContents(q.current),t.removeAllRanges(),t.addRange(n)}():Object(R.a)(q.current,!0))}),[D]);var X=!1;function Y(){return(Y=Object(k.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I||"page",e.next=3,H("postType",n,{title:t,status:"publish"});case 3:return r=e.sent,e.abrupt("return",{id:r.id,postType:n,title:r.title.rendered,url:r.link});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}I&&"page"!==I?"post"===I&&(X=O):X=d;var Z=Object(p.useBlockProps)({ref:K,className:j()({"is-editing":(r||i)&&!W,"is-selected":r&&!W,"is-dragging-within":M,"has-link":!!D,"has-child":n})}),$=Object(p.__experimentalUseInnerBlocksProps)({className:j()("wp-block-navigation__container",{"is-parent-of-selected-block":i&&!W})},{allowedBlocks:["prc-block/menu-link"],renderAppender:!!(r&&n||a&&!s||W&&n)&&p.InnerBlocks.DefaultAppender,__experimentalAppenderTagName:"li"});return React.createElement(B.Fragment,null,React.createElement(p.BlockControls,null,React.createElement(h.ToolbarGroup,null,React.createElement(h.KeyboardShortcuts,{bindGlobal:!0,shortcuts:Object(o.a)({},w.b.primary("k"),(function(){return z(!0)}))}),React.createElement(h.ToolbarButton,{name:"link",icon:C.a,title:Object(c.__)("Link"),shortcut:w.a.primary("k"),onClick:function(){return z(!0)}}))),React.createElement(p.InspectorControls,null,React.createElement(h.PanelBody,{title:Object(c.__)("Link settings")},React.createElement(h.TextareaControl,{value:A||"",onChange:function(e){l({description:e})},label:Object(c.__)("Description"),help:Object(c.__)("The description will be displayed in the menu if the current theme supports it.")}),React.createElement(h.TextControl,{value:U||"",onChange:function(e){l({title:e})},label:Object(c.__)("Link title"),autoComplete:"off"}),React.createElement(h.TextControl,{value:N||"",onChange:function(e){l({rel:e})},label:Object(c.__)("Link rel"),autoComplete:"off"}))),React.createElement("li",Z,React.createElement("div",{className:"wp-block-navigation-link__content"},React.createElement(p.RichText,{ref:q,identifier:"label",className:"wp-block-navigation-link__label",value:x,onChange:function(e){return l({label:e})},onMerge:L,onReplace:S,__unstableOnSplitAtEnd:function(){return y(Object(b.createBlock)("prc-block/menu-link"))},"aria-label":Object(c.__)("Navigation link text"),placeholder:Q,keepPlaceholderOnFocus:!0,withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"]}),V&&React.createElement(h.Popover,{position:"bottom center",onClose:function(){return z(!1)}},React.createElement(p.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:F,showInitialSuggestions:!0,withCreateSuggestion:X,createSuggestion:function(e){return Y.apply(this,arguments)},createSuggestionButtonText:function(e){var t;return t="post"===I?Object(c.__)("Create post: <mark>%s</mark>"):Object(c.__)("Create page: <mark>%s</mark>"),Object(B.createInterpolateElement)(Object(c.sprintf)(t,e),{mark:React.createElement("mark",null)})},noDirectEntry:!!I,noURLSuggestion:!!I,suggestionsQuery:P(I),onChange:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.title,o=void 0===r?"":r,c=n.url,a=void 0===c?"":c,i=n.opensInNewTab,s=n.id;return l({url:encodeURI(a),label:(e=o.replace(/http(s?):\/\//gi,""),t=a.replace(/http(s?):\/\//gi,""),""!==o&&e!==t&&x!==o?Object(_.escape)(o):x||Object(_.escape)(t)),opensInNewTab:i,id:s})}}))),React.createElement("ul",$)))}));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=d.name,T={title:Object(c.__)("Link"),icon:a.a,description:Object(c.__)("Add a page, link, or another item to your navigation."),variations:[{name:"link",isDefault:!0,title:Object(c.__)("Link"),description:Object(c.__)("A link to a URL."),attributes:{}},{name:"post",icon:i.a,title:Object(c.__)("Post Link"),description:Object(c.__)("A link to a post."),attributes:{type:"post"}},{name:"page",icon:l.a,title:Object(c.__)("Page Link"),description:Object(c.__)("A link to a page."),attributes:{type:"page"}},{name:"topic",icon:s.a,title:Object(c.__)("Topic Page Link"),description:Object(c.__)("A link to a topic."),attributes:{type:"topic"}},{name:"feature",icon:u.a,title:Object(c.__)("Feature Link"),description:Object(c.__)("A link to a feature."),attributes:{type:"feature"}},{name:"program",icon:u.a,title:Object(c.__)("Program Link"),description:Object(c.__)("A link to a program."),attributes:{type:"program"}}],__experimentalLabel:function(e){return e.label},merge:function(e,t){var n=t.label,r=void 0===n?"":n;return x(x({},e),{},{label:e.label+r})},edit:L,save:function(){return React.createElement(p.InnerBlocks.Content,null)},deprecated:[{isEligible:function(e){return e.nofollow},attributes:{label:{type:"string"},type:{type:"string"},nofollow:{type:"boolean"},description:{type:"string"},id:{type:"number"},opensInNewTab:{type:"boolean",default:!1},url:{type:"string"}},migrate:function(e){return x({rel:e.nofollow?"nofollow":""},Object(r.a)(e,["nofollow"]))},save:function(){return React.createElement(p.InnerBlocks.Content,null)}}]};Object(b.registerBlockType)(I,x(x({},d),T))}],[[22,1,2]]]);
//# sourceMappingURL=main-c2f6890c.js.map